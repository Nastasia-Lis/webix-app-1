/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _components_login_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/login.js */ \"./src/js/components/login.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _components_header_layout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/header/layout.js */ \"./src/js/components/header/layout.js\");\n/* harmony import */ var _components_treeSidabar_layout_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/treeSidabar/layout.js */ \"./src/js/components/treeSidabar/layout.js\");\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_logout_autoLogout_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./blocks/logout/autoLogout.js */ \"./src/js/blocks/logout/autoLogout.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_adaptive_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./blocks/adaptive.js */ \"./src/js/blocks/adaptive.js\");\n/* harmony import */ var _blocks_webixGlobalPrefs_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./blocks/webixGlobalPrefs.js */ \"./src/js/blocks/webixGlobalPrefs.js\");\n/* harmony import */ var _blocks_routerConfig_routerStart_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./blocks/routerConfig/routerStart.js */ \"./src/js/blocks/routerConfig/routerStart.js\");\n/* harmony import */ var _blocks_historyBtns_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./blocks/historyBtns.js */ \"./src/js/blocks/historyBtns.js\");\nconsole.log(\"expa 1.0.50\"); \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst emptySpace = {\r\n    view    : \"align\", \r\n    align   : \"middle,center\",\r\n    id      : \"webix__none-content\",\r\n    body    : {  \r\n        borderless  : true, \r\n        template    : \"Выберите элемент дерева\", \r\n        height      : 50, \r\n        width       : 210,\r\n        css         : {\r\n            \"color\"    :\"#858585\",\r\n            \"font-size\":\"14px!important\"\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst container = {   \r\n    id  : \"container\",\r\n    cols: [\r\n        emptySpace,\r\n    ]\r\n};\r\n\r\nconst adaptive = {   \r\n    id  : \"adaptive\",\r\n    rows: []\r\n};\r\n\r\nconst sideMenuResizer = {   \r\n    id  : \"sideMenuResizer\",\r\n    view: \"resizer\",\r\n    css : \"webix_resizer-hide\",\r\n};\r\n\r\nconst logResizer = {\r\n    view : \"resizer\", \r\n    id : \"log-resizer\"\r\n};\r\n\r\nconst mainLayout = {   \r\n    hidden  : true, \r\n    id      : \"mainLayout\",\r\n    rows    : [\r\n    \r\n        {   id  : \"mainContent\",\r\n            css : \"webix_mainContent\",\r\n                                            \r\n            cols: [\r\n                { rows  : [\r\n                    _components_header_layout_js__WEBPACK_IMPORTED_MODULE_3__.header,\r\n                    adaptive,\r\n                \r\n                    {cols : [\r\n                        (0,_components_treeSidabar_layout_js__WEBPACK_IMPORTED_MODULE_4__.treeSidebar)(), \r\n                        sideMenuResizer,\r\n                        container,\r\n                    ]}\r\n                ]}, \r\n\r\n            ]\r\n        },\r\n        logResizer,\r\n        _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_5__.logLayout\r\n\r\n    ]\r\n};\r\n\r\ntry{\r\n\r\n    webix.ready (function(){\r\n\r\n        (0,_blocks_webixGlobalPrefs_js__WEBPACK_IMPORTED_MODULE_9__.protoUIEdittree)();\r\n\r\n        webix.ui({\r\n            view    : \"scrollview\",\r\n            type    : \"clean\",\r\n            id      : \"layout\", \r\n            css     : \"layoutContainer\",\r\n            scroll  : \"y\", \r\n            body    : {\r\n\r\n                cells : [ \r\n                    {},\r\n                    _components_login_js__WEBPACK_IMPORTED_MODULE_1__.auth,\r\n                    mainLayout\r\n                ],\r\n\r\n            },\r\n\r\n        });\r\n\r\n\r\n\r\n\r\n        (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__.setUserPrefs)            ();\r\n        (0,_blocks_adaptive_js__WEBPACK_IMPORTED_MODULE_8__.resizeAdaptive)          ();\r\n        (0,_blocks_routerConfig_routerStart_js__WEBPACK_IMPORTED_MODULE_10__.setRouterStart)          ();\r\n        (0,_blocks_adaptive_js__WEBPACK_IMPORTED_MODULE_8__.adaptivePoints)          ();\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.textInputClean)          ();\r\n\r\n        (0,_blocks_historyBtns_js__WEBPACK_IMPORTED_MODULE_11__.backButtonBrowserLogic)  ();\r\n        (0,_blocks_logout_autoLogout_js__WEBPACK_IMPORTED_MODULE_6__.resetTimer)              ();\r\n        (0,_blocks_webixGlobalPrefs_js__WEBPACK_IMPORTED_MODULE_9__.webixGlobalPrefs)        ();\r\n\r\n    });\r\n\r\n} catch(err){\r\n    alert(\"Ошибка при выполнении \"+ err);\r\n    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_7__.setFunctionError)(err,\"app\",\"layout\");\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/app.js?");

/***/ }),

/***/ "./src/js/blocks/adaptive.js":
/*!***********************************!*\
  !*** ./src/js/blocks/adaptive.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"resizeAdaptive\": () => (/* binding */ resizeAdaptive),\n/* harmony export */   \"adaptivePoints\": () => (/* binding */ adaptivePoints)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nfunction resizeSidebar(){\r\n    const tree = $$(\"tree\");\r\n\r\n    function resizeTree(){\r\n        try{\r\n            if (tree){\r\n                tree.config.width = 250;\r\n                tree.resize();\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"adaptive\",\"resizeSidebar => resizeTree\");\r\n        }\r\n    } \r\n\r\n    \r\n    if (window.innerWidth < 850){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem)(tree);\r\n    }\r\n\r\n    if (!tree.isVisible()  && \r\n        window.innerWidth <= 800 ){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem)($$(\"sideMenuResizer\"));\r\n    }\r\n\r\n    if (window.innerWidth > 850 && $$(\"tree\")){\r\n        resizeTree();\r\n    }\r\n    \r\n}\r\n\r\nfunction resizeForms(){\r\n\r\n    const tools       = $$(\"formsTools\");    \r\n    const сontainer   = $$(\"formsContainer\");\r\n    const formResizer = $$(\"formsTools-resizer\");\r\n    const backBtn     = $$(\"table-backFormsBtnFilter\");\r\n  \r\n    function createFormAdaptive(){\r\n        \r\n        if (tools.isVisible()){\r\n            tools.config.width = window.innerWidth - 45;\r\n            tools.resize();\r\n\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (сontainer  );\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (formResizer);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) ($$(\"tree\") );\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (backBtn    );\r\n          \r\n        }\r\n    }\r\n\r\n    function createFormMain(){\r\n        if (tools.isVisible()          && \r\n            tools.config.width !== 350 ){\r\n\r\n            tools.config.width = 350;\r\n            tools.resize();\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (formResizer);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (сontainer  );\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (backBtn    );\r\n        }\r\n    }\r\n \r\n    if (window.innerWidth < 850){\r\n        createFormAdaptive();\r\n    }\r\n\r\n\r\n    if (window.innerWidth > 850){\r\n        createFormMain();\r\n    }\r\n\r\n  \r\n}\r\n\r\n\r\n\r\nfunction resizeDashboards(){\r\n    const dashTool      = $$(\"dashboardTool\");\r\n    const dashContainer = $$(\"dashboardInfoContainer\");\r\n    const tree          = $$(\"tree\");\r\n    const backBtn       = $$(\"dash-backDashBtn\");\r\n   \r\n    function createDashAdaptive(){\r\n        \r\n        if (dashTool.isVisible()){\r\n            dashTool.config.width = window.innerWidth-45;\r\n            dashTool.resize();\r\n\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (dashContainer);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (tree         );\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (backBtn      );\r\n        }\r\n    }\r\n\r\n\r\n    function createDashMain(){\r\n        if (dashTool.isVisible()          && \r\n            dashTool.config.width !== 350 ){\r\n\r\n            dashTool.config.width = 350;\r\n            dashTool.resize();\r\n\r\n            $$(\"dashboardTool\").config.width = 350;\r\n            $$(\"dashboardTool\").resize();\r\n\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (dashContainer);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (backBtn      );\r\n        }\r\n     \r\n    }\r\n    \r\n    if (window.innerWidth < 850){\r\n        createDashAdaptive();\r\n    }\r\n\r\n\r\n    if (window.innerWidth > 850){\r\n   \r\n        createDashMain();\r\n    }\r\n            \r\n}\r\n\r\n\r\n\r\nfunction resizeTableEditForm(){\r\n    const container = $$(\"tableContainer\");\r\n    const editForm  = $$(\"table-editForm\");\r\n    const backBtn   = $$(\"table-backTableBtn\");\r\n    const tree      = $$(\"tree\");\r\n\r\n    function tableAdaptiveView(){\r\n\r\n        if (editForm.isVisible()){\r\n            editForm.config.width = window.innerWidth-45;\r\n            editForm.resize();\r\n\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (container);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (tree);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (backBtn);\r\n        }\r\n    }\r\n\r\n    function tableMainView(){\r\n\r\n        if (editForm.isVisible()          && \r\n            editForm.config.width !== 350 ){\r\n\r\n            editForm.config.width = 350;\r\n            editForm.resize();\r\n\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (container);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (backBtn);\r\n        }\r\n\r\n    }\r\n\r\n    \r\n    if ($$(\"container\").$width < 850 && editForm.isVisible()){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (tree);\r\n    }\r\n\r\n\r\n    if (window.innerWidth < 850){\r\n        tableAdaptiveView();\r\n    }\r\n\r\n    if (window.innerWidth > 850){\r\n        tableMainView();\r\n    }\r\n\r\n}\r\n\r\nfunction resizeTableFilterForm (){\r\n\r\n    const filterForm = $$(\"filterTableBarContainer\");\r\n    \r\n    const container  = $$(\"tableContainer\");\r\n    const backBtn    = $$(\"table-backTableBtnFilter\");\r\n    const tree       = $$(\"tree\");\r\n\r\n    function filterAdaptive(){\r\n        if (filterForm.isVisible()){\r\n            filterForm.config.width = window.innerWidth-45;\r\n            filterForm.resize();\r\n \r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (container);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (tree     );\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (backBtn  );\r\n\r\n        }\r\n    }\r\n\r\n    function filterMain(){\r\n        if (filterForm.isVisible()          && \r\n            filterForm.config.width !== 350 ){\r\n\r\n        filterForm.config.width = 350;\r\n        filterForm.resize();\r\n\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem) (container);\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (backBtn  );\r\n    }\r\n    }\r\n   \r\n    if (window.innerWidth < 850){\r\n        filterAdaptive();\r\n    }\r\n\r\n    if ($$(\"container\").$width < 850 && filterForm.isVisible()){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem) (tree);\r\n    }\r\n\r\n\r\n    if (window.innerWidth > 850){\r\n        filterMain();\r\n    }\r\n\r\n}\r\n\r\nfunction setSearchInputState(){\r\n    const headerChilds = $$(\"header\").getChildViews();\r\n\r\n    headerChilds.forEach(function(el){\r\n        if (el.config.id.includes(\"search\")){\r\n            el.show();\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction resizeTableCols(){\r\n    \r\n}\r\n\r\n\r\n\r\nfunction resizeAdaptive (){\r\n\r\n    window.addEventListener('resize', function(event) {\r\n  \r\n        async function getActiveView (){  \r\n\r\n            if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.mmenu){\r\n                await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"mmenu\"); \r\n            }\r\n\r\n            function setAdaptiveLogic(visibleEl){\r\n                if (visibleEl == \"forms\"){\r\n                    resizeForms();\r\n\r\n                } else if (visibleEl == \"dashboards\"){\r\n                    resizeDashboards();\r\n\r\n                } else if (visibleEl == \"tables\"){\r\n                    resizeTableEditForm();\r\n                    resizeTableFilterForm ();\r\n\r\n                } else if (visibleEl == \"userprefs\"){\r\n                    //none\r\n\r\n                } else if (visibleEl == \"user_auth\"){\r\n                    //none\r\n\r\n                }\r\n            }\r\n\r\n            function initLogic(){\r\n                if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.mmenu){\r\n                    const menuData = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.mmenu.mmenu;\r\n                    menuData.forEach(function(el,i){\r\n                        if($$(el.name) && $$(el.name).isVisible()){\r\n                            let visibleEl = el.name;\r\n                            setAdaptiveLogic(visibleEl);\r\n                        }\r\n                    });\r\n                    \r\n                }\r\n            }\r\n\r\n            initLogic();\r\n        \r\n        }\r\n    \r\n        getActiveView ();\r\n        resizeSidebar();\r\n\r\n        if(window.innerWidth > 850){\r\n            setSearchInputState();\r\n        }\r\n\r\n    }, true);\r\n}\r\n\r\n\r\n\r\nfunction adaptivePoints (){\r\n\r\n    const tree = $$(\"tree\");\r\n\r\n    function hideTree(){\r\n        if (window.innerWidth < 850 && tree){\r\n            tree.hide();\r\n        }\r\n    }\r\n\r\n    function addTreeEvent(){\r\n        if (window.innerWidth < 1200 ){\r\n            const editContainer = $$(\"editTableBarContainer\");\r\n\r\n            tree.attachEvent(\"onAfterLoad\", function(){\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem)(editContainer);\r\n            });\r\n \r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem)(editContainer);\r\n\r\n        }\r\n    }\r\n\r\n\r\n    hideTree();\r\n    addTreeEvent();\r\n\r\n\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/adaptive.js?");

/***/ }),

/***/ "./src/js/blocks/blockHeadline.js":
/*!****************************************!*\
  !*** ./src/js/blocks/blockHeadline.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setHeadlineBlock\": () => (/* binding */ setHeadlineBlock)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _favsLink_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./favsLink.js */ \"./src/js/blocks/favsLink.js\");\n/* harmony import */ var _historyBtns_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./historyBtns.js */ \"./src/js/blocks/historyBtns.js\");\n\r\n\r\n\r\n\r\nfunction setHeadlineBlock ( idTemplate, title=null ){\r\n    let templateTitle;\r\n    try{\r\n        if(title){\r\n            templateTitle = title;\r\n        } else {\r\n            templateTitle = function(){\r\n                const value = $$(idTemplate).getValues();\r\n                if (Object.keys(value).length !==0){\r\n                    return \"<div class='no-wrap-headline'>\" + value + \"</div>\";\r\n                } else {\r\n                    return \"<div class='no-wrap-headline'> Имя не указано </div>\";\r\n                }\r\n            };\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"blockHeadline\",\"setHeadlineBlock\");\r\n    }\r\n\r\n    const headline = {   \r\n        view        : \"template\",\r\n        id          : idTemplate,\r\n        borderless  : true,\r\n        css         : \"webix_block-headline\",\r\n        height      : 34,\r\n        template    : templateTitle,\r\n        on:{\r\n\r\n        }\r\n    };\r\n\r\n\r\n    const favsBtn = {\r\n        view    : \"button\", \r\n        css     : \"webix-transparent-btn\",\r\n        type    : \"icon\",\r\n        icon    : \"icon-star\",\r\n        hotkey  : \"ctrl+shift+l\",\r\n        width   : 50,\r\n        click   : function(){\r\n            (0,_favsLink_js__WEBPACK_IMPORTED_MODULE_1__.saveFavsClick)();\r\n        },\r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Добавить ссылку в избранное (Ctrl+Shift+L)\");\r\n            },\r\n        }\r\n    \r\n        \r\n    };\r\n\r\n    const prevBtn = {\r\n        view    : \"button\", \r\n        css     : \"webix-transparent-btn btn-history\",\r\n        type    : \"icon\",\r\n        icon    : \"icon-arrow-left\",\r\n        width   : 50,\r\n        hotkey  : \"ctrl+shift+p\",\r\n        click   : function(){\r\n            (0,_historyBtns_js__WEBPACK_IMPORTED_MODULE_2__.prevBtnClick)();\r\n        },\r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Вернуться назад (Ctrl+Shift+P)\");\r\n            },\r\n        }\r\n    \r\n        \r\n    };\r\n \r\n    const nextBtn = {\r\n        view    : \"button\", \r\n        css     : \"webix-transparent-btn btn-history\",\r\n        type    : \"icon\",\r\n        icon    : \"icon-arrow-right\",\r\n        width   : 50,\r\n        hotkey  : \"ctrl+shift+b\",\r\n        click   : function(){\r\n            (0,_historyBtns_js__WEBPACK_IMPORTED_MODULE_2__.nextBtnClick)();\r\n        },\r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Перейти вперёд (Ctrl+Shift+B)\");\r\n            },\r\n        }\r\n    \r\n        \r\n    };\r\n \r\n\r\n\r\n    const headlineLayout = {\r\n        css : \"webix_block-headline\",\r\n        cols: [\r\n            headline,\r\n            {},\r\n            {   cols:[\r\n                    prevBtn,\r\n                    nextBtn,\r\n                ]\r\n            },\r\n            favsBtn\r\n        ]\r\n    };\r\n\r\n    return headlineLayout;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/blockHeadline.js?");

/***/ }),

/***/ "./src/js/blocks/checkFonts.js":
/*!*************************************!*\
  !*** ./src/js/blocks/checkFonts.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"checkFonts\": () => (/* binding */ checkFonts)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logBlock.js */ \"./src/js/blocks/logBlock.js\");\n\r\n\r\nfunction checkFonts (){\r\n\r\n\r\n    document.fonts.onloadingdone = function (fontFaceSetEvent) {\r\n        const fontsArr  = fontFaceSetEvent.fontfaces;\r\n        let check       = false;\r\n    \r\n        fontsArr.forEach(function(el){\r\n            if (el.family.includes(\"icomoon\")){\r\n                check = true; \r\n            }\r\n        });\r\n\r\n        if (!check){\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Не удалось загрузить шрифт иконок\", 'expa');\r\n        }\r\n\r\n\r\n    };\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/checkFonts.js?");

/***/ }),

/***/ "./src/js/blocks/columnsSettings/columnsWidth.js":
/*!*******************************************************!*\
  !*** ./src/js/blocks/columnsSettings/columnsWidth.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setColsWidthStorage\": () => (/* binding */ setColsWidthStorage)\n/* harmony export */ });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/columnsSettings/common.js\");\n\r\n\r\nfunction setColsWidthStorage(table){\r\n    table.attachEvent(\"onColumnResize\",function(id,newWidth, oldWidth, action){\r\n        if (action){\r\n           \r\n            const cols   = table.getColumns();\r\n            const values = [];\r\n\r\n            cols.forEach(function(el,i){\r\n\r\n                values.push({\r\n                    column  : el.id, \r\n                    position: table.getColumnIndex(el.id),\r\n                    width   : el.width.toFixed(2)\r\n                });\r\n            });\r\n            (0,_common_js__WEBPACK_IMPORTED_MODULE_0__.postPrefsValues)(values);\r\n        }\r\n    });     \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/columnsSettings/columnsWidth.js?");

/***/ }),

/***/ "./src/js/blocks/columnsSettings/common.js":
/*!*************************************************!*\
  !*** ./src/js/blocks/columnsSettings/common.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"postPrefsValues\": () => (/* binding */ postPrefsValues),\n/* harmony export */   \"getTable\": () => (/* binding */ getTable),\n/* harmony export */   \"destructPopup\": () => (/* binding */ destructPopup)\n/* harmony export */ });\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nfunction destructPopup(){\r\n    try{\r\n        const popup = $$(\"popupVisibleCols\");\r\n        if (popup){\r\n            popup.destructor();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"destructPopup\");\r\n    }\r\n}\r\n\r\nfunction setUpdateCols(sentVals){\r\n    const table   = getTable();\r\n    const columns = table.getColumns(true);\r\n    \r\n    function findUniqueCols(col){\r\n        let result = false;\r\n\r\n        sentVals.values.forEach(function(el){\r\n            if (el.column == col){\r\n                result = true;\r\n            }\r\n            \r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    function setVisibleState(){\r\n        try{\r\n            columns.forEach(function(el,i){\r\n                \r\n                if (findUniqueCols(el.id)){\r\n                    if( !( table.isColumnVisible(el.id) ) ){\r\n                        table.showColumn(el.id);\r\n                    }\r\n                 \r\n                } else {\r\n                    const colIndex = table.getColumnIndex(el.id);\r\n                    if(table.isColumnVisible(el.id) && colIndex !== -1){\r\n                        table.hideColumn(el.id);\r\n                    }\r\n                }\r\n            });\r\n\r\n \r\n        } catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"setUpdateCols => setVisibleState\");\r\n        }\r\n    }\r\n\r\n    function moveListItem(){\r\n        sentVals.values.forEach(function(el){\r\n            table.moveColumn(el.column, el.position);\r\n        });  \r\n    }\r\n\r\n    setVisibleState ();\r\n    moveListItem    ();\r\n\r\n}\r\n\r\nfunction getTable(){\r\n    const tableTempl     = $$(\"table\");\r\n    const tableTemplView = $$(\"table-view\");\r\n    let table;\r\n\r\n    if ( tableTempl.isVisible() ){\r\n        table = tableTempl;\r\n    } else if ( tableTemplView.isVisible() ){\r\n        table = tableTemplView;\r\n    }\r\n\r\n    return table;\r\n}\r\n\r\n\r\nfunction setSize(sentVals){\r\n    const table = getTable();\r\n    function setColWidth(el){\r\n        table.eachColumn( \r\n            function (columnId){ \r\n                if (el.column == columnId){\r\n                    table.setColumnWidth(columnId,el.width);\r\n                }\r\n            },true\r\n        );\r\n    }\r\n\r\n    sentVals.values.forEach(function(el,i){\r\n\r\n        setColWidth(el);\r\n    });\r\n}\r\nfunction postPrefsValues(values, visCol=false){\r\n   \r\n    const id            = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getItemId)();\r\n    const sentVals      = {\r\n        values       : values, \r\n        tableIdPrefs : id\r\n    };\r\n\r\n    const sentObj = {\r\n        name:\"visibleColsPrefs_\"+id,\r\n        prefs:sentVals,\r\n    };\r\n\r\n    function saveExistsTemplate(sentObj,idPutData){\r\n        const url     = \"/init/default/api/userprefs/\"+idPutData;\r\n        const putData = webix.ajax().put(url, sentObj);\r\n\r\n        putData.then(function(data){\r\n            data = data.json();\r\n             \r\n            if (data.err_type !== \"i\"){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\"error\",\"toolbarTable function saveExistsTemplate putData: \"+ data.err);\r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)   (\"success\",\"Рабочая область таблицы обновлена\");\r\n                (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_3__.setStorageData)(\"visibleColsPrefs_\"+id, JSON.stringify(sentObj.prefs));\r\n                setUpdateCols (sentVals);\r\n\r\n                if (visCol){\r\n                    setSize(sentVals);\r\n                }\r\n        \r\n              \r\n            }\r\n\r\n           \r\n        });\r\n\r\n        putData.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"visibleColumns\",\"saveExistsTemplate => putUserprefsData\");\r\n        });\r\n\r\n        destructPopup();\r\n    } \r\n\r\n    function saveNewTemplate(){\r\n        const ownerId = webix.storage.local.get(\"user\").id;\r\n        const url     = \"/init/default/api/userprefs/\";\r\n        \r\n        if (ownerId){\r\n            sentObj.owner = ownerId;\r\n        }\r\n\r\n        const userprefsPost = webix.ajax().post(url,sentObj);\r\n        \r\n        userprefsPost.then(function(data){\r\n            data = data.json();\r\n \r\n            if (data.err_type !== \"i\"){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(data.err,\"visibleColumns\",\"saveNewTemplate\")\r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)   (\"success\",\"Рабочая область таблицы обновлена\");\r\n                (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_3__.setStorageData)(\"visibleColsPrefs_\"+id, JSON.stringify(sentObj.prefs));\r\n                setUpdateCols (sentVals);\r\n            }\r\n        });\r\n\r\n        userprefsPost.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"visibleColumns\",\"saveTemplate\");\r\n        });\r\n\r\n        destructPopup();\r\n    }\r\n\r\n    function getUserprefsData(){\r\n      \r\n        const getData = webix.ajax().get(\"/init/default/api/userprefs\");\r\n        let settingExists = false;\r\n        let idPutData;\r\n    \r\n        getData.then(function(data){\r\n            data = data.json().content;\r\n            try{\r\n                data.forEach(function(el){\r\n                    \r\n                    if (el.name == \"visibleColsPrefs_\"+id && !settingExists){\r\n                        idPutData = el.id\r\n                        settingExists = true;\r\n                \r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"getUserprefsData getData\");\r\n            }\r\n        });\r\n\r\n        getData.then(function(){\r\n     \r\n            if (!settingExists){\r\n                saveNewTemplate();\r\n            } else {\r\n                saveExistsTemplate(sentObj,idPutData);\r\n            }\r\n        });\r\n\r\n\r\n        getData.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"toolbarTable\",\"getUserprefsData\");\r\n        });\r\n\r\n        return settingExists;\r\n\r\n    }\r\n    getUserprefsData();\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/columnsSettings/common.js?");

/***/ }),

/***/ "./src/js/blocks/columnsSettings/visibleColumns.js":
/*!*********************************************************!*\
  !*** ./src/js/blocks/columnsSettings/visibleColumns.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolbarVisibleColsBtn\": () => (/* binding */ toolbarVisibleColsBtn)\n/* harmony export */ });\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _notifications_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/columnsSettings/common.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nfunction searchColsListPress (){\r\n    const list      = $$(\"visibleList\");\r\n    const search    = $$(\"searchColsList\");\r\n    const value     = search.getValue().toLowerCase();\r\n    let counter     = 0;\r\n    try{\r\n    \r\n        list.filter(function(obj){\r\n            const condition = obj.label.toLowerCase().indexOf(value) !== -1;\r\n\r\n            if (condition){\r\n                counter ++;\r\n            }\r\n    \r\n            return condition;\r\n        });\r\n\r\n        if (counter == 0){\r\n           (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(\"visibleColsEmptyTempalte\"));\r\n        } else {\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"visibleColsEmptyTempalte\"));\r\n        }\r\n      \r\n    } catch(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"searchColsListPress\");\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction setBtnSubmitState(state){\r\n    const btnSubmit  = $$(\"visibleColsSubmit\");\r\n    const check      = btnSubmit.isEnabled();\r\n\r\n    if (state == \"enable\" && !(check) ){\r\n        btnSubmit.enable();\r\n    } else if ( state == \"disable\" && check ){\r\n        btnSubmit.disable();\r\n    }\r\n}\r\n\r\n\r\nfunction setColsSize(col,listItems){\r\n    const table      = (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.getTable)();\r\n    const countCols  = listItems.length;\r\n    const tableWidth = $$(\"tableContainer\").$width-17;\r\n    const colWidth   = tableWidth / countCols;\r\n\r\n    table.setColumnWidth(col, colWidth);\r\n}\r\n\r\nfunction clearBtnColsClick (){\r\n    const table  = (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.getTable)();\r\n    const cols   = table.getColumns(true);\r\n    const values = [];\r\n  \r\n    function returnWidthCol(){\r\n        const containerWidth = window.innerWidth - $$(\"tree\").$width - 77; \r\n        const cols           = table.getColumns(true).length;\r\n        const colWidth   = containerWidth / cols;\r\n        return colWidth.toFixed(2);\r\n    }\r\n\r\n\r\n\r\n    function returnPosition(column){\r\n        const defaultColsPosition = Object.keys(table.data.pull[1]);\r\n        let position;\r\n        defaultColsPosition.forEach(function(el,i){\r\n            if (el == column){\r\n                position = i;\r\n            }\r\n        });\r\n\r\n        return position;\r\n    }\r\n\r\n    function showCols(){\r\n        try{\r\n            cols.forEach(function(el,i){\r\n                const colWidth    = returnWidthCol();\r\n                const positionCol = returnPosition(el.id);\r\n\r\n                setColsSize(el.id,cols);\r\n                \r\n                if( !( table.isColumnVisible(el.id) ) ){\r\n                    table.showColumn(el.id);\r\n                }\r\n           \r\n                table.setColumnWidth(el.id, colWidth);\r\n\r\n                values.push({\r\n                    column   : el.id,\r\n                    position : positionCol,\r\n                    width    : colWidth \r\n                });\r\n            });\r\n        } catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"clearBtnColsClick => showCols\");\r\n        }\r\n    }\r\n    (0,_notifications_js__WEBPACK_IMPORTED_MODULE_3__.modalBox)(   \"Будут установлены стандартные настройки\", \r\n            \"Вы уверены?\", \r\n            [\"Отмена\", \"Сохранить изменения\"]\r\n    )\r\n    .then(function(result){\r\n\r\n        if (result == 1){\r\n            showCols();\r\n            (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.postPrefsValues)(values);\r\n            (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.destructPopup)();\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)   (\"success\",\"Рабочая область таблицы обновлена\");\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction visibleColsSubmitClick (){\r\n\r\n    const list      = $$(\"visibleListSelected\");\r\n    const listPull  = list.data.pull;\r\n    const listItems = Object.values(listPull);\r\n    const values    = [];\r\n    const table     = (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.getTable)();\r\n\r\n    const containerWidth = window.innerWidth - $$(\"tree\").$width - 77; \r\n\r\n    function returnMinSize(){\r\n        const allCols = table.getColumns(true).length;\r\n        const width  = containerWidth / allCols;\r\n\r\n        return width.toFixed(2);\r\n    }\r\n\r\n    function setLastColWidth(lastColumn,widthCols){\r\n        const sumWidth       = widthCols.reduce((a, b) => a + b, 0);\r\n\r\n\r\n        let widthLastCol   =  containerWidth - sumWidth;\r\n\r\n        if (widthLastCol < 50){\r\n            widthLastCol = returnMinSize();\r\n        }\r\n\r\n        lastColumn.width = Number(widthLastCol);\r\n \r\n        values.push(lastColumn); \r\n    }\r\n\r\n\r\n    try{\r\n        const widthCols = [];\r\n        const lastColumn = {};\r\n \r\n        \r\n        listItems.forEach(function(el,i){\r\n            const positionElem = list.getIndexById(el.id);\r\n            const lastCol      = list.getLastId();\r\n         \r\n            let colWidth;\r\n\r\n            if ( el.id !== lastCol){\r\n                colWidth = table.getColumnConfig(el.column).width;\r\n              \r\n                if ( colWidth >= containerWidth ){\r\n                    colWidth = returnMinSize();\r\n                }\r\n            \r\n                widthCols.push(colWidth);\r\n           \r\n                values.push({\r\n                    column   : el.column, \r\n                    position : positionElem,\r\n                    width    : Number(colWidth)\r\n                });\r\n            } else {\r\n                lastColumn.column   = el.column;\r\n                lastColumn.position = positionElem;\r\n            } \r\n \r\n      \r\n\r\n        });\r\n        setLastColWidth(lastColumn,widthCols);\r\n\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"visibleColsSubmitClick\");\r\n    }\r\n\r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.postPrefsValues)(values,true);\r\n\r\n}\r\n\r\nfunction createMsg(){\r\n    if(!($$(\"visibleColsMsg\")) ){\r\n        webix.message({\r\n            id:\"visibleColsMsg\",\r\n            type:\"debug\", \r\n            text:\"Элемент не выбран\",\r\n        });\r\n    }\r\n}\r\n\r\nfunction colsMove(action){\r\n    const list        = $$(\"visibleListSelected\");\r\n    const listElement = list.getSelectedId();\r\n\r\n    if( listElement ){\r\n        if (action == \"up\"){\r\n            list.moveUp(listElement,1);\r\n            setBtnSubmitState(\"enable\");\r\n        } else if (action == \"down\"){\r\n            list.moveDown(listElement,1);\r\n            setBtnSubmitState(\"enable\");\r\n        }   \r\n    } else {\r\n        createMsg();\r\n    }\r\n}\r\n\r\nfunction colsPopupSelect(action){\r\n\r\n    const list                  = $$(\"visibleList\");\r\n    const listSelect            = $$(\"visibleListSelected\");\r\n    const emptyTemplateSelected = $$(\"visibleColsEmptyTempalteSelected\");\r\n    const emptyTemplate         = $$(\"visibleColsEmptyTempalte\");\r\n\r\n    function showEmptyElem(list,emptyEl,btn){\r\n        const listPull      = Object.values(list.data.pull);\r\n        if ( !(listPull.length) ){\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)(emptyEl);\r\n\r\n            if( btn && btn.isEnabled() ){\r\n                btn.disable();\r\n            } \r\n\r\n            setBtnSubmitState(\"disable\");\r\n\r\n        }\r\n    }\r\n\r\n    function hideEmptyElem(type){\r\n\r\n        if ( type == \"available\" ){\r\n            const pull = Object.values(list.data.pull);\r\n            if ( pull.length ){\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(emptyTemplateSelected);\r\n                setBtnSubmitState(\"enable\");\r\n            } \r\n             \r\n        } else if ( type == \"selected\"  ){\r\n            const pull = Object.values(listSelect.data.pull);\r\n        \r\n            if ( pull.length ){\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(emptyTemplate);\r\n                setBtnSubmitState(\"enable\");\r\n                \r\n            } \r\n        }  \r\n    }\r\n\r\n\r\n    if ( action == \"add\"){\r\n        const selectedItem  = list.getSelectedItem();\r\n        const selectedId    = list.getSelectedId  ();\r\n        if (selectedItem){\r\n            hideEmptyElem(\"available\");\r\n            listSelect.add(selectedItem);\r\n            list.remove(selectedId);\r\n            showEmptyElem(list,emptyTemplate, $$(\"addColsBtn\"));\r\n        \r\n            setBtnSubmitState(\"enable\");\r\n        } else {\r\n            createMsg();\r\n        }\r\n\r\n      \r\n\r\n    } else if ( action == \"remove\" ){\r\n        const selectedItem  = listSelect.getSelectedItem();\r\n        const selectedId    = listSelect.getSelectedId();\r\n    \r\n        if (selectedItem){\r\n            hideEmptyElem(\"selected\");\r\n            list.add(selectedItem);\r\n            listSelect.remove(selectedId);\r\n\r\n            showEmptyElem(listSelect,emptyTemplateSelected, $$(\"removeColsBtn\"));\r\n         \r\n        } else {\r\n            createMsg();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction createSpace(){\r\n    const table    = (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.getTable)();\r\n    const list     = $$(\"visibleList\");\r\n    const listPull = Object.values(list.data.pull);\r\n    const cols     = table.getColumns(); \r\n    \r\n    function findRemoveEl(elem){\r\n        let check = false;\r\n\r\n        cols.forEach(function(item,i){\r\n            \r\n            if (elem == item.id){\r\n                check = true;\r\n            }\r\n\r\n        });\r\n        return check;\r\n    }\r\n\r\n    \r\n    function removeListItem(){\r\n\r\n        try{\r\n            listPull.forEach(function(el,i){\r\n            \r\n                if (findRemoveEl(el.column)){\r\n                list.remove(el.id);\r\n                }\r\n\r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"createSpace => removeListItem\");\r\n        }  \r\n    }\r\n\r\n    function addListSelectedItem(){\r\n        const viewList = $$(\"visibleListSelected\");\r\n        const emptyEl  = $$(\"visibleColsEmptyTempalteSelected\");\r\n        \r\n        if (cols.length){\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(emptyEl);\r\n        }\r\n        try{\r\n            cols.forEach(function(col,i){\r\n                viewList.add({\r\n                    column  :col.id,\r\n                    label   :col.label,\r\n                });\r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"createSpace => addListSelectedItem\");\r\n        } \r\n    }\r\n\r\n    if (listPull.length !== cols.length){\r\n        removeListItem();\r\n        addListSelectedItem();\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction  visibleColsButtonClick(idTable){\r\n    const currTable  = $$(idTable);\r\n    let columns      = $$(idTable).getColumns(true);\r\n\r\n    \r\n\r\n    function createCheckboxes(){\r\n\r\n        function createListItems(){\r\n\r\n            try{\r\n\r\n                columns = currTable.getColumns(true);\r\n                const sortCols = _.sortBy(columns,\"label\");\r\n\r\n                sortCols.forEach(function(col){\r\n\r\n                    if(col.css !== \"action-column\" && !col.hiddenCustomAttr ){\r\n                      \r\n                        $$(\"visibleList\").add({\r\n                            column  :col.id,\r\n                            label   :col.label,\r\n                        });\r\n                     \r\n                    }\r\n                   \r\n                });\r\n\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"visibleColumns\",\"getCheckboxArray\");\r\n            }\r\n        }\r\n\r\n        createListItems();\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"visibleColsEmptyTempalte\"));\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(\"popupVisibleCols\"));\r\n\r\n    }\r\n\r\n    function createPopup(){\r\n\r\n        const popupHeadline = {   \r\n            template    : \"Видимость колонок\", \r\n            width       : 250,\r\n            css         : \"popup_headline list-filter-head\", \r\n            borderless  : true, \r\n            height      : 20 \r\n        };\r\n\r\n        const btnClosePopup = {\r\n            view        : \"button\",\r\n            id          : \"buttonClosePopup\",\r\n            css         : \"popup_close-btn\",\r\n            type        : \"icon\",\r\n            hotkey      : \"esc\", \r\n            width       : 35,\r\n            icon        : 'wxi-close',\r\n            click       : function(){\r\n                (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.destructPopup)();\r\n            },\r\n            on          : {\r\n                onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Закрыть окно (Esc)\");\r\n                }\r\n            } \r\n        };\r\n\r\n        function generateEmptyTemplate(id,text){\r\n            return {   \r\n                id        : id,\r\n                css       : \"webix_empty-template list-filter-empty\",\r\n                template  : text, \r\n                borderless: true\r\n            };\r\n        }\r\n\r\n\r\n        function genetateScrollView(idCheckboxes,inner){\r\n            return {\r\n                view        : \"scrollview\",\r\n                css         : \"webix_multivew-cell\",\r\n                borderless  : true,\r\n                scroll      : false,\r\n                body        : { \r\n                    id  : idCheckboxes,\r\n                    rows: inner\r\n                }\r\n            };\r\n        }\r\n\r\n\r\n        const btnSaveState = {\r\n            view    : \"button\",\r\n            id      : \"visibleColsSubmit\", \r\n            value   : \"Сохранить состояние\", \r\n            css     : \"webix_primary\",\r\n            hotkey  : \"shift+s\", \r\n            disabled: true,\r\n            click   : function(){\r\n                visibleColsSubmitClick();\r\n            },\r\n            on      : {\r\n                onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Изменить отображение колонок в таблице (Shift+S)\");\r\n                }\r\n            } \r\n    \r\n        };\r\n\r\n\r\n\r\n        const scrollView = [\r\n            {   template    : \"Доступные колонки\", \r\n                css         : \"list-filter-headline\",\r\n                height      : 25, \r\n                borderless  : true\r\n            },\r\n            generateEmptyTemplate(\r\n                \"visibleColsEmptyTempalte\",\r\n                \"Нет доступных колонок\"\r\n            ),\r\n\r\n            {\r\n                view      : \"list\", \r\n                id        : \"visibleList\",\r\n                template  : \"#label#\",\r\n                select    : true,\r\n                css       : \"list-filter-borders\",\r\n                borderless: true,\r\n                data      : [],\r\n                on        : {\r\n                    onAfterAdd:function(){\r\n                        const btnAdd    = $$(\"addColsBtn\");\r\n\r\n                        function enableBtn(){\r\n                            if ( btnAdd && !(btnAdd.isEnabled()) ){\r\n                                btnAdd.enable();\r\n                            }\r\n                        }\r\n\r\n                        enableBtn();\r\n  \r\n                    },\r\n                    onAfterDelete:function(id){\r\n                        const prevItem =  this.getNextId(id);\r\n                        if(prevItem){\r\n                            this.select(prevItem);\r\n                        }\r\n                    },\r\n                }\r\n            }\r\n            \r\n        ];\r\n   \r\n        const scrollViewSelected = [\r\n            {   template    : \"Выбранные колонки\",\r\n                css         : \"list-filter-headline\",\r\n                height      : 25, \r\n                borderless  : true,\r\n             \r\n            },\r\n            generateEmptyTemplate(\r\n                \"visibleColsEmptyTempalteSelected\",\r\n                \"Выберите колонки из доступных\"\r\n            ),\r\n\r\n            {\r\n                view      : \"list\", \r\n                id        : \"visibleListSelected\",\r\n                template  : \"#label#\",\r\n                css       : \"list-filter-borders\",\r\n                select    : true,\r\n                borderless: true,\r\n                data      : [],\r\n                on        : {\r\n                    onAfterAdd : function(){\r\n                        const btnRemove    = $$(\"removeColsBtn\");\r\n\r\n                        function enableBtn(){\r\n                            if ( btnRemove && !(btnRemove.isEnabled()) ){\r\n                                btnRemove.enable();\r\n                            }\r\n                        }\r\n\r\n                        enableBtn();\r\n                    },\r\n                    onAfterDelete : function(id){\r\n                        const prevItem = this.getNextId(id);\r\n                        if(prevItem){\r\n                            this.select(prevItem);\r\n                        }\r\n                    },\r\n                \r\n                }\r\n            }\r\n\r\n        ];\r\n  \r\n\r\n        const moveBtns = {\r\n            rows:[\r\n\r\n                {   \r\n                    view    : \"button\",\r\n                    width   : 50, \r\n                    type    : \"icon\",\r\n                    id      : \"addColsBtn\",\r\n                    css     : \"list-filter-move-btns\",\r\n                    disabled: true,\r\n                    icon    : \"icon-arrow-right\",\r\n                    hotkey  : \"shift+a\", \r\n                    height  : 30,\r\n                    click   : function(){\r\n                       colsPopupSelect(\"add\");\r\n                    },\r\n                    on: {\r\n                        onAfterRender : function () {\r\n                            this.getInputNode().setAttribute(\"title\",\"Добавить выбранные колонки (Shift+A)\");\r\n                        }\r\n                    } \r\n                },\r\n                {   \r\n                    view    : \"button\",\r\n                    width   : 50, \r\n                    type    : \"icon\",\r\n                    id      : \"removeColsBtn\",\r\n                    css     : \"list-filter-move-btns\",\r\n                    disabled: true,\r\n                    icon    : \"icon-arrow-left\",\r\n                    hotkey  : \"shift+d\",\r\n                    height  : 30,\r\n                    click   : function(){\r\n                        colsPopupSelect(\"remove\");\r\n                    },\r\n                    on: {\r\n                        onAfterRender : function () {\r\n                            this.getInputNode().setAttribute(\"title\",\"Убрать выбранные колонки (Shift+D)\");\r\n                        }\r\n                    } \r\n                },\r\n              \r\n            ]\r\n        };\r\n\r\n        const moveSelcted =  {\r\n            cols:[\r\n                {   \r\n                    view    : \"button\",\r\n                    width   : 50, \r\n                    type    : \"icon\",\r\n                    id      : \"moveSelctedUp\",\r\n                    icon    : \"icon-arrow-up\",\r\n                    hotkey  : \"shift+u\",\r\n                    css     : \"webix-transparent-btn\",\r\n                    height  : 42,\r\n                    click   : function(){\r\n                        colsMove(\"up\");\r\n                    },\r\n                    on      : {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute(\"title\",\"Поднять выбраную колонку вверх (Shift+U)\");\r\n                        }\r\n                    } \r\n                },\r\n                {   \r\n                    view    : \"button\",\r\n                    width   : 50, \r\n                    type    : \"icon\",\r\n                    id      : \"moveSelctedDown\",\r\n                    icon    : \"icon-arrow-down\",\r\n                    css     : \"webix-transparent-btn\",\r\n                    hotkey  : \"shift+w\",\r\n                    height  : 42,\r\n                    click   : function(){\r\n                        colsMove(\"down\");\r\n                    },\r\n                    on      : {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute(\"title\",\"Опустить выбраную колонку вниз (Shift+W)\");\r\n                        }\r\n                    } \r\n                },\r\n                {},\r\n            ]\r\n        };\r\n\r\n        const clearBtn = {   \r\n            view    : \"button\",\r\n            width   : 50, \r\n            type    : \"icon\",\r\n            id      : \"clearBtnCols\",\r\n            icon    : \"icon-trash\",\r\n            hotkey  : \"shift+r\",\r\n            css     : \"webix-transparent-btn webix-trash-btn-color\",\r\n            height  : 42,\r\n            click   : function(){\r\n                clearBtnColsClick();\r\n            },\r\n            on: {\r\n                onAfterRender : function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Установить стандартные настройки (Shift+R)\");\r\n                }\r\n            } \r\n        };\r\n\r\n        const search = {   \r\n            view        : \"search\", \r\n            id          : \"searchColsList\",\r\n            placeholder : \"Поиск (Shift+F)\", \r\n            css         : \"searchTable\",\r\n            height      : 42, \r\n            //width       : 276,\r\n            hotkey      : \"shift+f\", \r\n            on          : {\r\n                onTimedKeyPress : function(){\r\n                    searchColsListPress();\r\n                }\r\n            }\r\n        };\r\n    \r\n        webix.ui({\r\n            view        : \"popup\",\r\n            id          : \"popupVisibleCols\",\r\n            css         : \"webix_popup-prev-href\",\r\n            width       : 600,\r\n            maxHeight   : 400,\r\n            modal       : true,\r\n            escHide     : true,\r\n            position    : \"center\",\r\n            scroll      :\"y\",\r\n            body        : {\r\n\r\n                rows:[ \r\n                    { cols:[\r\n\r\n                        popupHeadline,\r\n                        {},\r\n                        btnClosePopup,\r\n              \r\n                    ]},\r\n\r\n                    {height:5},\r\n\r\n                    { cols:[\r\n                        {   \r\n                            rows:[\r\n                                search,\r\n\r\n                                genetateScrollView(\r\n                                    \r\n                                    \"listContent\",\r\n                                    scrollView\r\n                                ),\r\n                            ]\r\n                        },\r\n                        {width:10},\r\n                        { rows:[\r\n                            {height:45},\r\n                            {},\r\n                            moveBtns,\r\n                            {}\r\n                        ]},\r\n                        {width:10},\r\n                        { rows:[\r\n                        \r\n                            {cols:[\r\n                                moveSelcted,\r\n                                clearBtn,\r\n                            ]},\r\n                            genetateScrollView(\r\n                                \"listSelectedContent\",\r\n                                scrollViewSelected\r\n                            ),\r\n                        ]},\r\n                    ]},\r\n\r\n                    {height:20},\r\n\r\n                    btnSaveState,\r\n\r\n                ]\r\n            },\r\n            \r\n\r\n        });\r\n        createCheckboxes();\r\n        createSpace();\r\n    }\r\n\r\n    createPopup();\r\n\r\n}\r\n\r\nfunction toolbarVisibleColsBtn(idTable){\r\n    const idVisibleCols = idTable+\"-visibleCols\";\r\n    return {   \r\n        view    : \"button\",\r\n        width   : 50, \r\n        type    : \"icon\",\r\n        id      : idVisibleCols,\r\n        disabled: true,\r\n        icon    : \"icon-columns\",\r\n        css     : \"webix_btn-download webix-transparent-btn\",\r\n        title   : \"текст\",\r\n        height  : 42,\r\n        hotkey  :\"ctrl+shift+c\",\r\n        click   : function(){\r\n            visibleColsButtonClick(idTable);\r\n        },\r\n        on: {\r\n            onAfterRender : function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Показать/скрыть колонки (Ctrl+Shift+C)\");\r\n            }\r\n        } \r\n    };\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/columnsSettings/visibleColumns.js?");

/***/ }),

/***/ "./src/js/blocks/commonFunctions.js":
/*!******************************************!*\
  !*** ./src/js/blocks/commonFunctions.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getItemId\": () => (/* binding */ getItemId),\n/* harmony export */   \"getTable\": () => (/* binding */ getTable),\n/* harmony export */   \"hideElem\": () => (/* binding */ hideElem),\n/* harmony export */   \"showElem\": () => (/* binding */ showElem),\n/* harmony export */   \"removeElem\": () => (/* binding */ removeElem),\n/* harmony export */   \"disableElem\": () => (/* binding */ disableElem),\n/* harmony export */   \"enableElem\": () => (/* binding */ enableElem),\n/* harmony export */   \"textInputClean\": () => (/* binding */ textInputClean),\n/* harmony export */   \"getComboOptions\": () => (/* binding */ getComboOptions),\n/* harmony export */   \"getUserData\": () => (/* binding */ getUserData)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n\r\n\r\n\r\nlet visibleTable;\r\n\r\nfunction getItemId (){\r\n    let idTable;\r\n\r\n    try{\r\n        const table     = $$(\"table\");\r\n        const tableView = $$(\"table-view\");\r\n\r\n        if ($$(\"tables\").isVisible()){\r\n            idTable = table.config.idTable;\r\n            visibleTable = table\r\n        } else if ($$(\"forms\").isVisible()){\r\n            idTable = tableView.config.idTable;\r\n            visibleTable = tableView; \r\n  \r\n        }\r\n\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"getItemId\");\r\n    }\r\n\r\n    return idTable;\r\n}\r\n\r\nfunction getTable(){\r\n    getItemId ();\r\n\r\n    return visibleTable;\r\n}\r\n\r\nfunction hideElem(elem){\r\n    try{\r\n        if (elem){\r\n            elem.hide();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"hideElem, element: \"+elem);\r\n    }\r\n}\r\n\r\nfunction showElem (elem){\r\n    try{\r\n        if (elem && !(elem.isVisible())){\r\n            elem.show();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"showElem element: \"+elem);\r\n    }\r\n}\r\n\r\nfunction removeElem (elem){\r\n    try{\r\n        if(elem){\r\n            const parent = elem.getParentView();\r\n            parent.removeView(elem);\r\n        }\r\n    \r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"removeElem element: \"+elem);\r\n    }\r\n}\r\n\r\nfunction disableElem(element){\r\n    try{\r\n        if (element && element.isEnabled()){\r\n            element.disable();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"sidebar\",\"disableElements\");\r\n    }\r\n}\r\n\r\nfunction enableElem(element){\r\n    try{\r\n        if ( element && !(element.isEnabled()) ){\r\n            element.enable();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"sidebar\",\"enableElements\");\r\n    }\r\n}\r\n\r\nfunction textInputClean(){\r\n    let mdView = null;\r\n  \r\n    webix.event(document.body, \"mousedown\", e => { \r\n      const targetView = $$(e);\r\n      if (targetView && targetView.getInputNode){\r\n        mdView = targetView;\r\n      } \r\n    });\r\n    \r\n    webix.event(document, \"click\", e => { \r\n      const clickedView = $$(e);\r\n      if (mdView && clickedView && clickedView.config.id !== mdView.config.id){\r\n        e.cancelBubble = true; \r\n        webix.html.preventEvent(e);\r\n      }\r\n      mdView = null;\r\n    }, { capture: true });\r\n}\r\n\r\nfunction getComboOptions (refTable){\r\n    const url       = \"/init/default/api/\"+refTable;\r\n\r\n    return new webix.DataCollection({url:{\r\n        $proxy:true,\r\n        load: function(){\r\n            return ( webix.ajax().get(url).then(function (data) {\r\n                        data = data.json().content;\r\n                        let dataArray=[];\r\n                        let keyArray;\r\n\r\n                        function stringOption(l,el){\r\n                            try{\r\n                                while (l <= Object.values(el).length){\r\n                                    if (typeof Object.values(el)[l] == \"string\"){\r\n                                        keyArray = Object.keys(el)[l];\r\n                                        break;\r\n                                    } \r\n                                    l++;\r\n                                }\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"getComboOptions => stringOption\");\r\n                            }\r\n                        }\r\n\r\n                        function numOption(l,el){\r\n                            try{\r\n                                if (el[keyArray] == undefined){\r\n                                    while (l <= Object.values(el).length) {\r\n                                        if (typeof Object.values(el)[1] == \"number\"){\r\n                                            keyArray = Object.keys(el)[1];\r\n                                            break;\r\n                                        }\r\n                                        l++;\r\n                                    }\r\n                                }\r\n\r\n                                dataArray.push({ \"id\":el.id, \"value\":el[keyArray]});\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"getComboOptions => numOption\");\r\n                            }\r\n                        }\r\n\r\n                        function createComboValues(){\r\n                            try{\r\n                                data.forEach((el,i) =>{\r\n                                    let l = 0;\r\n                                    stringOption (l,el);\r\n                                    numOption    (l,el);\r\n                                \r\n                                });\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"getComboOptions => createComboValues\");\r\n                            }\r\n                        }\r\n                        createComboValues();\r\n                        return dataArray;\r\n                    \r\n                    }).catch(err => {\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"commonFunctions\",\"getComboOptions\");\r\n                    })\r\n            );\r\n            \r\n        }\r\n    }});\r\n}\r\n\r\nfunction getUserData(){\r\n    const userprefsGetData = webix.ajax(\"/init/default/api/whoami\");\r\n    userprefsGetData.then(function(data){\r\n        const err = data.json();\r\n        data      = data.json().content;\r\n\r\n        const userData = {};\r\n    \r\n        userData.id       = data.id;\r\n        userData.name     = data.first_name;\r\n        userData.username = data.username;\r\n        \r\n        (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_1__.setStorageData)(\"user\", JSON.stringify(userData));\r\n    \r\n        if (err.err_type !== \"i\"){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"function getUserData\");\r\n        }\r\n    \r\n    });\r\n    userprefsGetData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"favsLink\",\"btnSaveLpostContentinkClick => getUserData\");\r\n    });\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/commonFunctions.js?");

/***/ }),

/***/ "./src/js/blocks/errors.js":
/*!*********************************!*\
  !*** ./src/js/blocks/errors.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setAjaxError\": () => (/* binding */ setAjaxError),\n/* harmony export */   \"setFunctionError\": () => (/* binding */ setFunctionError)\n/* harmony export */ });\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n\r\n\r\nfunction setAjaxError(err,file,func){\r\n    if (err.status === 400 ||  err.status === 401 || err.status === 404){\r\n        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", file+\" function \"+func+\": \"+err.status+\" \"+err.statusText+\" \"+err.responseURL+\" (\"+err.responseText+\") \");\r\n    } else {\r\n        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", file+\" function \"+func+\": \"+err.status+\" \"+err.statusText+\" \"+err.responseURL+\" (\"+err.responseText+\") \",\"version\");\r\n        window.alert(\"Ошибка. Статус: \" + err.status+\". Отсутствует соединение с сервером.\");\r\n    }\r\n}\r\n\r\nfunction setFunctionError(err,file,func){\r\n    console.log(err);\r\n    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", file+\" function \"+func+\": \"+err);\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/errors.js?");

/***/ }),

/***/ "./src/js/blocks/favsLink.js":
/*!***********************************!*\
  !*** ./src/js/blocks/favsLink.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"favsPopup\": () => (/* binding */ favsPopup),\n/* harmony export */   \"saveFavsClick\": () => (/* binding */ saveFavsClick)\n/* harmony export */ });\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction getUserData(){\r\n    const userprefsGetData = webix.ajax(\"/init/default/api/whoami\");\r\n    userprefsGetData.then(function(data){\r\n        data = data.json().content;\r\n\r\n        let userData = {};\r\n    \r\n        userData.id       = data.id;\r\n        userData.name     = data.first_name;\r\n        userData.username = data.username;\r\n        \r\n        (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_3__.setStorageData)(\"user\", JSON.stringify(userData));\r\n        \r\n    });\r\n    userprefsGetData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"favsLink\",\"btnSaveLpostContentinkClick => getUserData\");\r\n    });\r\n}\r\n\r\nfunction setAdaptiveSize(popup){\r\n    if (window.innerWidth < 1200 ){\r\n        const size  = window.innerWidth * 0.89;\r\n        try{\r\n            popup.config.width = size;\r\n            popup.resize();\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"function setAdaptiveSize\");\r\n        }\r\n    }\r\n \r\n}\r\n\r\nfunction favsPopupCollectionClick (){\r\n    const getData = webix.ajax().get(\"/init/default/api/userprefs/\");\r\n    \r\n    getData.then(function(data){\r\n        data = data.json().content;\r\n        const favCollection = [];\r\n\r\n        let user = webix.storage.local.get(\"user\");\r\n\r\n        if (!user){\r\n            getUserData();\r\n            user = webix.storage.local.get(\"user\");\r\n        }\r\n    \r\n        \r\n        function getFavsCollection(){\r\n            try{\r\n                data.forEach(function(el){\r\n                    if (el.name.includes(\"fav-link\") && user.id == el.owner){\r\n                        favCollection.push(JSON.parse(el.prefs));\r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"favsPopupCollectionClick => getFavsCollection\");\r\n            }\r\n        }\r\n\r\n        function createOptions(){\r\n            const radio = $$(\"favCollectionLinks\");\r\n            try{\r\n                if (favCollection.length){\r\n                    favCollection.forEach(function(el){\r\n                        radio.addOption(\r\n                            {   id:el.id,\r\n                                value:el.name,\r\n                                favLink: el.link\r\n                            }\r\n                        );\r\n                        radio.removeOption(\r\n                            \"radioNoneContent\"\r\n                        );\r\n                    });\r\n                }\r\n                $$(\"popupFavsLink\").show();\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"favsPopupCollectionClick => createOptions\");\r\n            }\r\n         \r\n        }\r\n        \r\n        if (user){\r\n            getFavsCollection();\r\n            createOptions();\r\n        }\r\n   \r\n    \r\n    });\r\n\r\n    getData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"favsLink\",\"favsPopupCollectionClick getData\");\r\n    });\r\n\r\n    \r\n}\r\n\r\nfunction favsPopupSubmitClick(){\r\n    try{\r\n        const radio  = $$(\"favCollectionLinks\");\r\n        const value  = radio.getValue();\r\n        const option = radio.getOption(value);\r\n        window.location.replace(option.favLink);\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"favsPopupSubmitClick\");\r\n    }\r\n}\r\n\r\nfunction favsPopup(){\r\n\r\n    const popupHeadline = {   \r\n        template:\"<div class='no-wrap-headline'>Избранное</div>\", \r\n        css:\"popup_headline\", \r\n        borderless:true, \r\n        height:20 \r\n    };\r\n\r\n    const btnClosePopup = {\r\n        view:\"button\",\r\n        id:\"buttonClosePopup\",\r\n        css:\"popup_close-btn\",\r\n        type:\"icon\",\r\n        width:35,\r\n        hotkey :\"esc\",\r\n        icon: 'wxi-close',\r\n        click:function(){\r\n            try{\r\n                if ($$(\"popupFavsLink\")){\r\n                    $$(\"popupFavsLink\").destructor();\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"favsPopup click\");\r\n            }\r\n        \r\n        }\r\n    };\r\n\r\n    const radioLinks = {\r\n        view:\"radio\", \r\n        id:\"favCollectionLinks\",\r\n        vertical:true,\r\n        options:[\r\n            {   id:\"radioNoneContent\", disabled:true, value:\"Здесь будут сохранены Ваши ссылки\"}\r\n        ],\r\n        on:{\r\n            onChange:function(newValue, oldValue){\r\n                try{\r\n                    const submitBtn = $$(\"favLinkSubmit\");\r\n                    if (newValue !== oldValue){\r\n                        if (submitBtn && !(submitBtn.isEnabled())){\r\n                            submitBtn.enable();\r\n                        }\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"favsPopup => radioLinks\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    const btnSaveLink = {\r\n        view:\"button\",\r\n        id:\"favLinkSubmit\", \r\n        value:\"Открыть ссылку\", \r\n        css:\"webix_primary\", \r\n        disabled:true,\r\n        click:function(){\r\n            favsPopupSubmitClick();\r\n        }\r\n \r\n    };\r\n \r\n    webix.ui({\r\n        view:\"popup\",\r\n        id:\"popupFavsLink\",\r\n        css:\"webix_popup-prev-href\",\r\n        width:400,\r\n        minHeight:300,\r\n        escHide:true,\r\n        modal:true,\r\n        position:\"center\",\r\n        body:{\r\n            rows:[\r\n            {rows: [ \r\n                { cols:[\r\n                    popupHeadline,\r\n                    {},\r\n                    btnClosePopup,\r\n                ]},\r\n                radioLinks,\r\n                {height:15},\r\n                btnSaveLink,\r\n            ]}]\r\n            \r\n        },\r\n\r\n    });\r\n    \r\n    favsPopupCollectionClick ();\r\n    setAdaptiveSize($$(\"popupFavsLink\"));\r\n}\r\n\r\n\r\nfunction getCurrId(){\r\n    let id;\r\n    try{\r\n        const tree = $$(\"tree\");\r\n        \r\n        if (tree && tree.getSelectedId()){\r\n            id = tree.getSelectedId();\r\n        } else {\r\n            const url = window.location.pathname;\r\n            const index =  window.location.pathname.lastIndexOf(\"/\")+1;\r\n            id = url.slice(index);\r\n        \r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"getCurrId\");\r\n    }\r\n    return id;\r\n}\r\n\r\nfunction saveFavsClick(){\r\n\r\n\r\n    async function getLinkName(){\r\n        \r\n        if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.fields){\r\n            await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.getData)(\"fields\"); \r\n        }\r\n\r\n        function findName (id){\r\n            try{\r\n                const nameTemplate = $$(\"favNameLink\");\r\n                _globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.tableNames.forEach(function(el,i){\r\n                    if (el.id == id){\r\n                        if(nameTemplate){\r\n                            nameTemplate.setValues(el.name);\r\n                        }\r\n                    }\r\n                    \r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"findName\");\r\n            }\r\n        }\r\n        if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.tableNames){\r\n            const id = getCurrId();\r\n            findName (id);\r\n        }\r\n      \r\n    }\r\n\r\n    function getLink(){\r\n        try{\r\n            const link = window.location.href;\r\n            const favTemplate = $$(\"favLink\");\r\n            if (favTemplate){\r\n                favTemplate.setValues(link);\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"getLink\");\r\n        }\r\n    }\r\n\r\n    function destructPopupSave(){\r\n        try{\r\n            if ($$(\"popupFavsLinkSave\")){\r\n                $$(\"popupFavsLinkSave\").destructor();\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"destrucPopupSave\");\r\n        }\r\n    }\r\n     \r\n    function createTemplate(id, name,nonName){\r\n        return {   \r\n            id:id,\r\n            css:\"popup_subtitle\", \r\n            borderless:true, \r\n            height:20 ,\r\n            template: function(){\r\n                if (Object.keys($$(id).getValues()).length !==0){\r\n                    return \"<div style='font-weight:600'>\"+name+\": </div>\"+$$(id).getValues();\r\n                } else {\r\n                    return \"<div style='font-weight:600'>\"+name+\": </div>\"+name+\" \"+nonName;\r\n                }\r\n          \r\n            }\r\n        }\r\n    }\r\n\r\n    function btnSaveLinkClick(){\r\n   \r\n        let favNameLinkVal;\r\n        let favLinkVal ;\r\n        const namePref = getCurrId();\r\n        function getData(){\r\n            try{\r\n                favNameLinkVal = $$(\"favNameLink\").getValues();\r\n                favLinkVal     = $$(\"favLink\").getValues();\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"btnSaveLinkClick => getData\");\r\n            }\r\n        }\r\n\r\n\r\n        function postContent(){\r\n            let user = webix.storage.local.get(\"user\");\r\n            let ownerData;\r\n\r\n\r\n            if (!user){\r\n                getUserData();\r\n                user = webix.storage.local.get(\"user\");\r\n            }\r\n\r\n            if (user){\r\n                ownerData = user.id;\r\n\r\n                const postObj = {\r\n                    name:\"fav-link_\"+namePref,\r\n                    owner:ownerData,\r\n                    prefs:{\r\n                        name: favNameLinkVal,\r\n                        link: favLinkVal,\r\n                        id:namePref,\r\n                    }\r\n                };\r\n                const postData = webix.ajax().post(\"/init/default/api/userprefs/\",postObj);\r\n\r\n                postData.then(function(data){\r\n                    data = data.json();\r\n            \r\n                    if (data.err_type == \"i\"){\r\n                        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\",\"Ссылка\"+\" «\"+favNameLinkVal+\"» \"+\" сохранёна в избранное\");\r\n                    } else {\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(data.err,\"favsLink\",\"btnSaveLinkClick => postContent msg\" );\r\n                    }\r\n\r\n                    destructPopupSave();\r\n                });\r\n\r\n                postData.fail(function(err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"favsLink\",\"btnSaveLinkClick => postContent\");\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n        function getUserprefs(){\r\n            const getData = webix.ajax().get(\"/init/default/api/userprefs/\");\r\n            getData.then(function(data){\r\n                data = data.json().content;\r\n                const favPrefs = [];\r\n\r\n                function getFavPrefs(){\r\n                    try{\r\n                        data.forEach(function(pref){\r\n            \r\n                            if (pref.name.includes(\"fav-link\")){\r\n                                favPrefs.push(pref.name);\r\n                            }\r\n                    \r\n                        });\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"getUserprefs => getFavPrefs\");\r\n                    }\r\n                }\r\n\r\n                function getNotUniquePrefs (){\r\n                    try{\r\n                        let unique = true;\r\n                        if (favPrefs.length){\r\n                            favPrefs.forEach(function(el){\r\n                             \r\n                                if (el.includes(namePref)){\r\n                                    \r\n                                    const index = el.indexOf(\"_\")+1;\r\n                                    const id = el.slice(index);\r\n                            \r\n                                    if (id == namePref && unique){\r\n                                        unique = false;\r\n                                        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\", \"Такая ссылка уже есть в избранном\");\r\n                                    } \r\n                                } \r\n                            });\r\n                        } \r\n                        \r\n                        \r\n                        if (!(favPrefs.length) || unique) {\r\n                            postContent();\r\n                        } else if (!unique){\r\n                            destructPopupSave();\r\n                        }\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"favsLink\",\"getUserprefs => getNotUniquePrefs\");\r\n                    }\r\n                }\r\n      \r\n                getFavPrefs();\r\n                getNotUniquePrefs ();\r\n           \r\n            });\r\n            getData.fail(function(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"favsLink\",\"getUserprefs getData\");\r\n            });\r\n            }\r\n\r\n\r\n       \r\n        getData();\r\n        getUserprefs();\r\n    }\r\n   \r\n    const popupHeadline = {   \r\n        template:\"<div class='no-wrap-headline'>Сохранить ссылку</div>\", \r\n        css:\"popup_headline\", \r\n        borderless:true, \r\n        height:20 \r\n    };\r\n\r\n    const btnClosePopup = {\r\n        view:\"button\",\r\n        id:\"buttonClosePopup\",\r\n        css:\"popup_close-btn\",\r\n        type:\"icon\",\r\n        hotkey :\"esc\",\r\n        width:35,\r\n        icon: 'wxi-close',\r\n        click:function(){\r\n            destructPopupSave();\r\n        \r\n        }\r\n    };\r\n\r\n    \r\n    const btnSaveLink = {\r\n        view:\"button\", \r\n        value:\"Сохранить ссылку\", \r\n        css:\"webix_primary\", \r\n        click:function(){\r\n            btnSaveLinkClick();\r\n        }\r\n \r\n    };\r\n\r\n\r\n\r\n    webix.ui({\r\n        view:\"popup\",\r\n        id:\"popupFavsLinkSave\",\r\n        css:\"popup_padding-container\",\r\n        escHide:true,\r\n        width:500,\r\n        //height:300,\r\n        modal:true,\r\n        position:\"center\",\r\n        body:{\r\n            rows:[\r\n            {rows: [ \r\n                { cols:[\r\n                    popupHeadline,\r\n                    {},\r\n                    btnClosePopup,\r\n                   \r\n                ]},\r\n                createTemplate(\"favNameLink\",\"Имя\",\"не указано\"),\r\n                {height:5},\r\n                createTemplate(\"favLink\",\"Ссылка\",\"не указана\"),\r\n                {height:10},\r\n                btnSaveLink,\r\n                {}\r\n                //{height:10}\r\n            ]}]\r\n            \r\n        },\r\n\r\n    }).show();\r\n\r\n \r\n\r\n    getLinkName();\r\n    getLink();\r\n\r\n    setAdaptiveSize($$(\"popupFavsLinkSave\"));   \r\n   \r\n\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/favsLink.js?");

/***/ }),

/***/ "./src/js/blocks/getContent/getInfoDashboard.js":
/*!******************************************************!*\
  !*** ./src/js/blocks/getContent/getInfoDashboard.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getInfoDashboard\": () => (/* binding */ getInfoDashboard)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blockHeadline_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../blockHeadline.js */ \"./src/js/blocks/blockHeadline.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"getContent => getInfoDashboard\";\r\n\r\nfunction getDashId ( idsParam ){\r\n    const tree = $$(\"tree\");\r\n    let itemTreeId;\r\n\r\n    if (idsParam){\r\n        itemTreeId = idsParam;\r\n    } else if (tree.getSelectedItem()){\r\n        itemTreeId = tree.getSelectedItem().id;\r\n    }\r\n\r\n    return itemTreeId;\r\n}\r\n\r\nfunction removeScroll (){\r\n    try{\r\n        const elem = $$(\"dashBodyScroll\");\r\n        if (elem){\r\n            const parent = elem.getParentView();\r\n            if (elem){\r\n                parent.removeView(elem);\r\n            }\r\n        }\r\n    } catch (err){  \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"removeScroll\");\r\n    }\r\n}\r\n\r\nfunction addErrorView(){\r\n          \r\n    function createTools(){\r\n        const dashboardTool = $$(\"dashboardTool\");\r\n\r\n        const tools = {\r\n            view:\"scrollview\",\r\n            id:\"dashboard-tool-main\",\r\n            borderless:true,\r\n            css:{\"margin\":\"20px!important\",\"height\":\"50px!important\"},\r\n            body: {\r\n                view:\"flexlayout\",\r\n                padding:20,\r\n                rows:[]\r\n            }\r\n        };\r\n\r\n        const headline = {\r\n            rows:[{\r\n                template:\"\",\r\n                id:\"dash-template\",\r\n                css:\"webix_style-template-count webix-block-title\",\r\n                borderless:false,\r\n                height:40,\r\n            }]\r\n        };\r\n\r\n        dashboardTool.addView({\r\n            rows:[\r\n                tools,\r\n                headline\r\n            ]\r\n        },0);\r\n    }\r\n\r\n    function createBody(){\r\n        const container = $$(\"dashboardInfoContainer\");\r\n        const charts =  {\r\n            id:\"dashboard-charts\",\r\n            borderless:true,\r\n            body: {\r\n                view:\"flexlayout\",\r\n                rows:[]\r\n            }\r\n        };\r\n\r\n        const dashBody =   {\r\n            view:\"scrollview\", \r\n            scroll:\"auto\",\r\n            id:\"dashBodyScroll\",\r\n            borderless:true, \r\n            body:{\r\n                id:\"dashboardBody\",\r\n                css:\"dashboardBody\",\r\n                cols:[\r\n                    charts\r\n                ]\r\n            }\r\n        };\r\n\r\n        container.addView(dashBody);\r\n    }\r\n   \r\n    createTools();\r\n    createBody();    \r\n}\r\n\r\nasync function setTableName(idsParam) {\r\n    const itemTreeId = getDashId(idsParam);\r\n    try{\r\n        if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames){\r\n            await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"fields\"); \r\n        }\r\n\r\n        if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames){\r\n            _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames.forEach(function(el,i){\r\n                if (el.id == itemTreeId){\r\n                    const template  = $$(\"dash-template\");\r\n                    const value     = el.name.toString();\r\n                    template.setValues(value);\r\n                }\r\n            });\r\n        }\r\n    } catch (err){  \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"setTableName\");\r\n    }\r\n}\r\n\r\nfunction removeItems (){\r\n\r\n    function setVars(elem){\r\n   \r\n        if (elem){\r\n            try{\r\n                const parent = elem.getParentView();\r\n                if (elem){\r\n                    parent.removeView(elem);\r\n                } \r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"getAjax => setVars\");\r\n            } \r\n        }\r\n     \r\n    }\r\n\r\n    setVars ($$(\"dashboardInfoContainerInner\")  );\r\n    setVars ($$(\"dash-template\")                );\r\n    setVars ($$(\"dashboard-tool-main\")          );\r\n    setVars ($$(\"dashboard-tool-adaptive\")      );\r\n \r\n}\r\n\r\nconst dashLayout = [\r\n    {   type : \"wide\",\r\n        rows : []\r\n    }\r\n];\r\n\r\nfunction clearDashLayout(){\r\n    if ( dashLayout[0].rows.length ){\r\n        dashLayout[0].rows = [];\r\n    }  \r\n}\r\n\r\nfunction goToRefView(chartAction){\r\n    const tree = $$(\"tree\");\r\n\r\n    if ( tree.getItem(chartAction) ){\r\n        tree.select(chartAction);\r\n    } else {\r\n        Backbone.history.navigate(\"tree/\" + chartAction, { trigger : true });\r\n        window.location.reload();\r\n    }\r\n}\r\n\r\nfunction createCharts(dataCharts){\r\n \r\n    clearDashLayout();\r\n    try{\r\n        dataCharts.forEach(function(el,i){\r\n\r\n          // el.action = \"auth_user\";\r\n            const titleTemplate = el.title;\r\n\r\n            delete el.title;\r\n     \r\n            el.borderless  = true;\r\n            el.minWidth    = 250;\r\n      \r\n            el.on          = {\r\n                onItemClick:function(idEl,event,html){\r\n                    function findFiels(chartAction){\r\n                        const fields = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content;\r\n                        Object.keys(fields).forEach(function(key,i){\r\n                        \r\n                            if ( key == chartAction ){\r\n                                goToRefView(chartAction);\r\n                            }\r\n                        });\r\n                    } \r\n\r\n                    if (el.action){\r\n                        findFiels(el.action);\r\n                    } else {\r\n                        const collection = el.data;\r\n                        let selectElement;\r\n                 \r\n                        collection.forEach(function(el,i){\r\n            \r\n                            if (el.id == idEl){\r\n                                selectElement = el;\r\n                            }\r\n                        });\r\n\r\n                        const chartAction = selectElement.action;\r\n                     // const chartAction = \"userprefs\"\r\n                        if (chartAction){\r\n                            findFiels(chartAction);\r\n\r\n                        } \r\n                  \r\n                    }\r\n                  \r\n                \r\n                   \r\n                }\r\n            };\r\n\r\n\r\n\r\n            const headline = {   \r\n                template    : titleTemplate,\r\n                borderless  : true,\r\n                height      : 35,\r\n                css         : {  \r\n                    \"font-weight\" : \"400!important\", \r\n                    \"font-size\"   : \"17px!important\"\r\n                }, \r\n            };\r\n        \r\n            dashLayout[0].rows.push({\r\n                css : \"webix_dash-chart-headline\",\r\n                rows: [ \r\n                    headline,\r\n                    el\r\n                ]\r\n            });\r\n\r\n        \r\n        \r\n        });\r\n\r\n   \r\n    } catch (err){  \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createCharts\");\r\n    }\r\n}\r\n\r\n\r\nfunction createSpace( inputsArray, idsParam ){\r\n\r\n    function backBtnClick (){\r\n        const dashTool = $$(\"dashboard-tool-main\");\r\n\r\n       // hideElem    (dashTool);\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem)    ($$( \"dashboardTool\"));\r\n       \r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem)    ($$(\"dashboardInfoContainer\"));\r\n    }\r\n\r\n    function createMainView(){\r\n\r\n        const headline = {  \r\n            template    : \"Фильтр\",\r\n            height      : 30, \r\n            css         : \"webix_dash-filter-headline\",\r\n            borderless  : true\r\n        };\r\n\r\n        \r\n        const filterBackBtn = { \r\n            view    : \"button\", \r\n            id      : \"dash-backDashBtn\",\r\n            type    : \"icon\",\r\n            icon    : \"icon-arrow-right\",\r\n            value   : \"Вернуться к дашбордам\",\r\n            hidden  : true,  \r\n            height  : 15,\r\n            hotkey  : \"esc\",\r\n            minWidth: 50,\r\n            width   : 55,\r\n            \r\n            click:function(){\r\n                backBtnClick();\r\n            },\r\n            \r\n            on: {\r\n                onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Вернуться к дашбордам\");\r\n                }\r\n            } \r\n        };\r\n        const mainView = {\r\n            id      : \"dashboard-tool-main\",\r\n            padding : 20,\r\n            hidden  : true,\r\n            minWidth: 250,\r\n            rows    : [\r\n                {   id  : \"dashboardToolHeadContainer\",\r\n                    cols: [\r\n                        headline,\r\n                        filterBackBtn,\r\n                    ]\r\n                },\r\n                \r\n                { rows:inputsArray }\r\n            ], \r\n        };\r\n\r\n        try{\r\n            $$(\"dashboardTool\").addView( mainView );\r\n        } catch (err){  \r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, logNameFile, \"createMainView\");\r\n        }\r\n    }\r\n\r\n    createMainView();\r\n\r\n  \r\n    function createFilterBtn(){\r\n\r\n        function filterBtnClick (){\r\n            const dashTool           = $$(\"dashboard-tool-main\");\r\n            const container          = $$(\"dashboardContainer\" );\r\n            const tree               = $$(\"tree\");\r\n            const backBtn            = $$(\"dash-backDashBtn\");\r\n\r\n            function filterMinAdaptive(){\r\n\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) (tree);\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"dashboardInfoContainer\"));\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem) ($$(\"dashboardTool\"));\r\n               // showElem (dashTool);\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem) (backBtn);\r\n            \r\n                // dashTool.config.width = window.innerWidth-45;\r\n                // dashTool.resize();\r\n\r\n                $$(\"dashboardTool\").config.width = window.innerWidth-45;\r\n                $$(\"dashboardTool\").resize();\r\n            }\r\n\r\n            function filterMaxAdaptive(){\r\n                if (dashTool.isVisible()){\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"dashboardTool\"));\r\n                 //   hideElem(dashTool);\r\n                } else {\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem) ($$(\"dashboardTool\"));\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem)(dashTool);\r\n                }\r\n            }\r\n       \r\n            filterMaxAdaptive();\r\n\r\n\r\n            if (container.$width < 850){\r\n           \r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem)(tree);\r\n\r\n                if (container.$width  < 850 ){\r\n                    filterMinAdaptive();\r\n                }\r\n\r\n            } else {\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem)(backBtn);\r\n   \r\n                // if (dashTool.config.width !== 350){\r\n                //     dashTool.config.width  = 350;\r\n                //     dashTool.resize();\r\n                // }\r\n\r\n                if ($$(\"dashboardTool\").config.width !== 350){\r\n                    $$(\"dashboardTool\").config.width  = 350;\r\n                    $$(\"dashboardTool\").resize();\r\n                }\r\n\r\n                \r\n            }\r\n\r\n\r\n        }\r\n\r\n        const filterBtn = {\r\n            view    : \"button\", \r\n            id      : \"dashFilterBtn\", \r\n            css     : \"webix-transparent-btn\",\r\n            type    : \"icon\",\r\n            icon    : \"icon-filter\",\r\n            width   : 50,\r\n            click   : function() {\r\n                filterBtnClick();\r\n            },\r\n            on      : {\r\n                onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Показать/скрыть фильтры\");\r\n                },\r\n            }\r\n        \r\n            \r\n        };\r\n\r\n        const container     = $$(\"dash-template\").getParentView();\r\n        const containerView = $$(container.config.id);\r\n         \r\n        if (!$$(\"dashFilterBtn\")){\r\n\r\n            containerView.addView(\r\n                {   id  : \"dashboard-tool-btn\",\r\n                    cols: [\r\n                        filterBtn\r\n                    ]\r\n                }\r\n            ,2);\r\n        }\r\n      \r\n    }\r\n\r\n    function createDashInfo(){\r\n        const template  = (0,_blockHeadline_js__WEBPACK_IMPORTED_MODULE_3__.setHeadlineBlock)(\"dash-template\");\r\n        const container = $$(\"dashboardInfoContainer\");\r\n\r\n        const dashCharts = {\r\n            id  : \"dashboard-charts\",\r\n            view: \"flexlayout\",\r\n            css : \"webix_dash-charts-flex\",\r\n            rows: dashLayout,\r\n        };\r\n\r\n        const content = {\r\n            view        : \"scrollview\", \r\n            scroll      : \"y\",\r\n            id          : \"dashBodyScroll\",\r\n            borderless  : true, \r\n            body        : {\r\n                id  : \"dashboardBody\",\r\n                css : \"dashboardBody\",\r\n                cols: [\r\n                    dashCharts\r\n                ]\r\n            }\r\n        };\r\n\r\n        const inner =  {   \r\n            id  : \"dashboardInfoContainerInner\",\r\n            rows: [\r\n                template,\r\n                content\r\n            ]\r\n        };\r\n\r\n        try{\r\n            container.addView(inner);\r\n        } catch (err){  \r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createDashInfo\");\r\n        } \r\n\r\n        setTableName( idsParam );\r\n            \r\n    }\r\n    createDashInfo ();\r\n\r\n    createFilterBtn();\r\n}\r\n\r\nfunction updateDash(){\r\n\r\n    const inner = $$(\"dashboardInfoContainerInner\");\r\n\r\n    const dashCharts = {\r\n        id  : \"dashboard-charts\",\r\n        view: \"flexlayout\",\r\n        css : \"webix_dash-charts-flex\",\r\n        rows: dashLayout,\r\n       \r\n    };\r\n \r\n\r\n    const dashBody = {\r\n        view        : \"scrollview\", \r\n        scroll      : \"y\",\r\n        id          : \"dashBodyScroll\",\r\n        borderless  : true, \r\n        body        : {\r\n            id  : \"dashboardBody\",\r\n            css : \"dashboardBody\",\r\n            cols: [\r\n                dashCharts\r\n            ]\r\n        }\r\n    };\r\n\r\n\r\n    try{\r\n\r\n       inner.addView(dashBody);\r\n    } catch (err){  \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"updateDash\");\r\n    }\r\n}\r\n\r\nfunction getAjax ( url, inputsArray, idsParam, action=false ) {\r\n  \r\n    const getData = webix.ajax().get(url);\r\n\r\n    \r\n    getData.then(function(data){\r\n     \r\n        const dataCharts    = data.json().charts;\r\n        removeScroll();\r\n        \r\n        if ( !action ){ //не с помощью кнопки фильтра\r\n            removeItems ();\r\n        }\r\n      \r\n        function addSuccessView (){\r\n\r\n            createCharts( dataCharts );\r\n\r\n            if (!action){\r\n                createSpace( inputsArray,idsParam );\r\n            } else {\r\n                updateDash();\r\n            }\r\n            \r\n        }\r\n\r\n        if (dataCharts == undefined){\r\n            addErrorView  ();\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)   (\"error\",\"Ошибка при загрузке данных\");\r\n        } else {\r\n            addSuccessView();\r\n        }\r\n\r\n        function setScrollHeight(){\r\n            const log    = $$(\"logLayout\");\r\n            const logBth = $$(\"webix_log-btn\");\r\n            \r\n            function setLogHeight(height){\r\n                log.config.height = height;\r\n                log.resize();\r\n            }\r\n\r\n            try{\r\n                if ( logBth.config.icon == \"icon-eye\" ){\r\n                    setLogHeight(90);\r\n                    setLogHeight(5);\r\n                } else {\r\n                    setLogHeight(5);\r\n                    setLogHeight(90);\r\n                }\r\n            } catch (err){  \r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"setScrollHeight\");\r\n            }\r\n        }\r\n\r\n        setScrollHeight();\r\n\r\n        if ( url.includes(\"?\") || url.includes(\"sdt\") && url.includes(\"edt\") ){\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Данные обновлены\");\r\n        } \r\n      \r\n    });\r\n   \r\n    getData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"getAjax\");\r\n    });\r\n    \r\n}\r\n\r\nasync function getFieldsData ( idsParam ){\r\n    \r\n    if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n        await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"fields\"); \r\n    }\r\n\r\n    function createDashSpace (){\r\n     \r\n        let findAction;\r\n        let singleItemContent;\r\n        let fields = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content;\r\n        let inputsArray= [];\r\n\r\n        function setAdaptiveWidth(elem){\r\n            const child       = elem.getNode().firstElementChild;\r\n            child.style.width = elem.$width+\"px\";\r\n\r\n            const inp         = elem.getInputNode();\r\n            inp.style.width   = elem.$width-5+\"px\";\r\n        }\r\n     \r\n        function createFilterElems (inputs,el){\r\n           \r\n            function createDate(type,input){\r\n                const dateTemplate = {\r\n                    view        : \"datepicker\",\r\n                    format      : \"%d.%m.%y\",\r\n                    editable    : true,\r\n                    value       : new Date(),\r\n                    placeholder : input.label,\r\n                    height      : 48,\r\n                    on          : {\r\n                        onAfterRender : function () {\r\n                            this.getInputNode().setAttribute(\"title\",input.comment);\r\n   \r\n                           setAdaptiveWidth(this);\r\n                        },\r\n                    }\r\n                };\r\n\r\n                if (type == \"first\"){\r\n                    const dateFirst = dateTemplate;\r\n                    dateFirst.id    = \"dashDatepicker_\"+\"sdt\";\r\n                    return dateFirst;\r\n                } else if (type == \"last\"){\r\n                    const dateLast  = dateTemplate;\r\n                    dateLast.id     = \"dashDatepicker_\"+\"edt\";\r\n                    return dateLast;\r\n                }\r\n\r\n            }\r\n\r\n            function createTime (type){\r\n                let timeTemplate =  {   \r\n                    view        : \"datepicker\",\r\n                    format      : \"%H:%i:%s\",\r\n                    placeholder : \"Время\",\r\n                    height      : 48,\r\n                    editable    : true,\r\n                    value       : \"00:00:00\",\r\n                    type        : \"time\",\r\n                    seconds     : true,\r\n                    suggest     : {\r\n\r\n                        type    : \"timeboard\",\r\n                        hotkey  : \"enter\",\r\n                        body    : {\r\n                            button  : true,\r\n                            seconds : true,\r\n                            value   : \"00:00:00\",\r\n                            twelve  : false,\r\n                            height  : 110, \r\n                        },\r\n                    },\r\n                    on: {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute(\"title\",\"Часы, минуты, секунды\");\r\n                            setAdaptiveWidth(this);\r\n                        },\r\n                    }\r\n                };\r\n\r\n\r\n                if (type == \"first\"){\r\n                    const timeFirst = timeTemplate;\r\n                    timeFirst.id    = \"dashDatepicker_\"+\"sdt\"+\"-time\";\r\n                    return timeFirst;\r\n                } else if (type == \"last\"){\r\n                    const timeLast = timeTemplate;\r\n                    timeLast.id    = \"dashDatepicker_\"+\"edt\"+\"-time\"; \r\n                    return timeLast;\r\n                }\r\n            }\r\n\r\n            function createBtn (input, i){\r\n\r\n                function clickBtn(){\r\n                    const dateArray     = [];\r\n                    const compareDates  = [];\r\n\r\n                    let sdtDate         = \"\";\r\n                    let edtDate         = \"\";\r\n                    let validateEmpty   = true;\r\n\r\n                    function enumerationElements(el){\r\n                   \r\n                        const childs         = $$(el.id).getChildViews();\r\n                        const postformatTime = webix.Date.dateToStr(\"%H:%i:%s\");\r\n\r\n                        childs.forEach(function(elem,i){\r\n\r\n                            function createTime(type){\r\n                                const value = $$(elem.config.id).getValue();\r\n                          \r\n                                try{\r\n                                    if (value !==null ){\r\n\r\n                                        if (type == \"sdt\"){\r\n                                            sdtDate = sdtDate.concat( \" \" + postformatTime(value) );\r\n                                        } else if (type == \"edt\"){\r\n                                            edtDate = edtDate.concat( \" \" + postformatTime(value) );\r\n                                        }\r\n                                \r\n                                    } else {\r\n                                        validateEmpty = false;\r\n                                    }\r\n                                } catch (err){  \r\n                                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTime\");\r\n                                }\r\n                            }\r\n\r\n                            function createDate(type){\r\n                                try{\r\n                                    if ( $$(elem.config.id).getValue() !== null ){\r\n\r\n                                        const value          = $$(elem.config.id).getValue();\r\n                                        const postFormatData = webix.Date.dateToStr(\"%d.%m.%y\");\r\n\r\n                                        if (type == \"sdt\"){\r\n                                            sdtDate = postFormatData(value); \r\n                                        } else if ( type ==  \"edt\"){\r\n                                            edtDate = postFormatData(value);\r\n                                        }\r\n                                    \r\n                                    } else {\r\n                                        validateEmpty=false;\r\n                                    }\r\n                                } catch (err){  \r\n                                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createDate\");\r\n                                }\r\n                            }\r\n                            \r\n                            if (elem.config.id.includes(\"sdt\")){\r\n\r\n                                if (elem.config.id.includes(\"time\")){\r\n                                    createTime(\"sdt\");\r\n                                } else {\r\n                                    createDate(\"sdt\");\r\n                                }\r\n                            } else if (elem.config.id.includes(\"edt\")){\r\n                            \r\n                                if (elem.config.id.includes(\"time\")){\r\n                                    createTime(\"edt\");\r\n                                } else {\r\n                                    createDate(\"edt\");\r\n                                }\r\n                            \r\n                                \r\n                            }\r\n                        });\r\n                   \r\n                    }\r\n\r\n                    function setInputs(){\r\n                        try{\r\n                            inputsArray.forEach(function(el,i){\r\n                                if ( el.id.includes(\"container\") ){\r\n                                    enumerationElements(el);\r\n                                }\r\n                            });\r\n                        } catch (err){  \r\n                            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"setInputs\");\r\n                        }\r\n                    }\r\n\r\n                    function createQuery(){\r\n                        dateArray.push( \"sdt\" + \"=\" + sdtDate );\r\n                        dateArray.push( \"edt\" + \"=\" + edtDate );\r\n                     \r\n                        compareDates.push( sdtDate ); \r\n                        compareDates.push( edtDate );\r\n                    }\r\n\r\n                    function getDataInputs(){\r\n                        setInputs   ();\r\n                        createQuery ();\r\n                    }\r\n\r\n                    function sentQuery (){\r\n\r\n                        function removeCharts(){\r\n                            try{\r\n                                const charts = $$(\"dashboard-charts\");\r\n                                const body   = $$(\"dashboardBody\");\r\n                      \r\n                                if (charts){\r\n                                    body.removeView(charts);\r\n                                }\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"removeCharts\");\r\n                            }\r\n                        }\r\n\r\n                        function setStateBtn(){\r\n                            try{\r\n                                const btn = $$(\"dashBtn\"+i);\r\n                                btn.disable();\r\n                                setInterval(function () {\r\n                                    btn.enable();\r\n                                }, 1000);\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"setStateBtn\");\r\n                            }\r\n                        }\r\n\r\n                        if (validateEmpty){\r\n\r\n                            const compareFormatData = webix.Date.dateToStr (\"%Y/%m/%d %H:%i:%s\");\r\n                            const start             = compareFormatData    (compareDates[0]);\r\n                            const end               = compareFormatData    (compareDates[1]);\r\n\r\n                            const compareValue      = webix.filters.date.greater(start,end);\r\n                            \r\n                            if ( !(compareValue) || compareDates[0] == compareDates[1] ){\r\n\r\n                                const getUrl = findAction.url+\"?\"+dateArray.join(\"&\");\r\n                                removeCharts();\r\n                                getAjax(getUrl, inputsArray,idsParam, true);\r\n                                setStateBtn();\r\n\r\n                            } else {\r\n                                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", \"Начало периода больше, чем конец\");\r\n                            }\r\n                        } else {\r\n                            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", \"Не все поля заполнены\");\r\n                        }\r\n                    }\r\n            \r\n                    getDataInputs();\r\n                    sentQuery ();\r\n                }\r\n\r\n\r\n                \r\n\r\n                const btnFilter = {   \r\n                    rows: [\r\n                        { height:10 },\r\n                        {   view        :\"button\", \r\n                            css         :\"webix_primary\", \r\n                            id          :\"dashBtn\"+i,\r\n                            inputHeight :48,\r\n                            height      :48, \r\n                            minWidth    :100,\r\n                            maxWidth    :200,\r\n                            value       :input.label,\r\n                            click       :function () {\r\n                                clickBtn();\r\n                            },\r\n                            on          : {\r\n                                onAfterRender: function () {\r\n                                    this.getInputNode().setAttribute(\"title\",input.comment);\r\n                                    setAdaptiveWidth(this);\r\n                                },\r\n                            },\r\n\r\n                        },\r\n                        {}\r\n                    ]\r\n                };\r\n\r\n                return  btnFilter;\r\n            }\r\n\r\n            function createHead(text){\r\n                return {   \r\n                    template:text,\r\n                    height:30, \r\n                    borderless:true,\r\n                    css:\"webix_template-datepicker\"\r\n                };\r\n            }\r\n            \r\n            function createFilter (el){\r\n\r\n        \r\n         \r\n                Object.values(inputs).forEach(function(input,i){\r\n                    function createInputs(){\r\n\r\n                        const inputs = {   \r\n                            width   : 200,\r\n                            id      : \"datepicker-container\"+\"sdt\",\r\n                            rows    : [ \r\n\r\n                                createHead ( \"Начиная с:\"  ),\r\n                                createDate ( \"first\",input ),\r\n\r\n                                { height:10 },\r\n\r\n                                createTime (\"first\"),\r\n\r\n\r\n                                { height:20 },\r\n\r\n\r\n                                createHead ( \"Заканчивая:\" ),\r\n                                createDate ( \"last\", input ),\r\n\r\n                                { height:10 },\r\n\r\n                                createTime (\"last\"),\r\n\r\n                            ]\r\n                        };\r\n                 \r\n                        try{\r\n                            inputsArray.push( inputs );\r\n                        } catch (err){  \r\n                            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createInputs\");\r\n                        }\r\n                    }\r\n\r\n                    if (input.type == \"datetime\"&& input.order == 3){ //-------------- order\r\n                        let key = Object.keys(inputs)[i]; // заменены на sdt и edt\r\n                        createInputs();\r\n\r\n                    } else if (input.type == \"submit\"){\r\n\r\n                        const actionType    = input.action;\r\n                        findAction          = el.actions[actionType];\r\n                    \r\n                        inputsArray.push(\r\n                            createBtn (input, i)\r\n                        );\r\n\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n            createFilter (el);\r\n\r\n            return inputsArray;\r\n          \r\n        }\r\n \r\n        function autorefresh (el) {\r\n            if (el.autorefresh){\r\n\r\n                const userprefsOther = webix.storage.local.get(\"userprefsOtherForm\");\r\n                const counter        = userprefsOther.autorefCounterOpt;\r\n\r\n                const url            = singleItemContent.actions.submit.url;\r\n\r\n                try{\r\n                    if ( counter !== undefined ){\r\n\r\n                        if ( counter >= 15000 ){\r\n                            setInterval(function(){\r\n                                getAjax(url, inputsArray, idsParam);\r\n                            },  counter );\r\n            \r\n                        } else {\r\n                            setInterval(function(){\r\n                                getAjax(url, inputsArray, idsParam);\r\n                            }, 50000);\r\n                        }\r\n                    }\r\n\r\n                } catch (err){  \r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"autorefresh\");\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        const itemTreeId = getDashId(idsParam);\r\n        const fieldsVals = Object.values(fields);\r\n        \r\n        fieldsVals.forEach(function(el,i){\r\n\r\n            const fieldId = Object.keys(fields)[i];\r\n\r\n            if (el.type == \"dashboard\" && fieldId == itemTreeId) {\r\n      \r\n                const url    = el.actions.submit.url;\r\n                const inputs = createFilterElems (el.inputs,el);\r\n\r\n                getAjax(url, inputs,idsParam);\r\n                autorefresh (el);  \r\n            }\r\n        });\r\n    }\r\n\r\n    if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n        createDashSpace ();\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction getInfoDashboard ( idsParam ){\r\n\r\n    removeScroll();\r\n\r\n    if(!($$(\"dashBodyScroll\"))){\r\n        getFieldsData (idsParam);\r\n    }  \r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/getContent/getInfoDashboard.js?");

/***/ }),

/***/ "./src/js/blocks/getContent/getInfoEditTree.js":
/*!*****************************************************!*\
  !*** ./src/js/blocks/getContent/getInfoEditTree.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getInfoEditTree\": () => (/* binding */ getInfoEditTree)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\nconst logNameFile = \"getContent => getInfoEditTree\";\r\n\r\n\r\nfunction getInfoEditTree() {\r\n    const treeEdit  = $$(\"treeEdit\");\r\n    const url       = \"/init/default/api/\"+\"trees\";\r\n    const getData   = webix.ajax().get(url);\r\n\r\n    treeEdit.clearAll();\r\n\r\n    getData.then(function(data){\r\n\r\n        data = data.json().content;\r\n        data[0].pid = 0;\r\n        \r\n\r\n        const map = {}, \r\n            treeStruct = [],\r\n            treeData   = []\r\n        ;\r\n        \r\n        function createTreeItem(el){\r\n            return {\r\n                id    :el.id, \r\n                value :el.name, \r\n                pid   :el.pid, \r\n                data  :[]\r\n            };\r\n        }\r\n\r\n        function pushTreeData(){\r\n            try{\r\n                data.forEach(function(el,i){\r\n                    if (el.pid == 0){\r\n                        const rootElement = createTreeItem(el);\r\n\r\n                        rootElement.open  = true;\r\n                        treeData.push ( rootElement );\r\n\r\n                    } else {\r\n                        const element = createTreeItem(el);\r\n\r\n                        treeData.push (element );\r\n                    }\r\n                });\r\n            } catch (err) {\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"pushTreeData\");\r\n            }\r\n        }\r\n\r\n        function createStruct(){\r\n            try{\r\n                treeData.forEach(function(el,i){\r\n\r\n                    map[el.id] = i; \r\n\r\n                    if ( el.pid !== 0 && el.pid !== el.id && el.pid !== null ) {\r\n                        treeData[map[el.pid]].data.push(el);\r\n                    } else {\r\n                        treeStruct.push(el);\r\n                    }\r\n                });\r\n            } catch (err) {\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createStruct\")\r\n            }\r\n        }\r\n\r\n        pushTreeData();\r\n        createStruct();\r\n\r\n        treeEdit.parse(treeStruct);\r\n\r\n    });\r\n\r\n    getData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"content\",\"getInfoEditTree\");\r\n    });\r\n\r\n  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/getContent/getInfoEditTree.js?");

/***/ }),

/***/ "./src/js/blocks/getContent/getInfoTable.js":
/*!**************************************************!*\
  !*** ./src/js/blocks/getContent/getInfoTable.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getInfoTable\": () => (/* binding */ getInfoTable),\n/* harmony export */   \"createTableRows\": () => (/* binding */ createTableRows)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"getContent => getInfoTable\";\r\n\r\nfunction submitBtn (idElements, url, verb, rtype){\r\n\r\n    const valuesArray = [];\r\n\r\n    function refreshButton(){\r\n\r\n        function createQuery(){\r\n            try{\r\n                idElements.forEach((el,i) => {\r\n                    const val = $$(el.id).getValue();\r\n\r\n                    if (el.id.includes(\"customCombo\")){\r\n                        const textVal = $$(el.id).getText();\r\n                        valuesArray.push (el.name + \"=\" + textVal);\r\n\r\n                    } else if ( el.id.includes(\"customInputs\")     || \r\n                                el.id.includes(\"customDatepicker\") ){\r\n                        valuesArray.push ( el.name + \"=\" + val );\r\n\r\n                    }   \r\n                });\r\n            } catch (err){  \r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"refreshButton => createQuery\");\r\n            }\r\n        }\r\n  \r\n        createQuery();\r\n\r\n        const getData = webix.ajax( url + \"?\" + valuesArray.join(\"&\") );\r\n        \r\n        getData.then(function(data){\r\n            const tableView = $$(\"table-view\");\r\n            \r\n            function setTableState(){\r\n                data = data.json().content;\r\n                try{\r\n                    tableView.clearAll();\r\n\r\n                    \r\n                    if (data.length !== 0){\r\n                        tableView.hideOverlay(\"Ничего не найдено\");\r\n                        tableView.parse(data);\r\n                        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Данные обновлены\");\r\n\r\n                    } else {\r\n                        tableView.showOverlay(\"Ничего не найдено\");\r\n\r\n                    }\r\n                } catch (err){  \r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"refreshButton => setTableState\");\r\n                }\r\n            }\r\n\r\n            function setTableCounter(){\r\n                try{\r\n                    const findElementView = $$(\"table-view-findElements\");\r\n                    const prevCountRows   = tableView.count().toString();\r\n\r\n                    findElementView.setValues(prevCountRows);\r\n                } catch (err){  \r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"refreshButton => setTableCounter\");\r\n                }\r\n            }\r\n            if (data.json().err_type == \"i\"){\r\n                setTableState();\r\n                setTableCounter();\r\n\r\n            } else {\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(data.err,logNameFile,\"refreshButton\");\r\n            }\r\n        });\r\n        getData.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"refreshButton\");\r\n        });\r\n    }\r\n\r\n    function downloadButton(){\r\n\r\n        webix.ajax().response(\"blob\").get(url, function(text, blob, xhr) {\r\n            try {\r\n                webix.html.download(blob, \"table.docx\");\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"downloadButton\");\r\n            } \r\n        }).catch(err => {\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"downloadButton\");\r\n        });\r\n    }\r\n\r\n    function postButton(){\r\n\r\n        async function uploadData(formData,link){\r\n            fetch(link, {\r\n                method  : \"POST\", \r\n                body    : formData\r\n            })  \r\n   \r\n            .then(( response ) => response.json())\r\n            .then(function( data ){\r\n                const loadEl = $$(\"templateLoad\");\r\n       \r\n                if ( data.err_type == \"i\" ){\r\n                    loadEl.setValues( \"Файл загружен\" );\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)( \"success\",\"Файл успешно загружен\" );\r\n\r\n                } else {\r\n                    loadEl.setValues( \"Ошибка\" );\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)( \"error\", data.err );\r\n                }\r\n            })\r\n            \r\n            .catch(function(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"uploadData\");\r\n            });\r\n\r\n        }\r\n\r\n        function addLoadEl(container){\r\n            container.addView({\r\n                id:\"templateLoad\",\r\n                template: function(){\r\n                    const value      = $$(\"templateLoad\").getValues();\r\n                    const valsLength = Object.keys( value ).length;\r\n\r\n                    if ( valsLength !==0 ){\r\n                        return value;\r\n                    } else {\r\n                        return \"Загрузка ...\";\r\n                    }\r\n                },\r\n                borderless:true,\r\n            });\r\n        }\r\n        try{\r\n       \r\n            idElements.forEach((el,i) => {\r\n                if (el.id.includes(\"customUploader\")){\r\n                \r\n                    let value = Object.values($$(el.id).files.data.pull)[0];\r\n                    let link = $$(el.id).config.upload;\r\n\r\n                    let formData = new FormData();  \r\n                    let container = $$(el.id).getParentView();\r\n                    addLoadEl(container);\r\n\r\n                    formData.append(\"file\", value.file);\r\n\r\n                    uploadData(formData,link);\r\n                   \r\n                }\r\n            });\r\n        } catch (err){  \r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"postButton\");\r\n        } \r\n    }\r\n\r\n    if (verb==\"get\"){ \r\n        if(rtype==\"refresh\"){\r\n            refreshButton();\r\n        } else if (rtype==\"download\"){\r\n            downloadButton();\r\n        } \r\n    } else if (verb==\"post\"){\r\n        postButton();\r\n    } \r\n    \r\n}\r\n\r\nfunction createTableRows (idCurrTable,idsParam, offset=0){\r\n    const dataContent  = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content;\r\n    const data         = dataContent[idsParam];\r\n\r\n    const itemTreeId   = idsParam;\r\n\r\n    let idFindElem;\r\n\r\n    if (idCurrTable.includes(\"view\")){\r\n        idFindElem  = \"table-view-findElements\";\r\n    } else {\r\n        idFindElem  = \"table-findElements\";\r\n    }\r\n\r\n\r\n    function getItemData (table){\r\n\r\n        function setTableState(){\r\n            function enableBtn(btn){\r\n                try{\r\n                    if(!(btn.isEnabled())){\r\n                        btn.enable();\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableRows => setTableState\")\r\n                }\r\n            }\r\n         \r\n            if (table == \"table\"){\r\n                enableBtn ($$(\"table-newAddBtnId\"));\r\n                enableBtn ($$(\"table-filterId\"   ));\r\n                enableBtn ($$(\"table-exportBtn\"  ));\r\n\r\n            }\r\n      \r\n        }\r\n\r\n        function datePrefs (data){\r\n \r\n            let dateFormat;\r\n\r\n            const columns  = $$(table).getColumns();\r\n            const dateCols = [];\r\n\r\n            function searchDateCols (){\r\n                try{\r\n                    columns.forEach(function(col,i){\r\n                        if ( col.type == \"datetime\" ){\r\n                            dateCols.push( col.id );\r\n                        }\r\n                    });\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableRows => searchDateCols\")\r\n                }\r\n            }\r\n            searchDateCols ();\r\n        \r\n            data.forEach(function(el,i){\r\n\r\n                function dateFormatting ( elType ){\r\n                \r\n                    if ( el[elType] ){\r\n                        dateFormat = new Date( el[elType] );\r\n                        el[elType] = dateFormat;\r\n                        \r\n                    }\r\n                }\r\n\r\n                function setDateFormatting (){\r\n                    dateCols.forEach(function(el,i){\r\n                        dateFormatting (el);\r\n                    });\r\n                }\r\n\r\n                setDateFormatting ();\r\n             \r\n            });\r\n        }\r\n\r\n        function parseRowData (data){\r\n\r\n            const idCurrView= $$(idCurrTable);\r\n           \r\n            if (!offset){\r\n                idCurrView.clearAll();\r\n            }\r\n\r\n          \r\n    \r\n            function enableVisibleBtn(){\r\n                const viewBtn =  $$(\"table-view-visibleCols\");\r\n                const btn     =  $$(\"table-visibleCols\");\r\n\r\n                \r\n                function disableBtn(el){\r\n                    if (el){\r\n                        el.enable();\r\n                    }\r\n                }\r\n        \r\n                if ( viewBtn.isVisible() ){\r\n                    disableBtn (viewBtn);\r\n                } else if ( btn.isVisible() ){\r\n                    disableBtn (btn);\r\n                }\r\n              \r\n            }\r\n\r\n            function formattingBoolVals(){\r\n                const cols     = idCurrView.getColumns();\r\n                const boolsArr = [];\r\n\r\n                const boolKeys = [];\r\n\r\n                cols.forEach(function(el,i){\r\n                    if (el.type == \"boolean\"){\r\n                        boolsArr.push(el.id);\r\n                    }\r\n                });\r\n\r\n                function findBool(key){\r\n                    let check = false;\r\n                    boolsArr.forEach(function(el,i){\r\n                        if (el == key){\r\n                            check = true;\r\n                        } \r\n                    });\r\n               \r\n                    return check;\r\n                }\r\n\r\n           \r\n                function findKey(){\r\n                    const cols = idCurrView.getColumns();\r\n                    cols.forEach(function(key,i){\r\n                    \r\n                        if(findBool(key.id)){\r\n                            boolKeys.push(key.id);\r\n                        }\r\n                    });\r\n            \r\n                }\r\n                findKey  ();\r\n\r\n\r\n                function returnVal(element){\r\n                    boolKeys.forEach(function(el,i){\r\n                        if ( element[el] == false ){\r\n                            element[el] = 2;\r\n                        } else {\r\n                            element[el] = 1;\r\n                        }\r\n                    });\r\n   \r\n                }\r\n\r\n                data.forEach(function(el,i){\r\n                    returnVal(el);\r\n                });\r\n\r\n            }\r\n            formattingBoolVals();\r\n\r\n\r\n            function checkNotUnique(idAddRow){\r\n\r\n                Object.values(idCurrView.data.pull).forEach(function(el,i){\r\n            \r\n                    if ( el.id == idAddRow ){\r\n                        idCurrView.remove(el.id);\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n            try{\r\n                if ( !offset ){\r\n                    if (data.length !== 0){\r\n                        idCurrView.hideOverlay(\"Ничего не найдено\");\r\n                        idCurrView.parse(data);\r\n               \r\n                    } else {\r\n                        idCurrView.showOverlay(\"Ничего не найдено\");\r\n                        idCurrView.clearAll();\r\n                    }\r\n                \r\n                    setTimeout(() => {\r\n                        enableVisibleBtn();\r\n       \r\n                    }, 1000);\r\n                } else {\r\n           \r\n                \r\n                    data.forEach(function(el,i){\r\n                        checkNotUnique(el.id);\r\n                        idCurrView.add(el);\r\n                    });\r\n                }\r\n           \r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableRows => parseRowData\");\r\n            }\r\n        }\r\n\r\n\r\n        function setCounterVal (data){\r\n            try{\r\n                const prevCountRows = data;\r\n                $$(idFindElem).setValues(prevCountRows);\r\n                \r\n                if(idCurrTable == \"table\"){\r\n                    $$(\"table-findElements\").setValues(prevCountRows);\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableRows => setCounterVal\");\r\n            }\r\n        }\r\n\r\n\r\n\r\n        const tableElem = $$(table);\r\n        const limitLoad = 80;\r\n        const firstCol = tableElem.getColumns()[0].id;\r\n\r\n        function returnFilter(){\r\n            const filterString = tableElem.config.filter;\r\n\r\n            let filter;\r\n            if (filterString){\r\n                filter = filterString;\r\n            } else {\r\n                filter = itemTreeId +'.id+%3E%3D+0';\r\n        \r\n            }\r\n            return filter;\r\n        }\r\n\r\n        function returnSort(){\r\n            let sort;\r\n\r\n            const sortCol  = tableElem.config.sort.idCol;\r\n            const sortType = tableElem.config.sort.type;\r\n        \r\n            if (sortCol){\r\n                if (sortType == \"desc\"){\r\n                    sort = \"~\" + itemTreeId + '.' + sortCol;\r\n                } else {\r\n                    sort =       itemTreeId + '.' + sortCol;\r\n                }\r\n            } else {\r\n                    sort =       itemTreeId + '.' + firstCol;\r\n            }\r\n\r\n            return sort;\r\n        }\r\n      \r\n        function loadTableData(){\r\n            tableElem.load({\r\n                $proxy : true,\r\n                load   : function(view, params){\r\n                    const filter = returnFilter();\r\n                    const sort   = returnSort  ();\r\n\r\n                    const query = [ \"query=\" + filter, \r\n                                    \"sorts=\" + sort, \r\n                                    \"limit=\" + limitLoad, \r\n                                    \"offset=\"+ offset\r\n                    ];\r\n\r\n              \r\n                    let url;\r\n                    const tableType = tableElem.config.id;\r\n                    if (tableType == \"table\"){\r\n                        url = \"/init/default/api/smarts?\"+ query.join(\"&\");\r\n                    } else {\r\n                        url = \"/init/default/api/\" + itemTreeId;\r\n                    }\r\n\r\n                    const getData = webix.ajax().get( url );\r\n\r\n                    getData.then(function(data){\r\n                        data = data.json();\r\n\r\n                        \r\n                        if ( !offset && tableType == \"table\" ){\r\n                            tableElem.config.reccount  = data.reccount;\r\n                            tableElem.config.idTable   = itemTreeId;\r\n                            tableElem.config.limitLoad = limitLoad;\r\n                            setCounterVal (data.reccount.toString());\r\n                        }\r\n\r\n                        if( tableType == \"table-view\" ){\r\n                            tableElem.config.idTable   = itemTreeId;\r\n                            setCounterVal (data.content.length.toString());\r\n                        }\r\n\r\n                        data  = data.content;\r\n\r\n                        try {\r\n                            setTableState ();\r\n                            datePrefs     (data);\r\n                            parseRowData  (data);\r\n                        \r\n                        \r\n                        } catch (err){\r\n                   \r\n                            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"getItemData => table load\");\r\n                        } \r\n                    \r\n                    });\r\n                    \r\n                    getData.fail(function(err){\r\n\r\n                        function tableErrorState (){\r\n                            const prevCountRows = \"-\";\r\n                            function disableBtn(btn){\r\n                                if(btn){\r\n                                    btn.disable();\r\n                                }\r\n                            }\r\n                            try {\r\n                                $$(idFindElem)          .setValues(prevCountRows.toString());\r\n                                $$(\"table-findElements\").setValues(prevCountRows.toString());\r\n        \r\n                                disableBtn ($$(\"table-newAddBtnId\"));\r\n                                disableBtn ($$(\"table-filterId\"   ));\r\n                                disableBtn ($$(\"table-exportBtn\"  ));\r\n                         \r\n  \r\n                          \r\n                            } catch (err){\r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"tableErrorState\");\r\n\r\n                            }\r\n                        }\r\n\r\n                        function notAuthPopup(){\r\n                \r\n                            function destructPopup(){\r\n                                try{\r\n                                    const popup = $$(\"popupNotAuth\");\r\n                                    if (popup){\r\n                                        popup.destructor();\r\n                                    }\r\n                                } catch (err){\r\n                                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"notAuthPopup btnClosePopup click\");\r\n                                }\r\n                            }\r\n                            const popupHeadline = {   \r\n                                template    : \"Вы не авторизованы\", \r\n                                width       : 250,\r\n                                css         : \"webix_template-not-found\", \r\n                                borderless  : true, \r\n                                height      : 20 \r\n                            };\r\n                            const btnClosePopup = {\r\n                                view  : \"button\",\r\n                                id    : \"buttonClosePopup\",\r\n                                css   : \"popup_close-btn\",\r\n                                type  : \"icon\",\r\n                                width : 35,\r\n                                icon: 'wxi-close',\r\n                                click:function(){\r\n                                    destructPopup();\r\n                                }\r\n                            };\r\n            \r\n                            const popupSubtitle = {   \r\n                                template    : \"Войдите в систему, чтобы продолжить.\",\r\n                                css         : \"webix_template-not-found-descr\", \r\n                                borderless  : true, \r\n                                height      : 35 \r\n                            };\r\n            \r\n                            const mainBtnPopup = {\r\n                                view    : \"button\",\r\n                                css     : \"webix_btn-go-login\",\r\n                                height  : 46,\r\n                                value   : \"Войти\",\r\n                                click   : function(){\r\n                                    function navigate(){\r\n                                        try{\r\n                                            Backbone.history.navigate(\"/\", { trigger:true});\r\n                                            window.location.reload();\r\n                                        } catch (err){\r\n                                            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"notAuthPopup navigate\");\r\n                                        }\r\n                                    }\r\n                                    destructPopup();\r\n                                    navigate();\r\n                                 \r\n                               \r\n                                }\r\n                            };\r\n            \r\n                            webix.ui({\r\n                                view    : \"popup\",\r\n                                id      : \"popupNotAuth\",\r\n                                css     : \"webix_popup-prev-href\",\r\n                                width   : 340,\r\n                                height  : 125,\r\n                                modal   : true,\r\n                                position: \"center\",\r\n                                body    : {\r\n                                    rows: [\r\n                                    {rows: [ \r\n                                        { cols: [\r\n                                            popupHeadline,\r\n                                            {},\r\n                                            btnClosePopup,\r\n                                        ]},\r\n                                        popupSubtitle,\r\n                                        mainBtnPopup,\r\n                                        { height : 20 }\r\n                                    ]}]\r\n                                    \r\n                                },\r\n            \r\n                            }).show();\r\n                        }\r\n\r\n                        tableErrorState ();\r\n\r\n                        if (err.status == 401){\r\n                    \r\n                            if (!($$(\"popupNotAuth\"))){\r\n                                notAuthPopup();\r\n                            }\r\n                      \r\n                        } \r\n\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"getInpoTable\",\"getData\");\r\n                    });\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        const reccount = tableElem.config.reccount;\r\n\r\n        if (reccount){\r\n            const remainder = reccount - offset;\r\n\r\n            if (remainder > 0){\r\n                loadTableData(); \r\n            }\r\n\r\n        } else {\r\n            loadTableData(); \r\n        }\r\n\r\n       \r\n    }\r\n\r\n    function setDataRows (){\r\n        if(data.type == \"dbtable\"){\r\n            getItemData (\"table\");\r\n        } else if (data.type == \"tform\"){\r\n            getItemData (\"table-view\");\r\n        }\r\n    }\r\n\r\n    function autorefreshProperty (){\r\n        if (data.autorefresh){\r\n\r\n            const userprefsOther = webix.storage.local.get(\"userprefsOtherForm\");\r\n            let counter;\r\n\r\n            if (userprefsOther){\r\n                counter = userprefsOther.autorefCounterOpt;\r\n            }\r\n\r\n            if ( userprefsOther && counter !== undefined ){\r\n                if ( counter >= 15000 ){\r\n\r\n                    setInterval(function(){\r\n                        if( data.type == \"dbtable\" ){\r\n                            getItemData (\"table\");\r\n                        } else if ( data.type == \"tform\" ){\r\n                            getItemData (\"table-view\");\r\n                        }\r\n                    }, counter );\r\n                } else {\r\n                    setInterval(function(){\r\n                        if( data.type == \"dbtable\" ){\r\n                            getItemData (\"table\");\r\n                        } else if ( data.type == \"tform\" ){\r\n                            getItemData (\"table-view\");\r\n                        }\r\n                    }, 120000);\r\n                }\r\n            }\r\n        } \r\n    }\r\n\r\n    setDataRows ();\r\n    autorefreshProperty ();\r\n\r\n            \r\n}\r\n\r\nfunction getInfoTable (idCurrTable,idsParam) {\r\n \r\n    let filterBar,\r\n        titem\r\n    ;\r\n\r\n    function getValsTable (){\r\n        titem = $$(\"tree\").getItem(idsParam);\r\n\r\n        if (!titem){\r\n            titem = idsParam;\r\n        }\r\n\r\n        try{ \r\n            if (idCurrTable.includes(\"view\")){\r\n            \r\n                filterBar = $$(\"table-view-filterId\").getParentView();\r\n            \r\n            } else {\r\n                filterBar = $$(\"table-filterId\").getParentView();\r\n              \r\n            }\r\n        } catch (err){  \r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"getValsTable\");\r\n        }\r\n    }\r\n\r\n    function preparationTable (){\r\n        try{\r\n            $$(idCurrTable).clearAll();\r\n\r\n            if (idCurrTable == \"table-view\"){\r\n                const popup       = $$(\"contextActionsPopup\");\r\n                const btnAdaptive = $$(\"contextActionsBtnAdaptive\");\r\n                const inputs      = $$( \"customInputs\" );\r\n                const inputsMain  = $$(\"customInputsMain\");\r\n                \r\n                \r\n                if (popup){\r\n                    popup.destructor();\r\n                }\r\n      \r\n                \r\n                if (btnAdaptive){\r\n                    filterBar.removeView(btnAdaptive);\r\n                }\r\n\r\n                if (inputs){\r\n                    const parent = inputs.getParentView();\r\n                    parent.removeView(inputs);\r\n                }\r\n\r\n                if (inputsMain){\r\n                    const parent = inputsMain.getParentView();\r\n                    parent.removeView(inputsMain);\r\n                }\r\n            \r\n            }\r\n        } catch (err){  \r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"preparationTable\");\r\n        }\r\n    }\r\n\r\n\r\n    function createExperementalElement (){\r\n        _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content.treeTemplate={\r\n            \"fields\": {\r\n                \"id\": {\r\n                    \"type\": \"id\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 512,\r\n                    \"label\": \"Id\",\r\n                    \"comment\": null,\r\n                    \"default\": \"None\"\r\n                },\r\n                \"pid\": {\r\n                    \"type\": \"reference trees\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 512,\r\n                    \"label\": \"Родитель\",\r\n                    \"comment\": null,\r\n                    \"default\": \"None\"\r\n                },\r\n                \"owner\": {\r\n                    \"type\": \"reference auth_user\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 512,\r\n                    \"label\": \"Владелец\",\r\n                    \"comment\": null,\r\n                    \"default\": \"None\"\r\n                },\r\n                \"ttype\": {\r\n                    \"type\": \"integer\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 512,\r\n                    \"label\": \"Тип\",\r\n                    \"comment\": \"Тип записи|1=системная;2=пользовательская|Перечисление\",\r\n                    \"default\": \"1\"\r\n                },\r\n                \"name\": {\r\n                    \"type\": \"string\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 100,\r\n                    \"label\": \"Наименование\",\r\n                    \"comment\": null,\r\n                    \"default\": \"\"\r\n                },\r\n                \"descr\": {\r\n                    \"type\": \"string\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 1000,\r\n                    \"label\": \"Описание\",\r\n                    \"comment\": null,\r\n                    \"default\": \"\"\r\n                },\r\n                \"value\": {\r\n                    \"type\": \"string\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 1000,\r\n                    \"label\": \"Значение\",\r\n                    \"comment\": null,\r\n                    \"default\": \"\"\r\n                },\r\n                \"cdt\": {\r\n                    \"type\": \"datetime\",\r\n                    \"unique\": false,\r\n                    \"notnull\": false,\r\n                    \"length\": 512,\r\n                    \"label\": \"Создано\",\r\n                    \"comment\": null,\r\n                    \"default\": \"now\"\r\n                }\r\n            },\r\n            \"singular\": \"Классификатор-пример\",\r\n            \"ref_name\": \"name\",\r\n            \"plural\": \"Классификаторы-пример\",\r\n            \"type\": \"treeConf\"\r\n            \r\n        };\r\n    }\r\n\r\n    function createTableCols (){\r\n  \r\n        const dataContent   = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content;\r\n        const data          = dataContent[idsParam];\r\n        const dataFields    = data.fields;\r\n        const colsName      = Object.keys(data.fields);\r\n        const columnsData   = [];\r\n        const table         = $$(idCurrTable);\r\n \r\n        let fieldType;\r\n     \r\n        function refreshCols(columnsData){\r\n            if(table){\r\n                table.refreshColumns(columnsData);\r\n            }\r\n        }\r\n\r\n\r\n        const sumWidth = [];\r\n        function setColsUserSize(storageData){\r\n          \r\n            storageData.values.forEach(function (el,i){\r\n                sumWidth.push(el.width);\r\n                table.setColumnWidth(el.column, el.width);\r\n            });   \r\n        }\r\n\r\n        function getUserPrefs(){\r\n   \r\n            const storageData = webix.storage.local.get(\"visibleColsPrefs_\"+idsParam);\r\n            const allCols     = table.getColumns(true);\r\n\r\n            if ( storageData && storageData.values.length ){\r\n                setColsUserSize(storageData);  \r\n            }\r\n\r\n            function setColsSize(col){\r\n                let countCols;\r\n                let containerWidth;\r\n          \r\n                if(storageData && storageData.values.length){\r\n                    countCols  = storageData.values.length;\r\n                } else {\r\n                    const cols = table.getColumns(true);\r\n                    countCols  = cols .length;\r\n                }\r\n\r\n                containerWidth = window.innerWidth - $$(\"tree\").$width - 25;\r\n\r\n                const tableWidth = containerWidth - 17;\r\n                const colWidth   = tableWidth / countCols;\r\n\r\n                table.setColumnWidth(col, colWidth);\r\n            }\r\n            \r\n            function findUniqueCols(col){\r\n                let result = false;\r\n    \r\n                storageData.values.forEach(function(el){\r\n            \r\n                    if (el.column == col){\r\n                        result = true;\r\n                    }\r\n\r\n                });\r\n                return result;\r\n            }\r\n\r\n            function setWidthLastCol(){\r\n                const containerWidth = window.innerWidth - $$(\"tree\").$width - 77; \r\n                const reduce = sumWidth.reduce((a, b) => +a + +b, 0);\r\n\r\n                if (reduce < containerWidth){\r\n                    const cols       = table.getColumns();\r\n                    const lastCol    = cols[cols.length-1];\r\n                    const difference = containerWidth - reduce;\r\n                    const oldWidth   = lastCol.width;\r\n                    const newWidth   = oldWidth + difference;\r\n       \r\n                    table.setColumnWidth(lastCol.id, newWidth);\r\n                    \r\n                }\r\n\r\n            }\r\n\r\n            function setVisibleCols(){\r\n                allCols.forEach(function(el,i){\r\n\r\n                    if (findUniqueCols(el.id)){\r\n                        if( !( table.isColumnVisible(el.id) ) ){\r\n                            table.showColumn(el.id);\r\n                        }\r\n                    } else {\r\n                        const colIndex = table.getColumnIndex(el.id);\r\n                        if(table.isColumnVisible(el.id) && colIndex !== -1){\r\n                            table.hideColumn(el.id);\r\n                        }\r\n                    }\r\n                        \r\n                });\r\n            }\r\n\r\n            function setPositionCols(){\r\n                storageData.values.forEach(function(el){\r\n                    table.moveColumn(el.column,el.position);\r\n                        \r\n                });\r\n            } \r\n           \r\n            if( storageData && storageData.values.length ){\r\n                setVisibleCols();\r\n                setPositionCols();\r\n                setWidthLastCol();\r\n\r\n            } else {   \r\n             \r\n                allCols.forEach(function(el,i){\r\n                    setColsSize(el.id);  \r\n                });\r\n               \r\n            }\r\n    \r\n            \r\n        }\r\n\r\n        try{\r\n            colsName.forEach(function(data) {\r\n                fieldType = dataFields[data].type;\r\n\r\n                function createReferenceCol (){\r\n                    try{\r\n                        const findTableId           = fieldType.slice(10);\r\n                        dataFields[data].editor     = \"combo\";\r\n                        dataFields[data].collection = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getComboOptions) (findTableId);\r\n                        dataFields[data].template   = function(obj, common, val, config){\r\n                            const item = config.collection.getItem(obj[config.id]);\r\n                            return item ? item.value : \"\";\r\n                        };\r\n                    }catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, logNameFile, \"createTableCols => createReferenceCol\")\r\n                    }\r\n                }\r\n\r\n                function createDatetimeCol  (){\r\n                    try{\r\n                        dataFields[data].format = webix.Date.dateToStr(\"%d.%m.%Y %H:%i:%s\");\r\n                        dataFields[data].editor = \"date\";\r\n                        dataFields[data].css    = {\"text-align\":\"right\"};\r\n                    }catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, logNameFile, \"createTableCols => createDatetimeCol\")\r\n                    }\r\n                }\r\n                \r\n                function createTextCol      (){\r\n                    try{\r\n           \r\n                        dataFields[data].editor = \"text\";\r\n                        dataFields[data].sort   = \"string\";\r\n                    }catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableCols => createTextCol\")\r\n                    }\r\n                }\r\n\r\n              \r\n                function createIntegerCol   (){\r\n                    try{\r\n                        dataFields[data].editor         = \"text\";\r\n                        dataFields[data].sort           = \"int\";\r\n                        dataFields[data].numberFormat   = \"1 111\";\r\n                        dataFields[data].css            = {\"text-align\":\"right\"};\r\n                        \r\n                    }catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableCols => createIntegerCol\");\r\n                    }\r\n                }\r\n                function createBoolCol      (){\r\n                    try{\r\n                        dataFields[data].editor     = \"combo\";\r\n                        dataFields[data].sort       = \"text\";\r\n                        dataFields[data].collection = [\r\n                            {id : 1, value : \"Да\" },\r\n                            {id : 2, value : \"Нет\"}\r\n                        ];\r\n                    }catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableCols => createBoolCol\");\r\n                    }\r\n                }\r\n\r\n                if (fieldType.includes(\"reference\")){\r\n                    createReferenceCol();\r\n                } else if ( fieldType == \"datetime\"){\r\n                    createDatetimeCol ();\r\n                } else if ( fieldType == \"boolean\"){\r\n                    createBoolCol     ();\r\n                } else if ( fieldType == \"integer\" || fieldType == \"id\"){\r\n                    createIntegerCol  ();\r\n                } else {\r\n                    createTextCol     ();\r\n                }\r\n\r\n\r\n                function setIdCol       (){\r\n                    dataFields[data].id         = data;\r\n                }\r\n\r\n                function setFillCOl     (){\r\n             \r\n                    const length     = Object.values(dataFields).length;\r\n                    const tableWidth = $$(\"tableContainer\").$width-17;\r\n                    const colWidth   = tableWidth/length;\r\n               \r\n                    dataFields[data].width  = colWidth;\r\n                }\r\n\r\n                function setHeaderCol   (){\r\n                    dataFields[data].header     = dataFields[data][\"label\"];\r\n              \r\n                }\r\n\r\n                function userPrefsId    (){\r\n                    const setting = webix.storage.local.get(\"userprefsOtherForm\");\r\n\r\n                    if( setting && setting.visibleIdOpt == \"2\" ){\r\n                        dataFields[data].hidden = true;\r\n                    }\r\n                }  \r\n\r\n           \r\n\r\n\r\n                function pushColsData(){ \r\n               \r\n                    try{        \r\n                        if (dataFields[data].label){\r\n                            columnsData.push(dataFields[data]);\r\n                        }\r\n        \r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableCols => pushColsData\");\r\n                    }\r\n             \r\n                }\r\n\r\n            \r\n                setIdCol    ();\r\n                setFillCOl  ();\r\n                setHeaderCol();\r\n\r\n                if(dataFields[data].id == \"id\"){\r\n                    userPrefsId();\r\n                }\r\n               \r\n                pushColsData();\r\n        \r\n            });\r\n\r\n\r\n            refreshCols(columnsData);\r\n\r\n            getUserPrefs();\r\n\r\n \r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"createTableCols\");\r\n        }\r\n\r\n\r\n        return columnsData;\r\n    }\r\n\r\n    function createDetailAction (columnsData){\r\n        let idCol;\r\n        let actionKey;\r\n        let checkAction     = false;\r\n\r\n        const dataContent   = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content;\r\n        const data          = dataContent[idsParam];\r\n        const table         = $$(idCurrTable);\r\n\r\n        columnsData.forEach(function(field,i){\r\n            if( field.type  == \"action\" && data.actions[field.id].rtype == \"detail\"){\r\n                checkAction = true;\r\n                idCol       = i;\r\n                actionKey   = field.id;\r\n            } \r\n        });\r\n        \r\n        if (actionKey !== undefined){\r\n            const urlFieldAction = data.actions[actionKey].url;\r\n        \r\n            if (checkAction){\r\n                const columns = table.config.columns;\r\n                columns.splice(0,0,{ \r\n                    id      :\"action-first\"+idCol, \r\n                    maxWidth:130, \r\n                    src     :urlFieldAction, \r\n                    css     :\"action-column\",\r\n                    label   :\"Подробнее\",\r\n                    header  :\"Подробнее\", \r\n                    template:\"<span class='webix_icon wxi-angle-down'></span> \"\r\n                });\r\n\r\n                table.refreshColumns();\r\n            }\r\n        }\r\n    \r\n\r\n    }\r\n    \r\n\r\n    function createDynamicElems (){\r\n        const dataContent       = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content;\r\n        const data              = dataContent[idsParam];  \r\n        const dataInputsArray   = data.inputs;\r\n\r\n        function setAdaptiveWidth(elem){\r\n            const child       = elem.getNode().firstElementChild;\r\n            child.style.width = elem.$width+\"px\";\r\n\r\n            const inp         = elem.getInputNode();\r\n            inp.style.width   = elem.$width-5+\"px\";\r\n        }\r\n      \r\n        function generateCustomInputs (){  \r\n            const customInputs  = [];\r\n            const objInuts      = Object.keys(data.inputs);\r\n\r\n            function createTextInput    (el,i){\r\n                return {   \r\n                    view            : \"text\",\r\n                    placeholder     : dataInputsArray[el].label, \r\n                    id              : \"customInputs\"+i,\r\n                    height          : 48,\r\n                    labelPosition   : \"top\",\r\n                    on              : {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute(\"title\",dataInputsArray[el].comment);\r\n                            setAdaptiveWidth(this);\r\n                        },\r\n                        onChange:function(){\r\n                            const inputs = $$(\"customInputs\").getChildViews();\r\n\r\n                            inputs.forEach(function(el,i){\r\n                                const view = el.config.view;\r\n                                const btn  = $$(el.config.id);\r\n\r\n                                if (view == \"button\" && !( btn.isEnabled() )){\r\n                                    btn.enable();\r\n                                }\r\n                            });\r\n    \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            function getOptionData      (dataInputsArray,el){\r\n                const url = \"/init/default/api/\" + dataInputsArray[el].apiname;\r\n\r\n                return new webix.DataCollection({url:{\r\n                    $proxy:true,\r\n                    load: function(){\r\n                        return ( webix.ajax().get(url).then(function (data) {   \r\n                                \r\n                            const dataSrc     = data.json().content;\r\n                            const dataOptions = [];\r\n                            let optionElement;\r\n\r\n                            function dataTemplate(i,valueElem){\r\n                            const template = { \r\n                                    id    : i + 1, \r\n                                    value : valueElem\r\n                                };\r\n                            return template;\r\n                            }\r\n            \r\n                            function createOptions(){\r\n                                try{\r\n                                    if ( dataSrc[0].name !== undefined ){\r\n                                        \r\n                                        dataSrc.forEach(function(data, i) {\r\n                                            optionElement = dataTemplate(i,data.name);\r\n                                            dataOptions.push(optionElement);\r\n                                        });\r\n                                    \r\n                                    } else {\r\n                                        dataSrc.forEach(function (data, i) {\r\n                                            optionElement = dataTemplate(i,data);\r\n                                            dataOptions.push(optionElement);\r\n                                        });\r\n    \r\n                                    }\r\n                            \r\n                                } catch (err){\r\n                                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"generateCustomInputs => getOptionData\")\r\n                                } \r\n                            }\r\n\r\n                            createOptions();\r\n\r\n                            return dataOptions;\r\n\r\n                        }).catch(err => {\r\n                            console.log(err);\r\n                            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err,logNameFile,\"generateCustomInputs => getOptionData\");\r\n                            \r\n                        }));\r\n                        \r\n                    \r\n                        \r\n                    }\r\n                }});\r\n            }\r\n    \r\n            function createSelectInput  (el,i){\r\n            \r\n                return   {   \r\n                    view          : \"combo\",\r\n                    height        : 48,\r\n                    id            : \"customCombo\"+i,\r\n                    placeholder   : dataInputsArray[el].label, \r\n                    labelPosition : \"top\", \r\n                    options       : {\r\n                        data : getOptionData ( dataInputsArray, el )\r\n                    },\r\n                    on: {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute( \"title\", dataInputsArray[el].comment );\r\n                            setAdaptiveWidth(this);\r\n                        },\r\n                    }               \r\n                };\r\n            }\r\n    \r\n            function createDeleteAction (i){\r\n                const table     = $$(idCurrTable);\r\n                const countCols = table.getColumns().length;\r\n                const columns   = table.config.columns;\r\n   \r\n                try{\r\n                    columns.splice (countCols, 0 ,{ \r\n                        id      : \"action\"+i, \r\n                        header  : \"Действие\",\r\n                        label   : \"Действие\",\r\n                        css     : \"action-column\",\r\n                        maxWidth: 100, \r\n                        template: \"{common.trashIcon()}\"\r\n                    });\r\n        \r\n                    table.refreshColumns();\r\n\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"generateCustomInputs => createDeleteAction\")\r\n                } \r\n\r\n            }\r\n\r\n            function getInputsId        (element){\r\n                const parent     = element.getParentView();\r\n                const childs     = parent .getChildViews();\r\n                const idElements = [];\r\n\r\n                try{\r\n                    childs.forEach((el,i) => {\r\n                        const view = el.config.view;\r\n                        const id   = el.config.id;\r\n                        if ( id !== undefined ){\r\n                            if ( view == \"text\" ){\r\n                                idElements.push({\r\n                                    id  : id, \r\n                                    name: \"substr\"\r\n                                });\r\n\r\n                            } else if ( view == \"combo\"){\r\n                                idElements.push({\r\n                                    id  : id, \r\n                                    name: \"valtype\"\r\n                                });\r\n                            } else if ( view == \"uploader\"    || \r\n                                        view == \"datepicker\"  ){\r\n                                idElements.push({ \r\n                                    id : id \r\n                                });\r\n                            }\r\n                        }\r\n\r\n                    });\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"generateCustomInputs => getInputsId\");\r\n                } \r\n                return idElements;\r\n            }\r\n    \r\n            function createDeleteBtn    (el,findAction,i){\r\n                return {   \r\n                    view        : \"button\", \r\n                    id          : \"customBtnDel\"+i,\r\n                    css         : \"webix_danger\", \r\n                    type        : \"icon\", \r\n                //    disabled    : true,\r\n                    icon        : \"icon-trash\",\r\n                    inputWidth  : 55,\r\n                    inputHeight : 35,\r\n                    value       : dataInputsArray[el].label,\r\n                    click       : function (id) {\r\n                        const idElements = getInputsId (this);\r\n                        submitBtn( idElements, findAction.url, \"delete\" );\r\n                    },\r\n                    on          : {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute( \"title\", dataInputsArray[el].comment );\r\n                        },\r\n                    },\r\n                };\r\n            }\r\n    \r\n            function createCustomBtn    (el,findAction,i){\r\n                return {   \r\n                    view        : \"button\", \r\n                    css         : \"webix_primary\", \r\n                    id          : \"customBtn\"+i,\r\n                    height      : 42,\r\n                    value       : dataInputsArray[el].label,\r\n                    click       : function (id) {\r\n                        const idElements = getInputsId (this);\r\n                        const btn        =  $$(\"contextActionsPopup\");\r\n\r\n                        if (findAction.verb== \"GET\"){\r\n                            if ( findAction.rtype == \"refresh\") {\r\n                                submitBtn( idElements, findAction.url, \"get\", \"refresh\" );\r\n                            } else if (findAction.rtype == \"download\") {\r\n                                submitBtn( idElements, findAction.url, \"get\", \"download\");\r\n                            }\r\n                            \r\n                        } else if ( findAction.verb == \"POST\" ){\r\n                            submitBtn( idElements, findAction.url, \"post\" );\r\n                            $$(\"customBtn\" + i ).disable();\r\n                        } \r\n                        else if (findAction.verb == \"download\"){\r\n                            submitBtn( idElements, findAction.url, \"get\", \"download\", id );\r\n                        }\r\n                            \r\n                        if (btn){\r\n                            btn.hide();\r\n                        }\r\n                    \r\n                    },\r\n                    on: {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute( \"title\", dataInputsArray[el].comment );\r\n                            setAdaptiveWidth(this);\r\n                        },\r\n                    },\r\n                };\r\n            }\r\n    \r\n            function createUpload       (el,i){\r\n                return  {   \r\n                    view         : \"uploader\", \r\n                    value        : \"Upload file\", \r\n                    id           : \"customUploader\"+i,\r\n                    height       : 48,\r\n                    autosend     : false,\r\n                    upload       : data.actions.submit.url,\r\n                    label        : dataInputsArray[el].label, \r\n                    labelPosition: \"top\",\r\n                    on: {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute( \"title\", dataInputsArray[el].comment );\r\n                            setAdaptiveWidth(this);\r\n                            const parent = this  .getParentView();\r\n                            const childs = parent.getChildViews();\r\n\r\n                            childs.forEach(function(el,i){\r\n                                if (el.config.id.includes(\"customBtn\")){\r\n                                    el.disable();\r\n                                }\r\n                            });\r\n                        },\r\n                        onBeforeFileAdd:function(){\r\n                            const loadEl = $$(\"templateLoad\");\r\n                            if (loadEl){\r\n                                loadEl.getParentView().removeView(loadEl);\r\n                            }\r\n                        },\r\n                        onAfterFileAdd:function(file){\r\n                            const parent = this  .getParentView();\r\n                            const childs = parent.getChildViews();\r\n\r\n                            childs.forEach(function(el,i){\r\n                                if (el.config.id.includes(\"customBtn\")){\r\n                                    el.enable();\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    }\r\n                };\r\n            }\r\n    \r\n            function createDatepicker   (el,i){\r\n                return {   \r\n                    view         : \"datepicker\",\r\n                    format       : \"%d.%m.%Y %H:%i:%s\",\r\n                    placeholder  :dataInputsArray[el].label,  \r\n                    id           :\"customDatepicker\"+i, \r\n                    timepicker   : true,\r\n                    labelPosition:\"top\",\r\n                    height       :48,\r\n                    on           : {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute( \"title\", dataInputsArray[el].comment );\r\n                            setAdaptiveWidth(this);\r\n                        },\r\n                        onChange:function(){\r\n                            try{\r\n                                const inputs = $$(\"customInputs\").getChildViews();\r\n                                inputs.forEach(function(el,i){\r\n                                    const btn  = $$(el.config.id);\r\n                                    const view = el.config.view;\r\n                                    if ( view == \"button\" && !(btn.isEnabled()) ){\r\n                                        btn.enable();\r\n                                    }\r\n                                });\r\n                            } catch (err){\r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"generateCustomInputs => createDatepicker onChange\");\r\n                            } \r\n    \r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            \r\n            function createCheckbox     (el,i){\r\n                return {   \r\n                    view       : \"checkbox\", \r\n                    id         : \"customСheckbox\"+i, \r\n                    css        : \"webix_checkbox-style\",\r\n                    labelRight : dataInputsArray[el].label, \r\n                    on         : {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute(\"title\",dataInputsArray[el].comment);\r\n                        },\r\n    \r\n                        onChange:function(){\r\n                            try{\r\n                                const inputs = $$(\"customInputs\").getChildViews();\r\n                                inputs.forEach(function(el,i){\r\n                                    const view = el.config.view;\r\n                                    const btn  = $$(el.config.id);\r\n                                    if (view == \"button\" && !(btn.isEnabled())){\r\n                                        btn.enable();\r\n                                    }\r\n                                });\r\n                            } catch (err){\r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"generateCustomInputs => createCheckbox onChange\");\r\n                            } \r\n                        }\r\n                    }\r\n                };\r\n            }\r\n\r\n\r\n            objInuts.forEach((el,i) => {\r\n\r\n                if ( dataInputsArray[el].type == \"string\" ){\r\n                    customInputs.push(\r\n                        createTextInput(el,i)\r\n                    );\r\n                } else if ( dataInputsArray[el].type == \"apiselect\" ) {\r\n                   \r\n                    customInputs.push(\r\n                        createSelectInput(el,i)\r\n                    );\r\n\r\n                } else if ( dataInputsArray[el].type == \"submit\" || \r\n                            dataInputsArray[el].type == \"button\" ){\r\n\r\n                    const actionType = dataInputsArray[el].action;\r\n                    const findAction = data.actions[actionType];\r\n                \r\n                    if ( findAction.verb == \"DELETE\" && actionType !== \"submit\" ){\r\n                        createDeleteAction (i);\r\n                    } else if ( findAction.verb == \"DELETE\" ) {\r\n                        customInputs.push(\r\n                            createDeleteBtn(el, findAction,i)\r\n                        );\r\n                    } else {\r\n                        customInputs.push(\r\n                            createCustomBtn(el, findAction,i)\r\n                                \r\n                        );\r\n                    }\r\n                } else if ( dataInputsArray[el].type == \"upload\" ){\r\n                    customInputs.push(\r\n                        createUpload(el,i)\r\n                    );\r\n                } else if ( dataInputsArray[el].type == \"datetime\" ){\r\n                    customInputs.push(\r\n                        createDatepicker(el,i)\r\n                    );\r\n                }else if ( dataInputsArray[el].type == \"checkbox\" ){\r\n                    customInputs.push(\r\n                        createCheckbox(el,i)\r\n                    );\r\n\r\n                } \r\n            });\r\n     \r\n\r\n            return customInputs;\r\n        }\r\n\r\n        function adaptiveCustomInputs (){\r\n\r\n            function maxInputsSize (customInputs){\r\n      \r\n                const inpObj = {\r\n                    id      : \"customInputs\",\r\n                    css     : \"webix_custom-inp\", \r\n                    rows    : [\r\n                        { height : 20 },\r\n                        { rows   : customInputs }\r\n                    ],\r\n                };\r\n\r\n           \r\n                function addInputs(){\r\n                   \r\n                    try{\r\n                        $$(\"viewToolsContainer\").addView( inpObj,0 );\r\n                  \r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"adaptiveCustomInputs => addInputs\");\r\n                    } \r\n                }\r\n                addInputs();\r\n\r\n            }\r\n\r\n            function removeContextBtn(){\r\n                try{\r\n                    const btn = $$(\"contextActionsBtn\");\r\n                    if (btn){\r\n                        $$(filterBar.config.id).removeView(btn);\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"adaptiveCustomInputs => removeContextBtn\");\r\n                } \r\n            }\r\n            removeContextBtn();\r\n\r\n           const tools = $$(\"formsTools\");\r\n           \r\n            function viewToolsBtnClick(){\r\n                const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n                const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n                const secondaryBtnClass = \"webix-transparent-btn\";\r\n                const formResizer       = $$(\"formsTools-resizer\");\r\n                const formsTools        = $$(\"viewTools\");\r\n                \r\n                function toolMinAdaptive(){\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"formsContainer\"));\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"tree\"));\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"table-backFormsBtnFilter\"));\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(formResizer);\r\n                    tools.config.width = window.innerWidth-45;\r\n                    tools.resize();\r\n                }\r\n            \r\n\r\n                function toolMaxAdaptive(){\r\n                  \r\n                    if         (btnClass.classList.contains(primaryBtnClass)){\r\n\r\n                        btnClass.classList.add(secondaryBtnClass);\r\n                        btnClass.classList.remove(primaryBtnClass);\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(tools);\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(formResizer);\r\n                        \r\n\r\n                    } else if (btnClass.classList.contains(secondaryBtnClass)){\r\n\r\n                        btnClass.classList.add(primaryBtnClass);\r\n                        btnClass.classList.remove(secondaryBtnClass);\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(tools);\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(formResizer);\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(formsTools);\r\n                    }\r\n                }\r\n      \r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"propTableView\"));\r\n                const contaierWidth = $$(\"formsContainer\").$width;\r\n         \r\n                toolMaxAdaptive();\r\n                if(!(btnClass.classList.contains(secondaryBtnClass))){\r\n                    if (contaierWidth < 850  ){\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"tree\"));\r\n                        if (contaierWidth  < 850 ){\r\n                            toolMinAdaptive();\r\n                        }\r\n                    } else {\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"table-backFormsBtnFilter\"));\r\n                    tools.config.width = 350;\r\n                    tools.resize();\r\n                    }\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(formResizer);\r\n                } else {\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(tools);\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(formResizer);\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"table-backFormsBtnFilter\"));\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"formsContainer\"));\r\n                }\r\n\r\n            }\r\n\r\n            const viewToolsBtn  = $$(\"viewToolsBtn\");\r\n            if (data.inputs){  \r\n           \r\n                const customInputs  = generateCustomInputs ();\r\n                const filterBar     = $$(\"table-view-filterId\").getParentView();\r\n\r\n                const btnTools = {   \r\n                    view    : \"button\",\r\n                    width   : 50, \r\n                    type    : \"icon\",\r\n                    id      : \"viewToolsBtn\",\r\n                    icon    : \"icon-filter\",\r\n                    css     : \"webix_btn-filter webix-transparent-btn\",\r\n                    title   : \"текст\",\r\n                    height  : 42,\r\n                    click   : function(){\r\n                        viewToolsBtnClick();\r\n                    },\r\n                    on: {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute(\"title\",\"Показать/скрыть доступные дейсвтия\");\r\n                        }\r\n                    } \r\n                };\r\n                \r\n                if( !viewToolsBtn ){\r\n                    filterBar.addView( btnTools, 2 );\r\n                } else {\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)( viewToolsBtn );\r\n                }\r\n\r\n                maxInputsSize ( customInputs );\r\n\r\n            } else {\r\n              \r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)( tools );\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)( viewToolsBtn );\r\n              \r\n            }\r\n        }\r\n        \r\n        adaptiveCustomInputs ();\r\n\r\n    }\r\n\r\n\r\n    async function generateTable (){ // SINGLE ELS\r\n\r\n        if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n            await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"fields\"); \r\n       \r\n        }\r\n\r\n        if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n            createExperementalElement ();\r\n            const columnsData = createTableCols ();\r\n\r\n            createDetailAction (columnsData);\r\n            createDynamicElems ();\r\n          \r\n            createTableRows (idCurrTable,idsParam);\r\n           \r\n        }\r\n    } \r\n\r\n    getValsTable ();\r\n   \r\n    if (titem == undefined) {\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",\"Данные не найдены\");\r\n    } else {\r\n        preparationTable ();\r\n        generateTable ();\r\n    } \r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/getContent/getInfoTable.js?");

/***/ }),

/***/ "./src/js/blocks/globalStorage.js":
/*!****************************************!*\
  !*** ./src/js/blocks/globalStorage.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getData\": () => (/* binding */ getData),\n/* harmony export */   \"STORAGE\": () => (/* binding */ STORAGE)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logout_common_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logout/common.js */ \"./src/js/blocks/logout/common.js\");\n\r\n\r\n\r\nconst STORAGE = {};\r\n\r\nfunction getTableNames (content){\r\n    let tableNames = [];\r\n    try{\r\n        Object.values(content).forEach(function(el,i){\r\n            tableNames.push({\r\n                id:Object.keys(content)[i], \r\n                name:(el.plural) ? el.plural : el.singular\r\n            });\r\n        });\r\n    } catch (err){   \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"globalStorage\",\"getTableNames\")\r\n    }\r\n    return tableNames;\r\n}\r\n\r\n// function checkNotAuth (err){\r\n//     if (err.status               === 401                  && \r\n//         window.location.pathname !== \"/index.html\"        && \r\n//         window.location.pathname !== \"/init/default/spaw/\"){\r\n//         Backbone.history.navigate(\"/\", { trigger:true});\r\n//     }\r\n// }\r\n\r\nfunction getData (fileName){\r\n \r\n \r\n    if (    window.location.pathname !== \"/index.html\"          &&  \r\n            window.location.pathname !== '/init/default/spaw'   ||\r\n            fileName == \"whoami\"\r\n        ){\r\n        return webix.ajax().get(`/init/default/api/${fileName}.json`)\r\n            .then(function (data) {\r\n                STORAGE[fileName] = data.json();\r\n                try{\r\n                    if (fileName == \"fields\" && STORAGE[fileName]){\r\n                        STORAGE.tableNames = getTableNames (STORAGE[fileName].content);\r\n                    }\r\n                } catch (err){   \r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"globalStorage\",\"getData\")\r\n                }\r\n                return STORAGE[fileName];\r\n            }).catch(err => {\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"globalStorage\",\"getData\");\r\n                (0,_logout_common_js__WEBPACK_IMPORTED_MODULE_1__.checkNotAuth) (err);\r\n            }\r\n        );\r\n    }\r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/globalStorage.js?");

/***/ }),

/***/ "./src/js/blocks/historyBtns.js":
/*!**************************************!*\
  !*** ./src/js/blocks/historyBtns.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"prevBtnClick\": () => (/* binding */ prevBtnClick),\n/* harmony export */   \"nextBtnClick\": () => (/* binding */ nextBtnClick),\n/* harmony export */   \"backButtonBrowserLogic\": () => (/* binding */ backButtonBrowserLogic)\n/* harmony export */ });\nfunction prevBtnClick (){\r\n    history.back();\r\n}\r\n\r\nfunction nextBtnClick (){\r\n    history.forward();\r\n}   \r\n\r\nfunction backButtonBrowserLogic (){\r\n    window.addEventListener('popstate', function(event) {\r\n        window.location.replace(window.location.href);\r\n        window.location.reload();\r\n        \r\n    });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/historyBtns.js?");

/***/ }),

/***/ "./src/js/blocks/logBlock.js":
/*!***********************************!*\
  !*** ./src/js/blocks/logBlock.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logBlock\": () => (/* binding */ logBlock),\n/* harmony export */   \"logLayout\": () => (/* binding */ logLayout),\n/* harmony export */   \"setLogValue\": () => (/* binding */ setLogValue),\n/* harmony export */   \"catchErrorTemplate\": () => (/* binding */ catchErrorTemplate),\n/* harmony export */   \"ajaxErrorTemplate\": () => (/* binding */ ajaxErrorTemplate)\n/* harmony export */ });\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nfunction createCurrDate(){\r\n    const date    = new Date();\r\n    const day     = date.getDate();\r\n    const month   = String(date.getMonth() + 1).padStart(2, '0');\r\n    const year    = date.getFullYear();\r\n    const hours   = date.getHours();\r\n    const minutes = String( date.getMinutes()).padStart(2, '0');\r\n    const seconds = String( date.getSeconds()).padStart(2, '0');\r\n\r\n    return `${day}.${month}.${year} ${hours}:${minutes}:${seconds}`;\r\n}\r\n\r\n\r\nfunction setLogValue (typeNotify,notifyText,specificSrc) {\r\n\r\n    const currentDate = createCurrDate();\r\n\r\n    function addLogMsg (src){\r\n        if (!src){\r\n            src = \"expa\";\r\n        }\r\n      \r\n        $$(\"logBlock-list\").add({\r\n            date:currentDate,\r\n            value:notifyText,\r\n            src:src\r\n        });\r\n    }\r\n\r\n    async function createLogMessage(srcTable) {\r\n        let name;\r\n\r\n        function findTableName(){\r\n            try{\r\n                _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames.forEach(function(el,i){\r\n                    if (el.id == srcTable){\r\n                        name = el.name;\r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"findTableName\");\r\n            }\r\n        }\r\n\r\n        if (srcTable == \"version\"){\r\n            name = 'Expa v1.0.50';\r\n\r\n        } else if (srcTable == \"cp\") {\r\n            name = 'Смена пароля';\r\n\r\n        } else {\r\n            if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames){\r\n                await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"fields\"); \r\n            }\r\n    \r\n            if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames){\r\n                findTableName();\r\n            }\r\n        }\r\n\r\n        addLogMsg (name);\r\n    }\r\n       \r\n\r\n    function initLogMsg(){\r\n        try{\r\n            let itemTreeId  = null;\r\n            const tree      = $$(\"tree\");\r\n\r\n            if (tree.getSelectedItem()){\r\n                itemTreeId  = tree.getSelectedItem().id;\r\n            } else {\r\n                const href  = window.location.pathname;\r\n                const index = href.lastIndexOf( \"/\" );\r\n                itemTreeId  = href.slice( index+ 1 );\r\n            }\r\n        \r\n            if (specificSrc){\r\n                createLogMessage(specificSrc);\r\n\r\n            } else if (itemTreeId){\r\n                createLogMessage(itemTreeId);\r\n\r\n            } \r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"initLogMsg\");\r\n        }\r\n    }\r\n\r\n    function getItemIndex(){\r\n        const blockContainer = document.querySelector(\".webix_log-block\");\r\n        let index;\r\n\r\n        try{\r\n            if (blockContainer){\r\n                const elems      = \".webix_list_item\";\r\n                const blockElems = blockContainer.querySelectorAll(elems);\r\n                blockElems.forEach(function(el,i){\r\n                    index = i;\r\n                });\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"getItemIndex\");\r\n        }\r\n        return index;\r\n    }\r\n\r\n    function setErrTypeMsg(){\r\n        \r\n        const itemListIndex = getItemIndex();\r\n        const elems         = \".webix_list_item\";\r\n        const item          = document.querySelectorAll(elems)[itemListIndex];\r\n\r\n        function setStyle(){\r\n            try{\r\n                if (item!==undefined){\r\n                    item.style.setProperty('color', 'red', 'important');\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"setStyle\");\r\n            }\r\n        }\r\n\r\n        function openLog(){\r\n            try{\r\n                const layout =  $$(\"logLayout\");\r\n                const btn    = $$(\"webix_log-btn\");\r\n                \r\n                if (btn.config.icon ==\"icon-eye\"){\r\n                    layout.config.height = 90;\r\n                    layout.resize();\r\n                    btn.setValue(2);\r\n\r\n                    btn.config.icon =\"icon-eye-slash\";\r\n                    btn.refresh();\r\n\r\n                    (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_0__.setStorageData)(\"LogVisible\", JSON.stringify(\"show\"));\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"openLog\");\r\n            }\r\n        }\r\n        \r\n        if (typeNotify == \"error\"){\r\n            setStyle();\r\n            openLog();\r\n        }\r\n    }   \r\n       \r\n    initLogMsg();\r\n    setErrTypeMsg();\r\n\r\n    \r\n}\r\n\r\nlet notifyCounter = 0;\r\n\r\nconst logBlock = {\r\n    id:\"logBlock-list\",\r\n    css:\"webix_log-block\",\r\n    view:\"list\",\r\n    template:\"#date# — #value#  (Источник: #src#)\",\r\n    data:[],\r\n    on: {\r\n        onAfterLoad:function(){\r\n            try {\r\n                setLogValue (\"success\",\"Интерфейс загружен\",\"version\");\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"logBlock onAfterLoad\");\r\n            }\r\n            \r\n        },\r\n        onAfterAdd:function(){\r\n            const btn = $$(\"webix_log-btn\");\r\n\r\n            function addNotify(){\r\n                try{\r\n               \r\n                    if ( btn.config.badge == \"\" ){\r\n                        notifyCounter=0;\r\n                    }\r\n                    notifyCounter++;\r\n\r\n                    btn.config.badge = notifyCounter;\r\n                    btn.setValue(1);\r\n                    btn.refresh();\r\n\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"logBlock onAfterAdd function addNotify\");\r\n                }\r\n            }\r\n\r\n            function clearNotify(){\r\n                try{\r\n                    notifyCounter = 0;\r\n                    btn.config.badge = \"\";\r\n                    btn.setValue(2);\r\n                    btn.refresh();\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"logBlock\",\"logBlock onAfterAdd function clearNotify\");\r\n                }\r\n            }\r\n    \r\n            if ( btn.config.icon == \"icon-eye\" ){\r\n                addNotify();\r\n            } else if ( btn.config.icon == \"icon-eye-slash\" ){\r\n                clearNotify();\r\n            }\r\n            \r\n          \r\n        }\r\n    }\r\n};\r\n\r\nconst headline = {   \r\n    template:\"<div class='webix_log-headline'>Системные сообщения</div>\", \r\n    height:30\r\n};\r\n\r\n\r\nconst logLayout = {\r\n    id:\"logLayout\",\r\n    height:80,\r\n    rows:[\r\n        headline,\r\n        logBlock\r\n    ]\r\n};\r\n\r\n\r\n\r\nfunction catchErrorTemplate (code,error,otherType=false) {\r\n\r\n    try{\r\n        $$(\"webix_log-btn\").setValue(2);\r\n        notifyCounter = 0;\r\n\r\n        if (!otherType){\r\n            return setLogValue(\"error\",\"ОШИБКА \"+code+\": \"+error.stack);\r\n        } else {\r\n            return setLogValue(\"error\",\"ОШИБКА \"+code+\": \"+error);\r\n        }\r\n    } catch (err){\r\n        console.log(err);\r\n        alert(\"Ошибка при выполнении\"+\" \"+ err);\r\n        window.stop();\r\n    }\r\n}\r\n\r\nfunction ajaxErrorTemplate (code, status,statusText,responseURL){\r\n    $$(\"webix_log-btn\").setValue(2);\r\n   \r\n    notifyCounter = 0;\r\n    let errorMsg = \"СТАТУС: \"+status+\" \"+statusText+\".\"+\" ПОДРОБНОСТИ: \"+responseURL;\r\n    return setLogValue(\"error\",\"ОШИБКА \"+code+\": \"+errorMsg,);\r\n\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/logBlock.js?");

/***/ }),

/***/ "./src/js/blocks/logout/autoLogout.js":
/*!********************************************!*\
  !*** ./src/js/blocks/logout/autoLogout.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"resetTimer\": () => (/* binding */ resetTimer)\n/* harmony export */ });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/logout/common.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\nfunction resetTimer (){\r\n\r\n    let t;\r\n    window.onload = resetTimer;\r\n    window.onmousemove = resetTimer;\r\n    window.onmousedown = resetTimer;      \r\n    window.ontouchstart = resetTimer;\r\n    window.onclick = resetTimer;     \r\n    window.onkeypress = resetTimer;   \r\n    window.addEventListener('scroll', resetTimer, true); \r\n\r\n    function resetTimer() {\r\n        try {\r\n            if (window.location.pathname !== \"/index.html\"        && \r\n                window.location.pathname !== \"/\"                  && \r\n                window.location.pathname !== \"/init/default/spaw\" ){\r\n                \r\n                clearTimeout(t);\r\n                t = setTimeout(_common_js__WEBPACK_IMPORTED_MODULE_0__.logout, 600000); // 600000\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"autoLogout\",\"resetTimer\");\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/logout/autoLogout.js?");

/***/ }),

/***/ "./src/js/blocks/logout/common.js":
/*!****************************************!*\
  !*** ./src/js/blocks/logout/common.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logout\": () => (/* binding */ logout),\n/* harmony export */   \"checkNotAuth\": () => (/* binding */ checkNotAuth)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n\r\n\r\n\r\n\r\n\r\nfunction logout() {\r\n\r\n    const userprefsData = webix.ajax().get(\"/init/default/api/userprefs/\");\r\n\r\n    userprefsData.then(function(data){\r\n        if (data.err_type !== \"i\"){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(data.json().err,\"autoLogout\",\"putUserPrefs\");\r\n        }\r\n\r\n        data = data.json().content;\r\n        \r\n        let settingExists = false;\r\n        let location = {};\r\n        location.href = window.location.href;\r\n\r\n        let sentObj = {\r\n            name:\"userLocationHref\",\r\n            prefs:location\r\n        };\r\n  \r\n        function putUserPrefs(){\r\n            try{\r\n                data.forEach(function(el,i){\r\n                    if (el.name == \"userLocationHref\"){\r\n                        settingExists = true;\r\n\r\n                        const putData = webix.ajax().put(\"/init/default/api/userprefs/\"+el.id, sentObj);\r\n\r\n                        putData.then(function(data){\r\n                            data = data.json();\r\n                            if (data.err_type !== \"i\"){\r\n                                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",data.err);\r\n                            }\r\n                        });\r\n\r\n                        putData.fail(function(err){\r\n                            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\",\"putUserPrefs\");\r\n                        });\r\n                    } \r\n                });  \r\n            }   catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"autoLogout\",\"putUserPrefs\");\r\n            }\r\n        }\r\n\r\n        function getWhoamiData(){\r\n            let ownerId = webix.storage.local.get(\"user\").id;\r\n\r\n            try{\r\n                if (ownerId){\r\n                    sentObj.owner = ownerId;\r\n                } else {\r\n                    const whoamiData =  webix.ajax(\"/init/default/api/whoami\");\r\n                    \r\n                    whoamiData.then(function(data){\r\n                        data = data.json().content;\r\n                        sentObj.owner       = data.id;\r\n\r\n                        const userData      = {};\r\n\r\n                        userData.id         = data.id;\r\n                        userData.name       = data.first_name;\r\n                        userData.username   = data.username;\r\n                    });\r\n\r\n                    whoamiData.fail(function(err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\",\"getWhoamiData\");\r\n                    });\r\n\r\n                }\r\n            }   catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"autoLogout\",\"getWhoamiData\")\r\n            }\r\n        }\r\n        \r\n        function postUserPrefs(){\r\n\r\n            const postData = webix.ajax().post(\"/init/default/api/userprefs/\",sentObj);\r\n\r\n            postData.then(function(data){\r\n                data = data.json();\r\n\r\n                if (data.err_type !== \"i\"){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(data.err,\"autoLogout\",\"putUserPrefs\");\r\n                }\r\n            });\r\n\r\n            postData.fail(function(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\",\"postUserPrefs\");\r\n            });\r\n\r\n        }\r\n\r\n\r\n        if (window.location.pathname !== \"/index.html/content\"){\r\n            putUserPrefs();\r\n\r\n            if (!settingExists){\r\n                getWhoamiData();\r\n                postUserPrefs();\r\n            }\r\n        }\r\n    });\r\n\r\n    userprefsData.then(function(data){\r\n        Backbone.history.navigate(\"logout\", { trigger:true});\r\n        Backbone.history.navigate(\"/\", { trigger:true});\r\n    });\r\n\r\n    userprefsData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\",\"logout\");\r\n\r\n    });\r\n  \r\n}\r\n\r\n\r\nfunction checkNotAuth (err){\r\n    if (err.status               === 401                  && \r\n        window.location.pathname !== \"/index.html\"        && \r\n        window.location.pathname !== \"/init/default/spaw/\"){\r\n        \r\n        const prefs = {href:window.location.href};\r\n        (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__.setStorageData) (\"outsideHref\", JSON.stringify(prefs) );\r\n        Backbone.history.navigate(\"/\", { trigger:true});\r\n\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/logout/common.js?");

/***/ }),

/***/ "./src/js/blocks/notifications.js":
/*!****************************************!*\
  !*** ./src/js/blocks/notifications.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"popupExec\": () => (/* binding */ popupExec),\n/* harmony export */   \"modalBox\": () => (/* binding */ modalBox)\n/* harmony export */ });\nfunction popupExec (titleText) { \r\n\r\n    return webix.confirm({\r\n        width:300,\r\n        ok: 'Да',\r\n        cancel: 'Отмена',\r\n        title:titleText,\r\n        text:\"Вы уверены, что хотите продолжить?\"\r\n    });\r\n}\r\n\r\n\r\nfunction modalBox (title,text,btns){\r\n\r\n    if(!title && !text && !btns){\r\n        return webix.modalbox({\r\n            title:\"Данные не сохранены\",\r\n            css:\"webix_modal-custom-save\",\r\n            buttons:[\"Отмена\", \"Не сохранять\", \"Сохранить\"],\r\n            width:500,\r\n            text:\"Выберите действие перед тем как продолжить\"\r\n\r\n        });\r\n    } else {\r\n        return webix.modalbox({\r\n            title:title,\r\n            css:\"webix_modal-custom-save\",\r\n            buttons:btns,\r\n            width:500,\r\n            text:text\r\n\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/notifications.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/common.js":
/*!**********************************************!*\
  !*** ./src/js/blocks/routerConfig/common.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createElements\": () => (/* binding */ createElements),\n/* harmony export */   \"removeElements\": () => (/* binding */ removeElements),\n/* harmony export */   \"getWorkspace\": () => (/* binding */ getWorkspace),\n/* harmony export */   \"hideAllElements\": () => (/* binding */ hideAllElements),\n/* harmony export */   \"checkTreeOrder\": () => (/* binding */ checkTreeOrder),\n/* harmony export */   \"closeTree\": () => (/* binding */ closeTree)\n/* harmony export */ });\n/* harmony import */ var _components_dashboard_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../components/dashboard.js */ \"./src/js/components/dashboard.js\");\n/* harmony import */ var _components_table_layout_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../components/table/layout.js */ \"./src/js/components/table/layout.js\");\n/* harmony import */ var _components_table_onFuncs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/table/onFuncs.js */ \"./src/js/components/table/onFuncs.js\");\n/* harmony import */ var _components_authSettings_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/authSettings.js */ \"./src/js/components/authSettings.js\");\n/* harmony import */ var _components_userprefs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/userprefs.js */ \"./src/js/components/userprefs.js\");\n/* harmony import */ var _components_editTree_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/editTree.js */ \"./src/js/components/editTree.js\");\n/* harmony import */ var _components_table_lazyLoad_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/table/lazyLoad.js */ \"./src/js/components/table/lazyLoad.js\");\n/* harmony import */ var _columnsSettings_columnsWidth_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../columnsSettings/columnsWidth.js */ \"./src/js/blocks/columnsSettings/columnsWidth.js\");\n/* harmony import */ var _toolbarTable_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../toolbarTable.js */ \"./src/js/blocks/toolbarTable.js\");\n/* harmony import */ var _tableEditForm_layout_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tableEditForm/layout.js */ \"./src/js/blocks/tableEditForm/layout.js\");\n/* harmony import */ var _viewPropertyTable_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../viewPropertyTable.js */ \"./src/js/blocks/viewPropertyTable.js\");\n/* harmony import */ var _tableFilter_layout_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../tableFilter/layout.js */ \"./src/js/blocks/tableFilter/layout.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _viewTools_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../viewTools.js */ \"./src/js/blocks/viewTools.js\");\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n// tree elements\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n// other blocks\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => common\";\r\nfunction createElements(specificElement){\r\n\r\n    function createDashboards(){\r\n        try{\r\n            if (!$$(\"dashboards\")){\r\n                $$(\"container\").addView(\r\n                    {   view:\"layout\",\r\n                        id:\"dashboards\", \r\n                        hidden:true, \r\n                        scroll:\"auto\",\r\n                        rows: (0,_components_dashboard_js__WEBPACK_IMPORTED_MODULE_0__.dashboardLayout)()\r\n                    },\r\n                3);\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"createDashboards\");\r\n        }\r\n    }\r\n\r\n    function createTables(){\r\n        try{\r\n            if (!$$(\"tables\")){\r\n\r\n                $$(\"container\").addView(\r\n                    {   id:\"tables\", \r\n                        hidden:true, \r\n                        view:\"scrollview\", \r\n                        body: { \r\n                            view:\"flexlayout\",\r\n                            id:\"flexlayoutTable\", \r\n                            cols:[\r\n                                                        \r\n                                {   id:\"tableContainer\",\r\n                                    rows:[\r\n                                        (0,_toolbarTable_js__WEBPACK_IMPORTED_MODULE_8__.tableToolbar) (\"table\"),\r\n                                        { view:\"resizer\",class:\"webix_resizers\"},\r\n                                        (0,_components_table_layout_js__WEBPACK_IMPORTED_MODULE_1__.table) (\"table\", _components_table_onFuncs_js__WEBPACK_IMPORTED_MODULE_2__.onFuncTable,true)\r\n                                    ]\r\n                                },\r\n                            \r\n                                \r\n                               {  view:\"resizer\",class:\"webix_resizers\", id:\"tableBarResizer\" },\r\n                          \r\n                                (0,_tableEditForm_layout_js__WEBPACK_IMPORTED_MODULE_9__.editTableBar)(),\r\n                                (0,_tableFilter_layout_js__WEBPACK_IMPORTED_MODULE_11__.filterForm)(),\r\n                                \r\n                            ]\r\n                        }\r\n                    \r\n                    },\r\n\r\n                \r\n                5);\r\n                (0,_components_table_lazyLoad_js__WEBPACK_IMPORTED_MODULE_6__.sortTable)          ($$(\"table\"));\r\n                (0,_components_table_lazyLoad_js__WEBPACK_IMPORTED_MODULE_6__.scrollTableLoad)    ($$(\"table\"));\r\n                (0,_columnsSettings_columnsWidth_js__WEBPACK_IMPORTED_MODULE_7__.setColsWidthStorage)($$(\"table\"));\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"createTables\");\r\n        }\r\n    }\r\n\r\n    function createForms(){\r\n        try{\r\n            if (!$$(\"forms\")){\r\n                $$(\"container\").addView(\r\n                    {   view:\"layout\",\r\n                        id:\"forms\", \r\n                        css:\"webix_tableView\",\r\n                        hidden:true,                       \r\n                        rows:[\r\n                            {cols:[\r\n                                {id:\"formsContainer\",rows:[\r\n                                    (0,_toolbarTable_js__WEBPACK_IMPORTED_MODULE_8__.tableToolbar)(\"table-view\", true ),\r\n                                    { view:\"resizer\",class:\"webix_resizers\",},\r\n                                    \r\n                                    {   view:\"scrollview\", \r\n                                        body: {\r\n                                            view:\"flexlayout\",\r\n                                            cols:[\r\n                                                (0,_components_table_layout_js__WEBPACK_IMPORTED_MODULE_1__.table) (\"table-view\"),\r\n                                        \r\n                                            ]\r\n                                        }\r\n                                    }, \r\n                                ]}, \r\n\r\n                                { view:\"resizer\",id:\"formsTools-resizer\",hidden:true,class:\"webix_resizers\",},\r\n                                (0,_viewPropertyTable_js__WEBPACK_IMPORTED_MODULE_10__.propertyTemplate)(\"propTableView\"),\r\n                                {id:\"formsTools\",hidden:true,  minWidth:190, rows:[\r\n                                    _viewTools_js__WEBPACK_IMPORTED_MODULE_13__.viewTools,                                \r\n                                ]},\r\n                            ]},\r\n                        \r\n                         \r\n                        ],\r\n\r\n                        \r\n                    },\r\n                6);\r\n\r\n               (0,_components_table_lazyLoad_js__WEBPACK_IMPORTED_MODULE_6__.sortTable)          ($$(\"table-view\"));\r\n               (0,_columnsSettings_columnsWidth_js__WEBPACK_IMPORTED_MODULE_7__.setColsWidthStorage)($$(\"table-view\"));\r\n              //  scrollTableLoad($$(\"table-view\"));\r\n           \r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"createForms\");\r\n        }\r\n    }\r\n\r\n    function createDefaultWorkspace(){\r\n        if(!specificElement){\r\n            createDashboards();\r\n            createTables();\r\n            createForms();\r\n        }\r\n    }\r\n\r\n    function createTreeTempl(){\r\n        try{\r\n            if (specificElement == \"treeTempl\"){\r\n                if (!$$(\"treeTempl\")){\r\n                    $$(\"container\").addView(\r\n                        {   view:\"layout\",\r\n                            id:\"treeTempl\", \r\n                            hidden:true, \r\n                            scroll:\"auto\",\r\n                            rows: (0,_components_editTree_js__WEBPACK_IMPORTED_MODULE_5__.editTreeLayout)()\r\n                        },\r\n                    4);\r\n                    webix.ui((0,_components_editTree_js__WEBPACK_IMPORTED_MODULE_5__.contextMenu)());\r\n                }\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"createTreeTempl\")\r\n        }\r\n    }\r\n\r\n    function createCp(){\r\n        try{\r\n            if (specificElement == \"cp\"){\r\n                $$(\"container\").addView(\r\n                    {   view:\"layout\",\r\n                        id:\"user_auth\", \r\n                        css:\"webix_auth\",\r\n                        hidden:true, \r\n                        rows:[\r\n                            _components_authSettings_js__WEBPACK_IMPORTED_MODULE_3__.authCpLayout,\r\n                            {}\r\n                        ],\r\n                    }, \r\n                7);\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"createCp\")\r\n        }\r\n    }\r\n\r\n    function createUserprefs(){\r\n        try{\r\n            if (specificElement == \"userprefs\"){\r\n\r\n                $$(\"container\").addView(\r\n                    {   view:\"layout\",\r\n                        id:\"userprefs\", \r\n                        css:\"webix_auth\",\r\n                        hidden:true, \r\n                        rows:[\r\n                            _components_userprefs_js__WEBPACK_IMPORTED_MODULE_4__.userprefsLayout,\r\n                        ],\r\n                    }, \r\n                8);\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"createUserprefs\")\r\n        }\r\n    }\r\n\r\n    function createSpecificWorkspace (){\r\n        createTreeTempl();\r\n        createCp();\r\n        createUserprefs();\r\n    }\r\n   \r\n\r\n    createDefaultWorkspace();\r\n    createSpecificWorkspace ();\r\n  \r\n}\r\n\r\nfunction removeElements(){\r\n\r\n    function removeElement(idElement){\r\n        try {\r\n            const elem   = $$(idElement);\r\n            const parent = $$(\"container\");\r\n            if (elem){\r\n                parent.removeView(elem);\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"removeElement (element: \"+idElement+\")\")\r\n        }\r\n    }\r\n    removeElement (\"tables\");\r\n    removeElement (\"dashboards\");\r\n    removeElement (\"forms\");\r\n    removeElement (\"user_auth\");\r\n}\r\n\r\n\r\nfunction getWorkspace (){\r\n  \r\n    async function getMenuTree() {\r\n\r\n        if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.STORAGE.mmenu){\r\n        \r\n            await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.getData)(\"mmenu\"); \r\n            \r\n        }\r\n        \r\n\r\n        function generateChildsTree  (el){\r\n            let childs = [];\r\n    \r\n            try {\r\n                el.childs.forEach(function(child,i){\r\n                    childs.push({\r\n                        id:child.name, \r\n                        value:child.title,\r\n                        action:child.action\r\n                    });\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"generateChildsTree\");\r\n            }\r\n            return childs;\r\n        }\r\n\r\n        function generateParentTree  (el){ \r\n            let menuItem;\r\n            try {                  \r\n                menuItem = {\r\n                    id:el.name, \r\n                    value:el.title,\r\n                    action:el.action,\r\n                };\r\n\r\n          \r\n                if ( !(el.title) ){\r\n                    menuItem.value=\"Без названия\";\r\n                }\r\n\r\n                if ( el.mtype == 2 ) {\r\n\r\n                    if ( el.childs.length == 0 ){\r\n                        menuItem.webix_kids = true; \r\n                    } else {\r\n                        menuItem.data = generateChildsTree (el);\r\n                    }         \r\n                } \r\n            \r\n\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"generateParentTree\");\r\n            }\r\n            return menuItem;\r\n        } \r\n\r\n       \r\n\r\n        function generateHeaderMenu  (el){\r\n            let items = [];\r\n            \r\n            try{ \r\n                items.push({id:\"favs\", value:\"Избранное\", icon: \"icon-star\"});\r\n                items.push({id:\"userprefs\", value:\"Настройки\", icon: \"icon-cog\"});\r\n                items.push({id:\"cp\", value:\"Смена пароля\", icon: \"icon-lock\"});\r\n                items.push({id:\"logout\", value:\"Выйти\", css:\"webix_logout\", icon: \"icon-sign-out\"});\r\n                // el.childs.forEach(function(child,i){\r\n                //     let item = {\r\n                //         id:child.name,\r\n                //         value:child.title\r\n                //     };\r\n\r\n                    \r\n                //     if (child.name !== \"logout\"){\r\n                //         items.push(item);\r\n                //     } \r\n                // });\r\n\r\n              \r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"generateHeaderMenu\");\r\n            }\r\n\r\n            return items;\r\n        }\r\n\r\n        function generateMenuTree (){ \r\n            let menu,\r\n                menuTree   = [],\r\n                menuHeader = []\r\n            ;\r\n\r\n            const delims     = [];\r\n            const tree       = $$(\"tree\");\r\n            const btnContext = $$(\"button-context-menu\");\r\n\r\n            try {\r\n                menu = _globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.STORAGE.mmenu.mmenu;\r\n        \r\n                // menu.push ({\r\n                //     \"id\": 77,\r\n                //     \"name\": \"sales\",\r\n                //     \"title\": \"Sales\",\r\n                //     \"mtype\": 1,\r\n                //     \"ltype\": 1,\r\n                //     \"action\": \"dashboard\",\r\n                //     \"childs\": []\r\n                // });\r\n\r\n        \r\n                menu.forEach(function(el,i){\r\n                    if (el.mtype !== 3){\r\n                        menuTree.push  ( generateParentTree (el, menu, menuTree  ) );\r\n                        if (el.childs.length !==0){\r\n                            menuHeader = generateHeaderMenu (el, menu, menuHeader);\r\n                        }\r\n                    } else {\r\n                        delims.push(el.name);\r\n                        menuTree.push({id:el.name, disabled:true,value:\"\"})\r\n                    }\r\n              \r\n                });\r\n\r\n                \r\n\r\n                tree.clearAll();\r\n                tree.parse(menuTree);\r\n                if (btnContext.config.popup.data !== undefined){\r\n                    btnContext.config.popup.data = menuHeader;\r\n                    btnContext.enable();\r\n                }\r\n\r\n         \r\n                delims.forEach(function(el){\r\n                    tree.addCss(el, \"tree_delim-items\");\r\n\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"generateMenuTree\");\r\n            }\r\n        }\r\n\r\n        generateMenuTree (); \r\n\r\n \r\n    }\r\n\r\n    function createContent (){ \r\n \r\n        function showMainContent(){\r\n            try {\r\n                $$(\"userAuth\").hide();\r\n                $$(\"mainLayout\").show();\r\n            } catch (err){\r\n                window.alert(\"showMainContent: \"+err+ \" (Подробности: ошибка в отрисовке контента)\");\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"showMainContent\");\r\n            }\r\n        }\r\n\r\n        function setUserData(){\r\n            let userStorageData      = {};\r\n            userStorageData.id       = _globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.STORAGE.whoami.content.id;\r\n            userStorageData.name     = _globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.STORAGE.whoami.content.first_name;\r\n            userStorageData.username = _globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.STORAGE.whoami.content.username;\r\n            \r\n            (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_12__.setStorageData)(\"user\", JSON.stringify(userStorageData));\r\n        }\r\n\r\n        showMainContent();\r\n\r\n        setUserData();\r\n\r\n        createElements();\r\n\r\n        getMenuTree();\r\n    }\r\n\r\n    async function getAuth () {\r\n        if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.STORAGE.whoami){\r\n            await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.getData)(\"whoami\"); \r\n        }\r\n\r\n        if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_14__.STORAGE.whoami){\r\n            createContent (); \r\n        }\r\n\r\n    }\r\n\r\n    getAuth ();\r\n\r\n}\r\n\r\n\r\nfunction checkTreeOrder(){\r\n\r\n    try{\r\n        if ($$(\"tree\").data.order.length == 0){\r\n            getWorkspace ();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"checkTreeOrder\");\r\n    }\r\n}\r\n\r\nfunction closeTree(){\r\n    try{\r\n        if($$(\"tree\")){\r\n            $$(\"tree\").closeAll();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"closeTree\");\r\n    }\r\n    \r\n}\r\n\r\nfunction hideAllElements (){\r\n\r\n    try {\r\n        $$(\"container\").getChildViews().forEach(function(el,i){\r\n           \r\n            if(el.config.view==\"scrollview\"|| el.config.view==\"layout\"){\r\n                const element = $$(el.config.id);\r\n                \r\n                if (element.isVisible()){\r\n                    element.hide();\r\n                }\r\n            }\r\n        });\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_15__.setFunctionError)(err,logNameFile,\"hideAllElements\");\r\n    }\r\n  \r\n     \r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/common.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/cp.js":
/*!******************************************!*\
  !*** ./src/js/blocks/routerConfig/cp.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"cpRouter\": () => (/* binding */ cpRouter)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/routerConfig/common.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => cp\";\r\n\r\nfunction showUserAuth(){\r\n    try{\r\n        const elem = $$(\"user_auth\");\r\n        if (elem){\r\n            elem.show();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"showUserAuth\");\r\n    }\r\n}\r\n   \r\nfunction setUserValues(){\r\n    const user     = webix.storage.local.get(\"user\");\r\n    const authName =  $$(\"authName\");\r\n    try{\r\n        if (user){\r\n            authName.setValues(user.name.toString());\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setUserValues\");\r\n    }\r\n}\r\n\r\nfunction hideNoneContent(){\r\n    try{\r\n        const elem = $$(\"webix__none-content\");\r\n        if(elem){\r\n            elem.hide();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"hideNoneContent\");\r\n    }\r\n}\r\n\r\nfunction removeNullContent(){\r\n    try{\r\n        const elem = $$(\"webix__null-content\");\r\n        if(elem){\r\n            const parent = elem.getParentView();\r\n            parent.removeView(elem);\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"removeNoneContent\");\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction cpRouter(){\r\n    \r\n \r\n \r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.checkTreeOrder)();\r\n\r\n\r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.hideAllElements) ();\r\n  \r\n    if($$(\"user_auth\")){\r\n        showUserAuth();\r\n    } else {\r\n    \r\n        (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.createElements)(\"cp\");\r\n        showUserAuth();\r\n   \r\n    }\r\n  \r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.closeTree)();\r\n    setUserValues();\r\n    hideNoneContent();\r\n\r\n    removeNullContent();\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/cp.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/experimental.js":
/*!****************************************************!*\
  !*** ./src/js/blocks/routerConfig/experimental.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"experimentalRouter\": () => (/* binding */ experimentalRouter)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/routerConfig/common.js\");\n/* harmony import */ var _getContent_getInfoEditTree_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../getContent/getInfoEditTree.js */ \"./src/js/blocks/getContent/getInfoEditTree.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => experimental\";\r\n\r\nfunction showTreeTempl(){\r\n    try{\r\n        $$(\"treeTempl\").show();\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"showTreeTempl\");\r\n    }\r\n}\r\n\r\nfunction removeNullContent(){\r\n    try{\r\n        const elem = $$(\"webix__null-content\");\r\n        if(elem){\r\n            const parent = elem.getParentView();\r\n            parent.removeView(elem);\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"removeNullContent\");\r\n    }\r\n}\r\n\r\nfunction experimentalRouter(){\r\n    removeNullContent();\r\n\r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.hideAllElements) ();\r\n    \r\n    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.hideElem)($$(\"webix__none-content\"));\r\n    \r\n    \r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.checkTreeOrder)();\r\n    \r\n    \r\n    if($$(\"treeTempl\")){\r\n        showTreeTempl ();\r\n        (0,_getContent_getInfoEditTree_js__WEBPACK_IMPORTED_MODULE_3__.getInfoEditTree)();\r\n    }else {\r\n        (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.createElements)(\"treeTempl\");\r\n        (0,_getContent_getInfoEditTree_js__WEBPACK_IMPORTED_MODULE_3__.getInfoEditTree)();\r\n        showTreeTempl();\r\n    }\r\n    \r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_2__.closeTree)();\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/experimental.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/index.js":
/*!*********************************************!*\
  !*** ./src/js/blocks/routerConfig/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"indexRouter\": () => (/* binding */ indexRouter)\n/* harmony export */ });\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => index\";\r\n\r\nfunction indexRouter(){\r\n\r\n    function goToContentPage(){\r\n    \r\n        try {\r\n            Backbone.history.navigate(\"content\", { trigger:true});\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"goToContentPage\");\r\n        }\r\n    }\r\n\r\n    function showWorkspace(){\r\n        try{\r\n            const main  = $$(\"mainLayout\");\r\n            const login = $$(\"userAuth\");\r\n            \r\n            if(main){\r\n                (main).hide();\r\n            }\r\n\r\n            if(login){\r\n                login.show();\r\n            }\r\n            \r\n        } catch (err){\r\n            window.alert(\"getAuth: \"+err+ \" (Подробности: ошибка в отрисовке контента, router:index function showWorkspace)\");\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"index => showWorkspace\");\r\n        }\r\n    }\r\n\r\n    async function getAuth () {\r\n     \r\n        if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.whoami ){\r\n            await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.getData)(\"whoami\"); \r\n        }\r\n\r\n\r\n        if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.whoami){\r\n            goToContentPage();\r\n\r\n        } else {\r\n  \r\n            showWorkspace();\r\n        }\r\n    }\r\n    getAuth ();\r\n    \r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/index.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/logout.js":
/*!**********************************************!*\
  !*** ./src/js/blocks/routerConfig/logout.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logoutRouter\": () => (/* binding */ logoutRouter)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\nconst logNameFile = \"router => logout\";\r\n\r\nfunction logoutRouter(){\r\n    const logoutData = webix.ajax().post(\"/init/default/logout/\");\r\n\r\n    logoutData.then(function(data){\r\n        function showNoneContent(){\r\n            try{\r\n                const elem = $$(\"webix__none-content\");\r\n\r\n                if(elem){\r\n                    elem.show();\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"showNoneContent\");\r\n            }\r\n        }\r\n        function clearTree (){\r\n            try{\r\n                const tree = $$(\"tree\");\r\n\r\n                if( tree){\r\n                    tree.clearAll();\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"clearTree\");\r\n            }\r\n        }\r\n\r\n        function clearStorage(){\r\n            try{\r\n                webix.storage.local.clear();\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"clearStorage\");\r\n            }\r\n        }\r\n\r\n        function backPage(){\r\n            try{\r\n                history.back();\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"backPage\");\r\n            }\r\n        }\r\n\r\n        backPage();\r\n        showNoneContent();\r\n        clearTree ();\r\n        clearStorage();\r\n    \r\n    });\r\n\r\n    logoutData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, logNameFile,\"logoutData\");\r\n    });  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/logout.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/router.js":
/*!**********************************************!*\
  !*** ./src/js/blocks/routerConfig/router.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"router\": () => (/* binding */ router)\n/* harmony export */ });\n/* harmony import */ var _expalib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../expalib.js */ \"./src/js/expalib.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/routerConfig/common.js\");\n/* harmony import */ var _tree_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tree.js */ \"./src/js/blocks/routerConfig/tree.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index.js */ \"./src/js/blocks/routerConfig/index.js\");\n/* harmony import */ var _cp_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cp.js */ \"./src/js/blocks/routerConfig/cp.js\");\n/* harmony import */ var _userprefs_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./userprefs.js */ \"./src/js/blocks/routerConfig/userprefs.js\");\n/* harmony import */ var _experimental_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./experimental.js */ \"./src/js/blocks/routerConfig/experimental.js\");\n/* harmony import */ var _logout_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./logout.js */ \"./src/js/blocks/routerConfig/logout.js\");\n\r\n\r\n(0,_expalib_js__WEBPACK_IMPORTED_MODULE_0__.lib) ();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction router (){\r\n    let routes = new (Backbone.Router.extend({\r\n    \r\n        routes:{\r\n            \"\"                : \"index\" ,\r\n            \"content\"         : \"content\", \r\n            \"userprefs\"       : \"userprefs\",\r\n            \"cp\"              : \"cp\",\r\n            \"logout\"          : \"logout\",\r\n            \"tree/:id\"        : \"tree\",\r\n            \"experimental/:id\":\"experimental\"\r\n        },\r\n        \r\n        content:function(){\r\n            (0,_common_js__WEBPACK_IMPORTED_MODULE_1__.getWorkspace)();\r\n        },\r\n    \r\n        index:function(){\r\n            (0,_index_js__WEBPACK_IMPORTED_MODULE_3__.indexRouter)();\r\n\r\n        }, \r\n\r\n        tree: function(id){\r\n            (0,_tree_js__WEBPACK_IMPORTED_MODULE_2__.treeRouter)(id);\r\n        },\r\n        \r\n        cp: function(){\r\n            (0,_cp_js__WEBPACK_IMPORTED_MODULE_4__.cpRouter)();\r\n      \r\n        },\r\n    \r\n        userprefs: function(){\r\n            (0,_userprefs_js__WEBPACK_IMPORTED_MODULE_5__.userprefsRouter)();\r\n        },\r\n\r\n        experimental: function (){\r\n            (0,_experimental_js__WEBPACK_IMPORTED_MODULE_6__.experimentalRouter)();\r\n        },\r\n    \r\n        logout: function (){\r\n            (0,_logout_js__WEBPACK_IMPORTED_MODULE_7__.logoutRouter)();\r\n        }\r\n    \r\n    }));\r\n\r\n    return routes;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/router.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/routerStart.js":
/*!***************************************************!*\
  !*** ./src/js/blocks/routerConfig/routerStart.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setRouterStart\": () => (/* binding */ setRouterStart)\n/* harmony export */ });\nfunction setRouterStart(){\r\n    if (window.location.host.includes(\"localhost:3000\")){\r\n        Backbone.history.start({pushState: true, root: '/index.html/'});\r\n    } else {\r\n        Backbone.history.start({pushState: true, root: '/init/default/spaw/'});\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/routerStart.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/tree.js":
/*!********************************************!*\
  !*** ./src/js/blocks/routerConfig/tree.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"treeRouter\": () => (/* binding */ treeRouter)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../getContent/getInfoTable.js */ \"./src/js/blocks/getContent/getInfoTable.js\");\n/* harmony import */ var _getContent_getInfoDashboard_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../getContent/getInfoDashboard.js */ \"./src/js/blocks/getContent/getInfoDashboard.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/routerConfig/common.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => tree\";\r\n\r\nfunction treeRouter(id){\r\n\r\n    function notFoundPopup(){\r\n\r\n        const popupHeadline = {   \r\n            template:\"Что-то пошло не так...\", \r\n            width:250,\r\n            css:\"popup-headline\", \r\n            borderless:true, \r\n            height:20 \r\n        };\r\n        const btnClosePopup = {\r\n            view:\"button\",\r\n            id:\"buttonClosePopup\",\r\n            css:\"popup_close-btn\",\r\n            type:\"icon\",\r\n            width:35,\r\n            icon: 'wxi-close',\r\n            click:function(){\r\n                try{\r\n                    const popup = $$(\"popupNotFound\");\r\n                    if (popup){\r\n                        popup.hide();\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"btnClosePopup click\");\r\n                }\r\n            \r\n            }\r\n        };\r\n    \r\n        const popupSubtitle = {   \r\n            template:\"Страница не найдена\",\r\n            css:\"webix_template-not-found-descr\", \r\n            borderless:true, \r\n            height:35 \r\n        };\r\n    \r\n        const mainBtnPopup = {\r\n            view:\"button\",\r\n            css:\"webix_btn-not-found-back\",\r\n            height:46,\r\n            value:\"Вернуться на главную\",\r\n            click:function(){\r\n                function destructPopup(){\r\n                    try{\r\n                        if ($$(\"popupNotFound\")){\r\n                            $$(\"popupNotFound\").destructor();\r\n                        }\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"mainBtnPopup click destructPopup\");\r\n                    }\r\n                }\r\n                function navigate(){\r\n                    try{\r\n                        Backbone.history.navigate(\"content\", { trigger:true});\r\n                        window.location.reload();\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"mainBtnPopup click navigate\");\r\n                    }\r\n                }\r\n                destructPopup();\r\n                navigate();\r\n             \r\n           \r\n            }\r\n        };\r\n    \r\n        webix.ui({\r\n            view:\"popup\",\r\n            id:\"popupNotFound\",\r\n            css:\"webix_popup-prev-href\",\r\n            width:340,\r\n            height:125,\r\n            position:\"center\",\r\n            body:{\r\n                rows:[\r\n                {rows: [ \r\n                    { cols:[\r\n                        popupHeadline,\r\n                        {},\r\n                        btnClosePopup,\r\n                    ]},\r\n                    popupSubtitle,\r\n                    mainBtnPopup,\r\n                    {height:20}\r\n                ]}]\r\n                \r\n            },\r\n    \r\n        }).show();\r\n    }\r\n\r\n    function showNotFoundPopup (){\r\n        try{\r\n            setTimeout(function(){\r\n                notFoundPopup();\r\n            }, 1500);\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"showNotFoundPopup\");\r\n        }\r\n    }\r\n    \r\n    function showTableData (){\r\n        let fieldsData;\r\n        let checkFound = false;\r\n        fieldsData = _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields.content;\r\n    \r\n        function showElem(idElem){\r\n            try{\r\n                const elem = $$(idElem);\r\n                if (elem){\r\n                    elem.show();\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"showTableData (element: \"+idElem+\")\");\r\n            }\r\n        }\r\n    \r\n\r\n\r\n        function createElem(){\r\n            try{\r\n                Object.values(fieldsData).forEach(function(field,i){\r\n                \r\n                    if (Object.keys(fieldsData)[i] == id){\r\n                        checkFound=true;\r\n                        \r\n                        if (field.type == \"dbtable\" || \r\n                            field.type == \"tform\"   || \r\n                            field.type == \"dashboard\"){\r\n                        \r\n                               // console.log(webix.storage.local.get(\"visibleColsPrefs_\"+\"hattrs\"),'SSSS')\r\n                                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem)($$(\"webix__none-content\"));\r\n    \r\n                            if (field.type == \"dbtable\"){\r\n                                showElem(\"tables\");\r\n                                (0,_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_3__.getInfoTable) (\"table\", id);\r\n               \r\n                      \r\n                                \r\n                            } else if (field.type == \"tform\"){\r\n                                showElem(\"forms\");\r\n                                (0,_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_3__.getInfoTable) (\"table-view\", id);\r\n                                // const idField = $$(\"table-view\").config.idTable;\r\n                                // const storageData = webix.storage.local.get(\"visibleColsPrefs_\"+idField);\r\n                                // getUserPrefs(\"table-view\",storageData)\r\n    \r\n                            } else if (field.type == \"dashboard\"){\r\n                                showElem(\"dashboards\");\r\n                                (0,_getContent_getInfoDashboard_js__WEBPACK_IMPORTED_MODULE_4__.getInfoDashboard)(id);\r\n                            }\r\n                            \r\n                        } \r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createElem\");\r\n            }\r\n        }\r\n        createElem();\r\n\r\n\r\n    \r\n        if (!checkFound){\r\n            showNotFoundPopup ();\r\n        }\r\n    }\r\n    \r\n    function setTableName (){\r\n        \r\n        if ($$(\"table-templateHeadline\")){\r\n            const headline = $$(\"table-templateHeadline\");\r\n            try{\r\n                _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames.forEach(function(el,i){\r\n                    if (el.id == id){\r\n                        if(headline){\r\n                            headline.setValues(el.name);\r\n                        }\r\n                    }\r\n                    \r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setTableName\");\r\n            }\r\n        } \r\n        \r\n        if ($$(\"table-view-templateHeadline\")){\r\n            const headline = $$(\"table-view-templateHeadline\");\r\n            try{\r\n                _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.tableNames.forEach(function(el,i){\r\n                    if (el.id == id){\r\n                        if(headline){\r\n                            headline.setValues(el.name);\r\n                        }\r\n                    \r\n                    }\r\n                    \r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setTableName element table-view-templateHeadline\");\r\n            }\r\n        }\r\n    }\r\n    \r\n    async function getTableData (){\r\n        \r\n      \r\n    \r\n        if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n            await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"fields\"); \r\n        }\r\n     \r\n        if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n            showTableData ();\r\n            setTableName ();\r\n\r\n\r\n        }\r\n    }\r\n    \r\n    async function createTable (){\r\n        await (0,_common_js__WEBPACK_IMPORTED_MODULE_5__.getWorkspace) ();\r\n\r\n        try{   \r\n            const tree = $$(\"tree\");\r\n            tree.attachEvent(\"onAfterLoad\", function () {\r\n\r\n                function treeselectItem(){\r\n                    const parentId = tree.getParentId(id);\r\n                    tree.open(parentId);\r\n                    tree.select(id);\r\n                }\r\n    \r\n                if (tree.getItem(id)){\r\n                \r\n                    treeselectItem();\r\n                \r\n                } else if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields) {\r\n                    getTableData ();\r\n            \r\n                } else if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n                    showTableData ();\r\n                    setTableName ();\r\n                } \r\n                    \r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createTable\");\r\n        }\r\n    }\r\n    \r\n    function checkTable(){\r\n        try {\r\n            const tree = $$(\"tree\");\r\n            if (tree.data.order.length == 0){\r\n                createTable ();\r\n                \r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"checkTable\");\r\n    \r\n        }    \r\n      \r\n    }\r\n   \r\n    checkTable();\r\n   \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/tree.js?");

/***/ }),

/***/ "./src/js/blocks/routerConfig/userprefs.js":
/*!*************************************************!*\
  !*** ./src/js/blocks/routerConfig/userprefs.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"userprefsRouter\": () => (/* binding */ userprefsRouter)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/routerConfig/common.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => userprefs\";\r\n\r\nfunction showUserprefs(){\r\n    try{\r\n        $$(\"userprefs\").show();\r\n    } catch (err){\r\n      \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"showUserprefs\");\r\n    }\r\n}\r\n\r\nfunction setUserprefsNameValue (){\r\n    let user = webix.storage.local.get(\"user\");\r\n    try{\r\n        if (user){\r\n            $$(\"userprefsName\").setValues(user.name.toString());\r\n        }\r\n    } catch (err){\r\n      \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setUserprefsNameValue\");\r\n    }\r\n\r\n}\r\n\r\nfunction hideNoneContent(){\r\n    try{\r\n        const elem = $$(\"webix__none-content\");\r\n        if(elem){\r\n            elem.hide();\r\n        }\r\n    } catch (err){\r\n        \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"hideNoneContent\");\r\n    }\r\n}\r\n\r\nfunction getDataUserprefs(){\r\n    const userprefsData = webix.ajax().get(\"/init/default/api/userprefs/\");\r\n\r\n    userprefsData.then(function(data){\r\n\r\n        data = data.json().content;\r\n    \r\n        function setTemplateValue(){\r\n            try{\r\n                data.forEach(function(el,i){\r\n        \r\n                    if (el.name.includes(\"userprefs\") && \r\n                        el.name.lastIndexOf(\"userprefs\") == 0){\r\n                        $$(el.name).setValues(JSON.parse(el.prefs));\r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"getDataUserprefs\");\r\n            }\r\n        }\r\n\r\n        setTemplateValue();\r\n        \r\n    });\r\n\r\n    userprefsData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, logNameFile,\"getDataUserprefs\");\r\n    });\r\n}\r\n\r\nfunction removeNullContent(){\r\n    try{\r\n        const elem = $$(\"webix__null-content\");\r\n        if(elem){\r\n            const parent = elem.getParentView();\r\n            parent.removeView(elem);\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"removeNullContent\");\r\n    }\r\n}\r\n\r\n\r\nfunction userprefsRouter(){\r\n\r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_1__.hideAllElements) ();\r\n  \r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_1__.checkTreeOrder)();\r\n\r\n    if ($$(\"userprefs\")){\r\n        showUserprefs();\r\n    } else {\r\n        (0,_common_js__WEBPACK_IMPORTED_MODULE_1__.createElements)(\"userprefs\");\r\n        getDataUserprefs();\r\n        showUserprefs();\r\n\r\n    }\r\n\r\n    setUserprefsNameValue ();\r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_1__.closeTree)();\r\n    hideNoneContent();\r\n\r\n    removeNullContent();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/routerConfig/userprefs.js?");

/***/ }),

/***/ "./src/js/blocks/storageSetting.js":
/*!*****************************************!*\
  !*** ./src/js/blocks/storageSetting.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setStorageData\": () => (/* binding */ setStorageData),\n/* harmony export */   \"setUserPrefs\": () => (/* binding */ setUserPrefs)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\nfunction setStorageData (name, value){\r\n    if (typeof(Storage) !== 'undefined') {\r\n        localStorage.setItem(name, value);\r\n    } \r\n}\r\n\r\nfunction setLoginActionPref(userLocation, userprefsWorkspace){\r\n    function replaceUser(){\r\n        if (userLocation       && \r\n            userLocation.href  && \r\n            userLocation.href !== window.location.href ){\r\n        \r\n            window.location.replace(userLocation.href);\r\n        }\r\n    }\r\n    try{\r\n        if (userprefsWorkspace){\r\n            if (userprefsWorkspace.LoginActionOpt == 2){\r\n                replaceUser();\r\n            }\r\n        } else {\r\n            replaceUser();\r\n        }\r\n    } catch(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"storageSettings\",\"setLoginActionPref\");\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction moveUser(){\r\n\r\n    const localPath = \"/index.html/content\";\r\n    const expaPath  = \"/init/default/spaw/content\";\r\n\r\n\r\n\r\n    if ( window.location.pathname == localPath || window.location.pathname == expaPath ){\r\n  \r\n        const userprefsWorkspace = webix.storage.local.get(\"userprefsWorkspaceForm\");\r\n        const userLocation       = webix.storage.local.get(\"userLocationHref\");\r\n        const outsideHref        = webix.storage.local.get(\"outsideHref\");\r\n\r\n        if (outsideHref){\r\n            const url = new URL( outsideHref.href );\r\n            \r\n            if ( url.origin == window.location.origin && !(url.pathname.includes(\"logout\"))) {\r\n                setLoginActionPref( outsideHref, userprefsWorkspace );\r\n            }\r\n\r\n        } else {\r\n            const url = new URL( userLocation.href );\r\n            if ( userprefsWorkspace && userprefsWorkspace.LoginActionOpt || !userprefsWorkspace ){\r\n\r\n                if ( url.origin == window.location.origin && !(url.pathname.includes(\"logout\"))) {\r\n                    setLoginActionPref( userLocation, userprefsWorkspace );\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction setLogPref(){\r\n    const userprefsWorkspace = webix.storage.local.get(\"userprefsWorkspaceForm\");\r\n    const logLayout          = $$(\"logLayout\");\r\n    const logBtn             = $$(\"webix_log-btn\");\r\n\r\n    function hideLog(){\r\n        logLayout.config.height = 5;\r\n        logBtn.config.icon =\"icon-eye\";\r\n        logBtn.setValue(1);\r\n    }\r\n\r\n    function showLog(){\r\n        logLayout.config.height = 90;\r\n        logBtn.config.icon =\"icon-eye-slash\";\r\n        logBtn.setValue(2);\r\n    }\r\n    \r\n    try{\r\n        if (userprefsWorkspace){\r\n \r\n            if (userprefsWorkspace.logBlockOpt !== undefined ){\r\n\r\n                if (userprefsWorkspace.logBlockOpt == \"2\"){\r\n                    hideLog();\r\n\r\n                } else if(userprefsWorkspace.logBlockOpt == \"1\"){\r\n                    showLog();\r\n                }\r\n\r\n                logLayout.resize();\r\n                logBtn.refresh();\r\n            }\r\n\r\n\r\n        }\r\n    } catch(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"storageSettings\",\"userprefsWorkspace\");\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction setUserPrefs (userData){\r\n \r\n    const userprefsData = webix.ajax(\"/init/default/api/userprefs/\");\r\n   \r\n    userprefsData.then( function (data) {\r\n        let user = webix.storage.local.get(\"user\");\r\n        data       = data.json().content;\r\n\r\n        if (userData){\r\n            user = userData;\r\n        }\r\n        \r\n        function setDataToStorage(){\r\n \r\n            try{\r\n                data.forEach(function(el,i){\r\n                    if (el.owner == user.id && !(el.name.includes(\"fav-link_\"))){\r\n                        setStorageData (el.name, el.prefs);\r\n                    }\r\n               \r\n                });\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"storageSettings\",\"setDataToStorage\");\r\n            }\r\n        }\r\n\r\n        \r\n        function setPrefs(){\r\n   \r\n            if (!user){\r\n                const userprefsGetData = webix.ajax(\"/init/default/api/whoami\");\r\n                userprefsGetData.then(function(data){\r\n                    data = data.json().content;\r\n                \r\n                    let userData = {};\r\n                \r\n                    userData.id       = data.id;\r\n                    userData.name     = data.first_name;\r\n                    userData.username = data.username;\r\n           \r\n                    setStorageData(\"user\", JSON.stringify(userData));\r\n                });\r\n                userprefsGetData.then(function(data){\r\n                    user = webix.storage.local.get(\"user\");\r\n                    setDataToStorage ();\r\n                    moveUser         ();\r\n                    setLogPref       ();\r\n                });\r\n\r\n                userprefsGetData.fail(function(err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"favsLink\", \"btnSaveLpostContentinkClick => getUserData\");\r\n                });\r\n    \r\n            } else {\r\n \r\n                setDataToStorage();\r\n                moveUser        ();\r\n            }\r\n\r\n        \r\n          \r\n        }\r\n        setPrefs();\r\n    }).then(function(){\r\n        setLogPref();\r\n    });\r\n    userprefsData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"storageSettings\",\"setUserPrefs\");\r\n    });\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/storageSetting.js?");

/***/ }),

/***/ "./src/js/blocks/tableEditForm/buttons.js":
/*!************************************************!*\
  !*** ./src/js/blocks/tableEditForm/buttons.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editFormBtns\": () => (/* binding */ editFormBtns),\n/* harmony export */   \"saveItem\": () => (/* binding */ saveItem),\n/* harmony export */   \"saveNewItem\": () => (/* binding */ saveNewItem)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _notifications_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./property.js */ \"./src/js/blocks/tableEditForm/property.js\");\n/* harmony import */ var _validation_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./validation.js */ \"./src/js/blocks/tableEditForm/validation.js\");\n/* harmony import */ var _states_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./states.js */ \"./src/js/blocks/tableEditForm/states.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => buttons\";\r\n\r\nfunction updateWorkspace (itemData){\r\n    try{\r\n        const table   = $$( \"table\" );\r\n        table.updateItem(itemData.id, itemData);\r\n        table.clearSelection();\r\n      \r\n        (0,_states_js__WEBPACK_IMPORTED_MODULE_6__.defaultStateForm)();\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"saveItem => updateWorkspace\");\r\n    }  \r\n    \r\n}\r\n\r\n\r\nfunction setDirtyProp (property){\r\n                     \r\n    try{\r\n        property.config.dirty = false;\r\n        property.refresh();\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"saveItem => setDirtyProp\");\r\n    } \r\n}\r\n\r\n\r\nfunction addNewStateSpace(){\r\n    const table   = $$( \"table\" );\r\n    const delBtn  = $$(\"table-delBtnId\");\r\n    const saveBtn = $$(\"table-saveBtn\");\r\n    const saveNew = $$(\"table-saveNewBtn\");\r\n    try{\r\n        table.filter(false);\r\n        (0,_states_js__WEBPACK_IMPORTED_MODULE_6__.createEditFields)(\"table-editForm\");\r\n        delBtn.disable(); \r\n        saveBtn.hide();\r\n        saveNew.show();\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"saveItem => addNewStateSpace\");\r\n    }\r\n}\r\n\r\n\r\nfunction dateFormatting(arr){\r\n    const vals          = Object.values(arr);\r\n    const keys          = Object.keys(arr);\r\n    const formattingArr = arr;\r\n\r\n    keys.forEach(function(el,i){\r\n        const prop       = $$(\"editTableFormProperty\");\r\n        const item       = prop.getItem(el);\r\n        const formatData = webix.Date.dateToStr(\"%d.%m.%Y %H:%i:%s\");\r\n\r\n        if ( item.type == \"customDate\" ){\r\n            formattingArr[el] = formatData(vals[i]);\r\n        }\r\n    });\r\n    return formattingArr;\r\n}\r\n\r\n\r\nfunction formattingBoolVals(arr){\r\n    const table = $$( \"table\" );\r\n    const cols  = table.getColumns();\r\n    cols.forEach(function(el,i){\r\n\r\n        if ( arr[el.id] && el.type == \"boolean\" ){\r\n            if (arr[el.id] == 2){\r\n                arr[el.id] = false;\r\n            } else {\r\n                arr[el.id] = true;\r\n            }\r\n        }\r\n    });\r\n\r\n    return arr;\r\n\r\n}   \r\n\r\n\r\nfunction saveItem(addBtnClick=false, refBtnClick=false){    \r\n  \r\n    try{    \r\n        \r\n        const itemData = $$(\"editTableFormProperty\").getValues();   \r\n        const currId   = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId) ();\r\n       \r\n        if (!((0,_validation_js__WEBPACK_IMPORTED_MODULE_5__.validateProfForm)().length)){\r\n\r\n            if( itemData.id ) {\r\n                const link       = \"/init/default/api/\"+currId+\"/\"+itemData.id;\r\n                \r\n                const editForm       = $$(\"table-editForm\");\r\n                const property       = $$(\"editTableFormProperty\");\r\n                const addBtn         = $$(\"table-newAddBtnId\");\r\n                const emptyTempl     = $$(\"EditEmptyTempalte\");\r\n                const container      = $$(\"tableContainer\");\r\n                const uniqueVals     = (0,_validation_js__WEBPACK_IMPORTED_MODULE_5__.uniqueData) (itemData);\r\n                const dateFormatVals = dateFormatting(uniqueVals)\r\n                const sentObj        = formattingBoolVals(dateFormatVals);\r\n \r\n                const putData    = webix.ajax().put(link, sentObj);\r\n\r\n                putData.then(function(data){\r\n                    data = data.json();\r\n\r\n                    if (data.err_type == \"i\"){\r\n\r\n                        if (!refBtnClick){\r\n                            updateWorkspace (itemData);\r\n                            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(editForm);\r\n                        }\r\n\r\n                        if (!addBtnClick ){\r\n                            addBtn.enable();\r\n                            setDirtyProp(property);\r\n                           \r\n                        } else {\r\n                            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(property);\r\n                            addNewStateSpace();\r\n                            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(emptyTempl);\r\n                        }\r\n                 \r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(container);\r\n\r\n                        if(window.innerWidth < 850){\r\n                            editForm.hide();\r\n                        }\r\n \r\n                        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\",\"Данные сохранены\",currId);\r\n\r\n                    } else {\r\n                        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",logNameFile+\" function saveItem: \"+data.err);\r\n                    }\r\n                });\r\n                putData.fail(function(err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, logNameFile,\"saveItem\");\r\n                });\r\n            }    \r\n\r\n        } else {\r\n            (0,_validation_js__WEBPACK_IMPORTED_MODULE_5__.validateProfForm) ().forEach(function(el,i){\r\n                (0,_validation_js__WEBPACK_IMPORTED_MODULE_5__.setLogError) ();\r\n            });\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"saveItem\");\r\n    }\r\n\r\n}\r\n\r\nfunction addItem () {\r\n    const emptyTemplate = $$(\"EditEmptyTempalte\");\r\n    const property      = $$(\"editTableFormProperty\");\r\n    const table         = $$(\"table\");\r\n\r\n    function setWorkspaceState (){\r\n        function tableState(){\r\n            table.filter(false);\r\n            table.clearSelection();\r\n        }\r\n\r\n        function buttonsState(){\r\n            $$(\"table-delBtnId\")   .disable();\r\n            $$(\"table-saveBtn\")    .hide();\r\n            $$(\"table-saveNewBtn\") .show();\r\n            $$(\"table-newAddBtnId\").disable();\r\n        }\r\n\r\n        try{\r\n            tableState();\r\n            buttonsState();\r\n            (0,_states_js__WEBPACK_IMPORTED_MODULE_6__.createEditFields)(\"table-editForm\");\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(emptyTemplate);\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"addItem => setWorkspaceState\");\r\n        }\r\n    \r\n    }\r\n\r\n    function setDirtyProp (){\r\n        try{\r\n            property.config.dirty = false;\r\n            property.refresh();\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"addItem => setDirtyProp\");\r\n        }\r\n    }\r\n    \r\n    function modalBoxAddItem(){\r\n        (0,_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)().then(function(result){\r\n            if (result == 1){\r\n                setWorkspaceState ();\r\n                setDirtyProp ();\r\n            \r\n            } else if (result == 2){\r\n                saveItem(true);\r\n                setDirtyProp ();\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(emptyTemplate);\r\n            }\r\n        });\r\n    }\r\n\r\n   \r\n\r\n    function initPropertyForm(){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(property);\r\n        property.clear();\r\n    }\r\n\r\n\r\n    try {\r\n  \r\n        if ( property.config.dirty == true ){\r\n            modalBoxAddItem();\r\n        } else {\r\n            initPropertyForm();\r\n            setWorkspaceState ();\r\n            table.hideOverlay(\"Ничего не найдено\");\r\n        }\r\n\r\n    }catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"addItem\");\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction removeNullFields(arr){\r\n    const vals    = Object.values(arr);\r\n    const keys    = Object.keys(arr);\r\n    const sentObj = {};\r\n\r\n    vals.forEach(function(el,i){\r\n        if (el){\r\n            sentObj[keys[i]]= el;\r\n        }\r\n        dateFormatting(arr);\r\n    });\r\n\r\n    return sentObj;\r\n}\r\n\r\nfunction setCounterVal (){\r\n    try{\r\n        const counter = $$(\"table-findElements\");\r\n        \r\n        const oldVal  = counter.getValues();\r\n        const newVal  = +oldVal + 1;\r\n\r\n        counter.setValues(newVal.toString());\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setCounterVal\");\r\n    }\r\n}\r\n\r\nfunction saveNewItem (){\r\n    const currId = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId) ();\r\n \r\n    if (!((0,_validation_js__WEBPACK_IMPORTED_MODULE_5__.validateProfForm)().length)){\r\n\r\n        const editForm       = $$(\"table-editForm\");\r\n        const property       = $$(\"editTableFormProperty\");\r\n        const newValues      = property.getValues();\r\n        const notNullVals    = removeNullFields  (newValues);\r\n        const dateFormatVals = dateFormatting    (notNullVals);\r\n        const sentVals       = formattingBoolVals(dateFormatVals);\r\n\r\n\r\n        const postData  = webix.ajax().post(\"/init/default/api/\"+currId, sentVals);\r\n      \r\n        postData.then(function(data){\r\n            data = data.json();\r\n\r\n            function setDirtyProp(){\r\n                try{\r\n                    property.config.dirty = false;\r\n                    property.refresh();\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"saveNewItem => setDirtyProp\");\r\n                }\r\n            }\r\n\r\n            function tableUpdate(){\r\n                newValues.id = data.content.id;\r\n\r\n                if (newValues.id <= $$(\"table\").config.offsetAttr ){\r\n                    $$(\"table\").add(newValues); \r\n                }\r\n\r\n                setCounterVal ();\r\n\r\n            }\r\n\r\n            if (data.content.id !== null){\r\n\r\n                if (data.err_type == \"i\"){\r\n                    try{\r\n                        tableUpdate();\r\n                        (0,_states_js__WEBPACK_IMPORTED_MODULE_6__.defaultStateForm) ();\r\n                        setDirtyProp();\r\n                        $$(\"table-newAddBtnId\").enable();\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(editForm);\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"tableContainer\"));\r\n\r\n                        if(window.innerWidth < 850){\r\n                            editForm.hide();\r\n                        }\r\n\r\n              \r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"saveNewItem\");\r\n                    }\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\",\"Данные успешно добавлены\",currId);\r\n                } else {\r\n                    console.log(data);\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",logNameFile+\" function saveNewItem: \"+data.err);\r\n                }\r\n            } else {\r\n\r\n                let errs = data.content.errors;\r\n                let msg = \"\";\r\n                Object.values(errs).forEach(function(err,i){\r\n                    msg +=err+\" (Поле: \"+Object.keys(errs)[i] +\"); \";\r\n                });\r\n\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",\"editTableForm function saveNewItem: \"+msg);\r\n            }\r\n        });\r\n        postData.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"tableEditForm => btns\",\"saveNewItem\");\r\n        });\r\n    \r\n\r\n    } else {\r\n        (0,_validation_js__WEBPACK_IMPORTED_MODULE_5__.setLogError) ();\r\n    }\r\n \r\n}\r\n\r\nfunction removeItem() {\r\n \r\n    try{\r\n        const currId = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId) ();\r\n\r\n        (0,_notifications_js__WEBPACK_IMPORTED_MODULE_2__.popupExec)(\"Запись будет удалена\").then(\r\n            function(){\r\n\r\n                const formValues  = $$(\"editTableFormProperty\").getValues();\r\n                const table       = $$( \"table\" );\r\n                const tableSelect = table.getSelectedId().id;\r\n                \r\n                function removeRow(){\r\n                    if(table){\r\n                        table.remove(tableSelect);\r\n                    }\r\n                }\r\n\r\n                removeRow();\r\n                const link =\"/init/default/api/\"+currId+\"/\"+formValues.id+\".json\";\r\n                const removeData = webix.ajax().del(link, formValues);\r\n\r\n                removeData.then(function(data){\r\n                    data = data.json();\r\n\r\n                    if (data.err_type == \"i\"){\r\n                        \r\n                        (0,_states_js__WEBPACK_IMPORTED_MODULE_6__.defaultStateForm)();\r\n                        (0,_property_js__WEBPACK_IMPORTED_MODULE_4__.setDirtyProperty)();\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"tableContainer\"));\r\n\r\n                        if(window.innerWidth < 850){\r\n                            $$(\"table-editForm\").hide();\r\n                        }\r\n\r\n                        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\",\"Данные успешно удалены\");\r\n                    } else {\r\n                        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",\"editTableForm function removeItem: \"+data.err);\r\n                    }\r\n                });\r\n                removeData.fail(function(err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, logNameFile,\"removeItem\");\r\n                });\r\n     \r\n        });\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"removeItem\");\r\n    }\r\n    \r\n}\r\n\r\n\r\nfunction backTableBtnClick() {\r\n    const form           = $$(\"table-editForm\");\r\n    const tableContainer = $$(\"tableContainer\");\r\n    const property       = $$(\"editTableFormProperty\");\r\n    const table          = $$(\"table\");\r\n\r\n    function defaultState(){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(form);\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(tableContainer);\r\n        if (table){\r\n            table.clearSelection();\r\n        }\r\n    }\r\n\r\n    function createModalBox(){\r\n\r\n        (0,_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)().then(function(result){\r\n                        \r\n            if (result == 1 || result == 2){\r\n                if (result == 1){\r\n                    defaultState();\r\n                } else if (result == 2){\r\n                    if (property.getValues().id){\r\n                        saveItem();\r\n                        defaultState();\r\n                    } else {\r\n                        saveNewItem(); \r\n                    }\r\n                }\r\n\r\n                (0,_property_js__WEBPACK_IMPORTED_MODULE_4__.setDirtyProperty) ();\r\n            }\r\n        });\r\n    }\r\n\r\n    if (property.config.dirty){\r\n        createModalBox ();\r\n    \r\n    } else {\r\n        defaultState();\r\n    }\r\n  \r\n\r\n}\r\n\r\n\r\nfunction setAdaptiveValue(btn, adaptVal, mainVal){\r\n    const width  = btn.$width;\r\n   \r\n    if (width < 120 &&  btn.config.value !== adaptVal ){\r\n        btn.config.value = adaptVal;\r\n        btn.refresh();\r\n      \r\n    } else if (width > 120 &&  btn.config.value !== mainVal ) {\r\n        btn.config.value = mainVal;\r\n        btn.refresh();\r\n    }\r\n}\r\n\r\nconst newAddBtn = {   \r\n    view    : \"button\",\r\n    id      : \"table-newAddBtnId\",\r\n    height  : 48,\r\n    minWidth: 50, \r\n    disabled: true,\r\n    hotkey  : \"alt+a\",\r\n    value   : \"Новая запись\", \r\n    click   : addItem,\r\n    on      : {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\", \"Добавить новую запись (Alt+A)\");\r\n            setAdaptiveValue(this, \"+\", \"Новая запись\");\r\n\r\n        },\r\n    \r\n    } \r\n};\r\n\r\nconst delBtn = {  \r\n    view:\"button\",\r\n    id:\"table-delBtnId\",\r\n    disabled:true,\r\n    height:48,\r\n    width:50,\r\n    hotkey: \"ctrl+enter\",\r\n    css:\"webix_danger\", \r\n    type:\"icon\", \r\n    icon:\"icon-trash\", \r\n    click:removeItem,\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Удалить запись из таблицы (Ctrl+Enter)\");\r\n        }\r\n    },\r\n     \r\n};\r\n\r\nconst saveBtn = { \r\n    view    : \"button\", \r\n    id      : \"table-saveBtn\",\r\n    hidden  : true, \r\n    value   : \"Сохранить\", \r\n    hotkey  : \"shift+space\",\r\n    height  : 48, \r\n    css     : \"webix_primary\", \r\n    click   : function(){\r\n        saveItem();\r\n    },\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Удалить запись из таблицы (Shift+Space)\");\r\n        }\r\n    },\r\n};\r\n\r\nconst saveNewBtn = { \r\n    view    : \"button\", \r\n    id      : \"table-saveNewBtn\",\r\n  //  value   : \"Сохранить новую запись\",\r\n    value   : \"Сохранить\",\r\n    hidden  : true,  \r\n    height  : 48,\r\n    css     : \"webix_primary\", \r\n    hotkey  : \"ctrl+shift+space\",\r\n    click   : function(){\r\n        saveNewItem();\r\n    },\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Удалить запись из таблицы (Ctrl+Shift+Space)\");\r\n        }\r\n    },\r\n};\r\n\r\nconst backTableBtn = { \r\n    view    : \"button\", \r\n    id      : \"table-backTableBtn\",\r\n    type    : \"icon\",\r\n    icon    : \"icon-arrow-left\",\r\n    value   : \"Вернуться к таблице\",\r\n    hidden  : true,  \r\n    height  : 48,\r\n    minWidth: 60,\r\n    width   : 90,\r\n    hotkey  : \"shift+q\",\r\n    click   : function(){\r\n        backTableBtnClick();\r\n    },\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute( \"title\", \"Вернуться к таблице (Shift+Q)\" );\r\n        }\r\n    } \r\n};\r\n\r\nconst emptyTmplate = {   \r\n    id         : \"EditEmptyTempalte\",\r\n    css        : \"webix_empty-template\",\r\n    template   : \"Добавьте новую запись или выберите существующую из таблицы\", \r\n    borderless : true,\r\n};\r\n\r\nconst editFormBtns = {\r\n    minHeight : 48,\r\n    css       : \"webix_form-adaptive\", \r\n    margin    : 5, \r\n    rows:[\r\n        {cols:[\r\n            {   id      : \"tablePropBtnsSpace\",\r\n                width   : 35, \r\n                hidden  : true\r\n            },\r\n            {rows:[\r\n                {\r\n                    margin : 5,\r\n                    rows   : [\r\n                        {\r\n                            margin : 2,\r\n                            cols   : [\r\n                                backTableBtn,\r\n                                newAddBtn,  \r\n                                delBtn,\r\n                            ]\r\n                        },\r\n                \r\n                    ]\r\n                },\r\n        \r\n                {   margin : 10, \r\n                    rows   : [ \r\n                        saveBtn,\r\n                        saveNewBtn,\r\n                        emptyTmplate,\r\n                    ]\r\n                },\r\n             \r\n            ]}\r\n        ]}\r\n   \r\n     \r\n\r\n    ]\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableEditForm/buttons.js?");

/***/ }),

/***/ "./src/js/blocks/tableEditForm/layout.js":
/*!***********************************************!*\
  !*** ./src/js/blocks/tableEditForm/layout.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editTableBar\": () => (/* binding */ editTableBar)\n/* harmony export */ });\n/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./property.js */ \"./src/js/blocks/tableEditForm/property.js\");\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/blocks/tableEditForm/buttons.js\");\n\r\n\r\n\r\n\r\nconst editForm = {\r\n    view        : \"form\", \r\n    id          : \"table-editForm\",\r\n    hidden      : true,\r\n    css         : \"webix_form-edit\",\r\n    minHeight   : 350,\r\n    minWidth    : 230,\r\n    borderless  : true,\r\n    scroll      : true,\r\n    elements    : [\r\n        _buttons_js__WEBPACK_IMPORTED_MODULE_1__.editFormBtns,\r\n        _property_js__WEBPACK_IMPORTED_MODULE_0__.propertyLayout,  \r\n    ],\r\n\r\n   \r\n    rules       : {\r\n        $all:webix.rules.isNotEmpty\r\n    },\r\n\r\n    ready       : function(){\r\n        this.validate();\r\n    },\r\n\r\n};\r\n\r\n\r\n\r\nfunction editTableBar (){\r\n    return editForm;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableEditForm/layout.js?");

/***/ }),

/***/ "./src/js/blocks/tableEditForm/property.js":
/*!*************************************************!*\
  !*** ./src/js/blocks/tableEditForm/property.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setDirtyProperty\": () => (/* binding */ setDirtyProperty),\n/* harmony export */   \"propertyLayout\": () => (/* binding */ propertyLayout)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\nconst logNameFile = \"tableEditForm => property\";\r\n\r\nfunction setDirtyProperty (type=false){\r\n    try{\r\n        const property = $$(\"editTableFormProperty\");\r\n        if(property){\r\n            property.config.dirty = type;\r\n            property.refresh();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setDirtyProperty\");\r\n    } \r\n}\r\n\r\n\r\nfunction editingEnd (editor,value){\r\n    try{\r\n        const property = $$(\"editTableFormProperty\");\r\n        const item     = property.getItem(editor);\r\n        item.value     = value;\r\n\r\n        property.updateItem(editor);\r\n        setDirtyProperty (true);\r\n\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"editingEnd\");\r\n    }\r\n}\r\n\r\nfunction propTooltipAction (obj){\r\n    const label      = obj.label;\r\n    const labelText  = \"Название: \"+label+\" <br>\";\r\n    const formatData = webix.Date.dateToStr(\"%d.%m.%Y %H:%i:%s\");\r\n    let value;\r\n    let typeElem;\r\n    \r\n    if        ( obj.type       == \"date\" ){\r\n        typeElem = \"Выберите дату\";\r\n\r\n    } else if ( obj.type       == \"combo\" ){\r\n        typeElem = \"Выберите значение\";\r\n\r\n    } else if ( obj.customType == \"integer\" ){\r\n        typeElem = \"Введите число\";\r\n\r\n    } else {\r\n        typeElem = \"Введите текст\";\r\n    } \r\n    \r\n    if (obj.type == \"date\"){\r\n        value = formatData(obj.value);\r\n        \r\n    } else{\r\n        value = obj.value;\r\n    }\r\n\r\n    if (obj.value){\r\n        return labelText + \"Значение: \" + value;\r\n    } else {\r\n        return labelText + typeElem;\r\n    }\r\n}\r\n\r\n\r\nfunction createTemplate (){\r\n    document.getElementById('custom-date-editor').addEventListener('input', function (e) {\r\n\r\n        const x = e.target.value.replace(/\\D/g, '')\r\n        .match(/(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})/);\r\n\r\n        function setNum(index){\r\n            return (x[index] ? x[index] : ' __ ');\r\n        }\r\n\r\n        if (e.inputType !== \"deleteContentBackward\"){\r\n            e.target.value = setNum(1) + '.' + setNum(2) + '.' + setNum(3) + '  '+ \r\n            setNum(4) + ':' + setNum(5) + ':' + setNum(6);\r\n        }\r\n     \r\n    });\r\n}\r\n\r\n\r\nconst propertyEditForm = {   \r\n    view     : \"property\",  \r\n    id       : \"editTableFormProperty\", \r\n    css      : \"webix_edit-table-form-property\",\r\n    dirty    : false,\r\n    editable : true,\r\n    tooltip  : propTooltipAction,\r\n    hidden   : true,\r\n    elements : [],\r\n    on       : {\r\n        onEditorChange:function(id, value){\r\n        \r\n            function setStateSaveBtn(){\r\n                const saveBtn =$$(\"table-saveBtn\"); \r\n                if (saveBtn              && \r\n                    saveBtn.isVisible()  &&\r\n                  !(saveBtn.isEnabled()) ){ \r\n                    saveBtn.enable();\r\n                }\r\n            }\r\n\r\n            editingEnd (id,value);\r\n            setStateSaveBtn();\r\n\r\n            const inputEditor = document.getElementById('custom-date-editor');\r\n\r\n            if (inputEditor){\r\n                createTemplate ();\r\n            }\r\n       \r\n        },\r\n        onBeforeRender:function (){\r\n\r\n            const size = this.config.elements.length*28;\r\n            \r\n            if (size && this.$height !== size){\r\n                this.define(\"height\", size);\r\n                this.resize();\r\n            }\r\n    \r\n          \r\n        },\r\n\r\n        onAfterEditStop:function(state, editor){\r\n\r\n            if (state.value !==state.old ){\r\n                editingEnd (editor.id,state.value);\r\n            }\r\n        },\r\n\r\n    }\r\n};\r\n\r\nconst propertyRefBtns = {  \r\n    cols:[\r\n        {   id:\"propertyRefbtns\",  \r\n            rows:[]\r\n        },\r\n        {width:5}\r\n    ] \r\n \r\n};\r\n\r\n\r\nconst propertyLayout = {   \r\n    scroll:\"y\", \r\n    cols:[\r\n        propertyRefBtns,\r\n        {width:4},\r\n        propertyEditForm,\r\n        {width:4}\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableEditForm/property.js?");

/***/ }),

/***/ "./src/js/blocks/tableEditForm/states.js":
/*!***********************************************!*\
  !*** ./src/js/blocks/tableEditForm/states.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createEditFields\": () => (/* binding */ createEditFields),\n/* harmony export */   \"defaultStateForm\": () => (/* binding */ defaultStateForm)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _notifications_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/blocks/tableEditForm/buttons.js\");\n/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./property.js */ \"./src/js/blocks/tableEditForm/property.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => states\";\r\n\r\nfunction destructorPopup(elem){\r\n    try{\r\n        const popup = elem;\r\n        if (popup){\r\n            popup.destructor();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"destructPopup\");\r\n    }\r\n}\r\n\r\nfunction enableBtn (elem){\r\n    try{\r\n            \r\n        const btn = elem;\r\n\r\n        if( btn && !(btn.isEnabled()) ){\r\n            btn.enable();\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"enableBtn\");\r\n    }\r\n}\r\n\r\nfunction createDateEditor(){\r\n    webix.editors.$popup = {\r\n        date:{\r\n           view:\"popup\",\r\n           body:{\r\n            weekHeader:true,\r\n            view:\"calendar\",\r\n            events:webix.Date.isHoliday,\r\n            timepicker: true,\r\n            icons: true,\r\n           }\r\n        }\r\n     };\r\n}\r\n\r\nfunction createEmptySpace(){\r\n    $$(\"propertyRefbtnsContainer\").addView({height:29,width:1});\r\n}\r\n\r\nasync function toRefTable (refTable){ \r\n\r\n    if (!_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n        await (0,_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"fields\"); \r\n    }\r\n\r\n    if (_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.fields){\r\n        if (refTable){\r\n            Backbone.history.navigate(\"tree/\"+refTable, { trigger:true});\r\n            window.location.reload();\r\n        }\r\n\r\n    }\r\n}\r\n\r\nfunction setRefTable (srcTable){\r\n    const table = $$(\"table\");\r\n    const cols  = table.getColumns();\r\n    const tree  = $$(\"tree\");\r\n\r\n    \r\n    try {\r\n        cols.forEach(function(col,i){\r\n\r\n            if ( col.id == srcTable ){\r\n            \r\n                const refTable =  col.type.slice(10);\r\n\r\n                if ( tree.getItem(refTable) ){\r\n\r\n                        tree.select(refTable);\r\n                } else {\r\n\r\n                    if ( refTable ){\r\n                        toRefTable (refTable);\r\n                    }\r\n                }\r\n            \r\n            }\r\n\r\n        });\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setRefTable\");\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"EditEmptyTempalte\"));\r\n    }\r\n}\r\n\r\n\r\nfunction createRefBtn(selectBtn){\r\n    const property = $$(\"editTableFormProperty\");\r\n    \r\n    function btnClick (idBtn){\r\n        const srcTable = $$(idBtn).config.srcTable;\r\n\r\n        function createModalBox (){\r\n            try{\r\n                (0,_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)().then(function(result){\r\n            \r\n                    if (result == 1 || result == 2){\r\n                        if (result == 1){\r\n                        \r\n                        } else if (result == 2){\r\n                            if (property.getValues().id){\r\n\r\n                                (0,_buttons_js__WEBPACK_IMPORTED_MODULE_4__.saveItem)(false,true);\r\n                            } else {\r\n                                (0,_buttons_js__WEBPACK_IMPORTED_MODULE_4__.saveNewItem)(); \r\n                            }\r\n                            \r\n                        }\r\n\r\n                        (0,_property_js__WEBPACK_IMPORTED_MODULE_5__.setDirtyProperty) ();\r\n                        setRefTable (srcTable);\r\n                    \r\n                    }\r\n                });\r\n                \r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createModalBox\");\r\n            }\r\n        }\r\n        if ( property.config.dirty){\r\n            createModalBox ();\r\n        } else {\r\n            setRefTable (srcTable);\r\n        }\r\n    }\r\n\r\n  \r\n    function btnLayout(){\r\n        try{\r\n            $$(\"propertyRefbtnsContainer\").addView({ \r\n                view:\"button\", \r\n                type:\"icon\",\r\n                srcTable:selectBtn,\r\n                width:30,\r\n                height:29,\r\n                icon: 'icon-share-square-o',\r\n                on: {\r\n                    onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Перейти в родительскую таблицу\");\r\n                    },\r\n                },\r\n                click:function (id){\r\n                    btnClick (id);\r\n                }\r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"btnLayout\");\r\n        }\r\n    }\r\n   \r\n    btnLayout();\r\n    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"tablePropBtnsSpace\"));\r\n}\r\n\r\nfunction createPopupOpenBtn(elem){\r\n    const property = $$(\"editTableFormProperty\");\r\n    \r\n    \r\n    function btnClick (){\r\n        \r\n        function editPropSubmitClick (){\r\n            try{\r\n                const value = $$(\"editPropTextarea\").getValue();\r\n                property.setValues({ [elem.id]:[value] }, true);\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"editPropSubmitClick\");\r\n            }\r\n            destructorPopup( $$(\"editTablePopupText\"));\r\n        }\r\n\r\n        function setTextareaVal(){\r\n            try{\r\n                const area = $$(\"editPropTextarea\");\r\n                if (elem.value){\r\n                    area.setValue(elem.value);\r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setTextareaVal\");\r\n            }\r\n        }\r\n\r\n\r\n        function popupEdit(){\r\n            function closePopupClick(){\r\n                const area  = $$(\"editPropTextarea\");\r\n                const value = area.getValue();\r\n            \r\n                if (area.dirtyValue){\r\n                    (0,_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)().then(function(result){\r\n        \r\n                        if (result == 1 || result == 2){\r\n                            if (result == 2){\r\n                                property.setValues({ [elem.id]:[value] }, true);\r\n                            }\r\n                            destructorPopup( $$(\"editTablePopupText\"));\r\n                        }\r\n                    });\r\n                } else {\r\n                    destructorPopup( $$(\"editTablePopupText\"));\r\n                }\r\n            }\r\n\r\n            const popupHeadline = {   \r\n                template:\"Редактор поля  «\" + elem.label + \"»\", \r\n                width:250,\r\n                css:\"popup_headline\", \r\n                borderless:true, \r\n                height:20 \r\n            };\r\n        \r\n            const btnClosePopup = {\r\n                view:\"button\",\r\n                id:\"buttonClosePopup\",\r\n                css:\"popup_close-btn\",\r\n                type:\"icon\",\r\n                width:35,\r\n                icon: 'wxi-close',\r\n                click:function(){\r\n                    closePopupClick();\r\n                }\r\n            };\r\n            \r\n            const textarea = { \r\n                view:\"textarea\",\r\n                id:\"editPropTextarea\", \r\n                height:150, \r\n                dirtyValue:false,\r\n                placeholder:\"Введите текст\",\r\n                on:{\r\n                    onKeyPress:function(){\r\n\r\n                        enableBtn ($$(\"editPropSubmitBtn\"));\r\n\r\n                        $$(\"editPropTextarea\").dirtyValue = true;\r\n                    }\r\n                }\r\n            };\r\n\r\n            const btnSave = {\r\n                view:\"button\",\r\n                id:\"editPropSubmitBtn\", \r\n                value:\"Добавить значение\", \r\n                css:\"webix_primary\", \r\n                disabled:true,\r\n                click:function(){\r\n                    editPropSubmitClick();\r\n                }\r\n            \r\n            };\r\n            \r\n            webix.ui({\r\n                view:\"popup\",\r\n                id:\"editTablePopupText\",\r\n                css:\"webix_popup-prev-href\",\r\n                width:400,\r\n                minHeight:300,\r\n                modal:true,\r\n                escHide:true,\r\n                position:\"center\",\r\n                body:{\r\n                    rows:[\r\n                    {rows: [ \r\n                        { cols:[\r\n                            popupHeadline,\r\n                            {},\r\n                            btnClosePopup,\r\n                        ]},\r\n                        textarea,\r\n                        {height:15},\r\n                        btnSave,\r\n                    ]}]\r\n                    \r\n                },\r\n        \r\n            }).show();\r\n            \r\n            setTextareaVal();\r\n        \r\n        }\r\n        \r\n        popupEdit();\r\n\r\n\r\n    }\r\n\r\n    function createBtnTextEditor(){\r\n        try{\r\n            $$(\"propertyRefbtnsContainer\").addView({ \r\n                view:\"button\", \r\n                type:\"icon\",\r\n                width:30,\r\n                height:29,\r\n                icon: 'icon-window-restore',\r\n                on: {\r\n                    onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Открыть большой редактор текста\");\r\n                    },\r\n                },\r\n                click:function ( ){\r\n                    btnClick ( );\r\n                }\r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createBtnTextEditor\");\r\n        }\r\n    }\r\n\r\n    createBtnTextEditor();\r\n    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"tablePropBtnsSpace\"));\r\n}\r\n\r\nfunction createDatePopup(elem){\r\n\r\n    const property = $$(\"editTableFormProperty\");\r\n\r\n\r\n    function btnClick(){\r\n        const postFormatDate = webix.Date.dateToStr(\"%d.%m.%y\");\r\n\r\n        function setPropValues(){\r\n            const val            = property.getValues()[elem.id]\r\n            const postFormatHour = webix.Date.dateToStr(\"%H\");\r\n            const postFormatMin  = webix.Date.dateToStr(\"%i\");\r\n            const postFormatSec  = webix.Date.dateToStr(\"%s\");\r\n            const calendar       = $$(\"editCalendarDate\");\r\n            const btn            = $$(\"editPropCalendarSubmitBtn\");\r\n\r\n            function unsetDirtyProp(elem){\r\n                elem.config.dirtyProp = false;\r\n            }\r\n\r\n            function setValuesDate(){\r\n                try{\r\n        \r\n                    if ( val && !isNaN(postFormatHour(val)) ){\r\n                        calendar.setValue( val );\r\n                        $$(\"hourInp\").setValue (postFormatHour(val));\r\n                        $$(\"minInp\") .setValue (postFormatMin (val));\r\n                        $$(\"secInp\") .setValue (postFormatSec (val));\r\n\r\n            \r\n                    } else {\r\n                        calendar.setValue( new Date() );\r\n        \r\n                        if( btn ){\r\n                            btn.disable();\r\n                        }\r\n                    }\r\n\r\n                    unsetDirtyProp( calendar     );\r\n                    unsetDirtyProp( $$(\"hourInp\"));\r\n                    unsetDirtyProp( $$(\"minInp\" ) );\r\n                    unsetDirtyProp( $$(\"secInp\" ) );\r\n            \r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setValuesDate\");\r\n                }\r\n            }\r\n\r\n\r\n            setValuesDate();\r\n           \r\n        }\r\n\r\n        function editPropCalendarSubmitClick (){\r\n\r\n            const propId  = property.getValues().id;\r\n\r\n            const calendar=  $$(\"editCalendarDate\");\r\n\r\n            const hour    = $$(\"hourInp\").getValue();\r\n            const min     = $$(\"minInp\") .getValue();\r\n            const sec     = $$(\"secInp\") .getValue();\r\n\r\n            const timeVal = hour+\":\"+min+\":\"+sec;\r\n            const dateVal = postFormatDate(calendar.getValue());\r\n\r\n            const sentVal = dateVal+\" \"+timeVal;\r\n\r\n            const errors = [];\r\n\r\n            function validTime(item,count,idEl){\r\n                try{\r\n                    if (item > count){\r\n                        $$(\"timeForm\").markInvalid(idEl);\r\n                        errors.push(idEl);\r\n                    }\r\n\r\n                    if ( !( /^\\d+$/.test(item) ) ){\r\n                        $$(\"timeForm\").markInvalid(idEl);\r\n                        errors.push(idEl);\r\n                    }\r\n\r\n                    if (item.length < 2){\r\n                        $$(\"timeForm\").markInvalid(idEl);\r\n                        errors.push(idEl);\r\n                    }\r\n\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"validTime element: \"+idEl);\r\n                }\r\n            }\r\n\r\n            validTime(hour,23 ,\"hourInp\");\r\n            validTime(min, 59, \"minInp\" );\r\n            validTime(sec, 59, \"secInp\" );\r\n\r\n            function setValToProperty(){\r\n                try{\r\n                    if ( !(errors,errors.length) ){\r\n                        property.setValues({ [elem.id]:sentVal}, true);\r\n                        if(propId){\r\n                            property.setValues({ id:propId}, true);\r\n                        }\r\n                        destructorPopup( $$(\"editTablePopupCalendar\"));\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setValToProperty\");\r\n                }\r\n            }\r\n\r\n            setValToProperty();\r\n        }\r\n\r\n        function popupEdit(){\r\n\r\n            function closePopupClick(){\r\n                let check = false;\r\n                function checkDirty(elem){\r\n                    if ( elem.config.dirtyProp && !check ){\r\n                        check = true;\r\n                    }\r\n                }\r\n\r\n                checkDirty ( $$(\"editCalendarDate\")) ;\r\n                checkDirty ( $$(\"hourInp\") );\r\n                checkDirty ( $$(\"minInp\" ) );\r\n                checkDirty ( $$(\"secInp\" ) );\r\n   \r\n                if (check){\r\n                    (0,_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)().then(function(result){\r\n        \r\n                        if (result == 1 || result == 2){\r\n\r\n                            if (result == 2){\r\n                                editPropCalendarSubmitClick ();\r\n                            }\r\n\r\n                           destructorPopup( $$(\"editTablePopupCalendar\"));\r\n                        }\r\n                    });\r\n                } else {\r\n                    destructorPopup( $$(\"editTablePopupCalendar\"));\r\n                }\r\n\r\n            }\r\n\r\n            const popupHeadline = {   \r\n                template:\"Редактор поля  «\" + elem.label + \"»\", \r\n                width:250,\r\n                css:\"popup_headline\", \r\n                borderless:true, \r\n                height:20 \r\n            };\r\n\r\n            const btnClosePopup = {\r\n                view:\"button\",\r\n                id:\"buttonClosePopup\",\r\n                css:\"popup_close-btn\",\r\n                type:\"icon\",\r\n                hotkey:\"esc\",\r\n                width:35,\r\n                icon: 'wxi-close',\r\n                click:function(){\r\n                    closePopupClick();\r\n                }\r\n            };\r\n        \r\n          \r\n            const dateView = {\r\n                view:\"calendar\",\r\n                format:\"%d.%m.%y\",\r\n                borderless:true,\r\n                id:\"editCalendarDate\",\r\n                width:300,\r\n                height:250,\r\n                dirtyProp:false,\r\n                on:{\r\n                    onChange:function(){\r\n                        this.config.dirtyProp = true;\r\n                        enableBtn ($$(\"editPropCalendarSubmitBtn\"));\r\n                    }\r\n                }\r\n            } ;\r\n        \r\n\r\n            function returnInput(idEl){\r\n                return {\r\n                    view: \"text\",\r\n                    name:idEl,\r\n                    id:idEl,\r\n                    placeholder:\"00\",\r\n                    attributes:{ maxlength :2 },\r\n                    dirtyProp:false,\r\n                    on:{\r\n                        onKeyPress:function(){\r\n                            $$(\"timeForm\").markInvalid(idEl, false);\r\n                            enableBtn ($$(\"editPropCalendarSubmitBtn\"));\r\n                        },\r\n\r\n                        onChange:function(){\r\n                            this.config.dirtyProp = true;\r\n                            enableBtn ($$(\"editPropCalendarSubmitBtn\"));\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n\r\n            function timeSpacer (idEl){\r\n                return {   \r\n                    template:\":\",\r\n                    id:idEl,\r\n                    borderless:true,\r\n                    width:9,\r\n                    height:5,\r\n                    css:\"popup_time-spacer\"\r\n                };\r\n            }\r\n\r\n            const timeForm = {\r\n                view:\"form\", \r\n                id:\"timeForm\",\r\n                height:85,\r\n                type:\"space\",\r\n                elements:[\r\n                    {   template:\"<div style='font-size:13px!important'>\"+\r\n                        \"Введите время в формате xx : xx : xx</div>\",\r\n                        borderless:true,\r\n                        css:\"popup_time-timeFormHead\",\r\n                        \r\n                    },\r\n                    { cols:[\r\n                        returnInput(\"hourInp\"),\r\n                        timeSpacer (1),\r\n                        returnInput(\"minInp\"),\r\n                        timeSpacer (2),\r\n                        returnInput(\"secInp\")\r\n                    ]}\r\n                ]\r\n            };\r\n\r\n\r\n    \r\n        \r\n\r\n            const dateEditor = {\r\n                rows:[\r\n                    dateView, \r\n                    {height:10}, \r\n                    timeForm,\r\n                    {height:10}, \r\n                ]\r\n            };\r\n            \r\n        \r\n\r\n            const btnSave = {\r\n                view:\"button\",\r\n                id:\"editPropCalendarSubmitBtn\", \r\n                value:\"Добавить значение\", \r\n                css:\"webix_primary\", \r\n                click:function(){\r\n                    editPropCalendarSubmitClick();\r\n                }\r\n            \r\n            };\r\n            \r\n            webix.ui({\r\n                view:\"popup\",\r\n                id:\"editTablePopupCalendar\",\r\n                css:\"webix_popup-prev-href\",\r\n                width:400,\r\n                minHeight:300,\r\n                modal:true,\r\n                escHide:true,\r\n                position:\"center\",\r\n                body:{\r\n                    rows:[\r\n                    {rows: [ \r\n                        { cols:[\r\n                            popupHeadline,\r\n                            {},\r\n                            btnClosePopup,\r\n                        ]},\r\n                        dateEditor,\r\n                        {height:15},\r\n                        btnSave,\r\n                    ]}]\r\n                    \r\n                },\r\n        \r\n            }).show();\r\n\r\n            setPropValues();\r\n\r\n        }\r\n        popupEdit();\r\n    }\r\n\r\n    function createDateBtn(){\r\n        try{\r\n            $$(\"propertyRefbtnsContainer\").addView({ \r\n                view:\"button\", \r\n                type:\"icon\",\r\n                width:30,\r\n                height:29,\r\n                icon: 'icon-calendar',\r\n                on: {\r\n                    onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Открыть календарь\");\r\n                    },\r\n                },\r\n                click:function (id){\r\n                    btnClick (id);\r\n                }\r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createDateBtn\");\r\n        }\r\n    }\r\n\r\n    createDateBtn();\r\n    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"tablePropBtnsSpace\"));\r\n}\r\n\r\n\r\nfunction setToolBtns(){\r\n    const property      = $$(\"editTableFormProperty\");\r\n    const refBtns       = $$(\"propertyRefbtns\");\r\n    const propertyElems = property.config.elements;\r\n\r\n    function createBtnsContainer(){\r\n        try{\r\n            refBtns.addView({\r\n                id:\"propertyRefbtnsContainer\",\r\n                rows:[]\r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createBtnsContainer\");\r\n        }\r\n    }\r\n\r\n\r\n    if (!(refBtns._cells.length)){\r\n\r\n        if (!$$(\"propertyRefbtnsContainer\")){\r\n            createBtnsContainer();\r\n        }\r\n\r\n        propertyElems.forEach(function(el,i){\r\n\r\n            if        (el.type == \"combo\"){\r\n                createRefBtn(el.id);\r\n\r\n            } else if (el.customType == \"popup\"){\r\n                createPopupOpenBtn(el);\r\n                \r\n            } else if (el.type == \"customDate\") {\r\n                createDatePopup(el);\r\n\r\n            } else {    \r\n                createEmptySpace();\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction createGuid() {  \r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {  \r\n        var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\r\n        return v.toString(16);  \r\n    });  \r\n}\r\n\r\nfunction createEditFields (parentElement) {\r\n   const property = $$(\"editTableFormProperty\");\r\n\r\n    function addEditInputs(arr){\r\n        property.define(\"elements\", arr);\r\n        property.refresh();\r\n    }\r\n\r\n    try {\r\n        const columnsData = $$(\"table\").getColumns(true);\r\n        const inpElements = Object.keys($$(parentElement).elements);\r\n        \r\n        if ( inpElements.length==0  ){\r\n            const inputsArray = [];\r\n  \r\n            columnsData.forEach((el,i) => {\r\n             \r\n                function defValue (){\r\n\r\n                    function dateFormatting (){\r\n                        return new Date(el.default);\r\n                    }\r\n\r\n                    const formatData = webix.Date.dateToStr(\"%d.%m.%y %H:%i:%s\");\r\n\r\n                    let defVal;\r\n                    if (el.default === \"now\" && el.type == \"datetime\"){\r\n                        defVal = formatData(new Date());\r\n\r\n                    } else if (Date.parse(new Date(el.default)) && el.type == \"datetime\" ){\r\n                        defVal = formatData(dateFormatting ());\r\n\r\n                    } else if (el.default.includes(\"make_guid\")) {\r\n                        defVal = createGuid();\r\n\r\n                    } else if (el.default == \"False\"){\r\n                        defVal = 2;\r\n\r\n                    } else if (el.default  == \"True\"){\r\n                        defVal = 1;\r\n\r\n                    } else if (el.default !== \"None\" && el.default !== \"null\"){\r\n                        defVal = el.default;\r\n\r\n                    } else if (el.default  == \"None\"){\r\n                        defVal = \"\";\r\n\r\n                    } else if (el.default  == \"null\") {\r\n                        defVal = null;\r\n                    }\r\n\r\n\r\n                    return defVal;\r\n                }\r\n\r\n                \r\n                const template = {\r\n                    id      : el.id,\r\n                    label   : el.label, \r\n                    unique  : el.unique,\r\n                    notnull : el.notnull,\r\n                    length  : el.length,\r\n                    value   : defValue ()\r\n                    \r\n                };\r\n\r\n                function createDateTimeInput(){\r\n                    template.type = \"customDate\";\r\n\r\n                }\r\n              \r\n                function createReferenceInput(){\r\n               \r\n                    let findTableId   = el.type.slice(10);\r\n                    template.type     = \"combo\";\r\n                    template.css      = el.id+\"_container\";\r\n                    template.options  = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getComboOptions)(findTableId);\r\n                    template.template = function(obj, common, val, config){\r\n                        let item = config.collection.getItem(obj.value);\r\n                        return item ? item.value : \"\";\r\n                    };\r\n                }\r\n\r\n                function createBooleanInput(){\r\n                    template.type = \"select\";\r\n                    template.options = [\r\n                        {id:1, value: \"Да\"},\r\n                        {id:2, value: \"Нет\"}\r\n                    ];\r\n                }\r\n\r\n\r\n                function createTextInput(){\r\n                    if (el.length == 0 || el.length > 512){\r\n                        template.customType=\"popup\";\r\n\r\n                    } \r\n                    template.type = \"text\";\r\n             \r\n                }\r\n\r\n                function addIntegerType(){\r\n                    template.customType = \"integer\";\r\n                }\r\n\r\n\r\n                if (el.type == \"datetime\"){\r\n                    createDateTimeInput();\r\n\r\n                    \r\n                \r\n\r\n                } else if (el.type.includes(\"reference\")) {\r\n                    createReferenceInput();\r\n\r\n                } else if (el.type.includes(\"boolean\")) {\r\n                    createBooleanInput();\r\n\r\n                } else if (el.type.includes(\"integer\")) {\r\n                    createTextInput();\r\n                    addIntegerType();\r\n\r\n                } else {\r\n                    createTextInput();\r\n                }\r\n                \r\n       \r\n                inputsArray.push(template);\r\n \r\n            });\r\n\r\n       \r\n\r\n            createDateEditor();\r\n            addEditInputs(inputsArray);\r\n            setToolBtns();\r\n       \r\n\r\n        } else {\r\n            $$(parentElement).clear();\r\n            $$(parentElement).clearValidation();\r\n\r\n            if(parentElement==\"table-editForm\"){\r\n                $$(\"table-delBtnId\").enable();\r\n            }\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createEditFields\");\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction defaultStateForm () {\r\n\r\n    const property = $$(\"editTableFormProperty\");\r\n    \r\n    function btnsState(){\r\n        \r\n        const saveBtn    = $$(\"table-saveBtn\");\r\n        const saveNewBtn = $$(\"table-saveNewBtn\");\r\n        const delBtn     = $$(\"table-delBtnId\");\r\n\r\n        if (saveNewBtn.isVisible()) {\r\n            saveNewBtn.hide();\r\n\r\n        } else if (saveBtn.isVisible()){\r\n            saveBtn.hide();\r\n\r\n        }\r\n\r\n        delBtn.disable();\r\n    }\r\n\r\n    function formPropertyState(){\r\n \r\n        if (property){\r\n            property.clear();\r\n            property.hide();\r\n        }\r\n    }\r\n\r\n\r\n    function removeRefBtns(){\r\n        const refBtns = $$(\"propertyRefbtnsContainer\");\r\n        const parent  = $$(\"propertyRefbtns\");\r\n        if ( refBtns ){\r\n            parent.removeView( refBtns );\r\n        }\r\n    }\r\n\r\n    try{\r\n        btnsState();\r\n        formPropertyState();\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)($$(\"EditEmptyTempalte\"));\r\n        removeRefBtns();\r\n\r\n    }catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"defaultStateForm\");\r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableEditForm/states.js?");

/***/ }),

/***/ "./src/js/blocks/tableEditForm/toolbarBtn.js":
/*!***************************************************!*\
  !*** ./src/js/blocks/tableEditForm/toolbarBtn.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolbarEditButton\": () => (/* binding */ toolbarEditButton)\n/* harmony export */ });\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => toolbarBtn\";\r\n\r\nfunction setSecondaryState(){\r\n    const btnClass       = document.querySelector(\".webix_btn-filter\");\r\n    const primaryClass   = \"webix-transparent-btn--primary\";\r\n    const secondaryClass = \"webix-transparent-btn\";\r\n\r\n    try{\r\n        btnClass.classList.add   (secondaryClass);\r\n        btnClass.classList.remove(primaryClass  );\r\n    } catch (err) {   \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"setSecondaryState\");\r\n    }\r\n}\r\n\r\n\r\nfunction editBtnClick() {\r\n    const editForm  = $$(\"table-editForm\");\r\n    const backBtn   = $$(\"table-backTableBtn\");\r\n    const tree      = $$(\"tree\");\r\n    const container = $$(\"container\");\r\n\r\n\r\n    function maxView () {\r\n        const editContainer   = $$(\"editTableBarContainer\");\r\n        const filterContainer = $$(\"filterTableBarContainer\");\r\n        const filterForm      = $$(\"filterTableForm\");\r\n\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(filterContainer);\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(filterForm     );\r\n        \r\n        setSecondaryState();\r\n\r\n        if (editForm && editForm.isVisible()){\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(editForm     );\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(editContainer);\r\n          \r\n\r\n        }else if (editForm && !(editForm.isVisible())) {\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)(editForm      );\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)(editContainer);\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"tablePropBtnsSpace\"));\r\n        }\r\n\r\n    }\r\n\r\n    function minView () {\r\n        const tableContainer = $$(\"tableContainer\");\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(tableContainer);\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(tree);\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)(backBtn);\r\n        \r\n        editForm.config.width = window.innerWidth-45;\r\n        editForm.resize();\r\n    }\r\n\r\n    maxView ();\r\n    if (container.$width < 850 ){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(tree);\r\n\r\n        if (container.$width < 850 ){\r\n            minView ();\r\n        }\r\n      \r\n    } else {\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(backBtn);\r\n        editForm.config.width = 350;\r\n        editForm.resize();\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction toolbarEditButton (idTable){\r\n    const idBtnEdit = idTable + \"-editTableBtnId\";\r\n\r\n    function returnValue( empty = true ){\r\n        const icon = \"<span class='webix_icon icon-pencil' style='font-size:13px!important'></span>\";\r\n        const text = \"<span style='padding-left: 5px; font-size:13px!important' >Редактор записи</span>\";\r\n\r\n        if (empty){\r\n            return icon;\r\n        } else {\r\n            return icon+text;\r\n        }\r\n    }   \r\n\r\n    return {   \r\n        view    : \"button\",\r\n        maxWidth: 200, \r\n        value   : returnValue( false ),\r\n        id      : idBtnEdit,\r\n        css     : \"webix_btn-edit\",\r\n        title   : \"текст\",\r\n        hotkey  : \"ctrl+shift+x\",\r\n        height  : 42,\r\n        minWidth: 40,\r\n        onlyIcon: false,\r\n        click   : function(){\r\n            editBtnClick(idBtnEdit);\r\n        },\r\n        on      : {\r\n            onAfterRender: function () {\r\n                try{\r\n                    if(idTable !== \"table\" && this.isVisible()){\r\n                        this.hide();\r\n                    }\r\n                } catch (err) {   \r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"btn edit onAfterRender\");\r\n                }\r\n\r\n            \r\n                if ( this.$width < 160 &&  !this.config.onlyIcon ){\r\n                    this.setValue(returnValue( ));\r\n                    this.config.onlyIcon = true;\r\n                } else if (this.$width > 160 && this.config.onlyIcon){\r\n                    this.setValue(returnValue( false ));\r\n                    this.config.onlyIcon = false;\r\n                }\r\n\r\n                this.getInputNode().setAttribute(\"title\",\"Редактировать запись (Ctrl+Shift+X)\");\r\n            }\r\n        } \r\n    };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableEditForm/toolbarBtn.js?");

/***/ }),

/***/ "./src/js/blocks/tableEditForm/validation.js":
/*!***************************************************!*\
  !*** ./src/js/blocks/tableEditForm/validation.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"validateProfForm\": () => (/* binding */ validateProfForm),\n/* harmony export */   \"setLogError\": () => (/* binding */ setLogError),\n/* harmony export */   \"uniqueData\": () => (/* binding */ uniqueData)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => validation\";\r\n\r\nfunction validateProfForm (){\r\n\r\n    const errors = {};\r\n    const messageErrors = [];\r\n\r\n    \r\n    function checkConditions (){ \r\n        const property = $$(\"editTableFormProperty\");\r\n        const propVals = Object.keys(property.getValues());\r\n\r\n        propVals.forEach(function(el,i){\r\n\r\n            const propElement = property.getItem(el);\r\n            const values      = property.getValues();\r\n            \r\n            errors[el] = {};\r\n\r\n            function numberField(){\r\n                \r\n                function containsText(str) {\r\n                    return /\\D/.test(str);\r\n                }\r\n\r\n                if (propElement.customType              &&\r\n                    propElement.customType == \"integer\" ){\r\n\r\n                    const check =  containsText(values[el]) ;\r\n\r\n                    if ( check ){\r\n                        errors[el].isNum = \"Данное поле должно содержать только числа\";\r\n                    } else {\r\n                        errors[el].isNum = null;\r\n                    }\r\n                       \r\n                }\r\n            }\r\n\r\n            function dateField(){\r\n         \r\n                if (propElement.type              &&\r\n                    propElement.type == \"customDate\" ){\r\n                     \r\n                    let check      = false;\r\n                    let countEmpty = 0;\r\n      \r\n                    const x = values[el].replace(/\\D/g, '')\r\n                    .match(/(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})/);\r\n\r\n                    for (let i = 1; i < 7; i++) {\r\n\r\n                        if (x[i].length == 0){\r\n                            countEmpty++;\r\n                        }\r\n\r\n                        if (x[i].length !== 2){\r\n                         \r\n                            if (!check){\r\n                                check = true;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n\r\n                    if ( countEmpty == 6 ){\r\n                        errors[el].date = null;\r\n\r\n                    } else {\r\n\r\n                        if( (x[1] > 31 || x[1] < 1) ||\r\n                            (x[2] > 12 || x[2] < 1) ||\r\n\r\n                            x[4] > 23 ||\r\n                            x[5] > 59 ||\r\n                            x[6] > 59 ){\r\n                                check = true;\r\n                            }\r\n      \r\n                        if ( check ) {\r\n                            errors[el].date = \"Неверный формат даты. Введите дату в формате xx.xx.xx xx:xx:xx\";\r\n    \r\n                        } else {\r\n                            errors[el].date = null;\r\n                        }\r\n                    }\r\n                       \r\n                }\r\n       \r\n            }\r\n\r\n            function valLength(){ \r\n                try{\r\n               \r\n                    if(values[el]){\r\n                        \r\n                        if (values[el].length > propElement.length && propElement.length !==0){\r\n                            errors[el].length = \"Длина строки не должна превышать \"+propElement.length+\" симв.\";\r\n                        } else {\r\n                            errors[el].length = null;\r\n                        }\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"valLength\");\r\n                }\r\n            }\r\n\r\n            function valNotNull (){\r\n                try{\r\n                    if ( propElement.notnull == true && values[el].length == 0 ){\r\n                        errors[el].notnull = \"Поле не может быть пустым\";\r\n                    } else {\r\n                        errors[el].notnull = null;\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"valNotNull\");\r\n                }\r\n            }\r\n\r\n            function valUnique (){\r\n                try{\r\n                    errors[el].unique = null;\r\n                    if (propElement.unique == true){\r\n                        const tableRows   = Object.values($$(\"table\").data.pull);\r\n                        const tableSelect = $$(\"table\").getSelectedId().id;\r\n\r\n                        tableRows.forEach(function(row,i){\r\n                            if (values[el].localeCompare(row[el]) == 0 && row.id !== tableSelect){\r\n                                errors[el].unique = \"Поле должно быть уникальным\";\r\n                            }\r\n                        });\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"valUnique\");\r\n                }\r\n            }\r\n           \r\n            dateField   ();\r\n            numberField ();\r\n            valLength   ();\r\n            valNotNull  ();\r\n            valUnique   ();\r\n        });\r\n    }\r\n\r\n    function createErrorMessage (){\r\n     \r\n        function findErrors (){\r\n            Object.values(errors).forEach(function(col,i){\r\n\r\n                function createMessage (){\r\n                    Object.values(col).forEach(function(error,e){\r\n                        if (error !== null){\r\n                            let nameCol = Object.keys(errors)[i];\r\n                            let textError = error;\r\n                            let typeError = Object.keys(col)[e];\r\n                            messageErrors.push({nameCol,typeError,textError})\r\n                        }\r\n                        \r\n                    });\r\n                    return messageErrors;\r\n                }\r\n\r\n                createMessage ();\r\n        \r\n            });\r\n        }\r\n\r\n        findErrors ();\r\n        \r\n    }\r\n    try{\r\n        checkConditions ();\r\n        createErrorMessage ();\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"validateProfForm\");\r\n    }\r\n    return messageErrors;\r\n}\r\n\r\nfunction setLogError (){\r\n    try{\r\n        const table = $$(\"table\");\r\n        validateProfForm ().forEach(function(el,i){\r\n\r\n            let nameEl;\r\n\r\n            table.getColumns().forEach(function(col,i){\r\n                if (col.id == el.nameCol){\r\n                    nameEl = col.label;\r\n                }\r\n            });\r\n\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",el.textError+\" (Поле: \"+nameEl+\")\");\r\n        });\r\n\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setLogError\");\r\n    }\r\n}\r\n\r\n\r\nfunction uniqueData (itemData){\r\n    const validateData = {};\r\n    try{\r\n        const table = $$(\"table\");\r\n\r\n        Object.values(itemData).forEach(function(el,i){\r\n\r\n            const oldValues    = table.getItem(itemData.id)\r\n            const oldValueKeys = Object.keys(oldValues);\r\n\r\n            function compareVals (){\r\n                const newValKey = Object.keys(itemData)[i];\r\n                \r\n                oldValueKeys.forEach(function(oldValKey){\r\n                    \r\n                    if (oldValKey == newValKey){\r\n                        \r\n                        if (oldValues   [oldValKey] !== Object.values(itemData)[i]){\r\n                            validateData[newValKey]  =  Object.values(itemData)[i];\r\n                        } \r\n                        \r\n                    }\r\n                }); \r\n            }\r\n            compareVals ();\r\n        });\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"uniqueData\");\r\n    }\r\n\r\n    return validateData;\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableEditForm/validation.js?");

/***/ }),

/***/ "./src/js/blocks/tableFilter/buttons.js":
/*!**********************************************!*\
  !*** ./src/js/blocks/tableFilter/buttons.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"buttonsFormFilter\": () => (/* binding */ buttonsFormFilter),\n/* harmony export */   \"resetFilterBtn\": () => (/* binding */ resetFilterBtn),\n/* harmony export */   \"getUserprefsData\": () => (/* binding */ getUserprefsData),\n/* harmony export */   \"PREFS_STORAGE\": () => (/* binding */ PREFS_STORAGE)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _notifications_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _popup_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./popup.js */ \"./src/js/blocks/tableFilter/popup.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/tableFilter/common.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst PREFS_STORAGE = {};  \r\nconst logNameFile   = \"tableFilter => buttons\";\r\n\r\nfunction getUserprefsData (){\r\n\r\n    return webix.ajax().get(`/init/default/api/userprefs/`)\r\n    .then(function (data) {\r\n        PREFS_STORAGE.userprefs = data.json();\r\n        return PREFS_STORAGE.userprefs;\r\n    }).fail(err => {\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"getUserprefsData\");\r\n    }\r\n);\r\n}\r\n\r\nfunction editFiltersBtn (){\r\n  \r\n    const currId = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getItemId) ();\r\n\r\n    (0,_popup_js__WEBPACK_IMPORTED_MODULE_5__.createFilterPopup)();\r\n\r\n    function userprefsData (){ \r\n\r\n        const userprefsGetData = webix.ajax(\"/init/default/api/userprefs/\");\r\n\r\n        userprefsGetData.then(function(data){\r\n\r\n            function setTemplates(user){\r\n                const lib = $$(\"filterEditLib\");\r\n\r\n                function clearOptionsPull(){\r\n                \r\n                    const oldOptions = [];\r\n    \r\n                    if (lib && lib.config.options.length !== 0){\r\n                        lib.config.options.forEach(function(el){\r\n                            oldOptions.push(el.id);\r\n                        });\r\n\r\n                        oldOptions.forEach(function(el){\r\n                            lib.removeOption(el);\r\n                        \r\n                        });\r\n                \r\n                    }\r\n                }\r\n\r\n                clearOptionsPull();\r\n\r\n                const dataSrc = data.json().content;\r\n                try{\r\n                    dataSrc.forEach(function(data, i) {\r\n                     \r\n                        if( data.name.includes(\"filter-template_\") && data.owner == user.id ){\r\n                            const prefs = JSON.parse(data.prefs);\r\n                            if (prefs.table == currId){\r\n                    \r\n                                lib.addOption( {\r\n                                    id    : i+1, \r\n                                    value : prefs.name\r\n                                });\r\n                    \r\n                            }\r\n                        }\r\n                    \r\n                    });\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function setTemplates\");\r\n                }\r\n    \r\n            }\r\n    \r\n            function setEmptyOption(){\r\n                $$(\"filterEditLib\").addOption(\r\n                    {   id      : \"radioNoneContent\",\r\n                        disabled: true, \r\n                        value   : \"Сохранённых шаблонов нет\"\r\n                    }\r\n                );\r\n            }\r\n\r\n\r\n            let user = webix.storage.local.get(\"user\");\r\n\r\n            try{\r\n                if (!user){\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getUserData) ();\r\n                    user = webix.storage.local.get(\"user\");\r\n                }\r\n    \r\n                if(user){\r\n                    setTemplates(user);\r\n\r\n                    const lib = $$(\"filterEditLib\");\r\n                    \r\n                    if (lib && lib.data.options.length == 0 ){\r\n                        setEmptyOption();\r\n                    }\r\n             \r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function userprefsData\");\r\n            }\r\n            \r\n        });\r\n        userprefsGetData.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"saveTemplate\");\r\n        });\r\n       \r\n    }\r\n\r\n    userprefsData ();\r\n\r\n    function setValueLib(){\r\n        const lib = $$(\"filterEditLib\");\r\n        if (lib){ \r\n            lib.setValue(  (0,_popup_js__WEBPACK_IMPORTED_MODULE_5__.returnTemplateValue) () );   \r\n          \r\n        }\r\n    }  \r\n\r\n    function stateSubmitBtn(state){\r\n        const btn = $$(\"popupFilterSubmitBtn\");\r\n        if(state){\r\n            btn.enable();\r\n        } else {\r\n            btn.disable();\r\n        }\r\n    \r\n    }\r\n    \r\n    \r\n    function popupSizeAdaptive(){\r\n\r\n        const size  = window.innerWidth * 0.89;\r\n        const popup = $$(\"popupFilterEdit\");\r\n        try{\r\n            popup.config.width = size;\r\n            popup.resize();\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"function userprefsData => popupSizeAdaptive\"\r\n            );\r\n        }\r\n    }\r\n    \r\n    setValueLib();\r\n\r\n    if (window.innerWidth < 1200 ){\r\n        popupSizeAdaptive();\r\n    }\r\n\r\n    const checkbox =  {\r\n        view        : \"checkbox\", \r\n        id          : \"selectAll\", \r\n        labelRight  : \"<div style='font-weight:600'>Выбрать всё</div>\", \r\n        labelWidth  : 0,\r\n        name        : \"selectAll\",\r\n        on          : {\r\n            onChange:function(){\r\n                stateSubmitBtn(true);\r\n\r\n                function setValueCheckbox(){\r\n                    const content    = $$(\"editFormPopupScrollContent\");\r\n                    const checkboxes = content.getChildViews();\r\n                    try{\r\n                        checkboxes.forEach(function(el,i){\r\n                            if (el.config.id.includes(\"checkbox\")){\r\n\r\n                                if($$(\"selectAll\").getValue()){\r\n                                    el.config.value = 1;\r\n                                } else {\r\n                                    el.config.value = 0;\r\n                                }\r\n                                $$(el).refresh();\r\n                            }\r\n\r\n                        });\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                            err,\r\n                            logNameFile,\r\n                            \"function checkbox:onchange => setValueCheckbox\"\r\n                        );\r\n                    }\r\n                }\r\n\r\n                setValueCheckbox(); \r\n            \r\n\r\n            },\r\n    \r\n        } \r\n    };\r\n \r\n    \r\n \r\n    function getAllCheckboxes(){\r\n        const checkboxes           = [];\r\n        const filterTableElements  = $$(\"filterTableForm\").elements;\r\n        try{\r\n            Object.values(filterTableElements).forEach(function(el,i){\r\n                checkboxes.push({ \r\n                    id    : el.config.id, \r\n                    label : el.config.label \r\n                });\r\n            });\r\n        }catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)( \r\n                err, \r\n                logNameFile, \r\n                \"function editFiltersBtn => getAllCheckboxes\" \r\n            );\r\n        }\r\n     \r\n        return checkboxes;\r\n    }\r\n\r\n   // let formData = getAllCheckboxes();\r\n   \r\n \r\n    function checkboxOnChange (el){\r\n   \r\n        const parent = $$(el.id+\"_checkbox\").getParentView();\r\n        const childs = parent.getChildViews();\r\n    \r\n        let counter  = 0;\r\n        let btnState = 0;\r\n\r\n        function getStatusCheckboxes(){\r\n            try{\r\n                childs.forEach(function(el,i){\r\n                    if (el.config.id.includes(\"checkbox\")){\r\n                        const value = el.config.value;\r\n\r\n                        if ( !(value) || value == \"\" ){\r\n                            counter++;\r\n                        }\r\n                    }\r\n                    if (el.config.value){\r\n                        btnState++;\r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"function checkboxOnChange => getStatusCheckboxes\"\r\n                );\r\n            }\r\n        }\r\n\r\n        function setStateBtnSubmit(){\r\n            stateSubmitBtn(true);\r\n        }\r\n\r\n        function setSelectAllState(){\r\n            try{\r\n                const selectAll = $$(\"selectAll\");\r\n               \r\n                if (counter == 0){\r\n                    selectAll.config.value = 1;\r\n                    selectAll.refresh();\r\n\r\n                } else if ( selectAll.config.value !== 0 ){\r\n                    selectAll.config.value = 0;\r\n                    selectAll.refresh();\r\n                    \r\n                }\r\n            } catch (err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"function checkboxOnChange => setSelectAllState\"\r\n                );\r\n            }\r\n        }\r\n       \r\n        try{\r\n            getStatusCheckboxes();\r\n            setStateBtnSubmit();\r\n            setSelectAllState();\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"function checkboxOnChange\"\r\n            );\r\n\r\n        }\r\n    }\r\n\r\n   \r\n    function createCheckboxes(){\r\n\r\n        const nameList = [\r\n            {cols:[\r\n                {   id  : \"editFormPopupScrollContent\",\r\n                    css : \"webix_edit-form-popup-scroll-content\",\r\n                    rows: [\r\n                        checkbox\r\n                    ]\r\n                }\r\n            ]}\r\n        ];\r\n\r\n  \r\n   \r\n        try {  \r\n            const formData = getAllCheckboxes();\r\n\r\n            formData.forEach(function(el,i){\r\n                if(!(el.id.includes(\"child\"))){\r\n\r\n                    const template = {\r\n                        view        : \"checkbox\", \r\n                        id          : el.id+\"_checkbox\", \r\n                        labelRight  : el.label, \r\n                        labelWidth  : 0,\r\n                        name        : el.id,\r\n                        on          : {\r\n                            onChange:function(){\r\n                                checkboxOnChange (el);\r\n                            }\r\n                        } \r\n                    };\r\n\r\n                    const field = $$(el.id);\r\n\r\n                    const allInputs = $$( el.id+\"_rows\").getChildViews();\r\n\r\n            \r\n                    if (field && field.isVisible() || allInputs.length > 1 ){\r\n               \r\n                        template.value = 1;\r\n                        nameList[0].cols[0].rows.push(template);\r\n                    \r\n                    }else {\r\n                        nameList[0].cols[0].rows.push(template);\r\n                    }\r\n                }\r\n            });\r\n\r\n            const scroll = $$(\"editFormPopupScroll\");\r\n\r\n            if (scroll){\r\n                scroll.addView( {rows : nameList}, 1 );\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function createCheckboxes\");\r\n        }\r\n    }\r\n    \r\n    createCheckboxes();\r\n  \r\n\r\n    let counter = 0;\r\n    const checkboxes = $$(\"editFormPopupScrollContent\").getChildViews();\r\n    \r\n    function countSelectCheckboxes(){\r\n        try{\r\n            checkboxes.forEach(function(el,i){\r\n                if (el.config.id.includes(\"checkbox\")){\r\n                    const value = el.config.value;\r\n\r\n                    if ( !(value) || value == \"\" ){\r\n                        counter++;\r\n                    }\r\n                }\r\n            });\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function countSelectCheckboxes\");\r\n        }\r\n    } \r\n\r\n    function stateSelectAll(){\r\n        try{\r\n            const selectAll = $$(\"selectAll\");\r\n            if ( counter == 0 ){\r\n                selectAll.config.value = 1;\r\n                selectAll.refresh();\r\n            } \r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function stateSelectAll\");\r\n        }\r\n    }\r\n\r\n    countSelectCheckboxes();\r\n    stateSelectAll();\r\n \r\n}\r\n\r\nfunction filterSubmitBtn (){\r\n    \r\n                             \r\n    let query =[];\r\n\r\n    \r\n    function setLogicValue(value){\r\n        let logic = null; \r\n        \r\n        if (value == \"1\"){\r\n            logic = \"+and+\";\r\n\r\n        } else if (value == \"2\"){\r\n            logic = \"+or+\";\r\n        }\r\n\r\n        return logic;\r\n    }\r\n\r\n    function setOperationValue(value){\r\n        let operation;\r\n        if (value === \"=\" || !value){\r\n            operation = \"+=+\";\r\n        \r\n        } else if (value === \"!=\"){\r\n            operation = \"+!=+\";\r\n\r\n        } else if (value === \"<\"){\r\n            operation = \"+<+\";\r\n            \r\n        } else if (value === \">\"){\r\n            operation = \"+>+\";\r\n\r\n        } else if (value === \"<=\"){\r\n            operation = \"+<=+\";\r\n    \r\n        } else if (value === \">=\"){\r\n            operation = \"+>=+\";\r\n            \r\n        } else if (value === \"⊆\"){\r\n            operation = \"+contains+\";\r\n        } \r\n\r\n        return operation;\r\n    }\r\n\r\n    function setName(value){\r\n        const itemTreeId     = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getItemId) ();\r\n\r\n        return itemTreeId + \".\" + value;\r\n    }\r\n\r\n    function setValue(value){\r\n        return \"'\" + value + \"'\";\r\n    }\r\n\r\n    function createQuery (input){\r\n\r\n        const name      = setName           (input.name);\r\n        const value     = setValue          (input.value);\r\n        const logic     = setLogicValue     (input.logic);\r\n        const operation = setOperationValue (input.operation);\r\n\r\n        let query = name + operation + value;\r\n\r\n        if (logic){\r\n            query = logic + query;\r\n        }\r\n\r\n        return query;\r\n    }\r\n\r\n    \r\n    function createValuesArray(){\r\n        const keys       = Object.keys(_common_js__WEBPACK_IMPORTED_MODULE_6__.visibleInputs);\r\n        const keysLength = keys.length;\r\n        const valuesArr  = [];\r\n        let inputs       = [];\r\n\r\n\r\n        // объединить все inputs в один массив \r\n        for (let i = 0; i < keysLength; i++) {   \r\n            const key = keys[i];\r\n            inputs = inputs.concat(_common_js__WEBPACK_IMPORTED_MODULE_6__.visibleInputs[key]);\r\n        }\r\n\r\n        function segmentBtnValue(input) {\r\n            const segmentBtn = $$(input + \"_segmentBtn\") ;\r\n            let value        = null;\r\n\r\n            if (segmentBtn.isVisible()){\r\n                value = segmentBtn.getValue();\r\n            }\r\n            return value;\r\n        }\r\n\r\n        inputs.forEach(function(input,i){\r\n            const name       = $$(input).config.columnName;\r\n            const value      = $$(input)                         .getValue();\r\n            const operation  = $$(input + \"-btnFilterOperations\").getValue();\r\n\r\n            const logic      = segmentBtnValue(input); \r\n\r\n            valuesArr.push ( { \r\n                id        : input,\r\n                name      : name, \r\n                value     : value,\r\n                operation : operation,\r\n                logic     : logic  \r\n            });\r\n        });\r\n\r\n        return valuesArr;\r\n    }\r\n\r\n\r\n    function createGetData(){\r\n       \r\n        const postFormatData = webix.Date.dateToStr(\"%d.%m.%Y %H:%i:%s\");\r\n        const valuesArr      = createValuesArray();\r\n\r\n        const firstChild     = valuesArr[0].name;\r\n\r\n\r\n        valuesArr.forEach(function(el,i){\r\n      \r\n            let filterEl = el.id;\r\n            let value    = el.value ;\r\n\r\n            let checkFirstChild = false;\r\n            if (el.name === firstChild){\r\n                checkFirstChild = true;\r\n            }\r\n       \r\n            function formattingDateValue(){\r\n                const view = $$(filterEl).config.view; \r\n                if ( view == \"datepicker\" ){\r\n                    value = postFormatData(value);\r\n                }\r\n            }\r\n \r\n            function formattinSelectValue(){\r\n                const text = $$(filterEl).config.text;\r\n                if ( text && text == \"Нет\" ){\r\n                    value = 0;\r\n                }\r\n            }\r\n\r\n            if ($$(filterEl)){\r\n                formattingDateValue ();\r\n                formattinSelectValue();\r\n                query.push(createQuery(el));\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    \r\n    if ($$(\"filterTableForm\").validate()){\r\n        \r\n        createGetData();\r\n\r\n        \r\n        let currTableView;\r\n\r\n        if ($$(\"table\").isVisible()){\r\n            currTableView = $$(\"table\");\r\n        } else {\r\n            currTableView = $$(\"table-view\");\r\n        }\r\n\r\n        const fullQuery = query.join(\"\");\r\n\r\n        currTableView.config.filter = fullQuery;\r\n\r\n        const queryData = webix.ajax(\"/init/default/api/smarts?query=\" + fullQuery );\r\n\r\n        queryData.then(function(data){\r\n            data             = data.json();\r\n            const reccount   = data.reccount;\r\n            const notifyType = data.err_type;\r\n            const notifyMsg  = data.err;\r\n\r\n            data             = data.content;\r\n\r\n\r\n            function setData(){\r\n                try{\r\n                    currTableView.clearAll();\r\n                    if (data.length !== 0){\r\n                        currTableView.hideOverlay(\"Ничего не найдено\");\r\n                        currTableView.parse(data);\r\n                    } else {\r\n                        currTableView.showOverlay(\"Ничего не найдено\");\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function filterSubmitBtn => setData\");\r\n                }\r\n            }\r\n\r\n            function setCounterValue (){\r\n                try{\r\n                    const counter = $$(\"table-idFilterElements\");\r\n                    counter.setValues(reccount.toString());\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"setCounterVal\");\r\n                }\r\n            }\r\n\r\n         \r\n            if (notifyType == \"i\"){\r\n\r\n                setData();\r\n                setCounterValue();\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.hideElem)($$(\"tableFilterPopup\"));\r\n        \r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Фильтры успшено применены\");\r\n            \r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",notifyMsg);\r\n            } \r\n        });\r\n        queryData.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"createGetData\");\r\n        });\r\n\r\n        \r\n    } else {\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",\"Не все поля формы заполнены\");\r\n    }\r\n  \r\n\r\n}\r\n\r\nfunction filterLibraryBtn () {\r\n    try {\r\n        webix.prompt({\r\n            title       : \"Название шаблона\",\r\n            ok          : \"Сохранить\",\r\n            cancel      : \"Отменить\",\r\n            css         : \"webix_prompt-filter-lib\",\r\n            input       : {\r\n                required    : true,\r\n                placeholder : \"Введите название шаблона...\",\r\n            },\r\n            width:350,\r\n        }).then(function(result){\r\n          \r\n            async function saveTemplate (){ \r\n\r\n                if (!PREFS_STORAGE.userprefs){\r\n                    await getUserprefsData (); \r\n                }\r\n\r\n           \r\n                const data         = PREFS_STORAGE.userprefs.content;\r\n                const nameTemplate = result;\r\n                let settingExists  = false;\r\n\r\n                const currId       = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getItemId)();\r\n\r\n                const template     = {\r\n                    name        : nameTemplate,\r\n                    table       : currId,\r\n                    values      : []\r\n                };\r\n\r\n                function createPrefsValue(){\r\n                    const keys             = Object.keys(_common_js__WEBPACK_IMPORTED_MODULE_6__.visibleInputs);\r\n                    const keysLength       = keys.length;\r\n\r\n                    function pushValues(id, value, operation, logic, parent){\r\n\r\n                        template.values.push({\r\n                            id          : id, \r\n                            value       : value,\r\n                            operation   : operation,\r\n                            logic       : logic,\r\n                            parent      : parent,\r\n                        });\r\n\r\n                    }\r\n\r\n                    function isParent(el){\r\n                        const parent = el.config.columnName + \"_filter\";\r\n                        const id     = el.config.id;\r\n                        let check    = null;\r\n\r\n                        if (parent !== id){\r\n                            check = el.config.columnName;\r\n                        } else {\r\n\r\n                        }\r\n\r\n                        return check;\r\n                    }\r\n\r\n                    function setOperation(arr){\r\n                        arr.forEach(function(el,i){\r\n                       \r\n                            try{\r\n                                const value      = $$( el ).getValue();\r\n\r\n                                const operation  = $$( el + \"-btnFilterOperations\" ).getValue();\r\n\r\n                                const segmentBtn = $$( el + \"_segmentBtn\" );\r\n                                let logic = null;\r\n                                if (segmentBtn.isVisible()){\r\n                                    logic = segmentBtn.getValue();\r\n                                }\r\n\r\n                                const parent = isParent($$( el ));\r\n                        \r\n                                pushValues(el, value, operation, logic, parent);\r\n\r\n                            } catch(err){\r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                                    err,\r\n                                    logNameFile,\r\n                                    \"function filterLibraryBtn => setOperation\"\r\n                                );\r\n                            }\r\n                        });\r\n                    }\r\n                   \r\n                    for (let i = 0; i < keysLength; i++) {   \r\n                        const key = keys[i];\r\n                        setOperation(_common_js__WEBPACK_IMPORTED_MODULE_6__.visibleInputs[key]);\r\n                    }\r\n\r\n                  \r\n                }\r\n\r\n                const sentObj = {\r\n                    name    : currId + \"_filter-template_\" + nameTemplate,\r\n                    prefs   : template,\r\n                };\r\n\r\n                \r\n                function saveExistsTemplate(sentObj){\r\n                    data.forEach(function(el,i){\r\n               \r\n                        const currName = currId + \"_filter-template_\" + nameTemplate;\r\n                    \r\n                        function putUserprefsData (){\r\n                            const url     = \"/init/default/api/userprefs/\"+el.id;\r\n                         \r\n                            const putData = webix.ajax().put(url, sentObj);\r\n\r\n                            putData.then(function(data){\r\n                                data = data.json();\r\n                                if (data.err_type == \"i\"){\r\n                                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                                        \"success\",\r\n                                        \"Шаблон\" +\r\n                                        \" «\" +\r\n                                        nameTemplate +\r\n                                        \"» \" +\r\n                                        \" сохранён в библиотеку\"\r\n                                    );\r\n                                } else {\r\n                                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                                        \"error\",\r\n                                        \"tableFilter => buttons function modalBoxExists: \" + \r\n                                        data.err\r\n                                    );\r\n                                }\r\n                            });\r\n\r\n                            putData.fail(function(err){\r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n                                    err, \r\n                                    logNameFile,\r\n                                    \"saveExistsTemplate => putUserprefsData\"\r\n                                );\r\n                            });\r\n\r\n                        }\r\n\r\n                        function modalBoxExists(){\r\n               \r\n                            (0,_notifications_js__WEBPACK_IMPORTED_MODULE_4__.modalBox)(   \"Шаблон с таким именем существует\", \r\n                                        \"После сохранения предыдущие данные будут стёрты\", \r\n                                        [\"Отмена\", \"Сохранить изменения\"]\r\n                            )\r\n                            .then(function(result){\r\n                               \r\n                                if (result == 1){\r\n                                    putUserprefsData ();\r\n                                }\r\n                            });\r\n                        }\r\n                     \r\n                        if (el.name == currName){\r\n                            settingExists = true;\r\n                            modalBoxExists();\r\n                        } \r\n                    });\r\n                }\r\n\r\n                function setDataStorage(){\r\n                    const whoamiData = webix.ajax(\"/init/default/api/whoami\");\r\n                    whoamiData.then(function(data){\r\n                        data          = data.json().content;\r\n                        sentObj.owner = data.id;\r\n\r\n                        const userData      = {};\r\n                        userData.id         = data.id;\r\n                        userData.name       = data.first_name;\r\n                        userData.username   = data.username;\r\n                        \r\n                        (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_3__.setStorageData)(\"user\", JSON.stringify(userData));\r\n                    });\r\n\r\n                    whoamiData.fail(function(err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"saveTemplate => setDataStorage\");\r\n                    });\r\n\r\n                }\r\n                \r\n                function saveNewTemplate(){\r\n                    const ownerId = webix.storage.local.get(\"user\").id;\r\n                    if (ownerId){\r\n                        sentObj.owner = ownerId;\r\n                    } else {\r\n                        setDataStorage();\r\n                    }\r\n\r\n                    const url           = \"/init/default/api/userprefs/\";\r\n\r\n                    const userprefsPost = webix.ajax().post(url, sentObj);\r\n                    \r\n                    userprefsPost.then(function(data){\r\n                        data = data.json();\r\n    \r\n                        if (data.err_type == \"i\"){\r\n                            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                                \"success\",\r\n                                \"Шаблон\" +\r\n                                \" «\" +\r\n                                nameTemplate +\r\n                                \"» \" +\r\n                                \" сохранён в библиотеку\"\r\n                            );\r\n                        } else {\r\n                            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",data.error);\r\n                        }\r\n                    });\r\n\r\n                    userprefsPost.fail(function(err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n                            err, \r\n                            logNameFile,\r\n                            \"saveTemplate => saveNewTemplate\"\r\n                        );\r\n                    });\r\n\r\n                }\r\n               \r\n                if (PREFS_STORAGE.userprefs){\r\n\r\n                    createPrefsValue    ();\r\n                    saveExistsTemplate  (sentObj);\r\n\r\n                    \r\n                    if (!settingExists){\r\n                        saveNewTemplate();\r\n                    } \r\n                  \r\n                }\r\n            }\r\n\r\n            saveTemplate ();\r\n\r\n        });\r\n    \r\n    } catch(err) {\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function filterSubmitBtn\");\r\n    }\r\n}\r\n\r\nfunction backTableBtnClick() {\r\n    const filterForm     = $$(\"filterTableBarContainer\");\r\n   \r\n    const tableContainer = $$(\"tableContainer\");\r\n    \r\n\r\n    function setBtnFilterState(){\r\n        const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n        const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n        const secondaryBtnClass = \"webix-transparent-btn\";\r\n\r\n        if (btnClass.classList.contains(primaryBtnClass)){\r\n            btnClass.classList.add     (secondaryBtnClass);\r\n            btnClass.classList.remove  (primaryBtnClass);\r\n        }\r\n    }\r\n    function defaultState(){\r\n        if ( filterForm && filterForm.isVisible() ){\r\n            filterForm.hide();\r\n        }\r\n    \r\n        if ( tableContainer && !(tableContainer.isVisible()) ){\r\n            tableContainer.show();\r\n        }\r\n\r\n        const table = $$(\"table\");\r\n        if (table){\r\n            table.clearSelection();\r\n        }\r\n    }\r\n\r\n\r\n    defaultState();\r\n    setBtnFilterState();\r\n  \r\n}\r\n\r\nfunction resetFilterBtn (){\r\n    try {\r\n\r\n        const itemTreeId = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getItemId) ();\r\n        const url        = \"/init/default/api/smarts?query=\"+itemTreeId+\".id >= 0\";\r\n        const queryData  = webix.ajax(url);\r\n        queryData.then(function(data){\r\n            const dataErr =  data.json();\r\n          \r\n            data = data.json().content;\r\n                \r\n            function setDataTable(){\r\n                try{\r\n                    const table = $$(\"table\");\r\n                    if (data.length !== 0){\r\n                        table.hideOverlay(\"Ничего не найдено\");\r\n                        table.clearAll();\r\n                        table.parse(data);\r\n                    } else {\r\n                        table.clearAll();\r\n                        table.showOverlay(\"Ничего не найдено\");\r\n                    }\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                        err,\r\n                        logNameFile,\r\n                        \"function resetFilterBtn => setDataTable\"\r\n                    );\r\n                }\r\n            }\r\n\r\n            function setFilterCounterVal(){\r\n                try{\r\n                    const filterTable     = $$(\"table-idFilterElements\");\r\n                    const filterCountRows = $$(\"table\").count();\r\n                    const value           = filterCountRows.toString();\r\n\r\n                    filterTable.setValues(value);\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                        err,\r\n                        logNameFile,\r\n                        \"function setFilterCounterVal\"\r\n                    );\r\n                }\r\n            }\r\n\r\n            function clearFilterValues(){\r\n                const form = $$(\"filterTableForm\");\r\n                if(form){\r\n                    form.clear(); \r\n                }\r\n            }\r\n\r\n            function hideInputsContainer(){\r\n                const inputs = document.querySelectorAll(\".webix_filter-inputs\");\r\n\r\n                const hideClass = \"webix_hide-content\";\r\n                try{\r\n                    inputs.forEach(function(elem,i){\r\n                        if ( !(elem.classList.contains(hideClass)) ){\r\n                            elem.classList.add(hideClass);\r\n                        }\r\n                    });\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                        err,\r\n                        logNameFile,\r\n                        \"function resetFilterBtn => hideInputsContainer\"\r\n                    );\r\n                }\r\n            }\r\n\r\n            function clearSpace(){\r\n                const childs = [];\r\n                const inputsContainer = $$(\"inputsFilter\").getChildViews();\r\n                \r\n      \r\n                inputsContainer.forEach(function(el,i){\r\n                    const inputId = el._collection[0].cols[0].id;\r\n                    \r\n                    function removeParentInput(){\r\n                        $$(inputId).hide();\r\n                    }\r\n\r\n                    function getChildsId (){\r\n                        try{\r\n                            const childsView = $$(el.config.id).getChildViews();\r\n                            childsView.forEach(function(child,i){\r\n                                if (child.config.id.includes(\"child\")){\r\n                                    childs.push (child.config.id);\r\n                                }\r\n                            });\r\n                        } catch (err){\r\n                            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                                err,\r\n                                logNameFile,\r\n                                \"function resetFilterBtn => getChildsId\"\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    try{\r\n                        removeParentInput();\r\n                        getChildsId ();\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.hideElem)($$(inputId+\"_container-btns\"));\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                            err,\r\n                            logNameFile,\r\n                            \"function resetFilterBtn => clearSpace\"\r\n                        );\r\n                    }\r\n\r\n                });\r\n               \r\n                function removeChilds(){\r\n                    try{\r\n                        childs.forEach(function(idChild,i){\r\n                            const child  = $$(idChild);\r\n                            const parent = child.getParentView();\r\n                            parent.removeView(child);\r\n                        });\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                            err,\r\n                            logNameFile,\r\n                            \"function resetFilterBtn => removeChilds\"\r\n                        );\r\n                    }\r\n                }\r\n                removeChilds();\r\n            }\r\n\r\n            function disableLibSaveBtn(){\r\n                const saveBtn = $$(\"filterLibrarySaveBtn\") ;\r\n                if (saveBtn && saveBtn.isEnabled()){\r\n                    saveBtn.disable();\r\n                }\r\n            }\r\n\r\n            function showEmptyTemplate(){\r\n                const emptyTemplate = $$(\"filterEmptyTempalte\");\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.showElem)(emptyTemplate);\r\n                emptyTemplate.refresh();\r\n            }\r\n\r\n            function disableRemoveBtn(){\r\n                $$(\"resetFilterBtn\").disable();\r\n            }\r\n\r\n            if (dataErr.err_type == \"i\"){\r\n                try{\r\n                    setDataTable        ();\r\n                    setFilterCounterVal ();\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.hideElem)            ($$(\"tableFilterPopup\"));\r\n                    clearFilterValues   ();\r\n                    hideInputsContainer ();\r\n                    clearSpace          ();\r\n                    disableLibSaveBtn   ();\r\n                    showEmptyTemplate   ();\r\n                    disableRemoveBtn    ();\r\n                } catch (err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                        err,\r\n                        logNameFile,\r\n                        \"function resetFilterBtn\"\r\n                    );\r\n                }\r\n            \r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Фильтры очищены\");\r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                    \"error\", \r\n                    \"tableFilter => buttons function resetFilterBtn ajax: \" +\r\n                    dataErr.err\r\n                );\r\n            }\r\n        });\r\n\r\n        queryData.fail(function(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"resetFilterBtn\");\r\n        });\r\n    \r\n    } catch(err) {\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err,\r\n            \"Ошибка при очищении фильтров; tableFilter => buttons\",\r\n            \"function resetFilterBtn\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction buttonsFormFilter (name) {\r\n\r\n    const formResetBtn = {  \r\n        view    : \"button\",\r\n        id      : \"resetFilterBtn\",\r\n        disabled: true,\r\n        height  : 48,\r\n        minWidth: 50,\r\n        width   : 65,\r\n        hotkey  : \"shift+esc\",\r\n        css     : \"webix_danger\", \r\n        type    : \"icon\", \r\n        icon    : \"icon-trash\", \r\n        click   : resetFilterBtn,\r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\", \"Сбросить фильтры\");\r\n            }\r\n        } \r\n    };\r\n    \r\n    const formBtnSubmit = {   \r\n        view    : \"button\",\r\n        id      : \"btnFilterSubmit\",\r\n        height  : 48,\r\n        minWidth: 70, \r\n        css     : \"webix_primary\",\r\n        hotkey  : \"Enter\",\r\n        disabled: true,\r\n        value   : \"Применить фильтры\", \r\n        click   : filterSubmitBtn,\r\n    };\r\n    \r\n    const formEditBtn = {   \r\n        view    : \"button\",\r\n        value   : \"Открыть редактор\",\r\n        height  : 48,\r\n        minWidth: 140, \r\n        click   : editFiltersBtn,\r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\r\n                    \"title\",\"Добавить/удалить фильтры\"\r\n                );\r\n            },\r\n        },\r\n    };    \r\n    \r\n    const filterBackTableBtn = { \r\n        view    : \"button\", \r\n        id      : \"table-backTableBtnFilter\",\r\n        type    : \"icon\",\r\n        icon    : \"icon-arrow-left\",\r\n        value   : \"Вернуться к таблице\",\r\n        hidden  : true,  \r\n        height  : 48,\r\n        minWidth: 50,\r\n        width   : 55,\r\n       \r\n        click   : function(){\r\n            backTableBtnClick();\r\n        },\r\n    \r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\r\n                    \"title\",\"Вернуться к таблице\"\r\n                );\r\n            }\r\n        } \r\n    };\r\n    \r\n    const formLibrarySaveBtn = {   \r\n        view    : \"button\",\r\n        id      : \"filterLibrarySaveBtn\",\r\n        disabled: true,\r\n        height  : 48,\r\n        minWidth: 50,\r\n        width   : 65,\r\n        hotkey  : \"shift+esc\",\r\n        type    : \"icon\", \r\n        icon    : \"icon-file\", \r\n        click   : filterLibraryBtn,\r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\r\n                    \"title\", \"Сохранить шаблон с полями в библиотеку\"\r\n                );\r\n            }\r\n        } \r\n    };\r\n    \r\n    if ( name == \"formResetBtn\" ) {\r\n        return formResetBtn;\r\n    } else if ( name == \"formBtnSubmit\" ){\r\n        return formBtnSubmit;\r\n    } else if ( name == \"formEditBtn\" ){\r\n        return formEditBtn;\r\n    } else if ( name == \"filterBackTableBtn\" ){\r\n        return filterBackTableBtn;\r\n    } else if ( name == \"formLibrarySaveBtn\" ){\r\n        return formLibrarySaveBtn;\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableFilter/buttons.js?");

/***/ }),

/***/ "./src/js/blocks/tableFilter/common.js":
/*!*********************************************!*\
  !*** ./src/js/blocks/tableFilter/common.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addClass\": () => (/* binding */ addClass),\n/* harmony export */   \"removeClass\": () => (/* binding */ removeClass),\n/* harmony export */   \"visibleField\": () => (/* binding */ visibleField),\n/* harmony export */   \"visibleInputs\": () => (/* binding */ visibleInputs)\n/* harmony export */ });\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\n\r\nconst visibleInputs = {};\r\n\r\nconst logNameFile = \"tableFilter => common\";\r\nfunction addClass(elem, className){\r\n    if (!(elem.classList.contains(className))){\r\n        elem.classList.add(className);\r\n    }\r\n}\r\n\r\nfunction removeClass(elem, className){\r\n    if (elem.classList.contains(className)){\r\n        elem.classList.remove(className);\r\n    }\r\n}\r\n\r\nfunction showSegmentBtn (condition,el){\r\n    const segmentBtn = $$( el + \"_segmentBtn\");\r\n   \r\n    if (condition && el !== \"selectAll\"){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)(segmentBtn);\r\n    } \r\n}\r\n\r\nfunction visibleField (condition, elementClass = null, el = null){\r\n    const showClass = \"webix_show-content\";\r\n    const hideClass = \"webix_hide-content\";\r\n    function editStorage(){\r\n        if (condition && el !== \"selectAll\"){\r\n            visibleInputs[elementClass]  = [el];\r\n\r\n        } else if (visibleInputs[elementClass]) {\r\n            delete visibleInputs[elementClass];\r\n\r\n        }\r\n    }\r\n\r\n    editStorage();\r\n\r\n    showSegmentBtn (condition,el);\r\n\r\n    const htmlElement = document.querySelectorAll(\".webix_filter-inputs\");\r\n\r\n    function showHtmlEl(){\r\n  \r\n        try{\r\n         \r\n            htmlElement.forEach(function(elem,i){\r\n       \r\n                if (elem.classList.contains(elementClass)){\r\n                    addClass   (elem, showClass);\r\n                    removeClass(elem, hideClass);\r\n\r\n                } else {\r\n                    addClass   (elem, hideClass);\r\n\r\n                }\r\n            });\r\n\r\n        } catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"function visibleField => showHtmlEl\");\r\n        }\r\n    }\r\n\r\n    function showInputContainers(){\r\n       (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(el));\r\n       (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(el+\"_container-btns\"));   \r\n    }\r\n\r\n    function enableElem (elem){\r\n        if (!(elem.isEnabled())){\r\n            elem.enable();\r\n        }\r\n    }\r\n\r\n\r\n    function setValueHiddenBtn(btn,value){\r\n        if( btn ){\r\n            btn.setValue(value);\r\n        }\r\n    }\r\n\r\n    function hideInputContainers (){\r\n        const operBtn     =  $$(el+\"-btnFilterOperations\");\r\n        const segmentBtn = $$(el+\"_segmentBtn\");\r\n        const btns       = $$(el+\"_container-btns\");\r\n        \r\n      \r\n\r\n        $$(el).setValue(\"\");\r\n        $$(el).hide();\r\n\r\n        setValueHiddenBtn(operBtn,  \"=\");\r\n        setValueHiddenBtn(segmentBtn, 1);\r\n\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(btns);\r\n   \r\n    }\r\n\r\n    function hideHtmlEl (){\r\n        try{\r\n            htmlElement.forEach(function(elem,i){\r\n                if (elem.classList.contains(elementClass)){\r\n                    addClass   (elem, hideClass);\r\n                    removeClass(elem, showClass);\r\n                }\r\n            });\r\n\r\n        } catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"function visibleField => hideHtmlEl\");\r\n        }\r\n    }\r\n  \r\n    function removeChilds(){\r\n        const countChild = $$(el+\"_rows\").getChildViews();  \r\n        const childs     = [];\r\n\r\n        try{\r\n           \r\n            Object.values(countChild).forEach(function(elem,i){\r\n              \r\n                if (elem.config.id.includes(\"child\")){\r\n                    childs.push($$(elem.config.id));\r\n                }\r\n\r\n            });\r\n\r\n            childs.forEach(function(el,i){\r\n                const parent = el.getParentView();\r\n                parent.removeView($$(el.config.id));\r\n\r\n            });\r\n\r\n        } catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"function visibleField => removeChids\");\r\n        }\r\n    }\r\n\r\n    let checkChilds = false;\r\n    if (el!==\"selectAll\"){\r\n        const childs = $$(el+\"_rows\").getChildViews();\r\n        if (childs.length > 1){\r\n            checkChilds = true;\r\n        }\r\n     \r\n    }\r\n\r\n    if ( !checkChilds ){\r\n        if (condition){\r\n            showHtmlEl          ();\r\n            showInputContainers ();\r\n            enableElem          ($$(\"resetFilterBtn\"        ));\r\n            enableElem          ($$(\"filterLibrarySaveBtn\"  ));\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)            ($$(\"filterEmptyTempalte\"   ));\r\n        } else{\r\n            try{\r\n    \r\n                if ($$(el).isVisible()){\r\n                    hideHtmlEl ();\r\n                }\r\n\r\n                if($$(el+\"_rows\")){\r\n                    removeChilds();\r\n                }\r\n\r\n                hideInputContainers ();\r\n\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"function visibleField => hideElements\");\r\n            }\r\n        }\r\n    } else {\r\n        if ( !condition ){\r\n            if ($$(el).isVisible()){\r\n                hideHtmlEl ();\r\n            }\r\n\r\n            if($$(el+\"_rows\")){\r\n                removeChilds();\r\n            }\r\n\r\n            hideInputContainers ();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableFilter/common.js?");

/***/ }),

/***/ "./src/js/blocks/tableFilter/layout.js":
/*!*********************************************!*\
  !*** ./src/js/blocks/tableFilter/layout.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"filterForm\": () => (/* binding */ filterForm)\n/* harmony export */ });\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/blocks/tableFilter/buttons.js\");\n\r\n\r\n\r\n\r\nfunction setAdaptiveValue(btn, adaptVal, mainVal){\r\n    const width  = btn.$width;\r\n   \r\n    if (width < 120 &&  btn.config.value !== adaptVal ){\r\n        btn.config.value = adaptVal;\r\n        btn.refresh();\r\n      \r\n    } else if (width > 120 &&  btn.config.value !== mainVal ) {\r\n        btn.config.value = mainVal;\r\n        btn.refresh();\r\n    }\r\n}\r\n\r\n\r\nconst formEmptyTemplate = {   \r\n    id:\"filterEmptyTempalte\",\r\n    css:\"webix_empty-template\",\r\n    template:\"Добавьте фильтры из редактора\",\r\n    borderless:true\r\n};\r\n\r\nconst filterTableForm = {\r\n    view        : \"form\", \r\n    hidden      : true,\r\n    id          : \"filterTableForm\",\r\n    minHeight   : 350,\r\n   // width       : 320,\r\n    scroll      : true,\r\n    borderless  : true,\r\n    elements    : [\r\n        {   \r\n            minHeight : 48,\r\n            css       : \"webix_form-adaptive\",\r\n            margin    : 5,\r\n            rows      : [\r\n                {   margin : 5, \r\n                    rows   : [\r\n                      \r\n                    {   \r\n                        margin      : 5, \r\n                        cols        : [\r\n                            (0,_buttons_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"filterBackTableBtn\"),\r\n                            (0,_buttons_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formEditBtn\"),\r\n                            (0,_buttons_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formResetBtn\"),\r\n                        ],\r\n                    },\r\n                    ]\r\n                },\r\n\r\n                {   id   : \"btns-adaptive\",\r\n                    css  : {\"margin-top\":\"5px!important\"},\r\n                    rows : [\r\n                        {   responsive  : \"btns-adaptive\", \r\n                            margin      : 5, \r\n                            cols        : [\r\n                                (0,_buttons_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formBtnSubmit\"),\r\n                                (0,_buttons_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formLibrarySaveBtn\"),\r\n                            ]\r\n                        },\r\n                        {height:10},\r\n                        formEmptyTemplate\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n    ],\r\n    rules:{\r\n        $all:webix.rules.isNotEmpty\r\n    },\r\n\r\n\r\n    ready:function(){\r\n        this.validate();\r\n    },\r\n\r\n};\r\n\r\nfunction filterForm (){\r\n    return {    id      : \"filterTableBarContainer\", \r\n                minWidth: 250,\r\n                width   : 350, \r\n                hidden  : true, \r\n                rows    : [\r\n                    {   id  : \"editFilterBarAdaptive\", \r\n                        rows: [\r\n                            filterTableForm\r\n                        ]\r\n                    }\r\n                ]\r\n            };\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableFilter/layout.js?");

/***/ }),

/***/ "./src/js/blocks/tableFilter/popup.js":
/*!********************************************!*\
  !*** ./src/js/blocks/tableFilter/popup.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createFilterPopup\": () => (/* binding */ createFilterPopup),\n/* harmony export */   \"returnTemplateValue\": () => (/* binding */ returnTemplateValue)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _notifications_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/blocks/tableFilter/buttons.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/tableFilter/common.js\");\n/* harmony import */ var _userTemplate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./userTemplate.js */ \"./src/js/blocks/tableFilter/userTemplate.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet filterTemplateValue;\r\n\r\nconst logNameFile = \"tableFilter => popup\";\r\n\r\n\r\nfunction popupSubmitBtn (){\r\n\r\n    webix.message({\r\n        text:\"В процессе разработки\",\r\n        type:\"debug\", \r\n    });\r\n\r\n    function getCheckboxData(){\r\n\r\n        function enableLibrarySaveBtn(){\r\n            const btn = $$(\"filterLibrarySaveBtn\");\r\n            if ( btn && !(btn.isEnabled()) ){\r\n                btn.enable();\r\n            }\r\n        }\r\n\r\n        function createWorkspaceCheckbox (){\r\n            const values       = $$(\"editFormPopup\").getValues();\r\n            const selectValues = [];\r\n         \r\n            function hideSegmentBtn(){\r\n                const length = selectValues.length;\r\n                 \r\n                selectValues.forEach(function(value,i){\r\n                    const prevIndex = length - 2;\r\n                    const lastIndex = length - 1;\r\n                    if (i == lastIndex){\r\n                        const segmentBtn = $$( value + \"_segmentBtn\");\r\n                        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.hideElem)(segmentBtn);\r\n                    }\r\n\r\n                    if ( i == prevIndex ){\r\n                        const columnId     = $$(value).config.columnName;\r\n                        const prevInputs   = _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[columnId];\r\n                        const inputsLength = prevInputs.length;\r\n\r\n                      \r\n                        console.log(_common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs)\r\n                    }\r\n           \r\n                });\r\n            }\r\n            try{\r\n                Object.keys(values).forEach(function(el,i){\r\n\r\n                    if (values[el]){\r\n                        selectValues.push(el);\r\n                    }\r\n\r\n                    const columnName = $$(el).config.columnName;\r\n                    (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.visibleField) (values[el],columnName,el);\r\n          \r\n                });\r\n\r\n                hideSegmentBtn();\r\n\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"function createWorkspaceCheckbox\"\r\n                );\r\n            }\r\n        }\r\n\r\n        function visibleCounter(){\r\n            let visibleElements = 0;\r\n            try{\r\n                Object.values($$(\"filterTableForm\").elements).forEach(function(el,i){\r\n                    if (!(el.config.hidden)){\r\n                        visibleElements++;\r\n                    }\r\n                    \r\n                });\r\n\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"function getCheckboxData => visibleCounter\"\r\n                );\r\n            }\r\n\r\n            return visibleElements;\r\n        }\r\n\r\n\r\n        function hideFilterPopup (){\r\n            const popup = $$(\"popupFilterEdit\");\r\n            if (popup){\r\n                popup.destructor();\r\n            }\r\n        }\r\n       \r\n        try{\r\n            enableLibrarySaveBtn();\r\n            createWorkspaceCheckbox ();\r\n\r\n            const visibleElements = visibleCounter();\r\n\r\n            if (!(visibleElements)){\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.showElem)    ($$(\"filterEmptyTempalte\"));\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.disableElem) ($$(\"btnFilterSubmit\"));\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.disableElem) ($$(\"filterLibrarySaveBtn\"));\r\n            } \r\n\r\n            hideFilterPopup ();\r\n\r\n        } catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"function getCheckboxData\"\r\n            );\r\n        }\r\n      \r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Рабочая область фильтра обновлена\");\r\n    }\r\n\r\n    try {                                             \r\n        const tabbarValue = $$(\"filterPopupTabbar\").getValue();\r\n\r\n        if (tabbarValue == \"editFormPopupLib\" ){\r\n            (0,_userTemplate_js__WEBPACK_IMPORTED_MODULE_5__.getLibraryData)();\r\n\r\n        } else if (tabbarValue == \"editFormScroll\" ){\r\n            getCheckboxData();\r\n        }\r\n    } catch (err) {\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"function popupSubmitBtn\");\r\n        $$(\"popupFilterEdit\").destructor();\r\n    }\r\n\r\n}\r\n\r\nfunction removeBtnClick (){\r\n    const currId = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.getItemId) ();\r\n    async function userprefsData (){ \r\n\r\n        const lib        = $$(\"filterEditLib\");\r\n        const libValue   = lib.getValue();\r\n        const radioValue = lib.getOption(libValue);\r\n       \r\n        function deleteElement(el){\r\n            const url            = \"/init/default/api/userprefs/\" + el.id;\r\n            const deleteTemplate = webix.ajax().del(url, el);\r\n\r\n            deleteTemplate.then(function(data){\r\n                data = data.json();\r\n            \r\n                function removeOptionState (){\r\n                    try{\r\n                        lib.config.options.forEach(function(el,i){\r\n                            if (el.id == id){\r\n                                el.value = value + \" (шаблон удалён)\";\r\n                                lib.refresh();\r\n                                lib.disableOption(lib.getValue());\r\n                                lib.setValue(\"\");\r\n                            }\r\n                        });\r\n                    } catch (err){\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                            err, \r\n                            logNameFile, \r\n                            \"function deleteElement => removeOptionState\"\r\n                        );\r\n                    }\r\n                }\r\n\r\n                if (data.err_type !== \"e\"&&data.err_type !== \"x\"){\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Шаблон « \" + value + \" » удален\");\r\n                    removeOptionState ();\r\n                } else {\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", \r\n                    logNameFile + \"function userprefsData: \" + data.err);\r\n                }\r\n\r\n            });\r\n            deleteTemplate.fail(function(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, logNameFile,\"getLibraryData\");\r\n            });\r\n        }\r\n\r\n        if (!_buttons_js__WEBPACK_IMPORTED_MODULE_3__.PREFS_STORAGE.userprefs){\r\n            await (0,_buttons_js__WEBPACK_IMPORTED_MODULE_3__.getUserprefsData) (); \r\n        }\r\n\r\n        if (_buttons_js__WEBPACK_IMPORTED_MODULE_3__.PREFS_STORAGE.userprefs){\r\n            const data         = _buttons_js__WEBPACK_IMPORTED_MODULE_3__.PREFS_STORAGE.userprefs.content;\r\n\r\n            const id           = radioValue.id;\r\n            const value        = radioValue.value;\r\n\r\n            const templateName = currId + \"_filter-template_\" + value;\r\n\r\n            data.forEach(function(el,i){\r\n                if (el.name == templateName){\r\n                    deleteElement();\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n\r\n    (0,_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)(   \"Шаблон будет удалён\", \r\n                \"Вы уверены, что хотите продолжить?\", \r\n                [\"Отмена\", \"Удалить\"]\r\n    ).then(function(result){\r\n\r\n        if (result == 1){\r\n\r\n            userprefsData ();\r\n            \r\n        }\r\n    });\r\n}\r\n\r\nconst templateRecover = {\r\n    template    : \"<div class='no-wrap-headline'>\" +\r\n                  \"Редактор фильтров </div>\", \r\n    css         : \"webix_template-recover\", \r\n    borderless  : true, \r\n    height      : 40 \r\n};\r\n\r\nconst buttonClosePopup =  {\r\n    view    : \"button\",\r\n    id      : \"buttonClosePopup\",\r\n    css     : \"popup_close-btn\",\r\n    type    : \"icon\",\r\n    hotkey  : \"esc\",\r\n    width   : 25,\r\n    icon    : 'wxi-close',\r\n    click   : function(){\r\n        const popup = $$(\"popupFilterEdit\");\r\n        if (popup){\r\n            popup.destructor();\r\n        }\r\n    \r\n    }\r\n};\r\n\r\nconst filterPrompt = {\r\n    css         : \"webix_empty-template\",\r\n    template    : \"Выберите нужные поля или шаблон из библиотеки\", \r\n    borderless  : true, \r\n    height      : 47\r\n};\r\n\r\nfunction tabbarClick (id){\r\n\r\n\r\n    function btnSubmitState (state){\r\n        const btn = $$(\"popupFilterSubmitBtn\");\r\n\r\n        if (state==\"enable\"){\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.enableElem)(btn);\r\n        } else if (state==\"disable\"){\r\n            (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.disableElem)(btn);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    function visibleRemoveBtn (param){\r\n        const btn = $$(\"editFormPopupLibRemoveBtn\");\r\n        if ( btn && !(btn.isVisible()) ){\r\n            if (param){\r\n                btn.show();\r\n            } else {\r\n                btn.hide();\r\n            }\r\n        }\r\n    }\r\n\r\n    function filterLibrary(){\r\n\r\n        function setStateSubmitBtn (){\r\n            \r\n            if ($$(\"filterEditLib\").getValue() !== \"\" ){\r\n                btnSubmitState (\"enable\");\r\n            } else {\r\n                btnSubmitState (\"disable\");\r\n            }\r\n        }\r\n\r\n        try{\r\n            setStateSubmitBtn ();\r\n            visibleRemoveBtn (true);\r\n        }catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"filterLibrary\");\r\n        }\r\n        \r\n        \r\n\r\n    }     \r\n\r\n    function editFilter (){\r\n    \r\n\r\n        let checkboxes = $$(\"editFormPopup\").getValues();\r\n        let counter = 0;\r\n        \r\n        function countChecked(){\r\n            Object.values(checkboxes).forEach(function(el,i){\r\n                if (el){\r\n                    counter++;\r\n                }\r\n            });\r\n        }\r\n        \r\n        function setStateSubmitBtn(){\r\n            if (counter > 0){\r\n                btnSubmitState (\"enable\");\r\n            } else {\r\n                btnSubmitState (\"disable\");\r\n            }\r\n        }\r\n\r\n        try{\r\n            countChecked();\r\n            visibleRemoveBtn (false);\r\n            setStateSubmitBtn();\r\n        }catch(err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"editFilter\");\r\n        }\r\n    }\r\n\r\n    function tabbarLogic(){\r\n        if (id ==\"editFormPopupLib\"){\r\n            filterLibrary();  \r\n        }\r\n\r\n        if (id ==\"editFormScroll\"){\r\n            editFilter ();\r\n        }\r\n    }\r\n\r\n    try{\r\n        tabbarLogic();\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"tabbarLogic\");\r\n    }\r\n}\r\n\r\nfunction returnDivHeadline(title){\r\n    return  \"<span\" + \r\n            \"class='webix_tabbar-filter-headline'>\" +\r\n            title +\r\n            \"</span>\";\r\n}\r\n\r\n\r\nconst tabbar =  {\r\n    view        : \"tabbar\",  \r\n    type        : \"top\", \r\n    id          : \"filterPopupTabbar\",\r\n    css         : \"webix_filter-popup-tabbar\",\r\n    multiview   : true, \r\n    height      : 50,\r\n\r\n    options     : [\r\n        {   value: returnDivHeadline(\"Поля\"), \r\n            id: 'editFormScroll' \r\n        },\r\n        {   value: returnDivHeadline(\"Библиотека\"), \r\n            id: 'editFormPopupLib' \r\n        },\r\n    ],\r\n\r\n    on:{\r\n        onAfterTabClick: function(id){\r\n            tabbarClick(id);\r\n        }\r\n    }\r\n};\r\n\r\nconst tabCheckboxes = {   \r\n    view        :\"scrollview\",\r\n    id          : \"editFormScroll\", \r\n    borderless  : true, \r\n    css         : \"webix_multivew-cell\",\r\n    scroll      : \"y\", \r\n    body        : { \r\n        id  : \"editFormPopupScroll\",\r\n        rows: [ ]\r\n    }\r\n\r\n};\r\n\r\nfunction stateSubmitBtn(state){\r\n    const popup = $$(\"popupFilterSubmitBtn\");\r\n    if(state){\r\n        popup.enable();\r\n    } else {\r\n        popup.disable();\r\n    }\r\n\r\n}\r\n\r\nfunction returnTemplateValue(){\r\n    return filterTemplateValue;\r\n}\r\n\r\nfunction onChangeLibBtn (){\r\n    const btn       = $$(\"filterEditLib\");\r\n    const submitBtn = $$(\"popupFilterSubmitBtn\");\r\n    \r\n    if (btn.getValue()){\r\n        filterTemplateValue = btn.getValue();\r\n\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.enableElem)($$(\"editFormPopupLibRemoveBtn\"));\r\n\r\n        if(!(submitBtn.isEnabled())){\r\n            stateSubmitBtn(true);\r\n        }\r\n    } else {\r\n        if(submitBtn.isEnabled()){\r\n            stateSubmitBtn(false);\r\n        }\r\n    }\r\n}\r\n\r\nconst radioLibBtn =  {   \r\n    view    : \"radio\", \r\n    id      : \"filterEditLib\",\r\n    vertical: true,\r\n    options : [],\r\n    on      : {\r\n        onChange: function(){\r\n            onChangeLibBtn ();\r\n        }\r\n    }\r\n};\r\n\r\nconst tabLib = {  \r\n    view        : \"form\", \r\n    scroll      : true ,\r\n    id          : \"editFormPopupLib\",\r\n    css         : \"webix_multivew-cell\",\r\n    borderless  : true,\r\n    elements    : [\r\n        radioLibBtn\r\n    ],\r\n\r\n};\r\n\r\nconst submitBtn =  {   \r\n    view    : \"button\",\r\n    id      : \"popupFilterSubmitBtn\",\r\n    height  : 48,\r\n    minWidth: 140,\r\n    disabled: true, \r\n    css     : \"webix_primary\",\r\n    hotkey  : \"Enter\",\r\n    value   : \"Применить\", \r\n    on      : {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\r\n            \"Выбранные фильтры будут добавлены в рабочее поле, остальные скрыты\");\r\n        },\r\n    },\r\n    click:popupSubmitBtn\r\n};\r\n\r\n\r\nconst removeBtn = {   \r\n    view    : \"button\",\r\n    css     : \"webix_danger\",\r\n    id      : \"editFormPopupLibRemoveBtn\",\r\n    type    : \"icon\",\r\n    icon    : 'icon-trash',\r\n    hidden  : true,\r\n    disabled: true,\r\n    width   : 50,\r\n    click   : function(){\r\n        removeBtnClick ();\r\n    },\r\n    on      : {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Выбранный шаблон будет удален\");\r\n        },\r\n    },\r\n};\r\n\r\nconst editFormPopup = {\r\n    view        : \"form\", \r\n    id          : \"editFormPopup\",\r\n    css         : \"webix_edit-form-popup\",\r\n    borderless  : true,\r\n    elements    : [\r\n\r\n        { rows : [ \r\n            tabbar,\r\n                \r\n            {   height : 200,\r\n                cells  : [\r\n                    tabCheckboxes,\r\n                    tabLib,\r\n                ]   \r\n            },\r\n    \r\n            {height : 20},\r\n            {cols   : [\r\n                submitBtn,\r\n                {width : 5},\r\n                removeBtn,\r\n            ]},\r\n        ]},\r\n        {}\r\n\r\n    ],\r\n};\r\n\r\nfunction createFilterPopup() {\r\n    webix.ui({\r\n        view    : \"popup\",\r\n        id      : \"popupFilterEdit\",\r\n        css     : \"webix_popup-filter-container webix_popup-config\",\r\n        modal   : true,\r\n        escHide : true,\r\n        position: \"center\",\r\n        height  : 400,\r\n        width   : 400,\r\n        body    : {\r\n            scroll : \"y\", \r\n            rows   : [\r\n                {   css : \"webix_filter-headline-wrapper\", \r\n                    cols: [ \r\n                        templateRecover,\r\n                        {width : 150},\r\n                        buttonClosePopup,\r\n                    ]\r\n                },\r\n\r\n                filterPrompt,\r\n                editFormPopup\r\n            ]\r\n        }\r\n    }).show();\r\n}\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableFilter/popup.js?");

/***/ }),

/***/ "./src/js/blocks/tableFilter/toolbarBtn.js":
/*!*************************************************!*\
  !*** ./src/js/blocks/tableFilter/toolbarBtn.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolbarFilterBtn\": () => (/* binding */ toolbarFilterBtn),\n/* harmony export */   \"createChildFields\": () => (/* binding */ createChildFields)\n/* harmony export */ });\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _notifications_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/tableFilter/common.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableFilter => toolbar\";\r\n\r\n\r\nfunction field (operation,uniqueId,typeField,el){\r\n \r\n    let findTableId;\r\n\r\n    function getIdCombo(){\r\n        if (el.editor && el.editor == \"combo\"){\r\n            findTableId = el.type.slice(10);\r\n        } \r\n    }\r\n\r\n    function getElemId (){\r\n        let id;\r\n        if (el.id.includes(\"_filter\")){\r\n            let index = el.id.indexOf(\"_filter\");\r\n            id =  el.id.slice(0,index);\r\n        } else {\r\n            id = el.id;\r\n        }\r\n        return id;\r\n    }\r\n\r\n    function createField(){\r\n     \r\n        const elemId        = getElemId ();\r\n\r\n        const fieldId       = elemId+\"_filter-child-\"+uniqueId;\r\n        const fieldTemplate = {\r\n            id        : fieldId, \r\n            name      : fieldId,\r\n            label     : el.label,\r\n            columnName: elemId,\r\n            labelPosition:\"top\",\r\n            on:{\r\n                onKeyPress:function(){\r\n                    const btn = $$(\"btnFilterSubmit\");\r\n                    $$(\"filterTableForm\").clearValidation();\r\n                    if (btn && !(btn.isEnabled())){\r\n                        btn.enable();\r\n                    }\r\n                },\r\n            }\r\n        };\r\n\r\n        function createText(type){\r\n            const element       = fieldTemplate;\r\n            element.view        = \"text\";\r\n\r\n            if(type == \"text\"){\r\n                element.placeholder = \"Введите текст\";\r\n            } else if (type == \"int\"){\r\n                element.placeholder    = \"Введите число\";\r\n                element.invalidMessage = \"Поле поддерживает только числовой формат\";\r\n                element.validate       = function(val){\r\n                    return !isNaN(val*1);\r\n                };\r\n            }\r\n           \r\n\r\n            return element;\r\n        }\r\n\r\n        function createCombo(type){\r\n            const element       = fieldTemplate;\r\n            element.view        = \"combo\";\r\n            element.placeholder = \"Выберите вариант\";\r\n \r\n            if (type == \"default\"){\r\n                element.options     = {\r\n                    data:(0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getComboOptions)(findTableId)\r\n                };\r\n\r\n            } else if (type == \"bool\"){\r\n                element.options = [\r\n                    {id:1, value: \"Да\"},\r\n                    {id:2, value: \"Нет\"}\r\n                ];\r\n            }\r\n\r\n            return element;\r\n        }\r\n\r\n        function createDatepicker() {\r\n            const element       = fieldTemplate;\r\n            element.view        = \"datepicker\";\r\n            element.placeholder = \"дд.мм.гг\";\r\n            element.format      = \"%d.%m.%Y %H:%i:%s\";\r\n            element.timepicker  = true;\r\n          \r\n            return element;\r\n        }\r\n   \r\n        if (typeField==\"text\"){\r\n            return createText(\"text\");\r\n    \r\n        } else if (typeField==\"combo\"){\r\n            return createCombo(\"default\");\r\n    \r\n        } else if (typeField==\"boolean\"){\r\n            return createCombo(\"bool\");\r\n    \r\n        } else if (typeField==\"date\"){\r\n            return createDatepicker();\r\n\r\n        } else if (typeField==\"integer\"){\r\n            return createText(\"int\");\r\n\r\n        }\r\n \r\n    \r\n    }\r\n\r\n\r\n    getIdCombo();\r\n    return createField();\r\n\r\n}\r\n\r\nfunction filterOperationsBtnLogic (idBtn,id){\r\n    try {\r\n        let btnFilterOperations = $$(idBtn);\r\n\r\n        if (id === \"eql\"){\r\n            btnFilterOperations.setValue(\"=\");\r\n            \r\n        } else if (id === \"notEqual\"){\r\n            btnFilterOperations.setValue(\"!=\");\r\n\r\n        } else if (id.includes(\"less\")){\r\n            btnFilterOperations.setValue(\"<\");\r\n\r\n        } else if (id  === \"more\"){\r\n            btnFilterOperations.setValue(\">\");\r\n\r\n        } else if (id === \"mrEqual\"){\r\n            btnFilterOperations.setValue(\">=\");\r\n\r\n        } else if (id === \"lsEqual\"){\r\n            btnFilterOperations.setValue(\"<=\");\r\n\r\n        } else if (id === \"contains\"){\r\n            btnFilterOperations.setValue(\"⊆\");\r\n\r\n        }\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"filterOperationsBtnLogic\");\r\n    }\r\n\r\n}\r\n\r\nfunction checkCountInputs(){\r\n    const values = Object.values(_common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs);\r\n    let counter  = 0;\r\n\r\n    values.forEach(function(value, i){\r\n        if (value.length){\r\n            counter ++;\r\n        }\r\n    });\r\n\r\n    return counter;\r\n}\r\n\r\nfunction showEmptyTemplate(){\r\n\r\n    if (! checkCountInputs()){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(\"filterEmptyTempalte\")); \r\n    }\r\n\r\n}\r\n\r\n\r\nfunction filterOperationsBtnData (typeField){\r\n\r\n    function addOperation (self, value, id){\r\n        self.add( { \r\n            value: value,       \r\n            id   : id      \r\n        });\r\n    }\r\n\r\n    function addDefaultOperations(self){\r\n        addOperation (self, '='       , \"eql\"     );\r\n        addOperation (self, '!='      , \"notEqual\");\r\n        \r\n    }\r\n\r\n    function addMoreLessOperations(self){\r\n        addOperation (self, '< ' , \"less\"    );\r\n        addOperation (self, '> ' , \"more\"    );\r\n        addOperation (self, '>=' , \"mrEqual\" );\r\n        addOperation (self, '<=' , \"lsEqual\" );  \r\n    }\r\n\r\n    return webix.once(function(){\r\n\r\n        if (typeField == \"combo\" || typeField == \"boolean\" ){\r\n            addDefaultOperations(this);\r\n\r\n        } else if (typeField  == \"text\" ){\r\n            addDefaultOperations(this);\r\n            addOperation (this, \"содержит\", \"contains\");\r\n\r\n        } else if (typeField  == \"date\"){\r\n            addDefaultOperations  (this);\r\n            addMoreLessOperations (this);\r\n\r\n        } else if (typeField  == \"integer\"   ){\r\n            addDefaultOperations  (this);\r\n            addMoreLessOperations (this);\r\n            addOperation (this, \"содержит\", \"contains\");\r\n\r\n        }   \r\n    });\r\n}\r\n\r\nfunction removeInStorage(el,thisInput){\r\n    _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[el.id].forEach(function(id,i){\r\n        if (id == thisInput){\r\n            _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[el.id].splice(i, 1);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction hideLastSegmentBtn(idElement){\r\n \r\n    const count = checkCountInputs();\r\n    const keys  = Object.keys(_common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs);\r\n\r\n    function hideBtn(id){\r\n        const btn = $$(id + \"_filter_segmentBtn\");\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(btn);\r\n    }\r\n \r\n    if (count === 2){\r\n        keys.forEach(function(input,i){\r\n           \r\n            if (input !== idElement){\r\n                hideBtn(input);\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n\r\nfunction hideHtmlEl(id){\r\n    const idContainer = $$(id+\"_filter_rows\");\r\n    const showClass   = \"webix_show-content\";\r\n    const hideClass   = \"webix_hide-content\";\r\n\r\n    const childs = idContainer.getChildViews();\r\n\r\n    if (childs.length == 1){\r\n        const div = idContainer.getNode();\r\n       \r\n        (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.removeClass) (div, showClass);\r\n        (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.addClass)    (div, hideClass);\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction hideChildSegmentBtn (idChild, id){\r\n    const lengthChilds = _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[id].length;\r\n\r\n    const lastChild = _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[id][lengthChilds-1];\r\n\r\n    if (checkCountInputs() === 1 &&\r\n        lastChild === idChild    ){\r\n        const segmentChildBtn = idChild + \"_segmentBtn\";\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(segmentChildBtn));\r\n    }\r\n}\r\n\r\nfunction clickContextBtnParent (id,el){\r\n\r\n    const thisInput  = el.id + \"_filter\";\r\n    const segmentBtn = $$(thisInput + \"_segmentBtn\");       \r\n    \r\n    function removeInput (){\r\n\r\n        const container     = $$(thisInput).getParentView();\r\n        const mainInput     = container    .getChildViews();\r\n       \r\n        function hideMainInput(){\r\n            const btnOperations = $$(thisInput + \"-btnFilterOperations\");\r\n   \r\n            try{\r\n                mainInput.forEach(function(el){\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(el);\r\n                });\r\n\r\n           \r\n                btnOperations.setValue(\" = \");\r\n\r\n            } catch(err){ \r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"contextBtn remove => hideMainInput\");\r\n            }\r\n        }\r\n\r\n        hideMainInput       ();\r\n        hideHtmlEl          (el.id);\r\n        hideLastSegmentBtn  (el.id);\r\n        removeInStorage     (el, thisInput);\r\n        showEmptyTemplate   ();\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)         (\"success\", \"Поле удалено\"); \r\n\r\n    }\r\n\r\n    function addInput (){\r\n        const idChild = createChildFields (id, el);\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem) (segmentBtn);\r\n        hideChildSegmentBtn (idChild, el.id);\r\n    }\r\n\r\n    if ( id === \"add\" ){\r\n        addInput();\r\n        \r\n    } else if (id === \"remove\"){\r\n\r\n        (0,_notifications_js__WEBPACK_IMPORTED_MODULE_3__.popupExec)(\"Поле фильтра будет удалено\").then(\r\n            function(){\r\n                removeInput ();\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)    (segmentBtn);\r\n                \r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nfunction filterFieldsFunctions (el, typeField){\r\n\r\n    const idBtnOperation = el.id+\"_filter-btnFilterOperations\";\r\n    const btnOperation = {\r\n        view:\"button\",\r\n        id:idBtnOperation,\r\n        css:\"webix_primary webix_filterBtns\",\r\n        value:\"=\",\r\n        inputHeight:38,\r\n        width: 40,\r\n        popup: {\r\n            view: 'contextmenu',\r\n            width: 200,\r\n            data: [\r\n            ],\r\n            on: {\r\n                onMenuItemClick(id) {\r\n                    filterOperationsBtnLogic (idBtnOperation, id);\r\n                },\r\n                onAfterLoad: filterOperationsBtnData(typeField)\r\n                \r\n           \r\n            }\r\n        },\r\n        on:{\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Выбрать условие поиска по полю\");\r\n            },\r\n        }\r\n    \r\n    };\r\n\r\n\r\n    const contextBtn = {   \r\n        view:\"button\",\r\n        id:el.id+\"_filter_contextMenuFilter\",\r\n        type:\"icon\",\r\n        css:\"webix_filterBtns\",\r\n        icon: 'wxi-dots',\r\n        inputHeight : 38,\r\n        width       : 40,\r\n        popup: {\r\n            view: 'contextmenu',\r\n            css:\"webix_contextmenu\",\r\n            data: [\r\n                {   id:\"add\",   \r\n                    value:\"Добавить поле\", \r\n                    icon: \"icon-plus\",\r\n                    },\r\n                {id:\"remove\", value:\"Удалить поле\", icon: \"icon-trash\"}\r\n            ],\r\n            on:{\r\n                onMenuItemClick:function(id){\r\n                    clickContextBtnParent(id,el);\r\n                },\r\n             \r\n            }\r\n        },\r\n\r\n        on:{\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Другие операции\");\r\n            },\r\n        }\r\n  \r\n    };\r\n\r\n    const btns = {\r\n        id:el.id+\"_filter_container-btns\",\r\n        css:{\"margin-top\":\"22px!important\"},\r\n        hidden:true, \r\n        cols:[\r\n            btnOperation,\r\n            contextBtn\r\n        ]\r\n    };\r\n\r\n    return btns;       \r\n}\r\n\r\nfunction clickContextBtnChild(id, el, thisElem){\r\n\r\n    function returnThisInput(){\r\n        const master    = thisElem.config.master;\r\n        const index     = master.indexOf(\"_contextMenuFilter\");\r\n        const thisInput = master.slice(0, index);\r\n\r\n        return thisInput;\r\n    }\r\n\r\n    const thisInput     = returnThisInput();\r\n    const thisContainer = thisInput + \"-container\";\r\n    const segmentBtn    = $$(thisInput+\"_segmentBtn\");\r\n\r\n    function addChild(){\r\n        const parentInput  = $$(el.id + \"_filter\");\r\n        let childPosition  = 0;\r\n\r\n        _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[el.id].forEach(function(input, i){\r\n\r\n            const inputContainer = input + \"-container\";\r\n            if (inputContainer === thisContainer){\r\n                childPosition = i + 1;\r\n            }\r\n        });\r\n\r\n        if ( !(parentInput.isVisible()) ){\r\n            childPosition++;\r\n        }\r\n\r\n        const idChild = createChildFields (id,el,childPosition);\r\n\r\n        hideChildSegmentBtn (idChild, el.id);\r\n\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)(segmentBtn);\r\n        console.log(_common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs)\r\n    }\r\n\r\n    function removeContainer(){\r\n   \r\n        const parent = $$(thisContainer).getParentView();\r\n        \r\n        parent.removeView($$(thisContainer));\r\n    } \r\n\r\n    function hideParentSegmentBtn(){\r\n        const colName   = $$(thisInput).config.columnName;\r\n        const parentBtn = $$(colName + \"_filter_segmentBtn\");\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)(parentBtn);\r\n    }\r\n\r\n    function isLastInput(){\r\n        const length = _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[el.id].length;\r\n        let check    = false;\r\n   \r\n        if (length === 2){\r\n            check = true;\r\n        }\r\n        return check;\r\n    }\r\n\r\n    function removeInput(){\r\n        const isLast = isLastInput();\r\n\r\n        removeInStorage(el, thisInput);\r\n\r\n        if (isLast){\r\n            hideParentSegmentBtn();\r\n        }\r\n\r\n        removeContainer();\r\n        showEmptyTemplate();\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\"success\",\"Поле удалено\"); \r\n\r\n    }\r\n\r\n    if ( id == \"add\" ){\r\n\r\n        addChild();\r\n     \r\n    } else if (id === \"remove\"){\r\n     \r\n        (0,_notifications_js__WEBPACK_IMPORTED_MODULE_3__.popupExec)(\"Поле фильтра будет удалено\").then(\r\n            function(res){\r\n  \r\n                if(res){\r\n                    removeInput();\r\n                }\r\n\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction createChildFields (id,el,position) {\r\n\r\n    const elemId        = el.id;\r\n    const containerRows = $$(elemId + \"_filter\" + \"_rows\");\r\n    const uniqueId      = webix.uid();\r\n \r\n    if (position == undefined){\r\n        position = 1;\r\n    }\r\n\r\n    let typeField;\r\n\r\n    function getTypeField(){\r\n        if (el.type !== \"boolean\"){\r\n            typeField     = el.editor;\r\n        } else {\r\n            typeField     = \"boolean\";\r\n        }\r\n    }\r\n    getTypeField();\r\n\r\n    function returnButtonOperation(btnsId){\r\n        \r\n        const idBtnOperation = btnsId+\"-btnFilterOperations\";\r\n        \r\n        return {\r\n            view:\"button\",\r\n            id:idBtnOperation,\r\n            css:\"webix_primary webix_filterBtns\",\r\n            value:\"=\",\r\n            inputHeight:38,\r\n            width: 40,\r\n            popup: {\r\n                view: 'contextmenu',\r\n                width: 200,\r\n                data: [],\r\n                on: {\r\n                    onMenuItemClick(id) {\r\n                        filterOperationsBtnLogic (idBtnOperation, id);\r\n                    },\r\n                    onAfterLoad: filterOperationsBtnData(typeField)\r\n                   \r\n                }\r\n            },\r\n            on:{\r\n                onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Выбрать условие поиска по полю\");\r\n                },\r\n            }\r\n        \r\n        };\r\n    }\r\n\r\n    function returnContextButton(btnsId){\r\n        const idContextMenu = btnsId+\"_contextMenuFilter\";\r\n        return {   \r\n            view:\"button\",\r\n            id:idContextMenu,\r\n            type:\"icon\",\r\n            css:\"webix_filterBtns\",\r\n            icon: 'wxi-dots',\r\n            inputHeight : 38,\r\n            width       : 40,\r\n            popup: {\r\n                view: 'contextmenu',\r\n                css:\"webix_contextmenu\",\r\n                data: [\r\n                    {   id:\"add\",   \r\n                        value:\"Добавить поле\", \r\n                        icon: \"icon-plus\",\r\n                        },\r\n                    {id:\"remove\", value:\"Удалить поле\", icon: \"icon-trash\"}\r\n                ],\r\n                on:{\r\n                    onMenuItemClick:function(id, e, node){\r\n                        clickContextBtnChild(id,el,this);\r\n                    },\r\n                 \r\n                }\r\n            },\r\n    \r\n            on:{\r\n                onAfterRender: function () {\r\n                    this.getInputNode().setAttribute(\"title\",\"Другие операции\");\r\n                },\r\n            }\r\n      \r\n        }\r\n    }\r\n\r\n    function returnLogicBtn(btnsId){\r\n    \r\n        return {\r\n            view    : \"segmented\", \r\n            id      : btnsId + \"_segmentBtn\",\r\n            value   : 1, \r\n            options : [\r\n                { \"id\":\"1\", \"value\":\"и\" }, \r\n                { \"id\":\"2\", \"value\":\"или\" }, \r\n            ]\r\n        };\r\n    }\r\n\r\n    function createBtns(btnsId){\r\n        return {\r\n            id  : elemId + \"_filter_container-btns\" + uniqueId,\r\n            css : {\"margin-top\" : \"22px!important\"},\r\n            cols: [\r\n                returnButtonOperation (btnsId),\r\n                returnContextButton   (btnsId)\r\n            ]\r\n        };\r\n    }\r\n\r\n\r\n    function addInput(operation){\r\n      \r\n        const idContainer = elemId + \"_filter-child-\" + uniqueId + \"-container\";\r\n        const btnsId      = elemId + \"_filter-child-\" + uniqueId;\r\n\r\n        const input      = field (operation ,uniqueId, typeField, el);\r\n          \r\n        _common_js__WEBPACK_IMPORTED_MODULE_4__.visibleInputs[elemId].splice(position, 0, input.id);\r\n\r\n        containerRows.addView(\r\n            {   id:idContainer,\r\n                padding:5,\r\n                positionElem:position,\r\n                rows:[\r\n                    {   id:webix.uid(),\r\n                        rows:[\r\n                            {cols:[\r\n                                input,\r\n                                createBtns(btnsId)\r\n                            ]},\r\n                            returnLogicBtn(btnsId),\r\n                        ]\r\n                    }\r\n            ]},position\r\n        );\r\n\r\n    }\r\n\r\n   \r\n\r\n    addInput(\"operAnd\");\r\n   \r\n    const idCreateField = elemId + \"_filter-child-\" + uniqueId;\r\n    return idCreateField;\r\n}\r\n\r\nfunction createFilterElements (parentElement, viewPosition=1) {\r\n    const childs       = $$(parentElement).elements;\r\n    const childsLength = Object.keys(childs).length;\r\n\r\n\r\n    function enableDelBtn(){\r\n        const delBtn = $$(\"table-delBtnId\");\r\n        try{\r\n            if(parentElement==\"table-editForm\" && delBtn ){\r\n                delBtn.enable();\r\n            }\r\n        } catch (err){ \r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"createFilterElements => enableDelBtn\");\r\n        }\r\n    }\r\n\r\n    function generateElements(){\r\n        const columnsData = $$(\"table\").getColumns(true);\r\n        let inputsArray   = [];\r\n        try{\r\n            columnsData.forEach((el,i) => {\r\n         \r\n                const inputTemplate = { \r\n                    id              : el.id + \"_filter\",\r\n                    name            : el.id + \"_filter\", \r\n                    hidden          : true,\r\n                    label           : el.label, \r\n                    labelPosition   : \"top\",\r\n                    columnName      : el.id,\r\n                    on:{\r\n                        onItemClick:function(){\r\n                            $$(parentElement).clearValidation();\r\n                            $$(\"btnFilterSubmit\").enable();\r\n                        }\r\n                    }\r\n                };\r\n\r\n                const logicBtn = {\r\n                    view    : \"segmented\", \r\n                    id      : el.id + \"_filter_segmentBtn\",\r\n                    hidden  : true,\r\n                    value   : 1, \r\n                    options : [\r\n                        { \"id\":\"1\", \"value\":\"и\" }, \r\n                        { \"id\":\"2\", \"value\":\"или\" }, \r\n                    ]\r\n                };\r\n\r\n\r\n                const idContainerRows = el.id + \"_filter\"+\"_rows\";\r\n                const idContainer     = el.id + \"_filter-container\";\r\n                const cssContainer    = el.id + \" webix_filter-inputs\";\r\n     \r\n                function pushData (element, btns){\r\n                    const data  =  {   \r\n                        id:idContainerRows,\r\n                        css:cssContainer,\r\n                        rows:[\r\n                            {   id:idContainer,\r\n                                padding:5,\r\n                                rows:[\r\n                                 \r\n                                    { cols:[\r\n                                        element,\r\n                                        btns,\r\n                                    ]},\r\n                                    logicBtn,\r\n                                   \r\n                                ]\r\n                            }\r\n                        ]\r\n                    };\r\n\r\n                    return data;\r\n                }\r\n        \r\n        \r\n                function createDatepicker(){\r\n                    const elem       = inputTemplate;\r\n                    elem.view        = \"datepicker\";\r\n                    elem.format      = \"%d.%m.%Y %H:%i:%s\";\r\n                    elem.placeholder = \"дд.мм.гг\";\r\n                    elem.timepicker  = true;\r\n                    return elem;\r\n                }\r\n\r\n                function createCombo(findTableId){\r\n                    const elem       = inputTemplate;\r\n                    elem.view        = \"combo\";\r\n                    elem.placeholder = \"Выберите вариант\";\r\n                    elem.options     = {\r\n                        data:(0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getComboOptions)(findTableId)\r\n                    };\r\n                    return elem;\r\n                }\r\n\r\n                function createBoolCombo (){\r\n                    const elem       = inputTemplate;\r\n                    elem.view        = \"combo\";\r\n                    elem.placeholder = \"Выберите вариант\";\r\n                    elem.options     = [\r\n                        {id:1, value: \"Да\"},\r\n                        {id:2, value: \"Нет\"}\r\n                    ];\r\n                    return elem;\r\n                }\r\n\r\n                function createText (type){\r\n                    \r\n                    const elem = inputTemplate;\r\n                    elem.view  = \"text\";\r\n                    elem.css   = {\"passing-bottom\":\"5px!important\"};\r\n\r\n                    if        (type == \"text\"){\r\n                        elem.placeholder = \"Введите текст\";\r\n\r\n                    } else if (type == \"int\"){\r\n                        elem.placeholder     = \"Введите число\";\r\n                        elem.invalidMessage  = \"Поле поддерживает только числовой формат\";\r\n                        elem.validate        = function (val) {\r\n                            return !isNaN(val*1);\r\n                        };\r\n                    }\r\n                    \r\n                    return elem;\r\n                }\r\n\r\n                if (el.type == \"datetime\"){\r\n                    inputsArray.push(\r\n                        pushData ( \r\n                            createDatepicker (),  \r\n                            filterFieldsFunctions (el,\"date\")\r\n                        )\r\n                    );\r\n                } \r\n                else if (el.type.includes(\"reference\")) {\r\n                    let findTableId = el.type.slice(10);\r\n\r\n                    inputsArray.push(\r\n                        pushData ( \r\n                            createCombo(findTableId),\r\n                            filterFieldsFunctions (el,\"combo\")\r\n                        )\r\n                    );\r\n                    \r\n                } \r\n                else if (el.type.includes(\"boolean\")) {\r\n                    inputsArray.push(\r\n                        pushData ( \r\n                            createBoolCombo(),\r\n                            filterFieldsFunctions (el,\"combo\")\r\n                        )\r\n                    );\r\n                \r\n                } \r\n                else if (el.type.includes(\"integer\")) {\r\n                    inputsArray.push(\r\n                        pushData ( \r\n                            createText (\"int\"),\r\n                            filterFieldsFunctions (el,\"integer\"),\r\n                         \r\n                        )\r\n                    );\r\n                }\r\n                else{\r\n\r\n                    inputsArray.push(\r\n                        pushData ( \r\n                            createText (\"text\"),\r\n                            filterFieldsFunctions (el,\"text\"),\r\n                   \r\n                        )\r\n                    );\r\n                }\r\n\r\n            });\r\n        } catch (err){ \r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"createFilterElements => generateElements\");\r\n        }\r\n\r\n\r\n        const inpObj = {\r\n            margin:8,\r\n            id:\"inputsFilter\",\r\n            css:\"webix_inputs-table-filter\", \r\n            rows:inputsArray\r\n        };\r\n\r\n        function addInputs(){\r\n            try{\r\n                if($$(parentElement)){\r\n                    $$(parentElement).addView(inpObj, viewPosition);\r\n                }\r\n            } catch (err){ \r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"createFilterElements => addInputs\");\r\n            }\r\n        }\r\n\r\n        enableDelBtn();\r\n        addInputs();\r\n\r\n    }\r\n\r\n    function showElements(){\r\n        function setFormState(){\r\n            try{\r\n                if($$(parentElement)){\r\n                    $$(parentElement).clear();\r\n                    $$(parentElement).clearValidation();\r\n                }\r\n            } catch (err){ \r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"createFilterElements => setFormState\");\r\n            }\r\n        }\r\n        setFormState();\r\n        enableDelBtn();\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(\"inputsFilter\"));\r\n    }\r\n    \r\n    if(childsLength == 0 ){\r\n        generateElements();\r\n\r\n    } else {\r\n        showElements();\r\n    }\r\n    \r\n}\r\n\r\nfunction filterBtnClick (idTable){\r\n    const filter = $$(\"filterTableForm\");\r\n\r\n    function resizeContainer(width){\r\n        const filterContainer = $$(\"filterTableBarContainer\");\r\n  \r\n        filterContainer.config.width = width;\r\n        filterContainer.resize();\r\n    }\r\n    function filterMinAdaptive(){\r\n\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"tableContainer\"));\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"tree\"));\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(\"table-backTableBtnFilter\"));\r\n        resizeContainer(window.innerWidth-45);\r\n      \r\n\r\n    }\r\n\r\n    function filterMaxAdaptive(){\r\n\r\n        function clearTableSelection(){\r\n            $$(idTable).clearSelection();\r\n        }\r\n\r\n        function toolbarBtnLogic(){\r\n            const btnClass = document.querySelector(\".webix_btn-filter\");\r\n            const primaryBtnClass = \"webix-transparent-btn--primary\";\r\n            const secondaryBtnClass = \"webix-transparent-btn\";\r\n\r\n            function setPrimaryBtnState(){\r\n                try{\r\n                    btnClass.classList.add(primaryBtnClass);\r\n                    btnClass.classList.remove(secondaryBtnClass);\r\n                } catch (err) {\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"filterMaxAdaptive => setPrimaryBtnState\");\r\n                }\r\n            }\r\n\r\n            function setSecondaryBtnState(){   \r\n                try{   \r\n                    btnClass.classList.add(secondaryBtnClass);\r\n                    btnClass.classList.remove(primaryBtnClass);\r\n                } catch (err) {\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"filterMaxAdaptive => setSecondaryBtnState\");\r\n                }\r\n            }\r\n\r\n            if(!(btnClass.classList.contains(primaryBtnClass))){\r\n \r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"table-editForm\"));\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)(filter);\r\n                if(filter.getChildViews() !== 0){\r\n                    createFilterElements(\"filterTableForm\",3);\r\n                }\r\n\r\n                setPrimaryBtnState();\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.showElem)($$(\"filterTableBarContainer\"));\r\n            } else {\r\n                setSecondaryBtnState();\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"filterTableForm\"));\r\n                (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"filterTableBarContainer\"));\r\n\r\n            }\r\n        }     \r\n    \r\n        clearTableSelection();\r\n        toolbarBtnLogic();\r\n        resizeContainer(350);\r\n    }\r\n\r\n    \r\n    filterMaxAdaptive();\r\n    \r\n    if ($$(\"container\").$width < 850){\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"tree\"));\r\n        if ($$(\"container\").$width  < 850 ){\r\n            filterMinAdaptive();\r\n        }\r\n    } else {\r\n        (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.hideElem)($$(\"table-backTableBtnFilter\"));\r\n        filter.config.width = 350;\r\n        filter.resize();\r\n    }\r\n}\r\n\r\n\r\nfunction toolbarFilterBtn(idTable,visible){\r\n    let idBtnEdit = idTable + \"-editTableBtnId\",\r\n        idFilter  = idTable + \"-filterId\"\r\n    ;\r\n\r\n    const btn = \r\n    {   view    : \"button\",\r\n        width   : 50, \r\n        type    : \"icon\",\r\n        id      : idFilter,\r\n        hidden  : visible,\r\n        icon    : \"icon-filter\",\r\n        css     : \"webix_btn-filter webix-transparent-btn \",\r\n        disabled: true,\r\n        title   : \"текст\",\r\n        hotkey  : \"ctrl+shift+f\",\r\n        height  : 42,\r\n        click   : function(){\r\n            filterBtnClick(idTable,idBtnEdit);\r\n        },\r\n        on      : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Показать/скрыть фильтры (Ctrl+Shift+F)\");\r\n            }\r\n        } \r\n    };\r\n\r\n    return btn;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableFilter/toolbarBtn.js?");

/***/ }),

/***/ "./src/js/blocks/tableFilter/userTemplate.js":
/*!***************************************************!*\
  !*** ./src/js/blocks/tableFilter/userTemplate.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getLibraryData\": () => (/* binding */ getLibraryData)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _toolbarBtn_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./toolbarBtn.js */ \"./src/js/blocks/tableFilter/toolbarBtn.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common.js */ \"./src/js/blocks/tableFilter/common.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n///visibleInputs\r\n\r\nconst logNameFile = \"tableFilter => userTemplate\";\r\nfunction getLibraryData(){\r\n    const lib        = $$(\"filterEditLib\");\r\n    const libValue   = lib.getValue ();\r\n    const radioValue = lib.getOption(libValue);\r\n    \r\n    const userprefsData = webix.ajax(\"/init/default/api/userprefs/\");\r\n \r\n    userprefsData.then(function(data){\r\n        let dataErr = data.json();\r\n        data = data.json().content;\r\n  \r\n        const currId    = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getItemId) ();\r\n        const allInputs = $$(\"inputsFilter\").getChildViews ();\r\n   \r\n        function hideFalseInputs(trueInputs){\r\n          \r\n            \r\n            function findTrueInput(inp){\r\n                let findInput;\r\n                trueInputs.forEach(function(el,i){\r\n                 \r\n                    if (inp.includes(el)){\r\n                        findInput = el;\r\n                    }\r\n                    \r\n                });\r\n\r\n\r\n                return findInput+\"_rows\";\r\n            }\r\n\r\n            try{\r\n                allInputs.forEach(function(input,i){\r\n         \r\n                    let trueInp = findTrueInput(input.config.id);\r\n                    let id      = input.config.id;\r\n                    \r\n                    function getElementHide(){\r\n                        let indexHide = id.indexOf(\"_rows\");\r\n                        return id.slice(0,indexHide);\r\n                    }\r\n\r\n                    function getHtmlClass(elementHide){\r\n                        let indexHtml = elementHide.indexOf(\"_filter\");\r\n                        return id.slice(0,indexHtml);\r\n                    }\r\n//visibleInputs.length = 0\r\n                    if (input.config.id !== trueInp){\r\n                        let elementHide = getElementHide();\r\n                        let htmlClass = getHtmlClass(elementHide);\r\n                        (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.visibleField)(0,htmlClass,elementHide);\r\n                    }\r\n\r\n                });\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function hideFalseInputs\");\r\n            }\r\n        }\r\n\r\n        function removeChilds(){\r\n            const inputsInner = [];\r\n\r\n            allInputs.forEach(function(input,i){\r\n                inputsInner.push(input.getChildViews());\r\n            });\r\n\r\n            function getChilds(el){\r\n                el.forEach(function(child,i){\r\n                    if (child.config.id.includes(\"-child-\")){\r\n                        const childView = $$(child.config.id);\r\n                        const parent = childView.getParentView();\r\n                        parent.removeView(childView);\r\n                    }\r\n                });\r\n            }\r\n         \r\n            inputsInner.forEach(function(el,i){\r\n                if (el.length > 1){\r\n                   getChilds(el);\r\n                }\r\n            });\r\n        }\r\n\r\n        function  createWorkspace(prefs){\r\n            removeChilds();\r\n            let trueInputs = [];\r\n\r\n            const values = prefs.values;\r\n\r\n            let isFirstInput = true;\r\n\r\n            function setValue(el,value){\r\n                if (value){\r\n                    el.setValue(value);\r\n                }\r\n            }\r\n\r\n            function setBtnsValue(el){\r\n                \r\n                const id = el.id;\r\n                const segmentBtn    = $$(id+\"_segmentBtn\");\r\n                const operationsBtn = $$(id+\"-btnFilterOperations\");\r\n    \r\n                setValue(segmentBtn   , el.logic    );\r\n                setValue(operationsBtn, el.operation);\r\n                \r\n            }\r\n\r\n            function showParentField (el){\r\n                const idEl      = el.id;\r\n                const element   = $$(idEl);\r\n                const htmlClass = element.config.columnName;\r\n          \r\n             \r\n                (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.visibleField)(1, htmlClass, idEl);\r\n\r\n                if (isFirstInput){\r\n                    const segmentBtn = $$(idEl + \"_segmentBtn\");\r\n\r\n                    (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.hideElem)(segmentBtn);\r\n\r\n                    isFirstInput = false;\r\n                }\r\n\r\n                setBtnsValue(el);\r\n                setValue    (element, el.value);\r\n            }\r\n \r\n            function createChildField(el){\r\n                const table = (0,_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getTable)();\r\n                const col   = table.getColumnConfig(el.parent);\r\n\r\n                const idField = (0,_toolbarBtn_js__WEBPACK_IMPORTED_MODULE_3__.createChildFields) (\" \", col);\r\n\r\n                const values = el;\r\n                values.id = idField;\r\n\r\n                setBtnsValue(values);\r\n                setValue    ($$(idField), el.value);\r\n            }\r\n\r\n            try{\r\n           \r\n                values.forEach(function(el,i){\r\n                    \r\n                    if (!el.parent){\r\n                        showParentField  (el);\r\n                    } else {\r\n                        createChildField(el);\r\n                    }\r\n                });\r\n                // prefs.collection.content.forEach(function(el,i){\r\n                 \r\n                //     function getHtmlArgument (){\r\n                //         const indexHtml = el.parentField.id.indexOf(\"_filter\");\r\n                //         return el.parentField.id.slice(0,indexHtml); \r\n                //     }\r\n\r\n                //     function getIdElArgument (){\r\n                //         const indexId = el.parentField.id.indexOf(\"_rows\");\r\n                //         return el.parentField.id.slice(0,indexId);\r\n                //     }\r\n\r\n                //     function showParentInputs(){\r\n                //         const htmlClass = getHtmlArgument ();\r\n                //         const idEl      = getIdElArgument ();\r\n                //  //visibleInputs.length = 0\r\n                //         visibleField(1,htmlClass,idEl);\r\n\r\n                //         trueInputs.push(idEl);\r\n                //     }\r\n\r\n                //     function setParentValues(){\r\n                //         if($$(el.parentValue.id)){\r\n                //             $$(el.parentValue.id).setValue(el.parentValue.value);\r\n                //         }\r\n                //     }\r\n\r\n                    \r\n                //     function removeLastChilds (){\r\n                //         try{ \r\n                //             if(  $$(el.parentField.id) ){\r\n                //                 $$(el.parentField.id)._cells.forEach(function(child,i){\r\n                //                     if (child.config.id.includes(\"child\")){\r\n                //                         $$(el.parentField.id).removeView($$(child.config.id));\r\n                //                     }\r\n                //                 });\r\n                //             }\r\n                //         } catch(err){\r\n                //             setFunctionError(err,logNameFile,\"function createWorkspace => removeLastChilds\");\r\n                //         }\r\n                //     }\r\n\r\n                //     function createChilds(){\r\n                //         const columnsData = $$(\"table\").getColumns(true);\r\n       \r\n                //         try{ \r\n                //             columnsData.forEach(function(col,i){\r\n                //                 if ( el.parentField.id == col.id+\"_filter\" ){\r\n                                  \r\n                //                     if (el.condition == \"and\"){\r\n                                 \r\n                //                         createChildFields (\"and\",col);\r\n        \r\n                //                         $$(el.childValue.id).setValue(el.childValue.value); \r\n                                   \r\n                                   \r\n                //                     } else if (el.condition == \"or\"){\r\n                //                         createChildFields (\"or\",col);\r\n\r\n                //                         $$(el.childValue.id).setValue(el.childValue.value); \r\n                                     \r\n                //                     }\r\n                           \r\n                //                 }\r\n                //             });\r\n                //         } catch(err){\r\n                //             setFunctionError(err,logNameFile,\"function createWorkspace => createChilds\");\r\n                //         }\r\n                //     }\r\n\r\n\r\n                //     if (el.condition == \"parent\"){\r\n                        \r\n                //         showParentInputs();\r\n        \r\n                //         setParentValues();\r\n                //       removeLastChilds ();\r\n                    \r\n                //     }\r\n              \r\n           \r\n                //     hideFalseInputs(trueInputs);\r\n                //     createChilds();\r\n                // });\r\n        \r\n            //    $$(\"filterTableForm\").setValues(prefs.values);\r\n\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function createWorkspace\");\r\n            }\r\n        }\r\n\r\n        function dataEnumeration() {\r\n            try{\r\n                data.forEach(function(el,i){\r\n\r\n                    if (el.name == currId+\"_filter-template_\"+radioValue.value){\r\n                        let prefs = JSON.parse(el.prefs);\r\n                        createWorkspace(prefs);\r\n                    }\r\n\r\n                    function removeFilterPopup(){\r\n                        if ($$(\"popupFilterEdit\")){\r\n                            $$(\"popupFilterEdit\").destructor();\r\n                        }\r\n                    }\r\n\r\n                    function enableBtnSubmit(){\r\n                        if ($$(\"btnFilterSubmit\") && !($$(\"btnFilterSubmit\").isEnabled())){\r\n                            $$(\"btnFilterSubmit\").enable();\r\n                        }\r\n                    }\r\n                    removeFilterPopup();\r\n                    enableBtnSubmit();\r\n                });\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"function dataEnumeration\");\r\n            }\r\n        }\r\n\r\n        //if (dataErr.err_type == \"i\"){\r\n        dataEnumeration();\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Рабочая область фильтра обновлена\");\r\n\r\n           \r\n        // } else {\r\n        //     setLogValue(\"error\",dataErr.err); \r\n        // }\r\n\r\n    });\r\n\r\n    userprefsData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"getLibraryData\");\r\n    });\r\n\r\n\r\n  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/tableFilter/userTemplate.js?");

/***/ }),

/***/ "./src/js/blocks/toolbarTable.js":
/*!***************************************!*\
  !*** ./src/js/blocks/toolbarTable.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tableToolbar\": () => (/* binding */ tableToolbar)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blockHeadline_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blockHeadline.js */ \"./src/js/blocks/blockHeadline.js\");\n/* harmony import */ var _tableFilter_toolbarBtn_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tableFilter/toolbarBtn.js */ \"./src/js/blocks/tableFilter/toolbarBtn.js\");\n/* harmony import */ var _tableEditForm_toolbarBtn_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tableEditForm/toolbarBtn.js */ \"./src/js/blocks/tableEditForm/toolbarBtn.js\");\n/* harmony import */ var _columnsSettings_visibleColumns_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./columnsSettings/visibleColumns.js */ \"./src/js/blocks/columnsSettings/visibleColumns.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction exportToExcel(idTable){\r\n    try{\r\n        webix.toExcel(idTable, {\r\n        filename:\"Table\",\r\n        filterHTML:true,\r\n        styles:true\r\n        });\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Таблица сохранена\");\r\n    } catch (err) {   \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"toolbarTable\",\"exportToExcel\");\r\n    }\r\n}\r\n\r\nfunction toolbarDownloadButton(idTable,visible){\r\n    const idExport = idTable+\"-exportBtn\";\r\n    return {   \r\n        view:\"button\",\r\n        width: 50, \r\n        type:\"icon\",\r\n        id:idExport,\r\n        hidden:visible,\r\n        icon:\"icon-arrow-circle-down\",\r\n        css:\"webix_btn-download webix-transparent-btn\",\r\n        title:\"текст\",\r\n        height:42,\r\n        hotkey  :\"ctrl+shift+y\",\r\n        click:function(){\r\n            exportToExcel(idTable);\r\n        },\r\n        on: {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\",\"Экспорт таблицы (Ctrl+Shift+Y)\");\r\n            }\r\n        } \r\n    };\r\n}\r\n\r\nfunction createTemplateCounter(idEl,text){\r\n    const view = {   \r\n        view:\"template\",\r\n        id:idEl,\r\n        css:\"webix_style-template-count\",\r\n        height:30,\r\n        template:function () {\r\n            if (Object.keys($$(idEl).getValues()).length !==0){\r\n                \r\n                return \"<div style='color:#999898;'>\"+text+\":\"+\r\n                        \" \"+$$(idEl).getValues()+\r\n                        \" </div>\";\r\n            } else {\r\n                return \"\";\r\n            }\r\n        }\r\n    };\r\n\r\n    return view;\r\n}\r\n\r\nfunction tableToolbar (idTable,visible=false) {\r\n\r\n    const idFindElements   = idTable+\"-findElements\",\r\n          idFilterElements = idTable+\"-idFilterElements\",\r\n          idHeadline       = idTable+\"-templateHeadline\"\r\n    ;\r\n\r\n    return { \r\n        \r\n        rows:[\r\n            (0,_blockHeadline_js__WEBPACK_IMPORTED_MODULE_2__.setHeadlineBlock)(idHeadline),\r\n\r\n            {\r\n                css:\"webix_filterBar\",\r\n                padding:{\r\n                    bottom:4,\r\n                }, \r\n                height: 40,\r\n                cols: [\r\n                    (0,_tableFilter_toolbarBtn_js__WEBPACK_IMPORTED_MODULE_3__.toolbarFilterBtn)(idTable,visible),\r\n                    (0,_tableEditForm_toolbarBtn_js__WEBPACK_IMPORTED_MODULE_4__.toolbarEditButton)(idTable),\r\n                    {},\r\n                    (0,_columnsSettings_visibleColumns_js__WEBPACK_IMPORTED_MODULE_5__.toolbarVisibleColsBtn)(idTable),\r\n                    toolbarDownloadButton(idTable,visible)\r\n                ],\r\n            },\r\n\r\n            {cols:[\r\n                createTemplateCounter (idFindElements,  \"Общее количество записей\"  ),\r\n                createTemplateCounter (idFilterElements,\"Видимое количество записей\"),\r\n            ]},\r\n        ]\r\n    };\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/toolbarTable.js?");

/***/ }),

/***/ "./src/js/blocks/viewPropertyTable.js":
/*!********************************************!*\
  !*** ./src/js/blocks/viewPropertyTable.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"propertyTemplate\": () => (/* binding */ propertyTemplate)\n/* harmony export */ });\nfunction propertyTemplate (idProp){\r\n    return {\r\n        view:\"property\",  \r\n        id:idProp, \r\n        tooltip:\"Имя: #label#<br> Значение: #value#\",\r\n        width:348,\r\n        nameWidth:150,\r\n        editable:true,\r\n        scroll:true,\r\n        hidden:true,\r\n    };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/viewPropertyTable.js?");

/***/ }),

/***/ "./src/js/blocks/viewTools.js":
/*!************************************!*\
  !*** ./src/js/blocks/viewTools.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"viewTools\": () => (/* binding */ viewTools)\n/* harmony export */ });\nfunction backFilterBtnClick (){\r\n    const tools       = $$(\"formsTools\");    \r\n    const сontainer   = $$(\"formsContainer\");\r\n    const formResizer = $$(\"formsTools-resizer\");\r\n\r\n    function setBtnFilterState(){\r\n        const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n        const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n        const secondaryBtnClass = \"webix-transparent-btn\";\r\n\r\n        if (btnClass.classList.contains(primaryBtnClass  )){\r\n            btnClass.classList.add     (secondaryBtnClass);\r\n            btnClass.classList.remove  (primaryBtnClass  );\r\n        }\r\n    }\r\n    function defaultState(){\r\n        if ( tools && tools.isVisible() ){\r\n            tools.hide();\r\n            formResizer.hide();\r\n        }\r\n    \r\n        if ( сontainer && !(сontainer.isVisible()) ){\r\n            сontainer.show();\r\n        }\r\n    }\r\n\r\n\r\n    defaultState();\r\n    setBtnFilterState();\r\n}\r\n\r\nconst filterBackTableBtn = { \r\n    view:\"button\", \r\n    id:\"table-backFormsBtnFilter\",\r\n    type:\"icon\",\r\n    icon:\"icon-arrow-right\",\r\n    value:\"Вернуться к таблице\",\r\n //   hidden:true,  \r\n    height:28,\r\n    minWidth:50,\r\n    width:55,\r\n   \r\n    click:function(){\r\n        backFilterBtnClick();\r\n    },\r\n\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Вернуться к таблице\");\r\n        }\r\n    } \r\n};\r\n\r\nconst viewTools = {\r\n    id:\"viewTools\",\r\n    padding:10,\r\n    rows:[\r\n       {cols:[\r\n\r\n            {  \r\n                template:\"Действия\",\r\n                height:30, \r\n                css:\"popup_headline\",\r\n                borderless:true,\r\n            },\r\n            {},\r\n            filterBackTableBtn\r\n        ]},\r\n   \r\n        {id:\"viewToolsContainer\",rows:[{}]}\r\n    ]\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/viewTools.js?");

/***/ }),

/***/ "./src/js/blocks/webixGlobalPrefs.js":
/*!*******************************************!*\
  !*** ./src/js/blocks/webixGlobalPrefs.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"webixGlobalPrefs\": () => (/* binding */ webixGlobalPrefs),\n/* harmony export */   \"protoUIEdittree\": () => (/* binding */ protoUIEdittree)\n/* harmony export */ });\n\r\nfunction createCustomEditor(){\r\n    webix.editors.customDate = webix.extend({\r\n        render:function(){\r\n            return webix.html.create(\"div\", {\r\n            \"class\":\"webix_dt_editor\"\r\n            }, \"<input class='webix_custom-date-editor' id='custom-date-editor' type='text'>\");\r\n    }}, webix.editors.text);\r\n    \r\n}\r\n\r\nfunction setDateFormat(){\r\n    webix.i18n.setLocale(\"ru-RU\");   \r\n    webix.i18n.parseFormat = \"%d.%m.%Y %H:%i:%s\";\r\n    webix.i18n.setLocale();\r\n    webix.Date.startOnMonday = true;\r\n}\r\n\r\nfunction setMsgPosition(){\r\n    webix.message.position = \"bottom\";\r\n}\r\n\r\nfunction protoUIEdittree () {\r\n    webix.protoUI({\r\n        name:\"edittree\"\r\n    }, webix.EditAbility, webix.ui.tree);\r\n}\r\n\r\n\r\nfunction webixGlobalPrefs (){\r\n    createCustomEditor  ();\r\n    setDateFormat       ();\r\n    setMsgPosition      ();\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/webixGlobalPrefs.js?");

/***/ }),

/***/ "./src/js/components/authSettings.js":
/*!*******************************************!*\
  !*** ./src/js/components/authSettings.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authCpLayout\": () => (/* binding */ authCpLayout)\n/* harmony export */ });\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nfunction doAuthCp (){\r\n    try{\r\n        const form = $$(\"cp-form\");\r\n        if ( form && form.validate()){\r\n\r\n            \r\n        \r\n            let passData = form.getValues();\r\n\r\n            const objPass = {\r\n                op: passData.oldPass,\r\n                np: passData.newPass\r\n            };\r\n            \r\n            const url      = \"/init/default/api/cp\";\r\n            const postData = webix.ajax().post(url, objPass);\r\n            \r\n            postData.then(function(data){\r\n                data = data.json();\r\n                \r\n                if (data.err_type == \"i\"){\r\n                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",data.err);\r\n                } else {\r\n                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",\"authSettings function doAuthCp: \"+data.err,\"cp\");\r\n\r\n                }\r\n\r\n                form.setDirty(false);\r\n            });\r\n            \r\n            postData.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"authSettings\",\"doAuthCp post\");\r\n            });\r\n\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"authSettings\",\"doAuthCp\")\r\n    }\r\n\r\n}\r\n\r\nconst headline = {   \r\n    template   : \"<div>Изменение пароля</div>\",\r\n    css        : 'webix_cp-form',\r\n    height     : 35, \r\n    borderless : true\r\n};\r\n\r\nconst userName = {   \r\n    view        : \"template\",\r\n    id          : \"authName\",\r\n    css         : \"webix_userprefs-info\",\r\n    height      : 50, \r\n    borderless  : true,\r\n    template    : function(){\r\n        const values = $$(\"authName\").getValues();\r\n        const keys   = Object.keys(values);\r\n\r\n        function returnDiv(text){\r\n            const defaultStyles = \"display:inline-block; font-size:13px!important; font-weight:600;\" ;\r\n            return \"<div style='\"+defaultStyles+\"color:var(--primary);'>\"+\r\n            \"Имя пользователя:</div>\"+\r\n            \"⠀\"+\r\n            \"<div style=' \" + defaultStyles + \" '>\"+\r\n            text +\r\n            \"<div>\";\r\n        }\r\n\r\n        if (keys.length !== 0){\r\n            return returnDiv (values);\r\n        } else {\r\n            return returnDiv (\"не указано\");\r\n        }\r\n    },\r\n};\r\n\r\nfunction generatePassInput(labelPass, namePass){\r\n    return {   \r\n        view            : \"text\",\r\n        width           : 300,\r\n        labelPosition   : \"top\", \r\n        type            : \"password\",\r\n        name            : namePass,\r\n        label           : labelPass, \r\n    };\r\n}\r\n\r\n\r\nconst btnSubmit = {   \r\n    view    : \"button\",\r\n    height  : 48,\r\n    width   : 300, \r\n    value   : \"Сменить пароль\" , \r\n    css     : \"webix_primary\", \r\n    click   : doAuthCp\r\n};\r\n\r\nconst authCp = {\r\n    view        : \"form\", \r\n    id          : \"cp-form\",\r\n    borderless  : true,\r\n    margin      : 5,\r\n    elements    : [\r\n        headline,\r\n        userName,\r\n        generatePassInput(\"Старый пароль\"       , \"oldPass\"   ),\r\n        generatePassInput(\"Новый пароль\"        , \"newPass\"   ),\r\n        generatePassInput(\"Повтор нового пароля\", \"repeatPass\"),\r\n        {   margin  : 5, \r\n            cols    : [\r\n                btnSubmit,\r\n            ]\r\n        }\r\n    ],\r\n\r\n    rules:{\r\n        $all:webix.rules.isNotEmpty,\r\n        $obj:function(data){\r\n            const checkCp = $$(\"cp-form\").isDirty();\r\n\r\n            if (data.newPass != data.repeatPass){\r\n                (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",\"Новый пароль не совпадает с повтором\");\r\n            return false;\r\n            }\r\n\r\n            if (data.newPass == data.oldPass && checkCp ){\r\n                (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",\"Новый пароль должен отличаться от старого\");\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    },\r\n};\r\n\r\n\r\nconst authCpLayout = {\r\n    id  : \"layout-cp\",\r\n    cols: [\r\n        authCp,\r\n        {}\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/authSettings.js?");

/***/ }),

/***/ "./src/js/components/dashboard.js":
/*!****************************************!*\
  !*** ./src/js/components/dashboard.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"dashboardLayout\": () => (/* binding */ dashboardLayout)\n/* harmony export */ });\nconst dashboardTool = {\r\n    id      : \"dashboardTool\",\r\n    css     : \"webix_dashTool\", \r\n    minWidth: 200,\r\n    width   : 350,\r\n    hidden  : true,\r\n    rows    : []\r\n};\r\n\r\nfunction dashboardLayout () {\r\n        return [\r\n            {   view : \"scrollview\", \r\n                id   : \"dashScroll\",  \r\n                body: \r\n                    {   \r\n                        view: \"flexlayout\",\r\n                        id  : \"dashboardContainer\",\r\n                \r\n                        cols: [\r\n                            {   id      : \"dashboardInfoContainer\",\r\n                                minWidth: 250, \r\n                                rows    : [] \r\n                            },\r\n                            {view: \"resizer\"},\r\n                            dashboardTool,\r\n                          \r\n                        \r\n                        ]\r\n                    } \r\n            }\r\n        ];\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard.js?");

/***/ }),

/***/ "./src/js/components/editTree.js":
/*!***************************************!*\
  !*** ./src/js/components/editTree.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editTreeLayout\": () => (/* binding */ editTreeLayout),\n/* harmony export */   \"contextMenu\": () => (/* binding */ contextMenu)\n/* harmony export */ });\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nfunction contextMenu (){\r\n\r\n    return {\r\n        view:\"contextmenu\",\r\n        id:\"contextMenuEditTree\",\r\n        data:[\r\n                \"Добавить\",\r\n                \"Переименовать\",\r\n                { $template:\"Separator\" },\r\n                \"Свернуть всё\",\r\n                \"Развернуть всё\",\r\n                { $template:\"Separator\" },\r\n                \"Удалить\"\r\n            ],\r\n        master: $$(\"treeEdit\"),\r\n        on:{\r\n            onMenuItemClick:function(id){\r\n                let context = this.getContext();\r\n\r\n                let tree = $$(\"treeEdit\");\r\n\r\n                let titem = tree.getItem(context.id); \r\n\r\n                let menu = this.getMenu(id);\r\n                let cmd = menu.getItem(id).value;\r\n\r\n                let url = \"/init/default/api/trees/\";\r\n            \r\n                let postObj = {\r\n                    name : \"\",\r\n                    pid : \"\",\r\n                    owner : null,\r\n                    descr : \"\",\r\n                    ttype : 1,\r\n                    value : \"\",\r\n                    cdt : null,\r\n                };\r\n\r\n          \r\n                switch (cmd) {\r\n                    case \"Добавить\": {\r\n                    \r\n                        let text = prompt(\"Имя нового подэлемента '\"+titem.value+\"'\", \"\");\r\n                    \r\n                        if (text != null) {\r\n                            postObj.name = text;\r\n                            postObj.pid = titem.id;\r\n\r\n                            const postData = webix.ajax().post(url, postObj);\r\n\r\n                            postData.then(function(data){\r\n                                try{\r\n                                    data = data.json();\r\n                                    if (data.err_type == \"i\"){\r\n                                        \r\n                                        let idNewItem = data.content.id;\r\n                                    \r\n                                        tree.data.add({\r\n                                            id:idNewItem,\r\n                                            value:text, \r\n                                            pid:titem.id\r\n                                        }, 0, titem.id);\r\n                                        \r\n                                        tree.open(titem.id);\r\n                                    \r\n                                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Данные сохранены\");\r\n                                    } else {\r\n                                        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( data.err,\"editTree\",\"case add post msg\");\r\n                                    }\r\n                                } catch (err){\r\n                                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( err,\"editTree\",\"case add\");\r\n                                }\r\n                            });\r\n\r\n                            postData.fail(function(err){\r\n                                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\",\"case add\");\r\n                            });\r\n\r\n\r\n                        }\r\n                        break;\r\n                    }\r\n                \r\n                    case \"Переименовать\": {\r\n                        var text = prompt(\"Новое имя\", titem.value);\r\n                        if (text != null) { \r\n                            \r\n                            postObj.name = text;\r\n                            postObj.id = titem.id;\r\n                            postObj.pid = titem.pid;\r\n\r\n                            const putData =  webix.ajax().put(url + titem.id, postObj);\r\n\r\n                            putData.then(function(data){\r\n                                try{\r\n                                    data = data.json();\r\n                                    if (data.err_type == \"i\"){\r\n                                        titem.value = text;\r\n                                        tree.updateItem(titem.id, titem);\r\n                                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Данные изменены\");\r\n                                    } else {\r\n                                        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( data.err,\"editTree\",\"case rename put msg\");\r\n                                    }\r\n                                } catch (err){\r\n                                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( err,\"editTree\",\"case rename\");\r\n                                }\r\n                            });\r\n\r\n                            putData.fail(function(err){\r\n                                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\",\"case rename\");\r\n                            });\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"Удалить\": {\r\n\r\n                        const delData =  webix.ajax().del(url+titem.id,titem);\r\n\r\n                        delData.then(function(data){\r\n                            try{\r\n                                data = data.json();\r\n                                if (data.err_type == \"i\"){\r\n                                    tree.remove(titem.id);\r\n                                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Данные удалены\");\r\n                                } else {\r\n                                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( data.err,\"editTree\",\"case delete del msg\");\r\n                                }\r\n                            } catch (err){\r\n                                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( err,\"editTree\",\"case delete\");\r\n                            }\r\n                        });\r\n\r\n                        delData.fail(function(err){\r\n                            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\",\"case delete\");\r\n                        });\r\n\r\n                        break;\r\n                    }\r\n\r\n                    case \"Развернуть всё\": {\r\n                        try{\r\n                            tree.open(titem.id);\r\n                            tree.data.eachSubItem(titem.id, function(obj){ \r\n                                tree.open(obj.id);\r\n                            });\r\n\r\n                        } catch (err){\r\n                            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( err,\"editTree\",\"case open all\");\r\n                        }\r\n                        break;\r\n                    }\r\n                    case \"Свернуть всё\": {\r\n                        try{\r\n                            tree.close(titem.id);\r\n                            tree.data.eachSubItem(titem.id, function(obj){ \r\n                                tree.close(obj.id);\r\n                            });\r\n                        } catch (err){\r\n                            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( err,\"editTree\",\"case close all\");\r\n                        }\r\n                        \r\n                        break;\r\n                    }\r\n                    \r\n                }\r\n         \r\n            }\r\n    }\r\n    };\r\n}\r\n\r\n\r\nfunction editTreeLayout () {\r\n    const tree = {\r\n        view:\"edittree\",\r\n        id:\"treeEdit\",\r\n        editable:true,\r\n        editor:\"text\",\r\n        editValue:\"value\",\r\n        css:\"webix_tree-edit\",\r\n        editaction:\"dblclick\",\r\n        data:[\r\n        ],\r\n        on:{\r\n            onAfterEditStop:function(state, editor, ignoreUpdate){\r\n            try {\r\n                let url = \"/init/default/api/trees/\";\r\n                \r\n                if(state.value != state.old){\r\n                    let pid = $$(\"treeEdit\").getParentId(editor.id);\r\n                    \r\n                    let postObj = {\r\n                        name : state.value,\r\n                        pid : pid,\r\n                        id:editor.id,\r\n                        owner : null,\r\n                        descr : \"\",\r\n                        ttype : 1,\r\n                        value : \"\",\r\n                        cdt : null,\r\n                    };\r\n\r\n                    const postData = webix.ajax().put(url+editor.id, postObj);\r\n\r\n                    postData.then(function(data){\r\n                        data = data.json();\r\n                        if (data.err_type == \"i\"){\r\n                            (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Данные изменены\");\r\n                        } else {\r\n                            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(data.err,\"editTree\",\"tree onAfterEditStop postData msg\");\r\n                        }\r\n                    });\r\n\r\n                    postData.fail(function(err){\r\n                        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\",\"tree onAfterEditStop postData\");\r\n                    });\r\n\r\n\r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\",\"tree onAfterEditStop\");\r\n            }\r\n        },\r\n        }\r\n    \r\n    };\r\n\r\n\r\n    return [\r\n\r\n        {id:\"treeEditContainer\", \r\n            cols:[\r\n                {rows: [\r\n                        tree,\r\n                    ],\r\n                },\r\n                {}\r\n            ]\r\n        }\r\n\r\n        \r\n    ];\r\n}\r\n\r\n\r\nwebix.UIManager.addHotKey(\"Ctrl+Shift+E\", function() { \r\n\r\n    Backbone.history.navigate(\"experimental/treeEdit\", { trigger:true});\r\n\r\n});\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/editTree.js?");

/***/ }),

/***/ "./src/js/components/header/collapseBtn.js":
/*!*************************************************!*\
  !*** ./src/js/components/header/collapseBtn.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"collapseBtn\": () => (/* binding */ collapseBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_checkFonts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/checkFonts.js */ \"./src/js/blocks/checkFonts.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\nfunction setSearchInputState(visible = false){\r\n    const headerChilds = $$(\"header\").getChildViews();\r\n\r\n    headerChilds.forEach(function(el){\r\n        if (el.config.id.includes(\"search\" )      || \r\n            el.config.id.includes(\"log-btn\")      || \r\n            el.config.id.includes(\"context-menu\") ){\r\n            \r\n            if(visible){\r\n                el.show();\r\n            } else {\r\n                el.hide();\r\n            }\r\n          \r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction collapseClick (){\r\n    const tree      = $$(\"tree\");\r\n    const resizer   = $$(\"sideMenuResizer\");\r\n\r\n    function showTree(){\r\n        try {\r\n            tree.show();\r\n            if(window.innerWidth >= 800){\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.showElem)(resizer);\r\n            } \r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"header\",\"showTree\");\r\n\r\n        }\r\n    }\r\n\r\n    try {\r\n\r\n        if (window.innerWidth > 850 ){\r\n            if (tree.isVisible()){\r\n                tree.hide();\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem)(resizer);\r\n\r\n            } else {\r\n                showTree(); \r\n \r\n            }\r\n        } else {\r\n            if (tree.isVisible()){\r\n                tree.hide();\r\n\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.hideElem)(resizer);\r\n\r\n                setSearchInputState(true);\r\n\r\n            } else {\r\n                showTree();\r\n\r\n                tree.config.width = window.innerWidth;\r\n                tree.resize();\r\n        \r\n                setSearchInputState();\r\n            }\r\n        }\r\n        this.refresh();\r\n       \r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"header\",\"collapseClick\");\r\n\r\n    }\r\n}\r\n\r\n\r\nconst collapseBtn = {   \r\n    view:\"button\",\r\n    type:\"icon\",\r\n    id:\"collapseBtn\",\r\n    icon:\"icon-bars\",\r\n    css:\"webix_collapse\",\r\n    title:\"текст\",\r\n    height:42, \r\n    width:40,\r\n    click:collapseClick,\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Видимость бокового меню\");\r\n            (0,_blocks_checkFonts_js__WEBPACK_IMPORTED_MODULE_0__.checkFonts)();\r\n        }\r\n    }    \r\n};\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/collapseBtn.js?");

/***/ }),

/***/ "./src/js/components/header/layout.js":
/*!********************************************!*\
  !*** ./src/js/components/header/layout.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"header\": () => (/* binding */ header)\n/* harmony export */ });\n/* harmony import */ var _collapseBtn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collapseBtn.js */ \"./src/js/components/header/collapseBtn.js\");\n/* harmony import */ var _logBtn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logBtn.js */ \"./src/js/components/header/logBtn.js\");\n/* harmony import */ var _userContextBtn_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./userContextBtn.js */ \"./src/js/components/header/userContextBtn.js\");\n\r\n\r\n\r\n\r\nconst logo = {\r\n    view    : \"label\",\r\n    label   : \"<img src='/init/static/images/expalogo.png' \"+\r\n        \" style='height:30px; margin: 10px;'>\", \r\n    height  : 25\r\n};\r\n\r\nconst search = {\r\n    view        : \"search\", \r\n    placeholder : \"Поиск (Shift+F)\", \r\n    css         : \"searchTable\",\r\n    height      : 42, \r\n    hotkey      : \"shift+f\",\r\n    maxWidth    : 250, \r\n    minWidth    : 40, \r\n};\r\n\r\nconst header = {\r\n    view    : \"toolbar\", \r\n    id      : \"header\",\r\n    padding : 10,\r\n    css     : \"webix_header-style\",\r\n    elements: [\r\n        {cols: [\r\n            _collapseBtn_js__WEBPACK_IMPORTED_MODULE_0__.collapseBtn,\r\n            logo\r\n        ]},\r\n        \r\n        {},\r\n        search,\r\n        _logBtn_js__WEBPACK_IMPORTED_MODULE_1__.logBtn,\r\n        _userContextBtn_js__WEBPACK_IMPORTED_MODULE_2__.userContextBtn,\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/layout.js?");

/***/ }),

/***/ "./src/js/components/header/logBtn.js":
/*!********************************************!*\
  !*** ./src/js/components/header/logBtn.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logBtn\": () => (/* binding */ logBtn)\n/* harmony export */ });\nfunction logBtnClick(id){\r\n    const btn = $$(id);\r\n\r\n    if (btn.getValue() == 1){\r\n        btn.setValue(2);\r\n\r\n    } else {\r\n        btn.setValue(1);\r\n    }\r\n}\r\n\r\n\r\nfunction onChangeLogBtn(newValue){\r\n    const list      = $$(\"logBlock-list\");\r\n    const logLayout = $$(\"logLayout\");\r\n    const logBtn    = $$(\"webix_log-btn\");\r\n\r\n    const lastItemList = list.getLastId();\r\n\r\n    function setState (height,icon){\r\n        logBtn.config.badge = \"\";\r\n\r\n        logLayout.config.height = height;\r\n        logLayout.resize();\r\n\r\n        logBtn.config.icon = icon;\r\n        logBtn.refresh();\r\n    }\r\n\r\n    if (newValue == 2){\r\n        setState (90, \"icon-eye-slash\");\r\n        list.showItem(lastItemList);\r\n\r\n    } else {\r\n        setState (5, \"icon-eye\");\r\n    }\r\n}\r\n\r\n\r\nconst logBtn = {   \r\n    view    : \"button\",  \r\n    id      : \"webix_log-btn\",\r\n    type    : \"icon\", \r\n    icon    : \"icon-eye\",\r\n    height  : 42, \r\n    badge   : 0,\r\n    width   : 50,\r\n    hotkey  : \"ctrl+m\",\r\n    css     : \"webix_log-btn\",\r\n    click   : function(id){\r\n        logBtnClick(id)\r\n    }  ,\r\n\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Показать/скрыть системные сообщения (Ctrl+M)\");\r\n        },\r\n\r\n        onChange:function(newValue, oldValue, config){\r\n            onChangeLogBtn(newValue);\r\n        }\r\n    },\r\n\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/logBtn.js?");

/***/ }),

/***/ "./src/js/components/header/userContextBtn.js":
/*!****************************************************!*\
  !*** ./src/js/components/header/userContextBtn.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"userContextBtn\": () => (/* binding */ userContextBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _blocks_tableEditForm_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/tableEditForm/buttons.js */ \"./src/js/blocks/tableEditForm/buttons.js\");\n/* harmony import */ var _blocks_favsLink_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../blocks/favsLink.js */ \"./src/js/blocks/favsLink.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"header => userContextBtn\";\r\n\r\nfunction clearTree(){\r\n    $$(\"tree\").clearAll();\r\n}\r\n\r\nfunction hideContentElements(id){\r\n    const childs =  $$(\"container\").getChildViews();\r\n    childs.forEach(function(el){\r\n        if ( el.config.id !== id ){\r\n            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.hideElem)($$(el.config.id));\r\n        }\r\n    }); \r\n}\r\n\r\nfunction navigateTo (path){\r\n    console.log(path)\r\n    return Backbone.history.navigate(path, {trigger : true});\r\n}\r\n\r\nfunction itemClickContext(id){\r\n    const editProperty = $$(\"editTableFormProperty\");\r\n    const cpForm       = $$(\"cp-form\");\r\n\r\n\r\n    function goToItem(navPath){\r\n        navigateTo (navPath);\r\n            \r\n        editProperty.config.dirty = false;\r\n        editProperty.refresh();\r\n    \r\n    }\r\n    \r\n    function modalBoxTable (navPath){\r\n\r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__.modalBox)().then(function(result){\r\n            const saveBtn    = $$(\"table-saveBtn\");\r\n            if (result == 1){\r\n                goToItem(navPath);\r\n                clearTree();\r\n\r\n            } else if (result == 2){\r\n                if (editProperty                && \r\n                    editProperty.config.dirty   ){\r\n                    \r\n                    if ( saveBtn.isVisible() ){\r\n                        (0,_blocks_tableEditForm_buttons_js__WEBPACK_IMPORTED_MODULE_3__.saveItem)(false, false, true);\r\n                    } else {\r\n                        (0,_blocks_tableEditForm_buttons_js__WEBPACK_IMPORTED_MODULE_3__.saveNewItem)(); \r\n                    }\r\n\r\n                    goToItem(navPath);\r\n                    clearTree();\r\n                }\r\n                \r\n            }\r\n\r\n           \r\n        });\r\n    \r\n    }\r\n\r\n    function logoutClick(){\r\n        const propertyCondition = editProperty && editProperty.config.dirty;\r\n        const cpCondition       = cpForm && cpForm.isDirty();\r\n\r\n        function postNewPass(){\r\n            const passValues = cpForm.getValues();\r\n\r\n            const objPass = {\r\n                op:passValues.oldPass,\r\n                np:passValues.newPass\r\n            };\r\n\r\n            const url      = \"/init/default/api/cp\";\r\n            const postData = webix.ajax().post(url, objPass);\r\n\r\n            postData.then(function(data){\r\n                data = data.json()\r\n                if (data.err_type == \"i\"){\r\n                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\", data.err);\r\n                    navigateTo (\"logout\");\r\n                } else {\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__.setFunctionError)(data.err, logNameFile, \"save new pass\");\r\n                }\r\n            });\r\n\r\n            postData.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__.setAjaxError)(err, logNameFile,\"save new pass\");\r\n            });\r\n        }\r\n\r\n        function savePropertyVals(){\r\n            const values = editProperty.getValues();\r\n            if (values.id){\r\n                (0,_blocks_tableEditForm_buttons_js__WEBPACK_IMPORTED_MODULE_3__.saveItem)(false,false,true);\r\n                goToItem(\"logout\");\r\n            } else {\r\n                (0,_blocks_tableEditForm_buttons_js__WEBPACK_IMPORTED_MODULE_3__.saveNewItem)();\r\n                goToItem(\"logout\"); \r\n            }\r\n        }\r\n        \r\n        if (propertyCondition || cpCondition){\r\n         \r\n            (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__.modalBox)().then(function(result){\r\n                if (result == 1){\r\n                    goToItem(\"logout\");\r\n                } else if (result == 2){\r\n\r\n                    if (cpForm || editProperty){\r\n\r\n                        if (cpCondition && cpForm.validate()){\r\n                            postNewPass();\r\n                            \r\n                        \r\n                        } else if (propertyCondition){\r\n                            savePropertyVals();\r\n                     \r\n                        \r\n                        }else {\r\n                            (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",\"Заполните пустые поля\");\r\n                            return false;\r\n                        }\r\n                    } \r\n                }\r\n            });\r\n            return false;\r\n        } else {\r\n            navigateTo (\"logout\");\r\n        }\r\n    }\r\n\r\n    function cpClick(){\r\n        if (editProperty && editProperty.config.dirty){\r\n            modalBoxTable (\"cp\");\r\n        } else {\r\n            clearTree();\r\n            navigateTo (\"/cp\");\r\n        }\r\n        hideContentElements(\"user_auth\");\r\n    }\r\n\r\n    function userprefsClick(){\r\n        if (editProperty && editProperty.config.dirty){\r\n            modalBoxTable (\"userprefs\");\r\n        } else {\r\n            clearTree();\r\n            navigateTo (\"/userprefs\");\r\n        }\r\n        hideContentElements(\"userprefs\");\r\n    }\r\n\r\n    if (id==\"logout\"){\r\n        logoutClick();\r\n\r\n    } else if (id == \"cp\"){\r\n        cpClick();\r\n\r\n    } else if (id == \"userprefs\"){\r\n        userprefsClick();\r\n\r\n    } else if (id == \"favs\"){\r\n    \r\n        (0,_blocks_favsLink_js__WEBPACK_IMPORTED_MODULE_4__.favsPopup)();\r\n    }\r\n \r\n}\r\n\r\nfunction onItemClickBtn(){\r\n\r\n    const getData = webix.ajax().get(\"/init/default/api/userprefs/\");\r\n\r\n    getData.then(function(data){\r\n        data = data.json().content;\r\n\r\n        if (data.err_type == \"e\"){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__.setFunctionError)(data.error,logNameFile,\"onItemClickBtn getData\")\r\n        }\r\n\r\n        const localUrl    = \"/index.html/content\";\r\n        const spawUrl     = \"/init/default/spaw/content\";\r\n        const path        = window.location.pathname;\r\n        \r\n        let settingExists = false;\r\n\r\n        function checkError(ajaxVar){\r\n            const msg = \"onItemClickBtn \" + ajaxVar;\r\n\r\n            ajaxVar.then(function(data){\r\n                data = data.json();\r\n                if (data.err_type !== \"i\"){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__.setFunctionError)(data.error, logNameFile, msg);\r\n                }\r\n            }); \r\n\r\n            ajaxVar.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__.setAjaxError)(err, logNameFile,msg);\r\n            });\r\n        }\r\n\r\n        function putUserprefs(id, sentObj){\r\n            const url     = \"/init/default/api/userprefs/\" + id;\r\n            const putData = webix.ajax().put(url, sentObj);\r\n            checkError(putData);\r\n        }\r\n\r\n        function getWhoData(sentObj){\r\n            const getWho =  webix.ajax(\"/init/default/api/whoami\");\r\n\r\n            getWho.then(function(data){\r\n                data              = data.json().content;\r\n\r\n                sentObj.owner     = data.id;\r\n\r\n                const userData    = {};\r\n                userData.id       = data.id;\r\n                userData.name     = data.first_name;\r\n                userData.username = data.username;\r\n                \r\n                (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__.setStorageData)(\"user\", JSON.stringify(userData));\r\n            });\r\n\r\n            getWho.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__.setAjaxError)(err, logNameFile,\"onItemClickBtn getWho\");\r\n            });\r\n        }\r\n\r\n        function postUserprefsData (sentObj){\r\n            const url           = \"/init/default/api/userprefs/\";\r\n            const postUserprefs = webix.ajax().post(url,sentObj);\r\n            checkError(postUserprefs);\r\n        }\r\n\r\n        if (path !== localUrl && path !== spawUrl){\r\n\r\n            const location = {\r\n                href : window.location.href\r\n            };\r\n\r\n            const sentObj = {\r\n                name  : \"userLocationHref\",\r\n                prefs : location\r\n            };\r\n\r\n\r\n            data.forEach(function(el,i){\r\n                if (el.name == \"userLocationHref\"){\r\n                    putUserprefs(el.id, sentObj);\r\n                    settingExists = true;\r\n  \r\n                } \r\n            });\r\n\r\n            if (!settingExists){\r\n\r\n                const ownerId = webix.storage.local.get(\"user\").id;\r\n\r\n                if (ownerId){\r\n                    sentObj.owner = ownerId;\r\n                } else {\r\n                    getWhoData(sentObj);\r\n                }\r\n                postUserprefsData (sentObj);\r\n               \r\n            }\r\n         \r\n        }\r\n    });\r\n    getData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_5__.setAjaxError)(err, logNameFile,\"onItemClickBtn getData\");\r\n    });\r\n\r\n \r\n}\r\n\r\nconst userContextBtn = {   \r\n    view    : \"button\",\r\n    id      : \"button-context-menu\",\r\n    type    : \"icon\",\r\n    disabled: true,\r\n    icon    : 'icon-user',\r\n    height  : 38, \r\n    width   : 50,\r\n    popup   : {\r\n\r\n        view    : 'contextmenu',\r\n        id      : \"contextmenu\",\r\n        css     : \"webix_contextmenu\",\r\n        data    : [],\r\n        on      : {\r\n            onItemClick: function(id, e, node){\r\n                itemClickContext(id);\r\n            }\r\n        }\r\n    },\r\n    on:{\r\n        onItemClick: function(){\r\n            onItemClickBtn();\r\n        }\r\n    }\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/userContextBtn.js?");

/***/ }),

/***/ "./src/js/components/login.js":
/*!************************************!*\
  !*** ./src/js/components/login.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createElements\": () => (/* reexport safe */ _blocks_routerConfig_common_js__WEBPACK_IMPORTED_MODULE_1__.createElements),\n/* harmony export */   \"removeElements\": () => (/* reexport safe */ _blocks_routerConfig_common_js__WEBPACK_IMPORTED_MODULE_1__.removeElements),\n/* harmony export */   \"auth\": () => (/* binding */ auth)\n/* harmony export */ });\n/* harmony import */ var _blocks_routerConfig_router_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/routerConfig/router.js */ \"./src/js/blocks/routerConfig/router.js\");\n/* harmony import */ var _blocks_routerConfig_common_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blocks/routerConfig/common.js */ \"./src/js/blocks/routerConfig/common.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction createSentObj(){\r\n    const loginData = {};\r\n    const form      = $$(\"formAuth\");\r\n    try{\r\n     \r\n        const userData  = form.getValues();\r\n\r\n        loginData.un    = userData.username;\r\n        loginData.np    = userData.password;\r\n        \r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,\"login\",\"createSentObj\");\r\n    }\r\n\r\n    return loginData;\r\n}\r\n\r\nfunction postLoginData(){\r\n    const loginData = createSentObj();\r\n    const form      = $$(\"formAuth\");\r\n\r\n    const postData  = webix.ajax().post(\"/init/default/login\",loginData);\r\n\r\n    postData.then(function(data){\r\n\r\n        if (data.json().err_type == \"i\"){\r\n\r\n            data = data.json().content;\r\n            const userData     = {};\r\n\r\n\r\n            userData.id        = data.id;\r\n            userData.name      = data.first_name;\r\n            userData.username  = data.username;\r\n\r\n            if (form){\r\n                form.clear();\r\n            }\r\n\r\n            Backbone.history.navigate(\"content\", { trigger:true});\r\n            window.location.reload();\r\n \r\n        } else {\r\n            if (form && form.isDirty()){\r\n                form.markInvalid(\"username\", \"\");\r\n                form.markInvalid(\"password\", \"Неверный логин или пароль\");\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    postData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setAjaxError)(err, \"login\",\"postLoginData\");\r\n    });\r\n}\r\n\r\nfunction getLogin(){\r\n\r\n    const form = $$(\"formAuth\");\r\n\r\n    form.validate();\r\n    postLoginData();\r\n\r\n}\r\n\r\nfunction login () {\r\n  \r\n    (0,_blocks_routerConfig_router_js__WEBPACK_IMPORTED_MODULE_0__.router)();\r\n\r\n    const invalidMsgText = \"Поле должно быть заполнено\";\r\n\r\n    const login =  {   \r\n        view            : \"text\", \r\n        label           : \"Логин\", \r\n        name            : \"username\",\r\n        invalidMessage  : invalidMsgText,\r\n        on              : {\r\n            onItemClick:function(){\r\n                $$('formAuth').clearValidation();\r\n            }\r\n        }  \r\n    };\r\n\r\n    const pass =  {   \r\n        view            : \"text\", \r\n        label           : \"Пароль\", \r\n        name            : \"password\",\r\n        invalidMessage  : invalidMsgText,\r\n        type            : \"password\",\r\n        on              : {\r\n            onItemClick:function(){\r\n                $$('formAuth').clearValidation();\r\n            }\r\n        } \r\n    };\r\n\r\n    const btnSubmit = {   \r\n        view    : \"button\", \r\n        value   : \"Войти\", \r\n        css     : \"webix_primary\",\r\n        hotkey  : \"enter\", \r\n        align   : \"center\", \r\n        click   :getLogin\r\n    };\r\n\r\n    const form = {\r\n        view        : \"form\",\r\n        id          : \"formAuth\",\r\n        width       : 250,\r\n        borderless  : true,\r\n        elements    : [\r\n            login,\r\n            pass,\r\n            btnSubmit, \r\n        ],\r\n\r\n        rules:{\r\n            \r\n            \"username\" : webix.rules.isNotEmpty,\r\n            \"password\" : webix.rules.isNotEmpty,\r\n    \r\n          },\r\n    \r\n    \r\n        elementsConfig:{\r\n            labelPosition:\"top\"\r\n        }\r\n    \r\n    };\r\n    \r\n    \r\n    return form;\r\n\r\n}\r\n\r\nconst auth = {\r\n    hidden  : true, \r\n    id      : \"userAuth\", \r\n    cols    : [\r\n        {\r\n            view    : \"align\", \r\n            align   : \"middle,center\",\r\n            body    : login()\r\n        },\r\n\r\n    ]\r\n}; \r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/login.js?");

/***/ }),

/***/ "./src/js/components/table/btnsInTable.js":
/*!************************************************!*\
  !*** ./src/js/components/table/btnsInTable.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"trashBtn\": () => (/* binding */ trashBtn),\n/* harmony export */   \"showPropBtn\": () => (/* binding */ showPropBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => btnsIntable\";\r\n\r\nfunction trashBtn(config,idTable){\r\n    function delElem(){\r\n \r\n        const table      = $$(idTable);\r\n        const formValues = table.getItem(config.row);\r\n        const itemTreeId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId) ();\r\n        const url        = \"/init/default/api/\"+itemTreeId+\"/\"+formValues.name+\".json\" ;\r\n \r\n        const delData    =  webix.ajax().del(url, formValues);\r\n\r\n        delData.then(function(data){\r\n            data = data.json();\r\n            if (data.err_type == \"i\"){\r\n                try {\r\n                    const selectEl = table.getSelectedId();\r\n                    table.remove(selectEl);\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"wxi-trash => delData\");\r\n                }\r\n                (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\",\"Данные успешно удалены\");\r\n            } else {\r\n                (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",data.err);\r\n            }\r\n        });\r\n\r\n        delData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"wxi-trash => delElem\");\r\n        });\r\n    }\r\n\r\n  \r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__.popupExec)(\"Запись будет удалена\").then(function(res){\r\n\r\n        if (res){\r\n            delElem();\r\n        }\r\n  \r\n    });\r\n}\r\n\r\nfunction showPropBtn (cell){\r\n    const propertyElem = $$(\"propTableView\");\r\n\r\n    function hideViewTools(){\r\n        const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n        const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n        const secondaryBtnClass = \"webix-transparent-btn\";\r\n        \r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)($$(\"formsTools\"));\r\n\r\n        if (btnClass.classList.contains(primaryBtnClass)){\r\n            btnClass.classList.add(secondaryBtnClass);\r\n            btnClass.classList.remove(primaryBtnClass);\r\n        }\r\n    }\r\n\r\n    function createUrl(){\r\n        let url;\r\n        try{\r\n            const id      = cell.row;\r\n            const columns = $$(\"table-view\").getColumns();\r\n\r\n\r\n            columns.forEach(function(el,i){\r\n                if (el.id == cell.column){\r\n                    url           = el.src;\r\n                    let urlArgEnd = url.search(\"{\");\r\n                    url           = url.slice(0,urlArgEnd)+id+\".json\"; \r\n                }\r\n            });  \r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"wxi-angle-down => createUrl\");\r\n        }\r\n        return url;\r\n    }\r\n\r\n    function getProp(){\r\n        const url       = createUrl();\r\n        const getData   = webix.ajax(url);\r\n\r\n        getData.then(function(data){\r\n\r\n            data = data.json().content;\r\n            \r\n            function setProps(){\r\n                const arrayProperty = [];\r\n      \r\n                try{\r\n                    data.forEach(function(el,i){\r\n                        arrayProperty.push({\r\n                            type    :\"text\", \r\n                            id      :i+1,\r\n                            label   :el.name, \r\n                            value   :el.value\r\n                        });\r\n                    });\r\n\r\n                    propertyElem.define(\"elements\", arrayProperty);\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"wxi-angle-down => setProps\");\r\n                }\r\n            }\r\n            \r\n            function initSpace(){\r\n                hideViewTools();\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.showElem)(propertyElem);\r\n            }\r\n\r\n\r\n            function resizeProp(){\r\n                try{\r\n                    if (propertyElem.config.width < 200){\r\n                        propertyElem.config.width = 200;\r\n                        propertyElem.resize();\r\n                    }\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"wxi-angle-down => resizeProp\");\r\n                }\r\n            }\r\n\r\n            setProps();\r\n            initSpace();\r\n            resizeProp();\r\n\r\n        });\r\n\r\n        getData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"wxi-angle-down => getProp\");\r\n        });\r\n    }\r\n\r\n    if (!(propertyElem.isVisible()))   {\r\n        getProp();\r\n    } else {\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.hideElem)(propertyElem);\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/btnsInTable.js?");

/***/ }),

/***/ "./src/js/components/table/common.js":
/*!*******************************************!*\
  !*** ./src/js/components/table/common.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setDirtyProperty\": () => (/* binding */ setDirtyProperty),\n/* harmony export */   \"toEditForm\": () => (/* binding */ toEditForm),\n/* harmony export */   \"validateError\": () => (/* binding */ validateError),\n/* harmony export */   \"uniqueData\": () => (/* binding */ uniqueData),\n/* harmony export */   \"putData\": () => (/* binding */ putData)\n/* harmony export */ });\n/* harmony import */ var _blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/tableEditForm/validation.js */ \"./src/js/blocks/tableEditForm/validation.js\");\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n \r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => common\";\r\n\r\n\r\nfunction setDirtyProperty (){\r\n    const prop = $$(\"editTableFormProperty\");\r\n    prop.config.dirty = false;\r\n    prop.refresh();\r\n}\r\n\r\nfunction toEditForm (nextItem) {\r\n    const valuesTable = $$(\"table\").getItem(nextItem); \r\n\r\n    function setViewDate(){\r\n        const parseDate = webix.Date.dateToStr(\"%d.%m.%y %H:%i:%s\");\r\n        try{\r\n            Object.values(valuesTable).forEach(function(el,i){\r\n        \r\n                if(el instanceof Date){\r\n                    const key        = Object.keys(valuesTable)[i];\r\n                    const value      = parseDate(el);\r\n                    valuesTable[key] = value;\r\n                }\r\n            \r\n            });\r\n        } catch (err){ \r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"setViewDate\")\r\n        }\r\n    }\r\n\r\n    function setPropState(){\r\n        try{\r\n            const prop      = $$(\"editTableFormProperty\");\r\n            const form      = $$(\"table-editForm\"); \r\n            const newAddBtn = $$(\"table-newAddBtnId\");\r\n\r\n            if (prop && !(prop.isVisible())){\r\n                prop.show();\r\n\r\n                if (window.innerWidth > 850){\r\n                    form.config.width = 350;   \r\n                    form.resize();\r\n                }\r\n            }\r\n\r\n            if (!(newAddBtn.isEnabled())){\r\n                newAddBtn.enable();\r\n            }\r\n\r\n            setDirtyProperty();\r\n            setViewDate     ();\r\n\r\n            prop.setValues(valuesTable);\r\n        \r\n            $$(\"table-saveNewBtn\").hide();\r\n            $$(\"table-saveBtn\")   .show();\r\n            $$(\"table-delBtnId\")  .enable();\r\n\r\n        } catch (err){   \r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"toEditForm => setPropState\");\r\n        }\r\n    }\r\n\r\n    setPropState();\r\n\r\n}\r\n\r\n\r\nfunction validateError (){\r\n    (0,_blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_0__.validateProfForm) ().forEach(function(el,i){\r\n\r\n        let nameEl;\r\n        try{\r\n            $$(\"table\").getColumns().forEach(function(col,i){\r\n                if (col.id == el.nameCol){\r\n                    nameEl = col.label;\r\n                }\r\n            });\r\n        } catch (err){ \r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"validateError\")\r\n        }\r\n        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",el.textError+\" (Поле: \"+nameEl+\")\");\r\n    });\r\n}\r\n\r\nfunction uniqueData (itemData){\r\n    let validateData = {};\r\n\r\n    try{\r\n        Object.values(itemData).forEach(function(el,i){\r\n            const oldValues    = $$(\"table\").getItem(itemData.id)\r\n            const oldValueKeys = Object.keys(oldValues);\r\n\r\n            function compareVals (){\r\n                let newValKey = Object.keys(itemData)[i];\r\n                \r\n                oldValueKeys.forEach(function(oldValKey){\r\n                    \r\n                    if (oldValKey == newValKey){\r\n                        \r\n                        if  (oldValues[oldValKey] !== Object.values(itemData)[i] ){\r\n                            validateData[Object.keys(itemData)[i]] = Object.values(itemData)[i];\r\n                        } \r\n                        \r\n                    }\r\n                }); \r\n            }\r\n            compareVals ();\r\n        });\r\n    } catch (err){ \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"uniqueData\")\r\n    }\r\n    return validateData;\r\n}\r\n\r\nfunction putData (nextItem, valuesProp, currId, editInForm=false){\r\n   \r\n    if (!((0,_blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_0__.validateProfForm)().length)){\r\n\r\n        if (valuesProp.id){\r\n\r\n            let sentValues;\r\n            if (editInForm){\r\n                sentValues = uniqueData (valuesProp);\r\n            } else {\r\n                sentValues = valuesProp;\r\n            }\r\n\r\n            const table   =  $$(\"table\");\r\n            const url     = \"/init/default/api/\"+currId+\"/\"+valuesProp.id;\r\n            const putData =  webix.ajax().put(url, sentValues);\r\n            \r\n            putData.then(function(data){\r\n                data = data.json();\r\n                if (data.err_type == \"i\"){\r\n\r\n                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\",\"Данные сохранены\");\r\n                    table.updateItem(valuesProp.id, valuesProp);\r\n                    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.removeElem)($$(\"propertyRefbtnsContainer\"));\r\n\r\n                    if (editInForm){\r\n                        toEditForm(nextItem);\r\n                        table.select(nextItem);\r\n                    }\r\n                } if (data.err_type == \"e\"){\r\n                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\",data.error);\r\n                }\r\n            });\r\n\r\n            putData.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"putData\");\r\n            });\r\n        \r\n        }\r\n\r\n    } else {\r\n        validateError ();\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/common.js?");

/***/ }),

/***/ "./src/js/components/table/layout.js":
/*!*******************************************!*\
  !*** ./src/js/components/table/layout.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"table\": () => (/* binding */ table)\n/* harmony export */ });\n/* harmony import */ var _btnsInTable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./btnsInTable.js */ \"./src/js/components/table/btnsInTable.js\");\n\r\n\r\nconst limitLoad   = 80;\r\n\r\nfunction table (idTable, onFunc, editableParam=false) {\r\n    return {\r\n        view        : \"datatable\",\r\n        id          : idTable,\r\n        css         : \"webix_table-style webix_header_border webix_data_border\",\r\n        autoConfig  : true,\r\n        editable    : editableParam,\r\n        editaction  :\"dblclick\",\r\n        minHeight   : 350,\r\n        //height:200,\r\n        footer      : true,\r\n        select      : true,\r\n        resizeColumn: true,\r\n        sort        : [],\r\n        offsetAttr  : limitLoad,\r\n        on          : onFunc,\r\n        onClick     :{\r\n            \"wxi-trash\":function(event,config,html){\r\n                (0,_btnsInTable_js__WEBPACK_IMPORTED_MODULE_0__.trashBtn)(config,idTable);\r\n            },\r\n\r\n            \"wxi-angle-down\":function(event, cell, target){\r\n                (0,_btnsInTable_js__WEBPACK_IMPORTED_MODULE_0__.showPropBtn) (cell);\r\n            },\r\n            \r\n        },\r\n        ready:function(){ \r\n            const firstCol = this.getColumns()[0];\r\n            this.markSorting(firstCol.id, \"asc\");\r\n        },\r\n    };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/layout.js?");

/***/ }),

/***/ "./src/js/components/table/lazyLoad.js":
/*!*********************************************!*\
  !*** ./src/js/components/table/lazyLoad.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"sortTable\": () => (/* binding */ sortTable),\n/* harmony export */   \"scrollTableLoad\": () => (/* binding */ scrollTableLoad)\n/* harmony export */ });\n/* harmony import */ var _blocks_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/getContent/getInfoTable.js */ \"./src/js/blocks/getContent/getInfoTable.js\");\n\r\n\r\nconst limitLoad   = 80;\r\n\r\nfunction sortTable(table){\r\n    table.attachEvent(\"onAfterSort\", function(id,sortType,colType){\r\n        const sortInfo = {\r\n            idCol : id,\r\n            type  : sortType\r\n        };\r\n        table.config.sort = sortInfo;\r\n    });\r\n}\r\n\r\nfunction scrollTableLoad(table){\r\n    table.attachEvent(\"onScrollY\", function(){\r\n        const table        = this;\r\n        const scrollState  = table.getScrollState();\r\n        const maxHeight    = table._dtable_height;\r\n        const offsetHeight = table._dtable_offset_height;\r\n    \r\n    \r\n    \r\n        if (maxHeight - scrollState.y == offsetHeight){ \r\n    \r\n            const tableId           = table.config.idTable;\r\n            const oldOffset         = table.config.offsetAttr;\r\n    \r\n            const newOffset         = oldOffset + limitLoad;\r\n    \r\n            table.config.offsetAttr = newOffset;\r\n            table.refresh();\r\n    \r\n            (0,_blocks_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_0__.createTableRows) (\"table\",tableId, oldOffset);\r\n        }\r\n         \r\n    });\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/lazyLoad.js?");

/***/ }),

/***/ "./src/js/components/table/onFuncs.js":
/*!********************************************!*\
  !*** ./src/js/components/table/onFuncs.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onFuncTable\": () => (/* binding */ onFuncTable)\n/* harmony export */ });\n/* harmony import */ var _blocks_tableEditForm_states_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/tableEditForm/states.js */ \"./src/js/blocks/tableEditForm/states.js\");\n/* harmony import */ var _blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/tableEditForm/validation.js */ \"./src/js/blocks/tableEditForm/validation.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common.js */ \"./src/js/components/table/common.js\");\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => onFuncs\";\r\n\r\nconst onFuncTable = {\r\n\r\n    onBeforeLoad:function(){\r\n        this.showOverlay(\"Загрузка...\");\r\n    },\r\n    \r\n    onBeforeEditStop:function(state, editor, ignoreUpdate){\r\n        const table      = $$(\"table\");\r\n        const valuesProp = table.getSelectedItem();\r\n        const currId     = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.getItemId) ();\r\n        const tableItem  = table.getSelectedItem();\r\n        try {\r\n            if(state.value != state.old){\r\n\r\n                const idRow = editor.row;\r\n                const col   = editor.column;\r\n                const val   = state.value;\r\n              \r\n                table.updateItem(idRow, {[col]:val});\r\n                $$(\"editTableFormProperty\").setValues(tableItem);\r\n                (0,_common_js__WEBPACK_IMPORTED_MODULE_6__.putData) (\"\", valuesProp, currId);\r\n\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__.setFunctionError)(err,logNameFile,\"onBeforeEditStop\");\r\n        }\r\n    },\r\n\r\n    onAfterSelect(id){\r\n\r\n        function filterTableHide (){\r\n            try{\r\n                const filterContainer = $$(\"filterTableBarContainer\");\r\n                const filterForm      = $$(\"filterTableForm\");\r\n                const btnClass        = document.querySelector(\".webix_btn-filter\");\r\n\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)(filterContainer);\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)(filterForm);\r\n      \r\n                btnClass.classList.add   (\"webix-transparent-btn\");\r\n                btnClass.classList.remove(\"webix-transparent-btn--primary\");\r\n\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__.setFunctionError)(err,logNameFile,\"onAfterSelect => filterTableHide\");\r\n            }\r\n        }\r\n\r\n\r\n        function statePutEditForm (){\r\n            \r\n            try{\r\n                const newAddBtn = $$(\"table-newAddBtnId\");\r\n                const editForm  = $$(\"table-editForm\");\r\n\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem)($$(\"editTableBarContainer\"));\r\n\r\n                if (newAddBtn){\r\n                    newAddBtn.enable();\r\n                }\r\n           \r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)($$(\"EditEmptyTempalte\"));\r\n\r\n                if( !(editForm.isVisible()) ){\r\n                    editForm.show();\r\n                    filterTableHide ();\r\n                }\r\n\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__.setFunctionError)(err,logNameFile,\"onAfterSelect => statePutEditForm\")\r\n            }\r\n        }\r\n\r\n\r\n\r\n        function adaptiveEditForm (){\r\n            try {\r\n                const form      = $$(\"table-editForm\");\r\n                const container = $$(\"container\");\r\n\r\n                if (container.$width < 850){\r\n\r\n                    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)($$(\"tree\"))\r\n\r\n                    if (container.$width< 850){\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)($$(\"tableContainer\"));\r\n\r\n                        form.config.width = window.innerWidth;\r\n                        form.resize();\r\n\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem)($$(\"table-backTableBtn\"));\r\n                    }\r\n                  \r\n                    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem)(form);\r\n                    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)($$(\"EditEmptyTempalte\"));\r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__.setFunctionError)(err,logNameFile,\"onAfterSelect => adaptiveEditForm\");\r\n            }\r\n        }\r\n\r\n        statePutEditForm ();\r\n        adaptiveEditForm ();\r\n\r\n    },\r\n    \r\n    onBeforeSelect:function(selection, preserve){\r\n        const table     = $$(\"table\");\r\n        const property  = $$(\"editTableFormProperty\");\r\n    \r\n\r\n        const valuesProp = property.getValues();\r\n        const currId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.getItemId) ();\r\n        const nextItem = selection.id;\r\n\r\n\r\n        function postNewData (nextItem,currId,valuesProp){\r\n            if (!((0,_blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_1__.validateProfForm)().length)){\r\n                const url      = \"/init/default/api/\"+currId;\r\n                \r\n                const postData = webix.ajax().post(url, valuesProp);\r\n                \r\n                postData.then(function(data){\r\n                 \r\n                    data = data.json();\r\n\r\n                    function tableUpdate (){\r\n                        valuesProp.id = data.content.id;\r\n                        table.add(valuesProp);\r\n                    }\r\n                \r\n                    if (data.content.id !== null){\r\n                        tableUpdate ();\r\n                        (0,_common_js__WEBPACK_IMPORTED_MODULE_6__.toEditForm)(nextItem);\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.removeElem)($$(\"propertyRefbtnsContainer\"));\r\n                        table.select(nextItem);\r\n                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\"success\",\"Данные успешно добавлены\");\r\n                    } else {\r\n\r\n                        const errs = data.content.errors;\r\n                        let msg = \"\";\r\n                        Object.values(errs).forEach(function(err,i){\r\n                            msg +=err+\" (Поле: \"+Object.keys(errs)[i] +\"); \";\r\n                        });\r\n\r\n                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\"error\",msg);\r\n                    }\r\n                    \r\n                });\r\n\r\n                postData.fail(function(err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__.setAjaxError)(err, logNameFile,\"onBeforeSelect => postNewData\");\r\n                });\r\n \r\n            } else {\r\n                (0,_common_js__WEBPACK_IMPORTED_MODULE_6__.validateError) ();\r\n            }\r\n        }\r\n \r\n \r\n        function modalBoxTable (){\r\n\r\n            try{\r\n                if (property.config.dirty){\r\n\r\n                    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)().then(function(result){\r\n                        const saveBtn  = $$(\"table-saveBtn\");\r\n\r\n                        if (result == 1){\r\n                            (0,_common_js__WEBPACK_IMPORTED_MODULE_6__.toEditForm)(nextItem);\r\n                            table.select(selection.id);\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.removeElem)($$(\"propertyRefbtnsContainer\"));\r\n                        } \r\n\r\n                        else if (result == 2){\r\n                        \r\n                            if (saveBtn.isVisible()){\r\n                                (0,_common_js__WEBPACK_IMPORTED_MODULE_6__.putData) (nextItem,valuesProp,currId, true);\r\n                            } else {\r\n                                postNewData (nextItem,currId,valuesProp);\r\n                            }\r\n                        }\r\n\r\n                    });\r\n\r\n                    return false;\r\n                } else {\r\n                    (0,_blocks_tableEditForm_states_js__WEBPACK_IMPORTED_MODULE_0__.createEditFields)(\"table-editForm\");\r\n                    (0,_common_js__WEBPACK_IMPORTED_MODULE_6__.toEditForm)(nextItem);\r\n                }\r\n            } catch (err){ \r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__.setFunctionError)(err,logNameFile,\"onBeforeSelect => modalBoxTable\")\r\n            }\r\n        }\r\n \r\n        modalBoxTable ();\r\n\r\n        if (property.config.dirty){\r\n            return false;\r\n        }\r\n    },\r\n\r\n    onAfterLoad:function(){\r\n        try {\r\n            this.hideOverlay();\r\n\r\n            (0,_blocks_tableEditForm_states_js__WEBPACK_IMPORTED_MODULE_0__.defaultStateForm) ();\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_4__.setFunctionError)(err,logNameFile,\"onAfterLoad\")\r\n        }\r\n    },  \r\n\r\n    onAfterDelete: function() {\r\n        function overlay (){\r\n\r\n            function returnTableView(){\r\n                if ($$(\"table\").isVisible()){\r\n                    return \"table\";\r\n                } else if ($$(\"table-view\").isVisible()){\r\n                    return \"table-view\";\r\n                }\r\n              \r\n            }\r\n\r\n            function setOverlayState(){\r\n                const tableId   = returnTableView();\r\n                const tableView = $$(tableId);\r\n    \r\n    \r\n                if ( !tableView.count() ){\r\n                    tableView.showOverlay(\"Ничего не найдено\");\r\n                }\r\n                if ( tableView.count() ){\r\n                    tableView.hideOverlay();\r\n                }\r\n            }\r\n\r\n            setOverlayState();\r\n      \r\n        }\r\n      \r\n        overlay ();\r\n    },\r\n\r\n    onAfterAdd: function() {\r\n        this.hideOverlay();\r\n    },\r\n\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/onFuncs.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/common.js":
/*!*************************************************!*\
  !*** ./src/js/components/treeSidabar/common.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setStateFilterBtn\": () => (/* binding */ setStateFilterBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n \r\n\r\nfunction setStateFilterBtn(){\r\n    try{\r\n        const btnClass = document.querySelector(\".webix_btn-filter\");\r\n        if (btnClass && btnClass.classList.contains (\"webix-transparent-btn--primary\")){\r\n           \r\n            btnClass.classList.add   (\"webix-transparent-btn\");\r\n            btnClass.classList.remove(\"webix-transparent-btn--primary\");\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"sidebar\",\"setStateFilterBtn\");\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/common.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/layout.js":
/*!*************************************************!*\
  !*** ./src/js/components/treeSidabar/layout.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"treeSidebar\": () => (/* binding */ treeSidebar)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _onSelectChange_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./onSelectChange.js */ \"./src/js/components/treeSidabar/onSelectChange.js\");\n/* harmony import */ var _onItemClick_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./onItemClick.js */ \"./src/js/components/treeSidabar/onItemClick.js\");\n/* harmony import */ var _onBeforeSelect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./onBeforeSelect.js */ \"./src/js/components/treeSidabar/onBeforeSelect.js\");\n/* harmony import */ var _onBeforeOpen_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./onBeforeOpen.js */ \"./src/js/components/treeSidabar/onBeforeOpen.js\");\n/* harmony import */ var _onAfterSelect_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./onAfterSelect.js */ \"./src/js/components/treeSidabar/onAfterSelect.js\");\n \r\n\r\n \r\n \r\n \r\n \r\n \r\n\r\n\r\nfunction treeSidebar () {\r\n    const tree = {\r\n        view        :\"edittree\",\r\n        id          :\"tree\",\r\n        css         :\"webix_tree-main\",\r\n        minWidth    :100,\r\n        width       : 250,\r\n        editable    :false,\r\n        select      :true,\r\n        editor      :\"text\",\r\n        editValue   :\"value\",\r\n        activeTitle :true,\r\n        clipboard   : true,\r\n        data        :[],\r\n        on          :{\r\n            \r\n            onSelectChange:function (ids) {\r\n                (0,_onSelectChange_js__WEBPACK_IMPORTED_MODULE_1__.onSelectChangeFunc)(ids);\r\n            },\r\n\r\n            onItemClick:function(id){\r\n                return (0,_onItemClick_js__WEBPACK_IMPORTED_MODULE_2__.onItemClickFunc)(id);\r\n            },\r\n\r\n            onBeforeSelect: function(data) {\r\n                (0,_onBeforeSelect_js__WEBPACK_IMPORTED_MODULE_3__.onBeforeSelectFunc)(data);\r\n            },\r\n\r\n            onLoadError:function(xhr){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(xhr, \"sidebar\",\"onLoadError\");\r\n            },\r\n\r\n            onBeforeOpen:function (id){\r\n                (0,_onBeforeOpen_js__WEBPACK_IMPORTED_MODULE_4__.onBeforeOpenFunc)(id);\r\n            },\r\n\r\n            onAfterSelect:function(id){\r\n                (0,_onAfterSelect_js__WEBPACK_IMPORTED_MODULE_5__.onAfterSelectFunc)(id);\r\n            }\r\n        },\r\n\r\n    };\r\n\r\n    return tree;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/layout.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/onAfterSelect.js":
/*!********************************************************!*\
  !*** ./src/js/components/treeSidabar/onAfterSelect.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onAfterSelectFunc\": () => (/* binding */ onAfterSelectFunc)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nfunction onAfterSelectFunc(id){\r\n    \r\n    async function getFields (){\r\n        if (!_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.mmenu){\r\n            await (0,_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.getData)(\"fields\"); \r\n        }\r\n\r\n        if (_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.fields){\r\n            try{\r\n                Backbone.history.navigate(\"tree/\"+id, { trigger:true });\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"treeSidebar => onAfterSelect\",\"getFields\");\r\n            }\r\n        }\r\n    }\r\n    function setAdaptiveState(){\r\n        try{\r\n            if (window.innerWidth < 850 ){\r\n                $$(\"tree\").hide();\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"treeSidebar => onAfterSelect\",\"setAdaptiveState\");\r\n        }\r\n    }\r\n\r\n    getFields ();\r\n    setAdaptiveState();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/onAfterSelect.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/onBeforeOpen.js":
/*!*******************************************************!*\
  !*** ./src/js/components/treeSidabar/onBeforeOpen.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onBeforeOpenFunc\": () => (/* binding */ onBeforeOpenFunc)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => onBeforeOpen\";\r\n\r\nfunction onBeforeOpenFunc(id){\r\n    const tree          = $$(\"tree\");\r\n    const selectedItem  = $$(\"tree\").getItem(id);\r\n    const idLoadElement = \"q-load_data-tree_\"+ webix.uid();\r\n    const idNoneElement = \"q-none_data-tree_\"+ webix.uid();\r\n\r\n    function createLoadEl(){\r\n        tree.data.add({\r\n            id      :idLoadElement,\r\n            disabled:true,\r\n            value   :\"Загрузка ...\"\r\n        }, 0, id );  \r\n        \r\n        tree.addCss(idLoadElement, \"tree_load-items\");\r\n    }\r\n\r\n    function createNoneEl(){\r\n        tree.data.add({\r\n            id      :idNoneElement,\r\n            disabled:true,\r\n            value   :\"Раздел пуст\"\r\n        }, 0, id );  \r\n    }\r\n\r\n    async function getMenuChilds() {\r\n\r\n        if (!_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.fields){\r\n            await (0,_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.getData)(\"fields\"); \r\n      \r\n        }\r\n\r\n        const content   = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.fields.content;\r\n        const obj       = Object.keys(content); \r\n\r\n        function findNotUniqueItem (data){\r\n            let check = false;\r\n            try{\r\n                _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.STORAGE.mmenu.mmenu.forEach(function(el,i){\r\n                    if (el.name == data){\r\n                        check = true;\r\n                        \r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"findNotUniqueItem\");\r\n            }\r\n            return check;\r\n        }\r\n\r\n        function removeTreeEls(noneEl=false){\r\n            try{\r\n                if( tree.exists(idLoadElement)){\r\n                    tree.remove(idLoadElement);\r\n                }\r\n                if( tree.exists(idNoneElement) && noneEl){\r\n                    tree.remove(idNoneElement);\r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"removeTreeEls\");\r\n            }\r\n        }\r\n\r\n        function generateMenuData (typeChild){\r\n            let itemsExists = false;\r\n            try{\r\n            \r\n                obj.forEach(function(data) {\r\n                   \r\n                    if (content[data].type == typeChild && !findNotUniqueItem(data)){ \r\n             \r\n                        tree.data.add({\r\n                                id:data, \r\n                                value:(content[data].plural) ? \r\n                                content[data].plural         : \r\n                                content[data].singular       , \r\n                                \"type\":content[data].type\r\n                        }, 0, id ); \r\n\r\n                        if (!itemsExists){\r\n                            itemsExists = true;\r\n                        }\r\n                       \r\n                        removeTreeEls(true);\r\n                \r\n                    } \r\n\r\n\r\n                });\r\n\r\n                if (!itemsExists){\r\n                    removeTreeEls();\r\n                    if( !(tree.exists(idNoneElement)) ){\r\n                        createNoneEl();\r\n                        tree.addCss(idNoneElement, \"tree_none-items\");\r\n                    }\r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"generateMenuData\");\r\n            }\r\n    \r\n        }\r\n\r\n\r\n\r\n        if (selectedItem.action.includes(\"all_\")){\r\n            const index = selectedItem.action.indexOf(\"_\");\r\n            const type  = selectedItem.action.slice(index+1);\r\n            generateMenuData (type);\r\n        }\r\n    \r\n        \r\n    }\r\n\r\n    if ($$(\"tree\").getItem(id).$count===-1){\r\n     \r\n        createLoadEl();\r\n        getMenuChilds();\r\n      \r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/onBeforeOpen.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/onBeforeSelect.js":
/*!*********************************************************!*\
  !*** ./src/js/components/treeSidabar/onBeforeSelect.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onBeforeSelectFunc\": () => (/* binding */ onBeforeSelectFunc)\n/* harmony export */ });\n/* harmony import */ var _blocks_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/getContent/getInfoTable.js */ \"./src/js/blocks/getContent/getInfoTable.js\");\n/* harmony import */ var _blocks_getContent_getInfoDashboard_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/getContent/getInfoDashboard.js */ \"./src/js/blocks/getContent/getInfoDashboard.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common.js */ \"./src/js/components/treeSidabar/common.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n//import {getInfoTable,getInfoDashboard} from \"../../blocks/content.js\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => onBeforeSelect\";\r\n\r\nfunction onBeforeSelectFunc(data){\r\n\r\n    const tree          = $$(\"tree\");\r\n    const selectItem    = tree.getItem(data);\r\n    const filterForm    = $$(\"filterTableForm\");\r\n    const inputs        = $$(\"inputsFilter\");\r\n\r\n    if (data.includes(\"q-none_data-tree_\") || \r\n        data.includes(\"q-load_data-tree_\") ||\r\n        selectItem.webix_kids              ){\r\n        return false;\r\n    }\r\n    \r\n    function setFilterDefaultState(){\r\n        try{\r\n            if (filterForm && filterForm.isVisible()){\r\n\r\n                filterForm.hide();\r\n                (0,_common_js__WEBPACK_IMPORTED_MODULE_4__.setStateFilterBtn)();\r\n            \r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem) ($$(\"table-editForm\"));\r\n            \r\n            }\r\n\r\n            if (inputs){\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.removeElem) (inputs);\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,logNameFile,\"setFilterDefaultState\");\r\n        }\r\n    }\r\n\r\n    function setBtnCssState(){\r\n        const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n        const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n        const secondaryBtnClass = \"webix-transparent-btn\";\r\n\r\n        if ( btnClass && btnClass.classList.contains(primaryBtnClass) ){\r\n\r\n            btnClass.classList.add   (secondaryBtnClass);\r\n            btnClass.classList.remove(primaryBtnClass);\r\n        }\r\n      \r\n    }\r\n    function setFormToolsDefaultState(){\r\n        const formsTools     = $$(\"formsTools\");\r\n        const formsContainer = $$(\"formsContainer\");\r\n  \r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem) (formsTools);\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem) (formsContainer);\r\n\r\n    }\r\n\r\n    function adaptiveViewEditTable(){\r\n\r\n        const container = $$(\"tableContainer\");\r\n        const tables    = $$(\"tables\");\r\n        \r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)  ($$(\"editTableBarContainer\"));\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)  ($$(\"table-backTableBtn\"));\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)  ($$(\"table-editForm\"));\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem)  ($$(\"tableContainer\"));\r\n\r\n        if(tables.$width - container.$width > 9){\r\n           // $$(\"flexlayoutTable\").config.width = tables.$width - 9;\r\n            $$(\"tableContainer\").resize();\r\n            //tables.resize();\r\n        }\r\n\r\n    }\r\n\r\n    function adaptiveViewDashFilter(){\r\n        const dashTool      = $$(\"dashboardTool\");\r\n        const dashContainer = $$(\"dashboardInfoContainer\");\r\n\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem) (dashTool);\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem) (dashContainer);\r\n    }\r\n\r\n    function disableVisibleBtn(){\r\n        const viewBtn =  $$(\"table-view-visibleCols\");\r\n        const btn     =  $$(\"table-visibleCols\");\r\n        \r\n        function disableBtn(el){\r\n            if (el){\r\n                el.disable();\r\n            }\r\n        }\r\n\r\n        if ( viewBtn.isVisible() ){\r\n            disableBtn(viewBtn);\r\n        } else if ( btn.isVisible() ){\r\n            disableBtn(btn);\r\n        }\r\n      \r\n    }\r\n\r\n    setBtnCssState();\r\n    setFilterDefaultState();\r\n\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem)   ($$(\"editTableFormProperty\"));\r\n\r\n    setFormToolsDefaultState();\r\n\r\n    adaptiveViewDashFilter();\r\n\r\n    adaptiveViewEditTable();\r\n\r\n    disableVisibleBtn();\r\n\r\n    async function getSingleTreeItem() {\r\n\r\n        if (!_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__.STORAGE.fields){\r\n            await (0,_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__.getData)(\"fields\"); \r\n        }\r\n      \r\n        const content   = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__.STORAGE.fields.content;\r\n        const obj       = Object.keys(content); \r\n\r\n    \r\n        function generateItem (){\r\n            try{\r\n                obj.forEach(function(el) {\r\n                    if (el == data){ \r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.hideElem) ($$(\"webix__none-content\"));\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.removeElem) ($$(\"webix__null-content\"));\r\n\r\n                        if (content[el].type == \"dbtable\"){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem) ($$(\"tables\"));\r\n                            (0,_blocks_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_0__.getInfoTable) (\"table\", data);\r\n                            \r\n                        } else if (content[el].type == \"tform\"){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem) ($$(\"forms\"));\r\n                            (0,_blocks_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_0__.getInfoTable) (\"table-view\", data);\r\n\r\n                        } else if (content[el].type == \"dashboard\"){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.showElem) ($$(\"dashboards\"));\r\n                            (0,_blocks_getContent_getInfoDashboard_js__WEBPACK_IMPORTED_MODULE_1__.getInfoDashboard)(data);\r\n                            \r\n                        }\r\n    \r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,logNameFile,\"generateItem\");\r\n            }\r\n        }\r\n\r\n        generateItem ();\r\n        \r\n    }\r\n    getSingleTreeItem() ;\r\n\r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/onBeforeSelect.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/onItemClick.js":
/*!******************************************************!*\
  !*** ./src/js/components/treeSidabar/onItemClick.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onItemClickFunc\": () => (/* binding */ onItemClickFunc)\n/* harmony export */ });\n/* harmony import */ var _blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/tableEditForm/validation.js */ \"./src/js/blocks/tableEditForm/validation.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => onItemClick\";\r\n\r\nfunction onItemClickFunc(id){\r\n    function getItemId (){\r\n        let idTable;\r\n     \r\n        if ($$(\"tables\").isVisible()){\r\n            idTable = $$(\"table\").config.idTable;\r\n\r\n        } else if ($$(\"forms\").isVisible()){\r\n\r\n            idTable = $$(\"table-view\").config.idTable;\r\n        }\r\n        return idTable;\r\n    }\r\n    const prop       = $$(\"editTableFormProperty\");\r\n    const valuesProp = prop.getValues();\r\n    const currId     = getItemId ();\r\n\r\n\r\n    function setDirtyProperty (){\r\n        try{\r\n            prop.config.dirty = false;\r\n            prop.refresh();\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,logNameFile,\"setDirtyProperty\");\r\n        }\r\n    }\r\n\r\n    function setDefaultStateProperty (){\r\n        try{\r\n            if (prop && prop.isVisible()){\r\n                prop.clear();\r\n                prop.hide();\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,logNameFile,\"setDirtyProperty\");\r\n        }\r\n    }\r\n\r\n    function setDefaultStateBtns (){\r\n        try{\r\n            const saveNewBtn = $$(\"table-saveNewBtn\");\r\n            const saveBtn    = $$(\"table-saveBtn\");\r\n            const delBtn     = $$(\"table-delBtnId\");\r\n     \r\n            if (saveNewBtn.isVisible()) {\r\n                saveNewBtn.hide();\r\n\r\n            } else if (saveBtn.isVisible()){\r\n                saveBtn.hide();\r\n            }\r\n\r\n            delBtn.disable();\r\n\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,logNameFile,\"setDefaultStateBtns\");\r\n        }\r\n    }\r\n\r\n    function validateError (){\r\n        try{\r\n            (0,_blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_0__.validateProfForm) ().forEach(function(el,i){\r\n                let nameEl;\r\n\r\n                $$(\"table\").getColumns().forEach(function(col,i){\r\n                    if (col.id == el.nameCol){\r\n                        nameEl = col.label;\r\n                    }\r\n                });\r\n\r\n                (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\"error\",el.textError+\" (Поле: \"+nameEl+\")\");\r\n            });\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,logNameFile,\"validateError\");\r\n        }\r\n    }\r\n\r\n    function uniqueData (itemData){\r\n        let validateData = {};\r\n\r\n        function compareVals (i){\r\n            try{\r\n                let oldValues       = $$(\"table\").getItem(itemData.id);\r\n                let oldValueKeys    = Object.keys  (oldValues);\r\n\r\n                let newValKey       = Object.keys  (itemData)[i];\r\n                let newVal          = Object.values(itemData)[i];\r\n                \r\n                oldValueKeys.forEach(function(oldValKey){\r\n                    \r\n                    if (oldValKey == newValKey){\r\n\r\n                        if (oldValues[oldValKey]  !== newVal){\r\n                            validateData[newValKey] = newVal;\r\n                        } \r\n                        \r\n                    }\r\n                }); \r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err,logNameFile,\"compareVals\");\r\n            }\r\n        }\r\n\r\n        Object.values(itemData).forEach(function(el,i){         \r\n            compareVals (i);\r\n        });\r\n\r\n        return validateData;\r\n    }\r\n\r\n    function selectTree(id){\r\n        const tree = $$(\"tree\");\r\n        if (tree){\r\n            tree.select(id);\r\n        }\r\n    }\r\n\r\n    function postNewData (){\r\n        if (!((0,_blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_0__.validateProfForm)().length)){\r\n            const url       = \"/init/default/api/\"+currId;\r\n            const postData  = webix.ajax().post(url, valuesProp);\r\n\r\n            postData.then(function(data){\r\n                data = data.json();\r\n                if (data.content.id !== null){\r\n                    setDirtyProperty ();\r\n                    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.removeElem) ($$(\"propertyRefbtnsContainer\"));\r\n                    selectTree(id);\r\n                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\"success\",\"Данные успешно добавлены\",currId);\r\n                } else {\r\n\r\n                    const errs   = data.content.errors;\r\n                    let msg      = \"\";\r\n                    Object.values(errs).forEach(function(err,i){\r\n                        msg +=err+\" (Поле: \"+Object.keys(errs)[i] +\"); \";\r\n                    });\r\n\r\n                    (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\"error\",msg);\r\n                }\r\n\r\n                if(data.err_type !== \"i\"){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(data.err,\"sidebar\",\"onItemClick => postNewData\");\r\n                }\r\n            });\r\n\r\n            postData.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setAjaxError)(err, \"sidebar\",\"onItemClick => postNewData\");\r\n            });\r\n\r\n        } else {\r\n            validateError ();\r\n        }\r\n    }\r\n\r\n    function putData (){\r\n        if (!((0,_blocks_tableEditForm_validation_js__WEBPACK_IMPORTED_MODULE_0__.validateProfForm)().length)){\r\n\r\n            if (valuesProp.id){\r\n                const url= \"/init/default/api/\"+currId+\"/\"+valuesProp.id;\r\n                const putValue = uniqueData (valuesProp);\r\n                const putData = webix.ajax().put(url, putValue);\r\n\r\n                putData.then(function(data){\r\n                    data = data.json()\r\n                \r\n                    if (data.err_type == \"i\"){\r\n                        setDirtyProperty ();\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.removeElem) ($$(\"propertyRefbtnsContainer\"));\r\n                        selectTree(id);\r\n                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\"success\",\"Данные успешно добавлены\",currId);\r\n                \r\n                    } else {\r\n                        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(data.err,\"sidebar\",\"onItemClick => putData\")\r\n                    }\r\n                });\r\n\r\n                putData.fail(function(err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setAjaxError)(err, \"sidebar\",\"onItemClick => putData\");\r\n                });\r\n\r\n            }\r\n\r\n        } else {\r\n            validateError ();\r\n        }\r\n    }\r\n\r\n\r\n    function modalBoxTree (){\r\n        const saveBtn    = $$(\"table-saveBtn\");\r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_1__.modalBox)().then(function(result){\r\n            if (result == 1){\r\n\r\n                setDefaultStateBtns ();\r\n                setDefaultStateProperty ();\r\n                setDirtyProperty ();\r\n\r\n                $$(\"tree\").select(id);\r\n            } else if (result == 2){\r\n\r\n                if (saveBtn.isVisible()){\r\n                    putData ();\r\n              \r\n                } else {\r\n                    postNewData ();  \r\n                }\r\n                setDirtyProperty ();\r\n            }\r\n\r\n            if (result == 1 || result == 2){\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.removeElem) ($$(\"propertyRefbtnsContainer\"));\r\n            }\r\n\r\n        });\r\n    }\r\n    if(prop.config.dirty){\r\n        modalBoxTree ();\r\n        return false;\r\n    }\r\n    \r\n    setDefaultStateBtns ();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/onItemClick.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/onSelectChange.js":
/*!*********************************************************!*\
  !*** ./src/js/components/treeSidabar/onSelectChange.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onSelectChangeFunc\": () => (/* binding */ onSelectChangeFunc)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_getContent_getInfoTable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/getContent/getInfoTable.js */ \"./src/js/blocks/getContent/getInfoTable.js\");\n/* harmony import */ var _blocks_getContent_getInfoDashboard_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/getContent/getInfoDashboard.js */ \"./src/js/blocks/getContent/getInfoDashboard.js\");\n/* harmony import */ var _blocks_tableEditForm_states_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/tableEditForm/states.js */ \"./src/js/blocks/tableEditForm/states.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common.js */ \"./src/js/components/treeSidabar/common.js\");\n \r\n//import {getInfoTable,getInfoDashboard}              from \"../../blocks/content.js\";\r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => onSelectChange\";\r\n\r\nfunction onSelectChangeFunc(ids){\r\n    const tree          = $$(\"tree\");\r\n    const treeItemId    = tree.getSelectedItem().id;\r\n    const getItemParent = tree.getParentId(treeItemId);\r\n    const treeArray     = tree.data.order;\r\n    let parentsArray    = [];\r\n\r\n    function setWidthEditForm(){\r\n        try{\r\n            const editForm = $$(\"table-editForm\");\r\n      \r\n            if (editForm && editForm.config.width < 320){\r\n                editForm.config.width = 320;\r\n                editForm.refresh();\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setWidthEditForm\");\r\n        }\r\n    }\r\n\r\n    function hideTreeTempl(){\r\n        try{\r\n            let elem = $$(\"treeTempl\");\r\n            if(elem && !($$(ids)) ){\r\n                elem.hide();\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"hideTreeTempl\");\r\n        }\r\n    }\r\n\r\n\r\n    function getTreeParents(){\r\n        let parents = [];\r\n        try{\r\n            treeArray.forEach(function(el,i){\r\n                if (tree.getParentId(el) == 0){\r\n                    parents.push(el);\r\n                }\r\n            });\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"getTreeParents\");\r\n        }\r\n        return parents;\r\n    }\r\n\r\n    function hideNoneContent(){\r\n        try{\r\n            if (ids[0] && getItemParent!==0){\r\n                (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"webix__none-content\"));\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"hideNoneContent\");\r\n        }\r\n    }\r\n \r\n    function setTableName (id){\r\n        try{\r\n           \r\n            const tableHeadline = $$(\"table-templateHeadline\");\r\n            const tableViewHeadline = $$(\"table-view-templateHeadline\");\r\n       \r\n            if (tableHeadline){\r\n                _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_5__.STORAGE.tableNames.forEach(function(el,i){\r\n                    if (el.id == id){\r\n                        tableHeadline.setValues(el.name);\r\n                    }\r\n                });\r\n            } \r\n            \r\n            if (tableViewHeadline){\r\n                _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_5__.STORAGE.tableNames.forEach(function(el,i){\r\n                    if (el.id == id){\r\n                        tableViewHeadline.setValues(el.name);\r\n                    }\r\n                    \r\n                });\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"setTableName\");\r\n        }\r\n    }\r\n\r\n    function setSearchInputState(){\r\n        const headerChilds = $$(\"header\").getChildViews();\r\n\r\n        headerChilds.forEach(function(el){\r\n            if (el.config.id.includes(\"search\")){\r\n                el.show();\r\n            }\r\n        });\r\n    }\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.removeElem)  ($$(\"propertyRefbtnsContainer\"));\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem)    ($$(\"tablePropBtnsSpace\"));\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem)    ($$(\"editTableFormProperty\"));\r\n    \r\n    setSearchInputState();\r\n    \r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem)    ($$(\"filterTableBarContainer\"));\r\n\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem)    ($$(\"filterEmptyTempalte\"));\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem)    ($$(\"EditEmptyTempalte\"));\r\n\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.disableElem) ($$(\"btnFilterSubmit\"));\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.disableElem) ($$(\"filterLibrarySaveBtn\"));\r\n    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.disableElem) ($$(\"resetFilterBtn\"));\r\n    \r\n    setWidthEditForm  ();\r\n    \r\n    (0,_common_js__WEBPACK_IMPORTED_MODULE_6__.setStateFilterBtn) ();\r\n    \r\n    hideTreeTempl     ();\r\n\r\n    hideNoneContent   ();\r\n\r\n    function visibleTreeItem(idsUndefined){\r\n\r\n        async function findSingleEl () {\r\n            let single;\r\n            if (!_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_5__.STORAGE.fields){\r\n                await (0,_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_5__.getData)(\"fields\"); \r\n            }\r\n\r\n            if (_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_5__.STORAGE.fields){\r\n                let storageData = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_5__.STORAGE.fields.content;\r\n                single = false;\r\n                    if (storageData[idsUndefined]){\r\n                      \r\n                        single = true;\r\n                        if        (storageData[idsUndefined].type == \"dbtable\"  ){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem) ($$(\"tables\"));\r\n\r\n                        } else if (storageData[idsUndefined].type == \"tform\"    ){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem) ($$(\"forms\"));\r\n\r\n                        } else if (storageData[idsUndefined].type == \"dashboard\"){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.showElem) ($$(\"dashboards\"));\r\n                        }\r\n\r\n                        setTableName (idsUndefined);\r\n                    }\r\n           \r\n            }\r\n\r\n            return single;\r\n\r\n        }\r\n\r\n        function removeNullContent(){\r\n            try{\r\n                let viewEl  = $$(\"webix__null-content\");\r\n                \r\n                if(viewEl){\r\n                    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.removeElem) (viewEl);\r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"removeNullContent\");\r\n            }\r\n        }  \r\n\r\n    \r\n        removeNullContent();\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"user_auth\"));\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"userprefs\"));\r\n\r\n\r\n        function createUndefinedMsg(){\r\n            $$(\"container\").addView(\r\n            {\r\n                view:\"align\", \r\n                align:\"middle,center\",\r\n                id:\"webix__null-content\",\r\n                body:{  \r\n                    borderless:true, \r\n                    template:\"Блок в процессе разработки\", \r\n                    height:50, \r\n                    width:220,\r\n                    css:{\"color\":\"#858585\",\"font-size\":\"14px!important\"}\r\n                }\r\n                \r\n            },\r\n            \r\n            2);\r\n        }\r\n        \r\n        \r\n        function initUndefinedElement(){\r\n\r\n            findSingleEl().then(function(response) {\r\n                if (!response){\r\n         \r\n                    (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"webix__none-content\"));\r\n                     \r\n                    if(!($$(\"webix__null-content\"))){\r\n                        createUndefinedMsg();\r\n                    } \r\n                }\r\n            });\r\n        }\r\n\r\n        parentsArray = getTreeParents();\r\n\r\n        function viewSingleElements(){\r\n            parentsArray.forEach(function(el,i){\r\n                let singleAction = $$(\"tree\").getItem(idsUndefined).action; //dashboard\r\n                let treeItemAct  = $$(\"tree\").getItem(el).action;\r\n                if (idsUndefined){\r\n                    initUndefinedElement();\r\n                } \r\n  \r\n                if (singleAction !== treeItemAct && treeItemAct){\r\n                    if (treeItemAct == \"dbtable\" || treeItemAct == \"all_dbtable\"){\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"tables\"));\r\n                    } else if (treeItemAct == \"tform\" || treeItemAct == \"all_tform\"){\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"forms\"));\r\n                    } else if (treeItemAct == \"dashboard\" || getItemParent !== \"dashboards\"){\r\n                        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"dashboards\"));\r\n                    }\r\n                }\r\n                            \r\n            }); \r\n        }\r\n\r\n        function viewDefaultElements(){\r\n            try{\r\n                parentsArray.forEach(function(el,i){\r\n\r\n                    if (el == getItemParent){\r\n                       \r\n                        if ($$(el)){\r\n                            $$(el).show();\r\n\r\n                        } else {\r\n                            if(!($$(\"webix__null-content\"))){\r\n                                createUndefinedMsg();\r\n                            } \r\n                        }\r\n                    } else if ($$(el) || el==\"treeTempl\"){\r\n                        \r\n                        if ($$(el)){\r\n                            $$(el).hide();\r\n                        }\r\n                        \r\n                    } else {\r\n                   \r\n                        const treeItemAct  = $$(\"tree\").getItem(el).action;\r\n                       \r\n                        if (treeItemAct == \"dbtable\" && getItemParent !== \"tables\"){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"tables\"));\r\n                        } else if (treeItemAct == \"tform\" && getItemParent !== \"forms\"){\r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"forms\"));\r\n                        } else if (treeItemAct == \"dashboard\" && getItemParent !== \"dashboards\"){\r\n                           \r\n                            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"dashboards\"));\r\n                        }\r\n                    }     \r\n                    \r\n                }); \r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"viewDefaultElements\");\r\n            }\r\n        }\r\n\r\n        if(idsUndefined !== undefined){\r\n            viewSingleElements();\r\n\r\n        } else {\r\n            viewDefaultElements();\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    function selectItemAction(){\r\n\r\n        if (       getItemParent == \"tables\"    ){\r\n            visibleTreeItem();\r\n\r\n        } else if( getItemParent == \"dashboards\"){\r\n            visibleTreeItem(); \r\n\r\n        } else if( getItemParent == \"forms\"     ){\r\n            (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.hideElem) ($$(\"propTableView\"));\r\n            visibleTreeItem();\r\n\r\n        } else if ( getItemParent == 0           && \r\n                    treeItemId   !==\"tables\"     && \r\n                    treeItemId   !==\"user_auth\"  && \r\n                    treeItemId   !==\"dashboards\" && \r\n                    treeItemId   !==\"forms\"      ){\r\n      \r\n            visibleTreeItem(ids[0]); \r\n          \r\n        } else if (getItemParent !==0){\r\n            visibleTreeItem(ids[0]); \r\n        }\r\n    }\r\n\r\n\r\n    function getInfoSelectElement (){\r\n        if (       getItemParent   == \"tables\"     ){\r\n            (0,_blocks_tableEditForm_states_js__WEBPACK_IMPORTED_MODULE_3__.defaultStateForm)();\r\n          //  getInfoTable (\"table\", ids[0]);\r\n            setTableName (treeItemId); \r\n\r\n        } else if (getItemParent   == \"dashboards\" ){\r\n            (0,_blocks_getContent_getInfoDashboard_js__WEBPACK_IMPORTED_MODULE_2__.getInfoDashboard) ();\r\n\r\n        } else if (getItemParent   == \"forms\"      ){\r\n          //  getInfoTable (\"table-view\", ids[0]);\r\n            setTableName (treeItemId);\r\n\r\n        }\r\n    }\r\n\r\n    selectItemAction     ();\r\n    getInfoSelectElement ();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/onSelectChange.js?");

/***/ }),

/***/ "./src/js/components/userprefs.js":
/*!****************************************!*\
  !*** ./src/js/components/userprefs.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"userprefsLayout\": () => (/* binding */ userprefsLayout)\n/* harmony export */ });\n/* harmony import */ var _blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/logBlock.js */ \"./src/js/blocks/logBlock.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\n\r\nlet defaultValue = {\r\n    userprefsOther    :{},\r\n    userprefsWorkspace:{},\r\n};\r\n\r\nfunction saveSettings (){\r\n    const tabbarVal = $$(\"userprefsTabbar\").getValue()+\"Form\" ;\r\n    const form = $$(tabbarVal);\r\n    \r\n    function getUserprefsData(){\r\n\r\n        const getData =  webix.ajax().get(\"/init/default/api/userprefs/\");\r\n     \r\n        getData.then(function(data){\r\n            data = data.json().content;\r\n\r\n            if (data.err_type == \"e\"){\r\n                (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",data.error);\r\n            }\r\n\r\n            let settingExists = false;\r\n\r\n            const values = form.getValues();\r\n\r\n            const sentObj = {\r\n                name :tabbarVal,\r\n                prefs:values,\r\n            };\r\n\r\n            function putPrefs(el){\r\n                const url     = \"/init/default/api/userprefs/\"+el.id;\r\n                const putData = webix.ajax().put(url, sentObj);\r\n\r\n                putData.then(function(data){\r\n                    data = data.json();\r\n                    if (data.err_type == \"i\"){\r\n                        (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_1__.setStorageData) (tabbarVal, JSON.stringify(form.getValues()));\r\n                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Настройки сохранены\");\r\n\r\n                    } if (data.err_type == \"e\"){\r\n                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",data.error);\r\n                    }\r\n\r\n                    const name         = $$(\"userprefsTabbar\").getValue();\r\n                    defaultValue[name] = values;\r\n\r\n                    form.setDirty(false);\r\n                });\r\n\r\n                putData.fail(function(err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"userprefs\",\"putPrefs\");\r\n                });\r\n            }\r\n     \r\n            function findExistsData(){\r\n                try{\r\n                    data.forEach(function(el,i){\r\n                       \r\n                        if (el.name == tabbarVal){\r\n                            settingExists = true;\r\n                            putPrefs(el);\r\n                        } \r\n                    });\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"findExistsData\");\r\n                }\r\n            }\r\n\r\n            findExistsData();\r\n\r\n\r\n            function getOwnerData(){\r\n                const getData = webix.ajax(\"/init/default/api/whoami\");\r\n                getData.then(function(data){\r\n                    data = data.json().content;\r\n                    sentObj.owner = data.id;\r\n\r\n                    const userData = {};\r\n\r\n                    userData.id       = data.id;\r\n                    userData.name     = data.first_name;\r\n                    userData.username = data.username;\r\n                    \r\n                    (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_1__.setStorageData)(\"user\", JSON.stringify(userData));\r\n                });\r\n\r\n                getData.fail(function(err){  \r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"userprefs\",\"getOwnerData\");\r\n                });\r\n            }\r\n\r\n            function postPrefs(){\r\n       \r\n                const url      = \"/init/default/api/userprefs/\";\r\n  \r\n                const postData = webix.ajax().post(url,sentObj);\r\n \r\n                postData.then(function(data){\r\n                    data = data.json();\r\n\r\n                    if (data.err_type == \"i\"){\r\n                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Настройки сохранены\");\r\n\r\n                    } else if (data.err_type == \"e\"){\r\n                        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",data.error);\r\n                    }\r\n\r\n                    const tabbarVal         = $$(\"userprefsTabbar\").getValue();\r\n                    defaultValue[tabbarVal] = values;\r\n\r\n                    form.setDirty(false);\r\n                });\r\n\r\n                postData.fail(function(err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"userprefs\",\"postPrefs\");\r\n                });\r\n            }\r\n\r\n          \r\n            if (!settingExists){\r\n                \r\n                const ownerId = webix.storage.local.get(\"user\").id;\r\n     \r\n                if (ownerId){\r\n                    sentObj.owner = ownerId;\r\n                } else {\r\n                    getOwnerData();\r\n                }\r\n       \r\n                postPrefs();\r\n            }\r\n\r\n        });\r\n        getData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, \"userprefs\",\"getUserprefsData\");\r\n        });\r\n    }\r\n\r\n    if ( form.isDirty() ){\r\n        getUserprefsData();\r\n    } else {\r\n        (0,_blocks_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"debug\",\"Сохранять нечего\");\r\n    }\r\n}\r\n\r\n\r\nconst autorefRadio   = {\r\n    view            : \"radio\",\r\n    labelPosition   : \"top\", \r\n    label           : \"Автообновление специфичных страниц\", \r\n    value           : 1,\r\n    name            : \"autorefOpt\", \r\n    options         : [\r\n        {\"id\" : 1, \"value\" : \"Включено\"},\r\n        {\"id\" : 2, \"value\" : \"Выключено\"}\r\n    ],\r\n    on:{\r\n        onChange:function(newValue, oldValue,config){\r\n            try{\r\n                const counter = $$(\"userprefsAutorefCounter\");\r\n                if (newValue == 1 && !(counter.isVisible()) ){\r\n                    counter.show();\r\n                }\r\n\r\n                if (newValue == 2 &&  counter.isVisible()   ){\r\n                    counter.hide();\r\n                }\r\n        \r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"autorefRadio => onChange\");\r\n            }\r\n         \r\n        }\r\n    }\r\n};\r\n\r\nconst autorefCounter = {   \r\n    view            : \"counter\", \r\n    id              : \"userprefsAutorefCounter\",\r\n    labelPosition   : \"top\",\r\n    name            : \"autorefCounterOpt\", \r\n    label           : \"Интервал автообновления (в миллисекундах)\" ,\r\n    min             : 15000, \r\n    max             : 900000,\r\n    on              : {\r\n        onChange:function(newValue, oldValue, config){\r\n            function createMsg (textMsg){\r\n                return webix.message({\r\n                    type:\"debug\",\r\n                    expire:1000, \r\n                    text:textMsg\r\n                });\r\n            }\r\n\r\n            try{\r\n                const counter = $$(\"userprefsAutorefCounter\");\r\n                const minVal  = counter.config.min;\r\n                const maxVal  = counter.config.max;\r\n                \r\n                if (newValue == minVal){\r\n                    createMsg (\"Минимально возможное значение\");\r\n\r\n                } else if (newValue == maxVal){\r\n                    createMsg (\"Максимально возможное значение\");\r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"autorefCounter => onChange\");\r\n            }\r\n\r\n\r\n\r\n        }\r\n    }\r\n};\r\n\r\nconst visibleIdRadio = {\r\n    view            : \"radio\",\r\n    labelPosition   : \"top\", \r\n    label           : \"ID в таблицах\", \r\n    value           : 1,\r\n    name            : \"visibleIdOpt\", \r\n    options         : [\r\n        {\"id\" : 1, \"value\" : \"Показывать\"   },\r\n        {\"id\" : 2, \"value\" : \"Не показывать\"}\r\n    ],\r\n};\r\n\r\nconst otherForm =  {    \r\n    view        : \"form\", \r\n    id          : \"userprefsOtherForm\",\r\n    borderless  : true,\r\n    elements    : [\r\n        autorefRadio,\r\n        {height:5},\r\n        autorefCounter,\r\n        {height:5},\r\n        visibleIdRadio,\r\n        {}\r\n    ],\r\n    on:{\r\n        onChange:function(){\r\n            const saveBtn  = $$(\"userprefsSaveBtn\");\r\n            const resetBtn = $$(\"userprefsResetBtn\");\r\n            const form     = $$(\"userprefsOtherForm\");\r\n\r\n            function setSaveBtnState(){\r\n                try{\r\n                    if ( form.isDirty() && !(saveBtn.isEnabled()) ){\r\n                        saveBtn.enable();\r\n                    } else if (!(form.isDirty())){\r\n                        saveBtn.disable();\r\n                    }\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"otherForm => onChange setSaveBtnState\");\r\n                }\r\n            }\r\n\r\n            \r\n            function setResetBtnState(){\r\n                try{\r\n                    if ( form.isDirty() && !(resetBtn.isEnabled()) ){\r\n                        resetBtn.enable();\r\n                    } else if ( !(form.isDirty()) ){\r\n                        resetBtn.disable();\r\n                    }  \r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"otherForm => onChange setResetBtnState\");\r\n                }\r\n            }\r\n            \r\n            setSaveBtnState ();\r\n            setResetBtnState();\r\n         \r\n        }\r\n    }\r\n};\r\n\r\nconst userprefsOther = {\r\n    view      : \"scrollview\",\r\n    borderless: true, \r\n    css       : \"webix_multivew-cell\",\r\n    id        : \"userprefsOther\", \r\n    scroll    : \"y\", \r\n    body      : otherForm\r\n};\r\n\r\nconst logBlockRadio = {\r\n    view         : \"radio\",\r\n    labelPosition: \"top\",\r\n    name         : \"logBlockOpt\", \r\n    label        : \"Отображение блока системных сообщений\", \r\n    value        : 1, \r\n    options      : [\r\n        {\"id\" : 1, \"value\" : \"Показать\"}, \r\n        {\"id\" : 2, \"value\" : \"Скрыть\"  }\r\n    ],\r\n    on:{\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Показать/скрыть по умолчанию блок системных сообщений\");\r\n        },\r\n\r\n        onChange:function(newValue, oldValue){\r\n            try{\r\n                const btn = $$(\"webix_log-btn\");\r\n\r\n                if (newValue !== oldValue){\r\n             \r\n                    if (newValue == 1){\r\n                        btn.setValue(2);\r\n                    } else {\r\n                        btn.setValue(1);\r\n                    }\r\n                \r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"logBlockRadio => onChange\");\r\n            }\r\n \r\n        }\r\n    }\r\n};\r\n\r\nconst loginActionSelect = {   \r\n    view         : \"select\", \r\n    name         : \"LoginActionOpt\",\r\n    label        : \"Действие после входа в систему\", \r\n    labelPosition: \"top\",\r\n    value        : 2, \r\n    options      : [\r\n    { \"id\" : 1, \"value\" : \"Перейти на главную страницу\"            },\r\n    { \"id\" : 2, \"value\" : \"Перейти на последнюю открытую страницу\" },\r\n    ],\r\n    on:{\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Показывать/не показывать всплывающее окно при загрузке приложения\");\r\n        },\r\n\r\n    }\r\n};\r\n\r\nconst workspaceForm =  {    \r\n    view      : \"form\", \r\n    id        : \"userprefsWorkspaceForm\",\r\n    borderless: true,\r\n    elements  : [\r\n        { cols:[\r\n            { rows:[  \r\n                logBlockRadio,\r\n                {height:15},\r\n                \r\n                {cols:[\r\n                    loginActionSelect,\r\n                    {}\r\n                ]}\r\n\r\n            ]},\r\n        ]},\r\n\r\n    ],\r\n\r\n    on        :{\r\n        onChange:function(){\r\n            const form     = $$(\"userprefsWorkspaceForm\");\r\n            const saveBtn  = $$(\"userprefsSaveBtn\");\r\n            const resetBtn = $$(\"userprefsResetBtn\");\r\n\r\n            function setSaveBtnState(){\r\n                try{\r\n                    if ( form.isDirty() && !(saveBtn.isEnabled()) ){\r\n                        saveBtn.enable();\r\n                    } else if ( !(form.isDirty()) ){\r\n                        saveBtn.disable();\r\n                    }\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"workspaceForm => setSaveBtnState\");\r\n                }\r\n            }\r\n\r\n            function setResetBtnState(){\r\n                try{\r\n                    if ( form.isDirty() && !(resetBtn.isEnabled()) ){\r\n                        resetBtn.enable();\r\n                    } else if ( !(form.isDirty()) ){\r\n                        resetBtn.disable();\r\n                    }  \r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"workspaceForm => setResetBtnState\");\r\n                }\r\n            }\r\n      \r\n            setSaveBtnState ();\r\n            setResetBtnState();\r\n        }\r\n    }\r\n};\r\n\r\nconst userprefsWorkspace = {\r\n    view      : \"scrollview\",\r\n    borderless: true, \r\n    css       : \"webix_multivew-cell\",\r\n    id        : \"userprefsWorkspace\",\r\n    scroll    : \"y\", \r\n    body      : workspaceForm\r\n};\r\n\r\n\r\nconst userprefsConfirmBtns =  { \r\n    id:\"a1\", \r\n    rows:[\r\n        {   responsive : \"a1\",\r\n            cols:[\r\n        \r\n            {   view    : \"button\", \r\n            \r\n                height  : 48,\r\n                minWidth: 200,\r\n                value   : \"Сбросить\" ,\r\n                id      : \"userprefsResetBtn\",\r\n                disabled: true,\r\n            },\r\n\r\n            {   view    : \"button\", \r\n                value   : \"Сохранить настройки\" ,\r\n                height  : 48, \r\n                minWidth: 200,\r\n                id      : \"userprefsSaveBtn\",\r\n                css     : \"webix_primary\",\r\n                disabled: true,\r\n                click   : saveSettings,\r\n            },\r\n        ]}\r\n    ]\r\n};\r\n\r\nfunction createHeadlineSpan(headMsg){\r\n    return `<span class='webix_tabbar-filter-headline'>${headMsg}</span>`;\r\n}\r\n\r\nconst tabbar = {   \r\n    view     : \"tabbar\",  \r\n    type     : \"top\", \r\n    id       : \"userprefsTabbar\",\r\n    css      : \"webix_filter-popup-tabbar\",\r\n    multiview: true, \r\n    height   : 50,\r\n    options  : [\r\n        {   value: createHeadlineSpan(\"Рабочее пространство\"), \r\n            id   : 'userprefsWorkspace' \r\n        },\r\n        {   value: createHeadlineSpan(\"Другое\"), \r\n            id   : 'userprefsOther' \r\n        },\r\n    ],\r\n\r\n    on       :{\r\n        onBeforeTabClick:function(id){\r\n            const tabbarVal = $$(\"userprefsTabbar\").getValue()+\"Form\";\r\n            const form      = $$(tabbarVal);\r\n\r\n            function disableBtn(btn){\r\n                try{\r\n                    if (btn.isEnabled()){\r\n                        btn.disable();\r\n                    }   \r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"tabbar => onBeforeTabClick\");\r\n                }\r\n            }\r\n\r\n            function createModalBox(){\r\n                try{\r\n                    webix.modalbox({\r\n                        title   :\"Данные не сохранены\",\r\n                        css     :\"webix_modal-custom-save\",\r\n                        buttons :[\"Отмена\", \"Не сохранять\", \"Сохранить\"],\r\n                        width   :500,\r\n                        text    :\"Выберите действие перед тем как продолжить\"\r\n                    }).then(function(result){\r\n\r\n                        if ( result == 1){\r\n                            \r\n                            const storageData = webix.storage.local.get(tabbarVal);\r\n                            const saveBtn     = $$(\"userprefsSaveBtn\");\r\n                            const resetBtn    = $$(\"userprefsResetBtn\");\r\n                            const tabbar      = $$(\"userprefsTabbar\");\r\n\r\n                            form.setValues(storageData);\r\n\r\n                            tabbar.setValue(id);\r\n\r\n                            disableBtn(saveBtn);\r\n                            disableBtn(resetBtn);\r\n\r\n                        } else if ( result == 2){\r\n                            saveSettings ();\r\n                            tabbar.setValue(id);\r\n                        }\r\n                    });\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,\"userprefs\",\"tabbar => createModalBox\");\r\n                }\r\n            }\r\n\r\n\r\n            if (form.isDirty()){\r\n                createModalBox();\r\n                return false;\r\n            }\r\n\r\n        }\r\n    }\r\n};\r\n\r\nconst userprefsTabbar =  {\r\n    rows:[\r\n        tabbar,\r\n        {\r\n            cells:[\r\n                userprefsWorkspace,\r\n                userprefsOther\r\n            ]\r\n        },\r\n        userprefsConfirmBtns\r\n    ]\r\n};\r\n\r\n\r\nconst headline = {   \r\n    view:\"template\",\r\n    template:\"<div>Настройки</div>\",\r\n    css:\"webix_headline-userprefs\",\r\n    height:35, \r\n    borderless:true,\r\n};\r\n\r\n\r\nconst userInfo =  {   \r\n    view        : \"template\",\r\n    id          : \"userprefsName\",\r\n    css         : \"webix_userprefs-info\",\r\n    height      : 50, \r\n    borderless  : true,\r\n\r\n    template    : function(){\r\n        function createDivData(msg){\r\n            return `\r\n            <div style = '\r\n                display:inline-block;\r\n                color:var(--primary);\r\n                font-size:13px!important;\r\n                font-weight:600\r\n            '>Имя пользователя:</div>\r\n\r\n            <div style = '\r\n                display:inline-block;\r\n                font-size:13px!important;\r\n                font-weight:600\r\n            '>${msg}</div>`;\r\n        }\r\n\r\n        const val       = $$(\"userprefsName\").getValues();\r\n        const lenghtVal = Object.keys(val).length;\r\n\r\n        if (lenghtVal !==0){\r\n            return createDivData(val); \r\n        } else {\r\n            return createDivData(\"не указано\");        \r\n        }\r\n    },\r\n};\r\n\r\nconst userprefsHeadline =  [ \r\n    headline,\r\n    userInfo,\r\n];\r\n\r\n\r\nconst userprefsLayout = {\r\n\r\n    rows:[\r\n        {   padding:{\r\n                top     :15, \r\n                bottom  :0, \r\n                left    :20, \r\n                right   :0\r\n            },\r\n            rows:userprefsHeadline,\r\n        },\r\n        userprefsTabbar,\r\n    ]\r\n\r\n   \r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/userprefs.js?");

/***/ }),

/***/ "./src/js/expalib.js":
/*!***************************!*\
  !*** ./src/js/expalib.js ***!
  \***************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"lib\": () => (/* binding */ lib)\n/* harmony export */ });\nfunction lib (){\r\n  \r\n    (function (global, factory) {\r\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? define('underscore', factory) :\r\n        (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (function () {\r\n          var current = global._;\r\n          var exports = global._ = factory();\r\n          exports.noConflict = function () { global._ = current; return exports; };\r\n        }()));\r\n      }(this, (function () {\r\n        //     Underscore.js 1.13.4\r\n        //     https://underscorejs.org\r\n        //     (c) 2009-2022 Jeremy Ashkenas, Julian Gonggrijp, and DocumentCloud and Investigative Reporters & Editors\r\n        //     Underscore may be freely distributed under the MIT license.\r\n      \r\n        // Current version.\r\n        var VERSION = '1.13.4';\r\n      \r\n        // Establish the root object, `window` (`self`) in the browser, `global`\r\n        // on the server, or `this` in some virtual machines. We use `self`\r\n        // instead of `window` for `WebWorker` support.\r\n        var root = (typeof self == 'object' && self.self === self && self) ||\r\n                  (typeof global == 'object' && global.global === global && global) ||\r\n                  Function('return this')() ||\r\n                  {};\r\n      \r\n        // Save bytes in the minified (but not gzipped) version:\r\n        var ArrayProto = Array.prototype, ObjProto = Object.prototype;\r\n        var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\r\n      \r\n        // Create quick reference variables for speed access to core prototypes.\r\n        var push = ArrayProto.push,\r\n            slice = ArrayProto.slice,\r\n            toString = ObjProto.toString,\r\n            hasOwnProperty = ObjProto.hasOwnProperty;\r\n      \r\n        // Modern feature detection.\r\n        var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\r\n            supportsDataView = typeof DataView !== 'undefined';\r\n      \r\n        // All **ECMAScript 5+** native function implementations that we hope to use\r\n        // are declared here.\r\n        var nativeIsArray = Array.isArray,\r\n            nativeKeys = Object.keys,\r\n            nativeCreate = Object.create,\r\n            nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\r\n      \r\n        // Create references to these builtin functions because we override them.\r\n        var _isNaN = isNaN,\r\n            _isFinite = isFinite;\r\n      \r\n        // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\r\n        var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\r\n        var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\r\n          'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\r\n      \r\n        // The largest integer that can be represented exactly.\r\n        var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n      \r\n        // Some functions take a variable number of arguments, or a few expected\r\n        // arguments at the beginning and then a variable number of values to operate\r\n        // on. This helper accumulates all remaining arguments past the function’s\r\n        // argument length (or an explicit `startIndex`), into an array that becomes\r\n        // the last argument. Similar to ES6’s \"rest parameter\".\r\n        function restArguments(func, startIndex) {\r\n          startIndex = startIndex == null ? func.length - 1 : +startIndex;\r\n          return function() {\r\n            var length = Math.max(arguments.length - startIndex, 0),\r\n                rest = Array(length),\r\n                index = 0;\r\n            for (; index < length; index++) {\r\n              rest[index] = arguments[index + startIndex];\r\n            }\r\n            switch (startIndex) {\r\n              case 0: return func.call(this, rest);\r\n              case 1: return func.call(this, arguments[0], rest);\r\n              case 2: return func.call(this, arguments[0], arguments[1], rest);\r\n            }\r\n            var args = Array(startIndex + 1);\r\n            for (index = 0; index < startIndex; index++) {\r\n              args[index] = arguments[index];\r\n            }\r\n            args[startIndex] = rest;\r\n            return func.apply(this, args);\r\n          };\r\n        }\r\n      \r\n        // Is a given variable an object?\r\n        function isObject(obj) {\r\n          var type = typeof obj;\r\n          return type === 'function' || (type === 'object' && !!obj);\r\n        }\r\n      \r\n        // Is a given value equal to null?\r\n        function isNull(obj) {\r\n          return obj === null;\r\n        }\r\n      \r\n        // Is a given variable undefined?\r\n        function isUndefined(obj) {\r\n          return obj === void 0;\r\n        }\r\n      \r\n        // Is a given value a boolean?\r\n        function isBoolean(obj) {\r\n          return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\r\n        }\r\n      \r\n        // Is a given value a DOM element?\r\n        function isElement(obj) {\r\n          return !!(obj && obj.nodeType === 1);\r\n        }\r\n      \r\n        // Internal function for creating a `toString`-based type tester.\r\n        function tagTester(name) {\r\n          var tag = '[object ' + name + ']';\r\n          return function(obj) {\r\n            return toString.call(obj) === tag;\r\n          };\r\n        }\r\n      \r\n        var isString = tagTester('String');\r\n      \r\n        var isNumber = tagTester('Number');\r\n      \r\n        var isDate = tagTester('Date');\r\n      \r\n        var isRegExp = tagTester('RegExp');\r\n      \r\n        var isError = tagTester('Error');\r\n      \r\n        var isSymbol = tagTester('Symbol');\r\n      \r\n        var isArrayBuffer = tagTester('ArrayBuffer');\r\n      \r\n        var isFunction = tagTester('Function');\r\n      \r\n        // Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\r\n        // v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\r\n        var nodelist = root.document && root.document.childNodes;\r\n        if ( true && typeof Int8Array != 'object' && typeof nodelist != 'function') {\r\n          isFunction = function(obj) {\r\n            return typeof obj == 'function' || false;\r\n          };\r\n        }\r\n      \r\n        var isFunction$1 = isFunction;\r\n      \r\n        var hasObjectTag = tagTester('Object');\r\n      \r\n        // In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\r\n        // In IE 11, the most common among them, this problem also applies to\r\n        // `Map`, `WeakMap` and `Set`.\r\n        var hasStringTagBug = (\r\n              supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\r\n            ),\r\n            isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\r\n      \r\n        var isDataView = tagTester('DataView');\r\n      \r\n        // In IE 10 - Edge 13, we need a different heuristic\r\n        // to determine whether an object is a `DataView`.\r\n        function ie10IsDataView(obj) {\r\n          return obj != null && isFunction$1(obj.getInt8) && isArrayBuffer(obj.buffer);\r\n        }\r\n      \r\n        var isDataView$1 = (hasStringTagBug ? ie10IsDataView : isDataView);\r\n      \r\n        // Is a given value an array?\r\n        // Delegates to ECMA5's native `Array.isArray`.\r\n        var isArray = nativeIsArray || tagTester('Array');\r\n      \r\n        // Internal function to check whether `key` is an own property name of `obj`.\r\n        function has$1(obj, key) {\r\n          return obj != null && hasOwnProperty.call(obj, key);\r\n        }\r\n      \r\n        var isArguments = tagTester('Arguments');\r\n      \r\n        // Define a fallback version of the method in browsers (ahem, IE < 9), where\r\n        // there isn't any inspectable \"Arguments\" type.\r\n        (function() {\r\n          if (!isArguments(arguments)) {\r\n            isArguments = function(obj) {\r\n              return has$1(obj, 'callee');\r\n            };\r\n          }\r\n        }());\r\n      \r\n        var isArguments$1 = isArguments;\r\n      \r\n        // Is a given object a finite number?\r\n        function isFinite$1(obj) {\r\n          return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\r\n        }\r\n      \r\n        // Is the given value `NaN`?\r\n        function isNaN$1(obj) {\r\n          return isNumber(obj) && _isNaN(obj);\r\n        }\r\n      \r\n        // Predicate-generating function. Often useful outside of Underscore.\r\n        function constant(value) {\r\n          return function() {\r\n            return value;\r\n          };\r\n        }\r\n      \r\n        // Common internal logic for `isArrayLike` and `isBufferLike`.\r\n        function createSizePropertyCheck(getSizeProperty) {\r\n          return function(collection) {\r\n            var sizeProperty = getSizeProperty(collection);\r\n            return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\r\n          }\r\n        }\r\n      \r\n        // Internal helper to generate a function to obtain property `key` from `obj`.\r\n        function shallowProperty(key) {\r\n          return function(obj) {\r\n            return obj == null ? void 0 : obj[key];\r\n          };\r\n        }\r\n      \r\n        // Internal helper to obtain the `byteLength` property of an object.\r\n        var getByteLength = shallowProperty('byteLength');\r\n      \r\n        // Internal helper to determine whether we should spend extensive checks against\r\n        // `ArrayBuffer` et al.\r\n        var isBufferLike = createSizePropertyCheck(getByteLength);\r\n      \r\n        // Is a given value a typed array?\r\n        var typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\r\n        function isTypedArray(obj) {\r\n          // `ArrayBuffer.isView` is the most future-proof, so use it when available.\r\n          // Otherwise, fall back on the above regular expression.\r\n          return nativeIsView ? (nativeIsView(obj) && !isDataView$1(obj)) :\r\n                        isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\r\n        }\r\n      \r\n        var isTypedArray$1 = supportsArrayBuffer ? isTypedArray : constant(false);\r\n      \r\n        // Internal helper to obtain the `length` property of an object.\r\n        var getLength = shallowProperty('length');\r\n      \r\n        // Internal helper to create a simple lookup structure.\r\n        // `collectNonEnumProps` used to depend on `_.contains`, but this led to\r\n        // circular imports. `emulatedSet` is a one-off solution that only works for\r\n        // arrays of strings.\r\n        function emulatedSet(keys) {\r\n          var hash = {};\r\n          for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\r\n          return {\r\n            contains: function(key) { return hash[key] === true; },\r\n            push: function(key) {\r\n              hash[key] = true;\r\n              return keys.push(key);\r\n            }\r\n          };\r\n        }\r\n      \r\n        // Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\r\n        // be iterated by `for key in ...` and thus missed. Extends `keys` in place if\r\n        // needed.\r\n        function collectNonEnumProps(obj, keys) {\r\n          keys = emulatedSet(keys);\r\n          var nonEnumIdx = nonEnumerableProps.length;\r\n          var constructor = obj.constructor;\r\n          var proto = (isFunction$1(constructor) && constructor.prototype) || ObjProto;\r\n      \r\n          // Constructor is a special case.\r\n          var prop = 'constructor';\r\n          if (has$1(obj, prop) && !keys.contains(prop)) keys.push(prop);\r\n      \r\n          while (nonEnumIdx--) {\r\n            prop = nonEnumerableProps[nonEnumIdx];\r\n            if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\r\n              keys.push(prop);\r\n            }\r\n          }\r\n        }\r\n      \r\n        // Retrieve the names of an object's own properties.\r\n        // Delegates to **ECMAScript 5**'s native `Object.keys`.\r\n        function keys(obj) {\r\n          if (!isObject(obj)) return [];\r\n          if (nativeKeys) return nativeKeys(obj);\r\n          var keys = [];\r\n          for (var key in obj) if (has$1(obj, key)) keys.push(key);\r\n          // Ahem, IE < 9.\r\n          if (hasEnumBug) collectNonEnumProps(obj, keys);\r\n          return keys;\r\n        }\r\n      \r\n        // Is a given array, string, or object empty?\r\n        // An \"empty\" object has no enumerable own-properties.\r\n        function isEmpty(obj) {\r\n          if (obj == null) return true;\r\n          // Skip the more expensive `toString`-based type checks if `obj` has no\r\n          // `.length`.\r\n          var length = getLength(obj);\r\n          if (typeof length == 'number' && (\r\n            isArray(obj) || isString(obj) || isArguments$1(obj)\r\n          )) return length === 0;\r\n          return getLength(keys(obj)) === 0;\r\n        }\r\n      \r\n        // Returns whether an object has a given set of `key:value` pairs.\r\n        function isMatch(object, attrs) {\r\n          var _keys = keys(attrs), length = _keys.length;\r\n          if (object == null) return !length;\r\n          var obj = Object(object);\r\n          for (var i = 0; i < length; i++) {\r\n            var key = _keys[i];\r\n            if (attrs[key] !== obj[key] || !(key in obj)) return false;\r\n          }\r\n          return true;\r\n        }\r\n      \r\n        // If Underscore is called as a function, it returns a wrapped object that can\r\n        // be used OO-style. This wrapper holds altered versions of all functions added\r\n        // through `_.mixin`. Wrapped objects may be chained.\r\n        function _$1(obj) {\r\n          if (obj instanceof _$1) return obj;\r\n          if (!(this instanceof _$1)) return new _$1(obj);\r\n          this._wrapped = obj;\r\n        }\r\n      \r\n        _$1.VERSION = VERSION;\r\n      \r\n        // Extracts the result from a wrapped and chained object.\r\n        _$1.prototype.value = function() {\r\n          return this._wrapped;\r\n        };\r\n      \r\n        // Provide unwrapping proxies for some methods used in engine operations\r\n        // such as arithmetic and JSON stringification.\r\n        _$1.prototype.valueOf = _$1.prototype.toJSON = _$1.prototype.value;\r\n      \r\n        _$1.prototype.toString = function() {\r\n          return String(this._wrapped);\r\n        };\r\n      \r\n        // Internal function to wrap or shallow-copy an ArrayBuffer,\r\n        // typed array or DataView to a new view, reusing the buffer.\r\n        function toBufferView(bufferSource) {\r\n          return new Uint8Array(\r\n            bufferSource.buffer || bufferSource,\r\n            bufferSource.byteOffset || 0,\r\n            getByteLength(bufferSource)\r\n          );\r\n        }\r\n      \r\n        // We use this string twice, so give it a name for minification.\r\n        var tagDataView = '[object DataView]';\r\n      \r\n        // Internal recursive comparison function for `_.isEqual`.\r\n        function eq(a, b, aStack, bStack) {\r\n          // Identical objects are equal. `0 === -0`, but they aren't identical.\r\n          // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\r\n          if (a === b) return a !== 0 || 1 / a === 1 / b;\r\n          // `null` or `undefined` only equal to itself (strict comparison).\r\n          if (a == null || b == null) return false;\r\n          // `NaN`s are equivalent, but non-reflexive.\r\n          if (a !== a) return b !== b;\r\n          // Exhaust primitive checks\r\n          var type = typeof a;\r\n          if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\r\n          return deepEq(a, b, aStack, bStack);\r\n        }\r\n      \r\n        // Internal recursive comparison function for `_.isEqual`.\r\n        function deepEq(a, b, aStack, bStack) {\r\n          // Unwrap any wrapped objects.\r\n          if (a instanceof _$1) a = a._wrapped;\r\n          if (b instanceof _$1) b = b._wrapped;\r\n          // Compare `[[Class]]` names.\r\n          var className = toString.call(a);\r\n          if (className !== toString.call(b)) return false;\r\n          // Work around a bug in IE 10 - Edge 13.\r\n          if (hasStringTagBug && className == '[object Object]' && isDataView$1(a)) {\r\n            if (!isDataView$1(b)) return false;\r\n            className = tagDataView;\r\n          }\r\n          switch (className) {\r\n            // These types are compared by value.\r\n            case '[object RegExp]':\r\n              // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\r\n            case '[object String]':\r\n              // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\r\n              // equivalent to `new String(\"5\")`.\r\n              return '' + a === '' + b;\r\n            case '[object Number]':\r\n              // `NaN`s are equivalent, but non-reflexive.\r\n              // Object(NaN) is equivalent to NaN.\r\n              if (+a !== +a) return +b !== +b;\r\n              // An `egal` comparison is performed for other numeric values.\r\n              return +a === 0 ? 1 / +a === 1 / b : +a === +b;\r\n            case '[object Date]':\r\n            case '[object Boolean]':\r\n              // Coerce dates and booleans to numeric primitive values. Dates are compared by their\r\n              // millisecond representations. Note that invalid dates with millisecond representations\r\n              // of `NaN` are not equivalent.\r\n              return +a === +b;\r\n            case '[object Symbol]':\r\n              return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\r\n            case '[object ArrayBuffer]':\r\n            case tagDataView:\r\n              // Coerce to typed array so we can fall through.\r\n              return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\r\n          }\r\n      \r\n          var areArrays = className === '[object Array]';\r\n          if (!areArrays && isTypedArray$1(a)) {\r\n              var byteLength = getByteLength(a);\r\n              if (byteLength !== getByteLength(b)) return false;\r\n              if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\r\n              areArrays = true;\r\n          }\r\n          if (!areArrays) {\r\n            if (typeof a != 'object' || typeof b != 'object') return false;\r\n      \r\n            // Objects with different constructors are not equivalent, but `Object`s or `Array`s\r\n            // from different frames are.\r\n            var aCtor = a.constructor, bCtor = b.constructor;\r\n            if (aCtor !== bCtor && !(isFunction$1(aCtor) && aCtor instanceof aCtor &&\r\n                                     isFunction$1(bCtor) && bCtor instanceof bCtor)\r\n                                && ('constructor' in a && 'constructor' in b)) {\r\n              return false;\r\n            }\r\n          }\r\n          // Assume equality for cyclic structures. The algorithm for detecting cyclic\r\n          // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\r\n      \r\n          // Initializing stack of traversed objects.\r\n          // It's done here since we only need them for objects and arrays comparison.\r\n          aStack = aStack || [];\r\n          bStack = bStack || [];\r\n          var length = aStack.length;\r\n          while (length--) {\r\n            // Linear search. Performance is inversely proportional to the number of\r\n            // unique nested structures.\r\n            if (aStack[length] === a) return bStack[length] === b;\r\n          }\r\n      \r\n          // Add the first object to the stack of traversed objects.\r\n          aStack.push(a);\r\n          bStack.push(b);\r\n      \r\n          // Recursively compare objects and arrays.\r\n          if (areArrays) {\r\n            // Compare array lengths to determine if a deep comparison is necessary.\r\n            length = a.length;\r\n            if (length !== b.length) return false;\r\n            // Deep compare the contents, ignoring non-numeric properties.\r\n            while (length--) {\r\n              if (!eq(a[length], b[length], aStack, bStack)) return false;\r\n            }\r\n          } else {\r\n            // Deep compare objects.\r\n            var _keys = keys(a), key;\r\n            length = _keys.length;\r\n            // Ensure that both objects contain the same number of properties before comparing deep equality.\r\n            if (keys(b).length !== length) return false;\r\n            while (length--) {\r\n              // Deep compare each member\r\n              key = _keys[length];\r\n              if (!(has$1(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\r\n            }\r\n          }\r\n          // Remove the first object from the stack of traversed objects.\r\n          aStack.pop();\r\n          bStack.pop();\r\n          return true;\r\n        }\r\n      \r\n        // Perform a deep comparison to check if two objects are equal.\r\n        function isEqual(a, b) {\r\n          return eq(a, b);\r\n        }\r\n      \r\n        // Retrieve all the enumerable property names of an object.\r\n        function allKeys(obj) {\r\n          if (!isObject(obj)) return [];\r\n          var keys = [];\r\n          for (var key in obj) keys.push(key);\r\n          // Ahem, IE < 9.\r\n          if (hasEnumBug) collectNonEnumProps(obj, keys);\r\n          return keys;\r\n        }\r\n      \r\n        // Since the regular `Object.prototype.toString` type tests don't work for\r\n        // some types in IE 11, we use a fingerprinting heuristic instead, based\r\n        // on the methods. It's not great, but it's the best we got.\r\n        // The fingerprint method lists are defined below.\r\n        function ie11fingerprint(methods) {\r\n          var length = getLength(methods);\r\n          return function(obj) {\r\n            if (obj == null) return false;\r\n            // `Map`, `WeakMap` and `Set` have no enumerable keys.\r\n            var keys = allKeys(obj);\r\n            if (getLength(keys)) return false;\r\n            for (var i = 0; i < length; i++) {\r\n              if (!isFunction$1(obj[methods[i]])) return false;\r\n            }\r\n            // If we are testing against `WeakMap`, we need to ensure that\r\n            // `obj` doesn't have a `forEach` method in order to distinguish\r\n            // it from a regular `Map`.\r\n            return methods !== weakMapMethods || !isFunction$1(obj[forEachName]);\r\n          };\r\n        }\r\n      \r\n        // In the interest of compact minification, we write\r\n        // each string in the fingerprints only once.\r\n        var forEachName = 'forEach',\r\n            hasName = 'has',\r\n            commonInit = ['clear', 'delete'],\r\n            mapTail = ['get', hasName, 'set'];\r\n      \r\n        // `Map`, `WeakMap` and `Set` each have slightly different\r\n        // combinations of the above sublists.\r\n        var mapMethods = commonInit.concat(forEachName, mapTail),\r\n            weakMapMethods = commonInit.concat(mapTail),\r\n            setMethods = ['add'].concat(commonInit, forEachName, hasName);\r\n      \r\n        var isMap = isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\r\n      \r\n        var isWeakMap = isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\r\n      \r\n        var isSet = isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\r\n      \r\n        var isWeakSet = tagTester('WeakSet');\r\n      \r\n        // Retrieve the values of an object's properties.\r\n        function values(obj) {\r\n          var _keys = keys(obj);\r\n          var length = _keys.length;\r\n          var values = Array(length);\r\n          for (var i = 0; i < length; i++) {\r\n            values[i] = obj[_keys[i]];\r\n          }\r\n          return values;\r\n        }\r\n      \r\n        // Convert an object into a list of `[key, value]` pairs.\r\n        // The opposite of `_.object` with one argument.\r\n        function pairs(obj) {\r\n          var _keys = keys(obj);\r\n          var length = _keys.length;\r\n          var pairs = Array(length);\r\n          for (var i = 0; i < length; i++) {\r\n            pairs[i] = [_keys[i], obj[_keys[i]]];\r\n          }\r\n          return pairs;\r\n        }\r\n      \r\n        // Invert the keys and values of an object. The values must be serializable.\r\n        function invert(obj) {\r\n          var result = {};\r\n          var _keys = keys(obj);\r\n          for (var i = 0, length = _keys.length; i < length; i++) {\r\n            result[obj[_keys[i]]] = _keys[i];\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Return a sorted list of the function names available on the object.\r\n        function functions(obj) {\r\n          var names = [];\r\n          for (var key in obj) {\r\n            if (isFunction$1(obj[key])) names.push(key);\r\n          }\r\n          return names.sort();\r\n        }\r\n      \r\n        // An internal function for creating assigner functions.\r\n        function createAssigner(keysFunc, defaults) {\r\n          return function(obj) {\r\n            var length = arguments.length;\r\n            if (defaults) obj = Object(obj);\r\n            if (length < 2 || obj == null) return obj;\r\n            for (var index = 1; index < length; index++) {\r\n              var source = arguments[index],\r\n                  keys = keysFunc(source),\r\n                  l = keys.length;\r\n              for (var i = 0; i < l; i++) {\r\n                var key = keys[i];\r\n                if (!defaults || obj[key] === void 0) obj[key] = source[key];\r\n              }\r\n            }\r\n            return obj;\r\n          };\r\n        }\r\n      \r\n        // Extend a given object with all the properties in passed-in object(s).\r\n        var extend = createAssigner(allKeys);\r\n      \r\n        // Assigns a given object with all the own properties in the passed-in\r\n        // object(s).\r\n        // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\r\n        var extendOwn = createAssigner(keys);\r\n      \r\n        // Fill in a given object with default properties.\r\n        var defaults = createAssigner(allKeys, true);\r\n      \r\n        // Create a naked function reference for surrogate-prototype-swapping.\r\n        function ctor() {\r\n          return function(){};\r\n        }\r\n      \r\n        // An internal function for creating a new object that inherits from another.\r\n        function baseCreate(prototype) {\r\n          if (!isObject(prototype)) return {};\r\n          if (nativeCreate) return nativeCreate(prototype);\r\n          var Ctor = ctor();\r\n          Ctor.prototype = prototype;\r\n          var result = new Ctor;\r\n          Ctor.prototype = null;\r\n          return result;\r\n        }\r\n      \r\n        // Creates an object that inherits from the given prototype object.\r\n        // If additional properties are provided then they will be added to the\r\n        // created object.\r\n        function create(prototype, props) {\r\n          var result = baseCreate(prototype);\r\n          if (props) extendOwn(result, props);\r\n          return result;\r\n        }\r\n      \r\n        // Create a (shallow-cloned) duplicate of an object.\r\n        function clone(obj) {\r\n          if (!isObject(obj)) return obj;\r\n          return isArray(obj) ? obj.slice() : extend({}, obj);\r\n        }\r\n      \r\n        // Invokes `interceptor` with the `obj` and then returns `obj`.\r\n        // The primary purpose of this method is to \"tap into\" a method chain, in\r\n        // order to perform operations on intermediate results within the chain.\r\n        function tap(obj, interceptor) {\r\n          interceptor(obj);\r\n          return obj;\r\n        }\r\n      \r\n        // Normalize a (deep) property `path` to array.\r\n        // Like `_.iteratee`, this function can be customized.\r\n        function toPath$1(path) {\r\n          return isArray(path) ? path : [path];\r\n        }\r\n        _$1.toPath = toPath$1;\r\n      \r\n        // Internal wrapper for `_.toPath` to enable minification.\r\n        // Similar to `cb` for `_.iteratee`.\r\n        function toPath(path) {\r\n          return _$1.toPath(path);\r\n        }\r\n      \r\n        // Internal function to obtain a nested property in `obj` along `path`.\r\n        function deepGet(obj, path) {\r\n          var length = path.length;\r\n          for (var i = 0; i < length; i++) {\r\n            if (obj == null) return void 0;\r\n            obj = obj[path[i]];\r\n          }\r\n          return length ? obj : void 0;\r\n        }\r\n      \r\n        // Get the value of the (deep) property on `path` from `object`.\r\n        // If any property in `path` does not exist or if the value is\r\n        // `undefined`, return `defaultValue` instead.\r\n        // The `path` is normalized through `_.toPath`.\r\n        function get(object, path, defaultValue) {\r\n          var value = deepGet(object, toPath(path));\r\n          return isUndefined(value) ? defaultValue : value;\r\n        }\r\n      \r\n        // Shortcut function for checking if an object has a given property directly on\r\n        // itself (in other words, not on a prototype). Unlike the internal `has`\r\n        // function, this public version can also traverse nested properties.\r\n        function has(obj, path) {\r\n          path = toPath(path);\r\n          var length = path.length;\r\n          for (var i = 0; i < length; i++) {\r\n            var key = path[i];\r\n            if (!has$1(obj, key)) return false;\r\n            obj = obj[key];\r\n          }\r\n          return !!length;\r\n        }\r\n      \r\n        // Keep the identity function around for default iteratees.\r\n        function identity(value) {\r\n          return value;\r\n        }\r\n      \r\n        // Returns a predicate for checking whether an object has a given set of\r\n        // `key:value` pairs.\r\n        function matcher(attrs) {\r\n          attrs = extendOwn({}, attrs);\r\n          return function(obj) {\r\n            return isMatch(obj, attrs);\r\n          };\r\n        }\r\n      \r\n        // Creates a function that, when passed an object, will traverse that object’s\r\n        // properties down the given `path`, specified as an array of keys or indices.\r\n        function property(path) {\r\n          path = toPath(path);\r\n          return function(obj) {\r\n            return deepGet(obj, path);\r\n          };\r\n        }\r\n      \r\n        // Internal function that returns an efficient (for current engines) version\r\n        // of the passed-in callback, to be repeatedly applied in other Underscore\r\n        // functions.\r\n        function optimizeCb(func, context, argCount) {\r\n          if (context === void 0) return func;\r\n          switch (argCount == null ? 3 : argCount) {\r\n            case 1: return function(value) {\r\n              return func.call(context, value);\r\n            };\r\n            // The 2-argument case is omitted because we’re not using it.\r\n            case 3: return function(value, index, collection) {\r\n              return func.call(context, value, index, collection);\r\n            };\r\n            case 4: return function(accumulator, value, index, collection) {\r\n              return func.call(context, accumulator, value, index, collection);\r\n            };\r\n          }\r\n          return function() {\r\n            return func.apply(context, arguments);\r\n          };\r\n        }\r\n      \r\n        // An internal function to generate callbacks that can be applied to each\r\n        // element in a collection, returning the desired result — either `_.identity`,\r\n        // an arbitrary callback, a property matcher, or a property accessor.\r\n        function baseIteratee(value, context, argCount) {\r\n          if (value == null) return identity;\r\n          if (isFunction$1(value)) return optimizeCb(value, context, argCount);\r\n          if (isObject(value) && !isArray(value)) return matcher(value);\r\n          return property(value);\r\n        }\r\n      \r\n        // External wrapper for our callback generator. Users may customize\r\n        // `_.iteratee` if they want additional predicate/iteratee shorthand styles.\r\n        // This abstraction hides the internal-only `argCount` argument.\r\n        function iteratee(value, context) {\r\n          return baseIteratee(value, context, Infinity);\r\n        }\r\n        _$1.iteratee = iteratee;\r\n      \r\n        // The function we call internally to generate a callback. It invokes\r\n        // `_.iteratee` if overridden, otherwise `baseIteratee`.\r\n        function cb(value, context, argCount) {\r\n          if (_$1.iteratee !== iteratee) return _$1.iteratee(value, context);\r\n          return baseIteratee(value, context, argCount);\r\n        }\r\n      \r\n        // Returns the results of applying the `iteratee` to each element of `obj`.\r\n        // In contrast to `_.map` it returns an object.\r\n        function mapObject(obj, iteratee, context) {\r\n          iteratee = cb(iteratee, context);\r\n          var _keys = keys(obj),\r\n              length = _keys.length,\r\n              results = {};\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys[index];\r\n            results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\r\n          }\r\n          return results;\r\n        }\r\n      \r\n        // Predicate-generating function. Often useful outside of Underscore.\r\n        function noop(){}\r\n      \r\n        // Generates a function for a given object that returns a given property.\r\n        function propertyOf(obj) {\r\n          if (obj == null) return noop;\r\n          return function(path) {\r\n            return get(obj, path);\r\n          };\r\n        }\r\n      \r\n        // Run a function **n** times.\r\n        function times(n, iteratee, context) {\r\n          var accum = Array(Math.max(0, n));\r\n          iteratee = optimizeCb(iteratee, context, 1);\r\n          for (var i = 0; i < n; i++) accum[i] = iteratee(i);\r\n          return accum;\r\n        }\r\n      \r\n        // Return a random integer between `min` and `max` (inclusive).\r\n        function random(min, max) {\r\n          if (max == null) {\r\n            max = min;\r\n            min = 0;\r\n          }\r\n          return min + Math.floor(Math.random() * (max - min + 1));\r\n        }\r\n      \r\n        // A (possibly faster) way to get the current timestamp as an integer.\r\n        var now = Date.now || function() {\r\n          return new Date().getTime();\r\n        };\r\n      \r\n        // Internal helper to generate functions for escaping and unescaping strings\r\n        // to/from HTML interpolation.\r\n        function createEscaper(map) {\r\n          var escaper = function(match) {\r\n            return map[match];\r\n          };\r\n          // Regexes for identifying a key that needs to be escaped.\r\n          var source = '(?:' + keys(map).join('|') + ')';\r\n          var testRegexp = RegExp(source);\r\n          var replaceRegexp = RegExp(source, 'g');\r\n          return function(string) {\r\n            string = string == null ? '' : '' + string;\r\n            return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\r\n          };\r\n        }\r\n      \r\n        // Internal list of HTML entities for escaping.\r\n        var escapeMap = {\r\n          '&': '&amp;',\r\n          '<': '&lt;',\r\n          '>': '&gt;',\r\n          '\"': '&quot;',\r\n          \"'\": '&#x27;',\r\n          '`': '&#x60;'\r\n        };\r\n      \r\n        // Function for escaping strings to HTML interpolation.\r\n        var _escape = createEscaper(escapeMap);\r\n      \r\n        // Internal list of HTML entities for unescaping.\r\n        var unescapeMap = invert(escapeMap);\r\n      \r\n        // Function for unescaping strings from HTML interpolation.\r\n        var _unescape = createEscaper(unescapeMap);\r\n      \r\n        // By default, Underscore uses ERB-style template delimiters. Change the\r\n        // following template settings to use alternative delimiters.\r\n        var templateSettings = _$1.templateSettings = {\r\n          evaluate: /<%([\\s\\S]+?)%>/g,\r\n          interpolate: /<%=([\\s\\S]+?)%>/g,\r\n          escape: /<%-([\\s\\S]+?)%>/g\r\n        };\r\n      \r\n        // When customizing `_.templateSettings`, if you don't want to define an\r\n        // interpolation, evaluation or escaping regex, we need one that is\r\n        // guaranteed not to match.\r\n        var noMatch = /(.)^/;\r\n      \r\n        // Certain characters need to be escaped so that they can be put into a\r\n        // string literal.\r\n        var escapes = {\r\n          \"'\": \"'\",\r\n          '\\\\': '\\\\',\r\n          '\\r': 'r',\r\n          '\\n': 'n',\r\n          '\\u2028': 'u2028',\r\n          '\\u2029': 'u2029'\r\n        };\r\n      \r\n        var escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\r\n      \r\n        function escapeChar(match) {\r\n          return '\\\\' + escapes[match];\r\n        }\r\n      \r\n        // In order to prevent third-party code injection through\r\n        // `_.templateSettings.variable`, we test it against the following regular\r\n        // expression. It is intentionally a bit more liberal than just matching valid\r\n        // identifiers, but still prevents possible loopholes through defaults or\r\n        // destructuring assignment.\r\n        var bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\r\n      \r\n        // JavaScript micro-templating, similar to John Resig's implementation.\r\n        // Underscore templating handles arbitrary delimiters, preserves whitespace,\r\n        // and correctly escapes quotes within interpolated code.\r\n        // NB: `oldSettings` only exists for backwards compatibility.\r\n        function template(text, settings, oldSettings) {\r\n          if (!settings && oldSettings) settings = oldSettings;\r\n          settings = defaults({}, settings, _$1.templateSettings);\r\n      \r\n          // Combine delimiters into one regular expression via alternation.\r\n          var matcher = RegExp([\r\n            (settings.escape || noMatch).source,\r\n            (settings.interpolate || noMatch).source,\r\n            (settings.evaluate || noMatch).source\r\n          ].join('|') + '|$', 'g');\r\n      \r\n          // Compile the template source, escaping string literals appropriately.\r\n          var index = 0;\r\n          var source = \"__p+='\";\r\n          text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\r\n            source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\r\n            index = offset + match.length;\r\n      \r\n            if (escape) {\r\n              source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\r\n            } else if (interpolate) {\r\n              source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\r\n            } else if (evaluate) {\r\n              source += \"';\\n\" + evaluate + \"\\n__p+='\";\r\n            }\r\n      \r\n            // Adobe VMs need the match returned to produce the correct offset.\r\n            return match;\r\n          });\r\n          source += \"';\\n\";\r\n      \r\n          var argument = settings.variable;\r\n          if (argument) {\r\n            // Insure against third-party code injection. (CVE-2021-23358)\r\n            if (!bareIdentifier.test(argument)) throw new Error(\r\n              'variable is not a bare identifier: ' + argument\r\n            );\r\n          } else {\r\n            // If a variable is not specified, place data values in local scope.\r\n            source = 'with(obj||{}){\\n' + source + '}\\n';\r\n            argument = 'obj';\r\n          }\r\n      \r\n          source = \"var __t,__p='',__j=Array.prototype.join,\" +\r\n            \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\r\n            source + 'return __p;\\n';\r\n      \r\n          var render;\r\n          try {\r\n            render = new Function(argument, '_', source);\r\n          } catch (e) {\r\n            e.source = source;\r\n            throw e;\r\n          }\r\n      \r\n          var template = function(data) {\r\n            return render.call(this, data, _$1);\r\n          };\r\n      \r\n          // Provide the compiled source as a convenience for precompilation.\r\n          template.source = 'function(' + argument + '){\\n' + source + '}';\r\n      \r\n          return template;\r\n        }\r\n      \r\n        // Traverses the children of `obj` along `path`. If a child is a function, it\r\n        // is invoked with its parent as context. Returns the value of the final\r\n        // child, or `fallback` if any child is undefined.\r\n        function result(obj, path, fallback) {\r\n          path = toPath(path);\r\n          var length = path.length;\r\n          if (!length) {\r\n            return isFunction$1(fallback) ? fallback.call(obj) : fallback;\r\n          }\r\n          for (var i = 0; i < length; i++) {\r\n            var prop = obj == null ? void 0 : obj[path[i]];\r\n            if (prop === void 0) {\r\n              prop = fallback;\r\n              i = length; // Ensure we don't continue iterating.\r\n            }\r\n            obj = isFunction$1(prop) ? prop.call(obj) : prop;\r\n          }\r\n          return obj;\r\n        }\r\n      \r\n        // Generate a unique integer id (unique within the entire client session).\r\n        // Useful for temporary DOM ids.\r\n        var idCounter = 0;\r\n        function uniqueId(prefix) {\r\n          var id = ++idCounter + '';\r\n          return prefix ? prefix + id : id;\r\n        }\r\n      \r\n        // Start chaining a wrapped Underscore object.\r\n        function chain(obj) {\r\n          var instance = _$1(obj);\r\n          instance._chain = true;\r\n          return instance;\r\n        }\r\n      \r\n        // Internal function to execute `sourceFunc` bound to `context` with optional\r\n        // `args`. Determines whether to execute a function as a constructor or as a\r\n        // normal function.\r\n        function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\r\n          if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\r\n          var self = baseCreate(sourceFunc.prototype);\r\n          var result = sourceFunc.apply(self, args);\r\n          if (isObject(result)) return result;\r\n          return self;\r\n        }\r\n      \r\n        // Partially apply a function by creating a version that has had some of its\r\n        // arguments pre-filled, without changing its dynamic `this` context. `_` acts\r\n        // as a placeholder by default, allowing any combination of arguments to be\r\n        // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\r\n        var partial = restArguments(function(func, boundArgs) {\r\n          var placeholder = partial.placeholder;\r\n          var bound = function() {\r\n            var position = 0, length = boundArgs.length;\r\n            var args = Array(length);\r\n            for (var i = 0; i < length; i++) {\r\n              args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\r\n            }\r\n            while (position < arguments.length) args.push(arguments[position++]);\r\n            return executeBound(func, bound, this, this, args);\r\n          };\r\n          return bound;\r\n        });\r\n      \r\n        partial.placeholder = _$1;\r\n      \r\n        // Create a function bound to a given object (assigning `this`, and arguments,\r\n        // optionally).\r\n        var bind = restArguments(function(func, context, args) {\r\n          if (!isFunction$1(func)) throw new TypeError('Bind must be called on a function');\r\n          var bound = restArguments(function(callArgs) {\r\n            return executeBound(func, bound, context, this, args.concat(callArgs));\r\n          });\r\n          return bound;\r\n        });\r\n      \r\n        // Internal helper for collection methods to determine whether a collection\r\n        // should be iterated as an array or as an object.\r\n        // Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\r\n        // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\r\n        var isArrayLike = createSizePropertyCheck(getLength);\r\n      \r\n        // Internal implementation of a recursive `flatten` function.\r\n        function flatten$1(input, depth, strict, output) {\r\n          output = output || [];\r\n          if (!depth && depth !== 0) {\r\n            depth = Infinity;\r\n          } else if (depth <= 0) {\r\n            return output.concat(input);\r\n          }\r\n          var idx = output.length;\r\n          for (var i = 0, length = getLength(input); i < length; i++) {\r\n            var value = input[i];\r\n            if (isArrayLike(value) && (isArray(value) || isArguments$1(value))) {\r\n              // Flatten current level of array or arguments object.\r\n              if (depth > 1) {\r\n                flatten$1(value, depth - 1, strict, output);\r\n                idx = output.length;\r\n              } else {\r\n                var j = 0, len = value.length;\r\n                while (j < len) output[idx++] = value[j++];\r\n              }\r\n            } else if (!strict) {\r\n              output[idx++] = value;\r\n            }\r\n          }\r\n          return output;\r\n        }\r\n      \r\n        // Bind a number of an object's methods to that object. Remaining arguments\r\n        // are the method names to be bound. Useful for ensuring that all callbacks\r\n        // defined on an object belong to it.\r\n        var bindAll = restArguments(function(obj, keys) {\r\n          keys = flatten$1(keys, false, false);\r\n          var index = keys.length;\r\n          if (index < 1) throw new Error('bindAll must be passed function names');\r\n          while (index--) {\r\n            var key = keys[index];\r\n            obj[key] = bind(obj[key], obj);\r\n          }\r\n          return obj;\r\n        });\r\n      \r\n        // Memoize an expensive function by storing its results.\r\n        function memoize(func, hasher) {\r\n          var memoize = function(key) {\r\n            var cache = memoize.cache;\r\n            var address = '' + (hasher ? hasher.apply(this, arguments) : key);\r\n            if (!has$1(cache, address)) cache[address] = func.apply(this, arguments);\r\n            return cache[address];\r\n          };\r\n          memoize.cache = {};\r\n          return memoize;\r\n        }\r\n      \r\n        // Delays a function for the given number of milliseconds, and then calls\r\n        // it with the arguments supplied.\r\n        var delay = restArguments(function(func, wait, args) {\r\n          return setTimeout(function() {\r\n            return func.apply(null, args);\r\n          }, wait);\r\n        });\r\n      \r\n        // Defers a function, scheduling it to run after the current call stack has\r\n        // cleared.\r\n        var defer = partial(delay, _$1, 1);\r\n      \r\n        // Returns a function, that, when invoked, will only be triggered at most once\r\n        // during a given window of time. Normally, the throttled function will run\r\n        // as much as it can, without ever going more than once per `wait` duration;\r\n        // but if you'd like to disable the execution on the leading edge, pass\r\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n        function throttle(func, wait, options) {\r\n          var timeout, context, args, result;\r\n          var previous = 0;\r\n          if (!options) options = {};\r\n      \r\n          var later = function() {\r\n            previous = options.leading === false ? 0 : now();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n          };\r\n      \r\n          var throttled = function() {\r\n            var _now = now();\r\n            if (!previous && options.leading === false) previous = _now;\r\n            var remaining = wait - (_now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n              if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n              }\r\n              previous = _now;\r\n              result = func.apply(context, args);\r\n              if (!timeout) context = args = null;\r\n            } else if (!timeout && options.trailing !== false) {\r\n              timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n          };\r\n      \r\n          throttled.cancel = function() {\r\n            clearTimeout(timeout);\r\n            previous = 0;\r\n            timeout = context = args = null;\r\n          };\r\n      \r\n          return throttled;\r\n        }\r\n      \r\n        // When a sequence of calls of the returned function ends, the argument\r\n        // function is triggered. The end of a sequence is defined by the `wait`\r\n        // parameter. If `immediate` is passed, the argument function will be\r\n        // triggered at the beginning of the sequence instead of at the end.\r\n        function debounce(func, wait, immediate) {\r\n          var timeout, previous, args, result, context;\r\n      \r\n          var later = function() {\r\n            var passed = now() - previous;\r\n            if (wait > passed) {\r\n              timeout = setTimeout(later, wait - passed);\r\n            } else {\r\n              timeout = null;\r\n              if (!immediate) result = func.apply(context, args);\r\n              // This check is needed because `func` can recursively invoke `debounced`.\r\n              if (!timeout) args = context = null;\r\n            }\r\n          };\r\n      \r\n          var debounced = restArguments(function(_args) {\r\n            context = this;\r\n            args = _args;\r\n            previous = now();\r\n            if (!timeout) {\r\n              timeout = setTimeout(later, wait);\r\n              if (immediate) result = func.apply(context, args);\r\n            }\r\n            return result;\r\n          });\r\n      \r\n          debounced.cancel = function() {\r\n            clearTimeout(timeout);\r\n            timeout = args = context = null;\r\n          };\r\n      \r\n          return debounced;\r\n        }\r\n      \r\n        // Returns the first function passed as an argument to the second,\r\n        // allowing you to adjust arguments, run code before and after, and\r\n        // conditionally execute the original function.\r\n        function wrap(func, wrapper) {\r\n          return partial(wrapper, func);\r\n        }\r\n      \r\n        // Returns a negated version of the passed-in predicate.\r\n        function negate(predicate) {\r\n          return function() {\r\n            return !predicate.apply(this, arguments);\r\n          };\r\n        }\r\n      \r\n        // Returns a function that is the composition of a list of functions, each\r\n        // consuming the return value of the function that follows.\r\n        function compose() {\r\n          var args = arguments;\r\n          var start = args.length - 1;\r\n          return function() {\r\n            var i = start;\r\n            var result = args[start].apply(this, arguments);\r\n            while (i--) result = args[i].call(this, result);\r\n            return result;\r\n          };\r\n        }\r\n      \r\n        // Returns a function that will only be executed on and after the Nth call.\r\n        function after(times, func) {\r\n          return function() {\r\n            if (--times < 1) {\r\n              return func.apply(this, arguments);\r\n            }\r\n          };\r\n        }\r\n      \r\n        // Returns a function that will only be executed up to (but not including) the\r\n        // Nth call.\r\n        function before(times, func) {\r\n          var memo;\r\n          return function() {\r\n            if (--times > 0) {\r\n              memo = func.apply(this, arguments);\r\n            }\r\n            if (times <= 1) func = null;\r\n            return memo;\r\n          };\r\n        }\r\n      \r\n        // Returns a function that will be executed at most one time, no matter how\r\n        // often you call it. Useful for lazy initialization.\r\n        var once = partial(before, 2);\r\n      \r\n        // Returns the first key on an object that passes a truth test.\r\n        function findKey(obj, predicate, context) {\r\n          predicate = cb(predicate, context);\r\n          var _keys = keys(obj), key;\r\n          for (var i = 0, length = _keys.length; i < length; i++) {\r\n            key = _keys[i];\r\n            if (predicate(obj[key], key, obj)) return key;\r\n          }\r\n        }\r\n      \r\n        // Internal function to generate `_.findIndex` and `_.findLastIndex`.\r\n        function createPredicateIndexFinder(dir) {\r\n          return function(array, predicate, context) {\r\n            predicate = cb(predicate, context);\r\n            var length = getLength(array);\r\n            var index = dir > 0 ? 0 : length - 1;\r\n            for (; index >= 0 && index < length; index += dir) {\r\n              if (predicate(array[index], index, array)) return index;\r\n            }\r\n            return -1;\r\n          };\r\n        }\r\n      \r\n        // Returns the first index on an array-like that passes a truth test.\r\n        var findIndex = createPredicateIndexFinder(1);\r\n      \r\n        // Returns the last index on an array-like that passes a truth test.\r\n        var findLastIndex = createPredicateIndexFinder(-1);\r\n      \r\n        // Use a comparator function to figure out the smallest index at which\r\n        // an object should be inserted so as to maintain order. Uses binary search.\r\n        function sortedIndex(array, obj, iteratee, context) {\r\n          iteratee = cb(iteratee, context, 1);\r\n          var value = iteratee(obj);\r\n          var low = 0, high = getLength(array);\r\n          while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\r\n          }\r\n          return low;\r\n        }\r\n      \r\n        // Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\r\n        function createIndexFinder(dir, predicateFind, sortedIndex) {\r\n          return function(array, item, idx) {\r\n            var i = 0, length = getLength(array);\r\n            if (typeof idx == 'number') {\r\n              if (dir > 0) {\r\n                i = idx >= 0 ? idx : Math.max(idx + length, i);\r\n              } else {\r\n                length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\r\n              }\r\n            } else if (sortedIndex && idx && length) {\r\n              idx = sortedIndex(array, item);\r\n              return array[idx] === item ? idx : -1;\r\n            }\r\n            if (item !== item) {\r\n              idx = predicateFind(slice.call(array, i, length), isNaN$1);\r\n              return idx >= 0 ? idx + i : -1;\r\n            }\r\n            for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\r\n              if (array[idx] === item) return idx;\r\n            }\r\n            return -1;\r\n          };\r\n        }\r\n      \r\n        // Return the position of the first occurrence of an item in an array,\r\n        // or -1 if the item is not included in the array.\r\n        // If the array is large and already in sort order, pass `true`\r\n        // for **isSorted** to use binary search.\r\n        var indexOf = createIndexFinder(1, findIndex, sortedIndex);\r\n      \r\n        // Return the position of the last occurrence of an item in an array,\r\n        // or -1 if the item is not included in the array.\r\n        var lastIndexOf = createIndexFinder(-1, findLastIndex);\r\n      \r\n        // Return the first value which passes a truth test.\r\n        function find(obj, predicate, context) {\r\n          var keyFinder = isArrayLike(obj) ? findIndex : findKey;\r\n          var key = keyFinder(obj, predicate, context);\r\n          if (key !== void 0 && key !== -1) return obj[key];\r\n        }\r\n      \r\n        // Convenience version of a common use case of `_.find`: getting the first\r\n        // object containing specific `key:value` pairs.\r\n        function findWhere(obj, attrs) {\r\n          return find(obj, matcher(attrs));\r\n        }\r\n      \r\n        // The cornerstone for collection functions, an `each`\r\n        // implementation, aka `forEach`.\r\n        // Handles raw objects in addition to array-likes. Treats all\r\n        // sparse array-likes as if they were dense.\r\n        function each(obj, iteratee, context) {\r\n          iteratee = optimizeCb(iteratee, context);\r\n          var i, length;\r\n          if (isArrayLike(obj)) {\r\n            for (i = 0, length = obj.length; i < length; i++) {\r\n              iteratee(obj[i], i, obj);\r\n            }\r\n          } else {\r\n            var _keys = keys(obj);\r\n            for (i = 0, length = _keys.length; i < length; i++) {\r\n              iteratee(obj[_keys[i]], _keys[i], obj);\r\n            }\r\n          }\r\n          return obj;\r\n        }\r\n      \r\n        // Return the results of applying the iteratee to each element.\r\n        function map(obj, iteratee, context) {\r\n          iteratee = cb(iteratee, context);\r\n          var _keys = !isArrayLike(obj) && keys(obj),\r\n              length = (_keys || obj).length,\r\n              results = Array(length);\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys ? _keys[index] : index;\r\n            results[index] = iteratee(obj[currentKey], currentKey, obj);\r\n          }\r\n          return results;\r\n        }\r\n      \r\n        // Internal helper to create a reducing function, iterating left or right.\r\n        function createReduce(dir) {\r\n          // Wrap code that reassigns argument variables in a separate function than\r\n          // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\r\n          var reducer = function(obj, iteratee, memo, initial) {\r\n            var _keys = !isArrayLike(obj) && keys(obj),\r\n                length = (_keys || obj).length,\r\n                index = dir > 0 ? 0 : length - 1;\r\n            if (!initial) {\r\n              memo = obj[_keys ? _keys[index] : index];\r\n              index += dir;\r\n            }\r\n            for (; index >= 0 && index < length; index += dir) {\r\n              var currentKey = _keys ? _keys[index] : index;\r\n              memo = iteratee(memo, obj[currentKey], currentKey, obj);\r\n            }\r\n            return memo;\r\n          };\r\n      \r\n          return function(obj, iteratee, memo, context) {\r\n            var initial = arguments.length >= 3;\r\n            return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\r\n          };\r\n        }\r\n      \r\n        // **Reduce** builds up a single result from a list of values, aka `inject`,\r\n        // or `foldl`.\r\n        var reduce = createReduce(1);\r\n      \r\n        // The right-associative version of reduce, also known as `foldr`.\r\n        var reduceRight = createReduce(-1);\r\n      \r\n        // Return all the elements that pass a truth test.\r\n        function filter(obj, predicate, context) {\r\n          var results = [];\r\n          predicate = cb(predicate, context);\r\n          each(obj, function(value, index, list) {\r\n            if (predicate(value, index, list)) results.push(value);\r\n          });\r\n          return results;\r\n        }\r\n      \r\n        // Return all the elements for which a truth test fails.\r\n        function reject(obj, predicate, context) {\r\n          return filter(obj, negate(cb(predicate)), context);\r\n        }\r\n      \r\n        // Determine whether all of the elements pass a truth test.\r\n        function every(obj, predicate, context) {\r\n          predicate = cb(predicate, context);\r\n          var _keys = !isArrayLike(obj) && keys(obj),\r\n              length = (_keys || obj).length;\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys ? _keys[index] : index;\r\n            if (!predicate(obj[currentKey], currentKey, obj)) return false;\r\n          }\r\n          return true;\r\n        }\r\n      \r\n        // Determine if at least one element in the object passes a truth test.\r\n        function some(obj, predicate, context) {\r\n          predicate = cb(predicate, context);\r\n          var _keys = !isArrayLike(obj) && keys(obj),\r\n              length = (_keys || obj).length;\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys ? _keys[index] : index;\r\n            if (predicate(obj[currentKey], currentKey, obj)) return true;\r\n          }\r\n          return false;\r\n        }\r\n      \r\n        // Determine if the array or object contains a given item (using `===`).\r\n        function contains(obj, item, fromIndex, guard) {\r\n          if (!isArrayLike(obj)) obj = values(obj);\r\n          if (typeof fromIndex != 'number' || guard) fromIndex = 0;\r\n          return indexOf(obj, item, fromIndex) >= 0;\r\n        }\r\n      \r\n        // Invoke a method (with arguments) on every item in a collection.\r\n        var invoke = restArguments(function(obj, path, args) {\r\n          var contextPath, func;\r\n          if (isFunction$1(path)) {\r\n            func = path;\r\n          } else {\r\n            path = toPath(path);\r\n            contextPath = path.slice(0, -1);\r\n            path = path[path.length - 1];\r\n          }\r\n          return map(obj, function(context) {\r\n            var method = func;\r\n            if (!method) {\r\n              if (contextPath && contextPath.length) {\r\n                context = deepGet(context, contextPath);\r\n              }\r\n              if (context == null) return void 0;\r\n              method = context[path];\r\n            }\r\n            return method == null ? method : method.apply(context, args);\r\n          });\r\n        });\r\n      \r\n        // Convenience version of a common use case of `_.map`: fetching a property.\r\n        function pluck(obj, key) {\r\n          return map(obj, property(key));\r\n        }\r\n      \r\n        // Convenience version of a common use case of `_.filter`: selecting only\r\n        // objects containing specific `key:value` pairs.\r\n        function where(obj, attrs) {\r\n          return filter(obj, matcher(attrs));\r\n        }\r\n      \r\n        // Return the maximum element (or element-based computation).\r\n        function max(obj, iteratee, context) {\r\n          var result = -Infinity, lastComputed = -Infinity,\r\n              value, computed;\r\n          if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\r\n            obj = isArrayLike(obj) ? obj : values(obj);\r\n            for (var i = 0, length = obj.length; i < length; i++) {\r\n              value = obj[i];\r\n              if (value != null && value > result) {\r\n                result = value;\r\n              }\r\n            }\r\n          } else {\r\n            iteratee = cb(iteratee, context);\r\n            each(obj, function(v, index, list) {\r\n              computed = iteratee(v, index, list);\r\n              if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\r\n                result = v;\r\n                lastComputed = computed;\r\n              }\r\n            });\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Return the minimum element (or element-based computation).\r\n        function min(obj, iteratee, context) {\r\n          var result = Infinity, lastComputed = Infinity,\r\n              value, computed;\r\n          if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\r\n            obj = isArrayLike(obj) ? obj : values(obj);\r\n            for (var i = 0, length = obj.length; i < length; i++) {\r\n              value = obj[i];\r\n              if (value != null && value < result) {\r\n                result = value;\r\n              }\r\n            }\r\n          } else {\r\n            iteratee = cb(iteratee, context);\r\n            each(obj, function(v, index, list) {\r\n              computed = iteratee(v, index, list);\r\n              if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\r\n                result = v;\r\n                lastComputed = computed;\r\n              }\r\n            });\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Safely create a real, live array from anything iterable.\r\n        var reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\r\n        function toArray(obj) {\r\n          if (!obj) return [];\r\n          if (isArray(obj)) return slice.call(obj);\r\n          if (isString(obj)) {\r\n            // Keep surrogate pair characters together.\r\n            return obj.match(reStrSymbol);\r\n          }\r\n          if (isArrayLike(obj)) return map(obj, identity);\r\n          return values(obj);\r\n        }\r\n      \r\n        // Sample **n** random values from a collection using the modern version of the\r\n        // [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\r\n        // If **n** is not specified, returns a single random element.\r\n        // The internal `guard` argument allows it to work with `_.map`.\r\n        function sample(obj, n, guard) {\r\n          if (n == null || guard) {\r\n            if (!isArrayLike(obj)) obj = values(obj);\r\n            return obj[random(obj.length - 1)];\r\n          }\r\n          var sample = toArray(obj);\r\n          var length = getLength(sample);\r\n          n = Math.max(Math.min(n, length), 0);\r\n          var last = length - 1;\r\n          for (var index = 0; index < n; index++) {\r\n            var rand = random(index, last);\r\n            var temp = sample[index];\r\n            sample[index] = sample[rand];\r\n            sample[rand] = temp;\r\n          }\r\n          return sample.slice(0, n);\r\n        }\r\n      \r\n        // Shuffle a collection.\r\n        function shuffle(obj) {\r\n          return sample(obj, Infinity);\r\n        }\r\n      \r\n        // Sort the object's values by a criterion produced by an iteratee.\r\n        function sortBy(obj, iteratee, context) {\r\n          var index = 0;\r\n          iteratee = cb(iteratee, context);\r\n          return pluck(map(obj, function(value, key, list) {\r\n            return {\r\n              value: value,\r\n              index: index++,\r\n              criteria: iteratee(value, key, list)\r\n            };\r\n          }).sort(function(left, right) {\r\n            var a = left.criteria;\r\n            var b = right.criteria;\r\n            if (a !== b) {\r\n              if (a > b || a === void 0) return 1;\r\n              if (a < b || b === void 0) return -1;\r\n            }\r\n            return left.index - right.index;\r\n          }), 'value');\r\n        }\r\n      \r\n        // An internal function used for aggregate \"group by\" operations.\r\n        function group(behavior, partition) {\r\n          return function(obj, iteratee, context) {\r\n            var result = partition ? [[], []] : {};\r\n            iteratee = cb(iteratee, context);\r\n            each(obj, function(value, index) {\r\n              var key = iteratee(value, index, obj);\r\n              behavior(result, value, key);\r\n            });\r\n            return result;\r\n          };\r\n        }\r\n      \r\n        // Groups the object's values by a criterion. Pass either a string attribute\r\n        // to group by, or a function that returns the criterion.\r\n        var groupBy = group(function(result, value, key) {\r\n          if (has$1(result, key)) result[key].push(value); else result[key] = [value];\r\n        });\r\n      \r\n        // Indexes the object's values by a criterion, similar to `_.groupBy`, but for\r\n        // when you know that your index values will be unique.\r\n        var indexBy = group(function(result, value, key) {\r\n          result[key] = value;\r\n        });\r\n      \r\n        // Counts instances of an object that group by a certain criterion. Pass\r\n        // either a string attribute to count by, or a function that returns the\r\n        // criterion.\r\n        var countBy = group(function(result, value, key) {\r\n          if (has$1(result, key)) result[key]++; else result[key] = 1;\r\n        });\r\n      \r\n        // Split a collection into two arrays: one whose elements all pass the given\r\n        // truth test, and one whose elements all do not pass the truth test.\r\n        var partition = group(function(result, value, pass) {\r\n          result[pass ? 0 : 1].push(value);\r\n        }, true);\r\n      \r\n        // Return the number of elements in a collection.\r\n        function size(obj) {\r\n          if (obj == null) return 0;\r\n          return isArrayLike(obj) ? obj.length : keys(obj).length;\r\n        }\r\n      \r\n        // Internal `_.pick` helper function to determine whether `key` is an enumerable\r\n        // property name of `obj`.\r\n        function keyInObj(value, key, obj) {\r\n          return key in obj;\r\n        }\r\n      \r\n        // Return a copy of the object only containing the allowed properties.\r\n        var pick = restArguments(function(obj, keys) {\r\n          var result = {}, iteratee = keys[0];\r\n          if (obj == null) return result;\r\n          if (isFunction$1(iteratee)) {\r\n            if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\r\n            keys = allKeys(obj);\r\n          } else {\r\n            iteratee = keyInObj;\r\n            keys = flatten$1(keys, false, false);\r\n            obj = Object(obj);\r\n          }\r\n          for (var i = 0, length = keys.length; i < length; i++) {\r\n            var key = keys[i];\r\n            var value = obj[key];\r\n            if (iteratee(value, key, obj)) result[key] = value;\r\n          }\r\n          return result;\r\n        });\r\n      \r\n        // Return a copy of the object without the disallowed properties.\r\n        var omit = restArguments(function(obj, keys) {\r\n          var iteratee = keys[0], context;\r\n          if (isFunction$1(iteratee)) {\r\n            iteratee = negate(iteratee);\r\n            if (keys.length > 1) context = keys[1];\r\n          } else {\r\n            keys = map(flatten$1(keys, false, false), String);\r\n            iteratee = function(value, key) {\r\n              return !contains(keys, key);\r\n            };\r\n          }\r\n          return pick(obj, iteratee, context);\r\n        });\r\n      \r\n        // Returns everything but the last entry of the array. Especially useful on\r\n        // the arguments object. Passing **n** will return all the values in\r\n        // the array, excluding the last N.\r\n        function initial(array, n, guard) {\r\n          return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\r\n        }\r\n      \r\n        // Get the first element of an array. Passing **n** will return the first N\r\n        // values in the array. The **guard** check allows it to work with `_.map`.\r\n        function first(array, n, guard) {\r\n          if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\r\n          if (n == null || guard) return array[0];\r\n          return initial(array, array.length - n);\r\n        }\r\n      \r\n        // Returns everything but the first entry of the `array`. Especially useful on\r\n        // the `arguments` object. Passing an **n** will return the rest N values in the\r\n        // `array`.\r\n        function rest(array, n, guard) {\r\n          return slice.call(array, n == null || guard ? 1 : n);\r\n        }\r\n      \r\n        // Get the last element of an array. Passing **n** will return the last N\r\n        // values in the array.\r\n        function last(array, n, guard) {\r\n          if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\r\n          if (n == null || guard) return array[array.length - 1];\r\n          return rest(array, Math.max(0, array.length - n));\r\n        }\r\n      \r\n        // Trim out all falsy values from an array.\r\n        function compact(array) {\r\n          return filter(array, Boolean);\r\n        }\r\n      \r\n        // Flatten out an array, either recursively (by default), or up to `depth`.\r\n        // Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\r\n        function flatten(array, depth) {\r\n          return flatten$1(array, depth, false);\r\n        }\r\n      \r\n        // Take the difference between one array and a number of other arrays.\r\n        // Only the elements present in just the first array will remain.\r\n        var difference = restArguments(function(array, rest) {\r\n          rest = flatten$1(rest, true, true);\r\n          return filter(array, function(value){\r\n            return !contains(rest, value);\r\n          });\r\n        });\r\n      \r\n        // Return a version of the array that does not contain the specified value(s).\r\n        var without = restArguments(function(array, otherArrays) {\r\n          return difference(array, otherArrays);\r\n        });\r\n      \r\n        // Produce a duplicate-free version of the array. If the array has already\r\n        // been sorted, you have the option of using a faster algorithm.\r\n        // The faster algorithm will not work with an iteratee if the iteratee\r\n        // is not a one-to-one function, so providing an iteratee will disable\r\n        // the faster algorithm.\r\n        function uniq(array, isSorted, iteratee, context) {\r\n          if (!isBoolean(isSorted)) {\r\n            context = iteratee;\r\n            iteratee = isSorted;\r\n            isSorted = false;\r\n          }\r\n          if (iteratee != null) iteratee = cb(iteratee, context);\r\n          var result = [];\r\n          var seen = [];\r\n          for (var i = 0, length = getLength(array); i < length; i++) {\r\n            var value = array[i],\r\n                computed = iteratee ? iteratee(value, i, array) : value;\r\n            if (isSorted && !iteratee) {\r\n              if (!i || seen !== computed) result.push(value);\r\n              seen = computed;\r\n            } else if (iteratee) {\r\n              if (!contains(seen, computed)) {\r\n                seen.push(computed);\r\n                result.push(value);\r\n              }\r\n            } else if (!contains(result, value)) {\r\n              result.push(value);\r\n            }\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Produce an array that contains the union: each distinct element from all of\r\n        // the passed-in arrays.\r\n        var union = restArguments(function(arrays) {\r\n          return uniq(flatten$1(arrays, true, true));\r\n        });\r\n      \r\n        // Produce an array that contains every item shared between all the\r\n        // passed-in arrays.\r\n        function intersection(array) {\r\n          var result = [];\r\n          var argsLength = arguments.length;\r\n          for (var i = 0, length = getLength(array); i < length; i++) {\r\n            var item = array[i];\r\n            if (contains(result, item)) continue;\r\n            var j;\r\n            for (j = 1; j < argsLength; j++) {\r\n              if (!contains(arguments[j], item)) break;\r\n            }\r\n            if (j === argsLength) result.push(item);\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Complement of zip. Unzip accepts an array of arrays and groups\r\n        // each array's elements on shared indices.\r\n        function unzip(array) {\r\n          var length = (array && max(array, getLength).length) || 0;\r\n          var result = Array(length);\r\n      \r\n          for (var index = 0; index < length; index++) {\r\n            result[index] = pluck(array, index);\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Zip together multiple lists into a single array -- elements that share\r\n        // an index go together.\r\n        var zip = restArguments(unzip);\r\n      \r\n        // Converts lists into objects. Pass either a single array of `[key, value]`\r\n        // pairs, or two parallel arrays of the same length -- one of keys, and one of\r\n        // the corresponding values. Passing by pairs is the reverse of `_.pairs`.\r\n        function object(list, values) {\r\n          var result = {};\r\n          for (var i = 0, length = getLength(list); i < length; i++) {\r\n            if (values) {\r\n              result[list[i]] = values[i];\r\n            } else {\r\n              result[list[i][0]] = list[i][1];\r\n            }\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Generate an integer Array containing an arithmetic progression. A port of\r\n        // the native Python `range()` function. See\r\n        // [the Python documentation](https://docs.python.org/library/functions.html#range).\r\n        function range(start, stop, step) {\r\n          if (stop == null) {\r\n            stop = start || 0;\r\n            start = 0;\r\n          }\r\n          if (!step) {\r\n            step = stop < start ? -1 : 1;\r\n          }\r\n      \r\n          var length = Math.max(Math.ceil((stop - start) / step), 0);\r\n          var range = Array(length);\r\n      \r\n          for (var idx = 0; idx < length; idx++, start += step) {\r\n            range[idx] = start;\r\n          }\r\n      \r\n          return range;\r\n        }\r\n      \r\n        // Chunk a single array into multiple arrays, each containing `count` or fewer\r\n        // items.\r\n        function chunk(array, count) {\r\n          if (count == null || count < 1) return [];\r\n          var result = [];\r\n          var i = 0, length = array.length;\r\n          while (i < length) {\r\n            result.push(slice.call(array, i, i += count));\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Helper function to continue chaining intermediate results.\r\n        function chainResult(instance, obj) {\r\n          return instance._chain ? _$1(obj).chain() : obj;\r\n        }\r\n      \r\n        // Add your own custom functions to the Underscore object.\r\n        function mixin(obj) {\r\n          each(functions(obj), function(name) {\r\n            var func = _$1[name] = obj[name];\r\n            _$1.prototype[name] = function() {\r\n              var args = [this._wrapped];\r\n              push.apply(args, arguments);\r\n              return chainResult(this, func.apply(_$1, args));\r\n            };\r\n          });\r\n          return _$1;\r\n        }\r\n      \r\n        // Add all mutator `Array` functions to the wrapper.\r\n        each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\r\n          var method = ArrayProto[name];\r\n          _$1.prototype[name] = function() {\r\n            var obj = this._wrapped;\r\n            if (obj != null) {\r\n              method.apply(obj, arguments);\r\n              if ((name === 'shift' || name === 'splice') && obj.length === 0) {\r\n                delete obj[0];\r\n              }\r\n            }\r\n            return chainResult(this, obj);\r\n          };\r\n        });\r\n      \r\n        // Add all accessor `Array` functions to the wrapper.\r\n        each(['concat', 'join', 'slice'], function(name) {\r\n          var method = ArrayProto[name];\r\n          _$1.prototype[name] = function() {\r\n            var obj = this._wrapped;\r\n            if (obj != null) obj = method.apply(obj, arguments);\r\n            return chainResult(this, obj);\r\n          };\r\n        });\r\n      \r\n        // Named Exports\r\n      \r\n        var allExports = {\r\n          __proto__: null,\r\n          VERSION: VERSION,\r\n          restArguments: restArguments,\r\n          isObject: isObject,\r\n          isNull: isNull,\r\n          isUndefined: isUndefined,\r\n          isBoolean: isBoolean,\r\n          isElement: isElement,\r\n          isString: isString,\r\n          isNumber: isNumber,\r\n          isDate: isDate,\r\n          isRegExp: isRegExp,\r\n          isError: isError,\r\n          isSymbol: isSymbol,\r\n          isArrayBuffer: isArrayBuffer,\r\n          isDataView: isDataView$1,\r\n          isArray: isArray,\r\n          isFunction: isFunction$1,\r\n          isArguments: isArguments$1,\r\n          isFinite: isFinite$1,\r\n          isNaN: isNaN$1,\r\n          isTypedArray: isTypedArray$1,\r\n          isEmpty: isEmpty,\r\n          isMatch: isMatch,\r\n          isEqual: isEqual,\r\n          isMap: isMap,\r\n          isWeakMap: isWeakMap,\r\n          isSet: isSet,\r\n          isWeakSet: isWeakSet,\r\n          keys: keys,\r\n          allKeys: allKeys,\r\n          values: values,\r\n          pairs: pairs,\r\n          invert: invert,\r\n          functions: functions,\r\n          methods: functions,\r\n          extend: extend,\r\n          extendOwn: extendOwn,\r\n          assign: extendOwn,\r\n          defaults: defaults,\r\n          create: create,\r\n          clone: clone,\r\n          tap: tap,\r\n          get: get,\r\n          has: has,\r\n          mapObject: mapObject,\r\n          identity: identity,\r\n          constant: constant,\r\n          noop: noop,\r\n          toPath: toPath$1,\r\n          property: property,\r\n          propertyOf: propertyOf,\r\n          matcher: matcher,\r\n          matches: matcher,\r\n          times: times,\r\n          random: random,\r\n          now: now,\r\n          escape: _escape,\r\n          unescape: _unescape,\r\n          templateSettings: templateSettings,\r\n          template: template,\r\n          result: result,\r\n          uniqueId: uniqueId,\r\n          chain: chain,\r\n          iteratee: iteratee,\r\n          partial: partial,\r\n          bind: bind,\r\n          bindAll: bindAll,\r\n          memoize: memoize,\r\n          delay: delay,\r\n          defer: defer,\r\n          throttle: throttle,\r\n          debounce: debounce,\r\n          wrap: wrap,\r\n          negate: negate,\r\n          compose: compose,\r\n          after: after,\r\n          before: before,\r\n          once: once,\r\n          findKey: findKey,\r\n          findIndex: findIndex,\r\n          findLastIndex: findLastIndex,\r\n          sortedIndex: sortedIndex,\r\n          indexOf: indexOf,\r\n          lastIndexOf: lastIndexOf,\r\n          find: find,\r\n          detect: find,\r\n          findWhere: findWhere,\r\n          each: each,\r\n          forEach: each,\r\n          map: map,\r\n          collect: map,\r\n          reduce: reduce,\r\n          foldl: reduce,\r\n          inject: reduce,\r\n          reduceRight: reduceRight,\r\n          foldr: reduceRight,\r\n          filter: filter,\r\n          select: filter,\r\n          reject: reject,\r\n          every: every,\r\n          all: every,\r\n          some: some,\r\n          any: some,\r\n          contains: contains,\r\n          includes: contains,\r\n          include: contains,\r\n          invoke: invoke,\r\n          pluck: pluck,\r\n          where: where,\r\n          max: max,\r\n          min: min,\r\n          shuffle: shuffle,\r\n          sample: sample,\r\n          sortBy: sortBy,\r\n          groupBy: groupBy,\r\n          indexBy: indexBy,\r\n          countBy: countBy,\r\n          partition: partition,\r\n          toArray: toArray,\r\n          size: size,\r\n          pick: pick,\r\n          omit: omit,\r\n          first: first,\r\n          head: first,\r\n          take: first,\r\n          initial: initial,\r\n          last: last,\r\n          rest: rest,\r\n          tail: rest,\r\n          drop: rest,\r\n          compact: compact,\r\n          flatten: flatten,\r\n          without: without,\r\n          uniq: uniq,\r\n          unique: uniq,\r\n          union: union,\r\n          intersection: intersection,\r\n          difference: difference,\r\n          unzip: unzip,\r\n          transpose: unzip,\r\n          zip: zip,\r\n          object: object,\r\n          range: range,\r\n          chunk: chunk,\r\n          mixin: mixin,\r\n          'default': _$1\r\n        };\r\n      \r\n        // Default Export\r\n      \r\n        // Add all of the Underscore functions to the wrapper object.\r\n        var _ = mixin(allExports);\r\n        // Legacy Node.js API.\r\n        _._ = _;\r\n      \r\n        return _;\r\n      \r\n      })));\r\n      //# sourceMappingURL=underscore-umd.js.map\r\n      \r\n//     Backbone.js 1.4.1\r\n\r\n//     (c) 2010-2022 Jeremy Ashkenas and DocumentCloud\r\n//     Backbone may be freely distributed under the MIT license.\r\n//     For all details and documentation:\r\n//     http://backbonejs.org\r\n\r\n(function(factory) {\r\n\r\n    // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\r\n    // We use `self` instead of `window` for `WebWorker` support.\r\n    var root = typeof self == 'object' && self.self === self && self ||\r\n              typeof global == 'object' && global.global === global && global;\r\n  \r\n    // Set up Backbone appropriately for the environment. Start with AMD.\r\n    if (typeof define === 'function' && define.amd) {\r\n      define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\r\n        // Export global even in AMD case in case this script is loaded with\r\n        // others that may still expect a global Backbone.\r\n        root.Backbone = factory(root, exports, _, $);\r\n      });\r\n  \r\n    // Next for Node.js or CommonJS. jQuery may not be needed as a module.\r\n    } else if (typeof exports !== 'undefined') {\r\n      var _ = require('underscore'), $;\r\n      try { $ = require('jquery'); } catch (e) {}\r\n      factory(root, exports, _, $);\r\n  \r\n    // Finally, as a browser global.\r\n    } else {\r\n      root.Backbone = factory(root, {}, root._, root.jQuery || root.Zepto || root.ender || root.$);\r\n    }\r\n  \r\n  })(function(root, Backbone, _, $) {\r\n  \r\n    // Initial Setup\r\n    // -------------\r\n  \r\n    // Save the previous value of the `Backbone` variable, so that it can be\r\n    // restored later on, if `noConflict` is used.\r\n    var previousBackbone = root.Backbone;\r\n  \r\n    // Create a local reference to a common array method we'll want to use later.\r\n    var slice = Array.prototype.slice;\r\n  \r\n    // Current version of the library. Keep in sync with `package.json`.\r\n    Backbone.VERSION = '1.4.1';\r\n  \r\n    // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\r\n    // the `$` variable.\r\n    Backbone.$ = $;\r\n  \r\n    // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\r\n    // to its previous owner. Returns a reference to this Backbone object.\r\n    Backbone.noConflict = function() {\r\n      root.Backbone = previousBackbone;\r\n      return this;\r\n    };\r\n  \r\n    // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\r\n    // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\r\n    // set a `X-Http-Method-Override` header.\r\n    Backbone.emulateHTTP = false;\r\n  \r\n    // Turn on `emulateJSON` to support legacy servers that can't deal with direct\r\n    // `application/json` requests ... this will encode the body as\r\n    // `application/x-www-form-urlencoded` instead and will send the model in a\r\n    // form param named `model`.\r\n    Backbone.emulateJSON = false;\r\n  \r\n    // Backbone.Events\r\n    // ---------------\r\n  \r\n    // A module that can be mixed in to *any object* in order to provide it with\r\n    // a custom event channel. You may bind a callback to an event with `on` or\r\n    // remove with `off`; `trigger`-ing an event fires all callbacks in\r\n    // succession.\r\n    //\r\n    //     var object = {};\r\n    //     _.extend(object, Backbone.Events);\r\n    //     object.on('expand', function(){ alert('expanded'); });\r\n    //     object.trigger('expand');\r\n    //\r\n    var Events = Backbone.Events = {};\r\n  \r\n    // Regular expression used to split event strings.\r\n    var eventSplitter = /\\s+/;\r\n  \r\n    // A private global variable to share between listeners and listenees.\r\n    var _listening;\r\n  \r\n    // Iterates over the standard `event, callback` (as well as the fancy multiple\r\n    // space-separated events `\"change blur\", callback` and jQuery-style event\r\n    // maps `{event: callback}`).\r\n    var eventsApi = function(iteratee, events, name, callback, opts) {\r\n      var i = 0, names;\r\n      if (name && typeof name === 'object') {\r\n        // Handle event maps.\r\n        if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\r\n        for (names = _.keys(name); i < names.length ; i++) {\r\n          events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\r\n        }\r\n      } else if (name && eventSplitter.test(name)) {\r\n        // Handle space-separated event names by delegating them individually.\r\n        for (names = name.split(eventSplitter); i < names.length; i++) {\r\n          events = iteratee(events, names[i], callback, opts);\r\n        }\r\n      } else {\r\n        // Finally, standard events.\r\n        events = iteratee(events, name, callback, opts);\r\n      }\r\n      return events;\r\n    };\r\n  \r\n    // Bind an event to a `callback` function. Passing `\"all\"` will bind\r\n    // the callback to all events fired.\r\n    Events.on = function(name, callback, context) {\r\n      this._events = eventsApi(onApi, this._events || {}, name, callback, {\r\n        context: context,\r\n        ctx: this,\r\n        listening: _listening\r\n      });\r\n  \r\n      if (_listening) {\r\n        var listeners = this._listeners || (this._listeners = {});\r\n        listeners[_listening.id] = _listening;\r\n        // Allow the listening to use a counter, instead of tracking\r\n        // callbacks for library interop\r\n        _listening.interop = false;\r\n      }\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // Inversion-of-control versions of `on`. Tell *this* object to listen to\r\n    // an event in another object... keeping track of what it's listening to\r\n    // for easier unbinding later.\r\n    Events.listenTo = function(obj, name, callback) {\r\n      if (!obj) return this;\r\n      var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\r\n      var listeningTo = this._listeningTo || (this._listeningTo = {});\r\n      var listening = _listening = listeningTo[id];\r\n  \r\n      // This object is not listening to any other events on `obj` yet.\r\n      // Setup the necessary references to track the listening callbacks.\r\n      if (!listening) {\r\n        this._listenId || (this._listenId = _.uniqueId('l'));\r\n        listening = _listening = listeningTo[id] = new Listening(this, obj);\r\n      }\r\n  \r\n      // Bind callbacks on obj.\r\n      var error = tryCatchOn(obj, name, callback, this);\r\n      _listening = void 0;\r\n  \r\n      if (error) throw error;\r\n      // If the target obj is not Backbone.Events, track events manually.\r\n      if (listening.interop) listening.on(name, callback);\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // The reducing API that adds a callback to the `events` object.\r\n    var onApi = function(events, name, callback, options) {\r\n      if (callback) {\r\n        var handlers = events[name] || (events[name] = []);\r\n        var context = options.context, ctx = options.ctx, listening = options.listening;\r\n        if (listening) listening.count++;\r\n  \r\n        handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\r\n      }\r\n      return events;\r\n    };\r\n  \r\n    // An try-catch guarded #on function, to prevent poisoning the global\r\n    // `_listening` variable.\r\n    var tryCatchOn = function(obj, name, callback, context) {\r\n      try {\r\n        obj.on(name, callback, context);\r\n      } catch (e) {\r\n        return e;\r\n      }\r\n    };\r\n  \r\n    // Remove one or many callbacks. If `context` is null, removes all\r\n    // callbacks with that function. If `callback` is null, removes all\r\n    // callbacks for the event. If `name` is null, removes all bound\r\n    // callbacks for all events.\r\n    Events.off = function(name, callback, context) {\r\n      if (!this._events) return this;\r\n      this._events = eventsApi(offApi, this._events, name, callback, {\r\n        context: context,\r\n        listeners: this._listeners\r\n      });\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // Tell this object to stop listening to either specific events ... or\r\n    // to every object it's currently listening to.\r\n    Events.stopListening = function(obj, name, callback) {\r\n      var listeningTo = this._listeningTo;\r\n      if (!listeningTo) return this;\r\n  \r\n      var ids = obj ? [obj._listenId] : _.keys(listeningTo);\r\n      for (var i = 0; i < ids.length; i++) {\r\n        var listening = listeningTo[ids[i]];\r\n  \r\n        // If listening doesn't exist, this object is not currently\r\n        // listening to obj. Break out early.\r\n        if (!listening) break;\r\n  \r\n        listening.obj.off(name, callback, this);\r\n        if (listening.interop) listening.off(name, callback);\r\n      }\r\n      if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // The reducing API that removes a callback from the `events` object.\r\n    var offApi = function(events, name, callback, options) {\r\n      if (!events) return;\r\n  \r\n      var context = options.context, listeners = options.listeners;\r\n      var i = 0, names;\r\n  \r\n      // Delete all event listeners and \"drop\" events.\r\n      if (!name && !context && !callback) {\r\n        for (names = _.keys(listeners); i < names.length; i++) {\r\n          listeners[names[i]].cleanup();\r\n        }\r\n        return;\r\n      }\r\n  \r\n      names = name ? [name] : _.keys(events);\r\n      for (; i < names.length; i++) {\r\n        name = names[i];\r\n        var handlers = events[name];\r\n  \r\n        // Bail out if there are no events stored.\r\n        if (!handlers) break;\r\n  \r\n        // Find any remaining events.\r\n        var remaining = [];\r\n        for (var j = 0; j < handlers.length; j++) {\r\n          var handler = handlers[j];\r\n          if (\r\n            callback && callback !== handler.callback &&\r\n              callback !== handler.callback._callback ||\r\n                context && context !== handler.context\r\n          ) {\r\n            remaining.push(handler);\r\n          } else {\r\n            var listening = handler.listening;\r\n            if (listening) listening.off(name, callback);\r\n          }\r\n        }\r\n  \r\n        // Replace events if there are any remaining.  Otherwise, clean up.\r\n        if (remaining.length) {\r\n          events[name] = remaining;\r\n        } else {\r\n          delete events[name];\r\n        }\r\n      }\r\n  \r\n      return events;\r\n    };\r\n  \r\n    // Bind an event to only be triggered a single time. After the first time\r\n    // the callback is invoked, its listener will be removed. If multiple events\r\n    // are passed in using the space-separated syntax, the handler will fire\r\n    // once for each event, not once for a combination of all events.\r\n    Events.once = function(name, callback, context) {\r\n      // Map the event into a `{event: once}` object.\r\n      var events = eventsApi(onceMap, {}, name, callback, this.off.bind(this));\r\n      if (typeof name === 'string' && context == null) callback = void 0;\r\n      return this.on(events, callback, context);\r\n    };\r\n  \r\n    // Inversion-of-control versions of `once`.\r\n    Events.listenToOnce = function(obj, name, callback) {\r\n      // Map the event into a `{event: once}` object.\r\n      var events = eventsApi(onceMap, {}, name, callback, this.stopListening.bind(this, obj));\r\n      return this.listenTo(obj, events);\r\n    };\r\n  \r\n    // Reduces the event callbacks into a map of `{event: onceWrapper}`.\r\n    // `offer` unbinds the `onceWrapper` after it has been called.\r\n    var onceMap = function(map, name, callback, offer) {\r\n      if (callback) {\r\n        var once = map[name] = _.once(function() {\r\n          offer(name, once);\r\n          callback.apply(this, arguments);\r\n        });\r\n        once._callback = callback;\r\n      }\r\n      return map;\r\n    };\r\n  \r\n    // Trigger one or many events, firing all bound callbacks. Callbacks are\r\n    // passed the same arguments as `trigger` is, apart from the event name\r\n    // (unless you're listening on `\"all\"`, which will cause your callback to\r\n    // receive the true name of the event as the first argument).\r\n    Events.trigger = function(name) {\r\n      if (!this._events) return this;\r\n  \r\n      var length = Math.max(0, arguments.length - 1);\r\n      var args = Array(length);\r\n      for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\r\n  \r\n      eventsApi(triggerApi, this._events, name, void 0, args);\r\n      return this;\r\n    };\r\n  \r\n    // Handles triggering the appropriate event callbacks.\r\n    var triggerApi = function(objEvents, name, callback, args) {\r\n      if (objEvents) {\r\n        var events = objEvents[name];\r\n        var allEvents = objEvents.all;\r\n        if (events && allEvents) allEvents = allEvents.slice();\r\n        if (events) triggerEvents(events, args);\r\n        if (allEvents) triggerEvents(allEvents, [name].concat(args));\r\n      }\r\n      return objEvents;\r\n    };\r\n  \r\n    // A difficult-to-believe, but optimized internal dispatch function for\r\n    // triggering events. Tries to keep the usual cases speedy (most internal\r\n    // Backbone events have 3 arguments).\r\n    var triggerEvents = function(events, args) {\r\n      var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\r\n      switch (args.length) {\r\n        case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\r\n        case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\r\n        case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\r\n        case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\r\n        default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\r\n      }\r\n    };\r\n  \r\n    // A listening class that tracks and cleans up memory bindings\r\n    // when all callbacks have been offed.\r\n    var Listening = function(listener, obj) {\r\n      this.id = listener._listenId;\r\n      this.listener = listener;\r\n      this.obj = obj;\r\n      this.interop = true;\r\n      this.count = 0;\r\n      this._events = void 0;\r\n    };\r\n  \r\n    Listening.prototype.on = Events.on;\r\n  \r\n    // Offs a callback (or several).\r\n    // Uses an optimized counter if the listenee uses Backbone.Events.\r\n    // Otherwise, falls back to manual tracking to support events\r\n    // library interop.\r\n    Listening.prototype.off = function(name, callback) {\r\n      var cleanup;\r\n      if (this.interop) {\r\n        this._events = eventsApi(offApi, this._events, name, callback, {\r\n          context: void 0,\r\n          listeners: void 0\r\n        });\r\n        cleanup = !this._events;\r\n      } else {\r\n        this.count--;\r\n        cleanup = this.count === 0;\r\n      }\r\n      if (cleanup) this.cleanup();\r\n    };\r\n  \r\n    // Cleans up memory bindings between the listener and the listenee.\r\n    Listening.prototype.cleanup = function() {\r\n      delete this.listener._listeningTo[this.obj._listenId];\r\n      if (!this.interop) delete this.obj._listeners[this.id];\r\n    };\r\n  \r\n    // Aliases for backwards compatibility.\r\n    Events.bind   = Events.on;\r\n    Events.unbind = Events.off;\r\n  \r\n    // Allow the `Backbone` object to serve as a global event bus, for folks who\r\n    // want global \"pubsub\" in a convenient place.\r\n    _.extend(Backbone, Events);\r\n  \r\n    // Backbone.Model\r\n    // --------------\r\n  \r\n    // Backbone **Models** are the basic data object in the framework --\r\n    // frequently representing a row in a table in a database on your server.\r\n    // A discrete chunk of data and a bunch of useful, related methods for\r\n    // performing computations and transformations on that data.\r\n  \r\n    // Create a new model with the specified attributes. A client id (`cid`)\r\n    // is automatically generated and assigned for you.\r\n    var Model = Backbone.Model = function(attributes, options) {\r\n      var attrs = attributes || {};\r\n      options || (options = {});\r\n      this.preinitialize.apply(this, arguments);\r\n      this.cid = _.uniqueId(this.cidPrefix);\r\n      this.attributes = {};\r\n      if (options.collection) this.collection = options.collection;\r\n      if (options.parse) attrs = this.parse(attrs, options) || {};\r\n      var defaults = _.result(this, 'defaults');\r\n      attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\r\n      this.set(attrs, options);\r\n      this.changed = {};\r\n      this.initialize.apply(this, arguments);\r\n    };\r\n  \r\n    // Attach all inheritable methods to the Model prototype.\r\n    _.extend(Model.prototype, Events, {\r\n  \r\n      // A hash of attributes whose current and previous value differ.\r\n      changed: null,\r\n  \r\n      // The value returned during the last failed validation.\r\n      validationError: null,\r\n  \r\n      // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\r\n      // CouchDB users may want to set this to `\"_id\"`.\r\n      idAttribute: 'id',\r\n  \r\n      // The prefix is used to create the client id which is used to identify models locally.\r\n      // You may want to override this if you're experiencing name clashes with model ids.\r\n      cidPrefix: 'c',\r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the Model.\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // Return a copy of the model's `attributes` object.\r\n      toJSON: function(options) {\r\n        return _.clone(this.attributes);\r\n      },\r\n  \r\n      // Proxy `Backbone.sync` by default -- but override this if you need\r\n      // custom syncing semantics for *this* particular model.\r\n      sync: function() {\r\n        return Backbone.sync.apply(this, arguments);\r\n      },\r\n  \r\n      // Get the value of an attribute.\r\n      get: function(attr) {\r\n        return this.attributes[attr];\r\n      },\r\n  \r\n      // Get the HTML-escaped value of an attribute.\r\n      escape: function(attr) {\r\n        return _.escape(this.get(attr));\r\n      },\r\n  \r\n      // Returns `true` if the attribute contains a value that is not null\r\n      // or undefined.\r\n      has: function(attr) {\r\n        return this.get(attr) != null;\r\n      },\r\n  \r\n      // Special-cased proxy to underscore's `_.matches` method.\r\n      matches: function(attrs) {\r\n        return !!_.iteratee(attrs, this)(this.attributes);\r\n      },\r\n  \r\n      // Set a hash of model attributes on the object, firing `\"change\"`. This is\r\n      // the core primitive operation of a model, updating the data and notifying\r\n      // anyone who needs to know about the change in state. The heart of the beast.\r\n      set: function(key, val, options) {\r\n        if (key == null) return this;\r\n  \r\n        // Handle both `\"key\", value` and `{key: value}` -style arguments.\r\n        var attrs;\r\n        if (typeof key === 'object') {\r\n          attrs = key;\r\n          options = val;\r\n        } else {\r\n          (attrs = {})[key] = val;\r\n        }\r\n  \r\n        options || (options = {});\r\n  \r\n        // Run validation.\r\n        if (!this._validate(attrs, options)) return false;\r\n  \r\n        // Extract attributes and options.\r\n        var unset      = options.unset;\r\n        var silent     = options.silent;\r\n        var changes    = [];\r\n        var changing   = this._changing;\r\n        this._changing = true;\r\n  \r\n        if (!changing) {\r\n          this._previousAttributes = _.clone(this.attributes);\r\n          this.changed = {};\r\n        }\r\n  \r\n        var current = this.attributes;\r\n        var changed = this.changed;\r\n        var prev    = this._previousAttributes;\r\n  \r\n        // For each `set` attribute, update or delete the current value.\r\n        for (var attr in attrs) {\r\n          val = attrs[attr];\r\n          if (!_.isEqual(current[attr], val)) changes.push(attr);\r\n          if (!_.isEqual(prev[attr], val)) {\r\n            changed[attr] = val;\r\n          } else {\r\n            delete changed[attr];\r\n          }\r\n          unset ? delete current[attr] : current[attr] = val;\r\n        }\r\n  \r\n        // Update the `id`.\r\n        if (this.idAttribute in attrs) {\r\n          var prevId = this.id;\r\n          this.id = this.get(this.idAttribute);\r\n          this.trigger('changeId', this, prevId, options);\r\n        }\r\n  \r\n        // Trigger all relevant attribute changes.\r\n        if (!silent) {\r\n          if (changes.length) this._pending = options;\r\n          for (var i = 0; i < changes.length; i++) {\r\n            this.trigger('change:' + changes[i], this, current[changes[i]], options);\r\n          }\r\n        }\r\n  \r\n        // You might be wondering why there's a `while` loop here. Changes can\r\n        // be recursively nested within `\"change\"` events.\r\n        if (changing) return this;\r\n        if (!silent) {\r\n          while (this._pending) {\r\n            options = this._pending;\r\n            this._pending = false;\r\n            this.trigger('change', this, options);\r\n          }\r\n        }\r\n        this._pending = false;\r\n        this._changing = false;\r\n        return this;\r\n      },\r\n  \r\n      // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\r\n      // if the attribute doesn't exist.\r\n      unset: function(attr, options) {\r\n        return this.set(attr, void 0, _.extend({}, options, {unset: true}));\r\n      },\r\n  \r\n      // Clear all attributes on the model, firing `\"change\"`.\r\n      clear: function(options) {\r\n        var attrs = {};\r\n        for (var key in this.attributes) attrs[key] = void 0;\r\n        return this.set(attrs, _.extend({}, options, {unset: true}));\r\n      },\r\n  \r\n      // Determine if the model has changed since the last `\"change\"` event.\r\n      // If you specify an attribute name, determine if that attribute has changed.\r\n      hasChanged: function(attr) {\r\n        if (attr == null) return !_.isEmpty(this.changed);\r\n        return _.has(this.changed, attr);\r\n      },\r\n  \r\n      // Return an object containing all the attributes that have changed, or\r\n      // false if there are no changed attributes. Useful for determining what\r\n      // parts of a view need to be updated and/or what attributes need to be\r\n      // persisted to the server. Unset attributes will be set to undefined.\r\n      // You can also pass an attributes object to diff against the model,\r\n      // determining if there *would be* a change.\r\n      changedAttributes: function(diff) {\r\n        if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\r\n        var old = this._changing ? this._previousAttributes : this.attributes;\r\n        var changed = {};\r\n        var hasChanged;\r\n        for (var attr in diff) {\r\n          var val = diff[attr];\r\n          if (_.isEqual(old[attr], val)) continue;\r\n          changed[attr] = val;\r\n          hasChanged = true;\r\n        }\r\n        return hasChanged ? changed : false;\r\n      },\r\n  \r\n      // Get the previous value of an attribute, recorded at the time the last\r\n      // `\"change\"` event was fired.\r\n      previous: function(attr) {\r\n        if (attr == null || !this._previousAttributes) return null;\r\n        return this._previousAttributes[attr];\r\n      },\r\n  \r\n      // Get all of the attributes of the model at the time of the previous\r\n      // `\"change\"` event.\r\n      previousAttributes: function() {\r\n        return _.clone(this._previousAttributes);\r\n      },\r\n  \r\n      // Fetch the model from the server, merging the response with the model's\r\n      // local attributes. Any changed attributes will trigger a \"change\" event.\r\n      fetch: function(options) {\r\n        options = _.extend({parse: true}, options);\r\n        var model = this;\r\n        var success = options.success;\r\n        options.success = function(resp) {\r\n          var serverAttrs = options.parse ? model.parse(resp, options) : resp;\r\n          if (!model.set(serverAttrs, options)) return false;\r\n          if (success) success.call(options.context, model, resp, options);\r\n          model.trigger('sync', model, resp, options);\r\n        };\r\n        wrapError(this, options);\r\n        return this.sync('read', this, options);\r\n      },\r\n  \r\n      // Set a hash of model attributes, and sync the model to the server.\r\n      // If the server returns an attributes hash that differs, the model's\r\n      // state will be `set` again.\r\n      save: function(key, val, options) {\r\n        // Handle both `\"key\", value` and `{key: value}` -style arguments.\r\n        var attrs;\r\n        if (key == null || typeof key === 'object') {\r\n          attrs = key;\r\n          options = val;\r\n        } else {\r\n          (attrs = {})[key] = val;\r\n        }\r\n  \r\n        options = _.extend({validate: true, parse: true}, options);\r\n        var wait = options.wait;\r\n  \r\n        // If we're not waiting and attributes exist, save acts as\r\n        // `set(attr).save(null, opts)` with validation. Otherwise, check if\r\n        // the model will be valid when the attributes, if any, are set.\r\n        if (attrs && !wait) {\r\n          if (!this.set(attrs, options)) return false;\r\n        } else if (!this._validate(attrs, options)) {\r\n          return false;\r\n        }\r\n  \r\n        // After a successful server-side save, the client is (optionally)\r\n        // updated with the server-side state.\r\n        var model = this;\r\n        var success = options.success;\r\n        var attributes = this.attributes;\r\n        options.success = function(resp) {\r\n          // Ensure attributes are restored during synchronous saves.\r\n          model.attributes = attributes;\r\n          var serverAttrs = options.parse ? model.parse(resp, options) : resp;\r\n          if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\r\n          if (serverAttrs && !model.set(serverAttrs, options)) return false;\r\n          if (success) success.call(options.context, model, resp, options);\r\n          model.trigger('sync', model, resp, options);\r\n        };\r\n        wrapError(this, options);\r\n  \r\n        // Set temporary attributes if `{wait: true}` to properly find new ids.\r\n        if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\r\n  \r\n        var method = this.isNew() ? 'create' : options.patch ? 'patch' : 'update';\r\n        if (method === 'patch' && !options.attrs) options.attrs = attrs;\r\n        var xhr = this.sync(method, this, options);\r\n  \r\n        // Restore attributes.\r\n        this.attributes = attributes;\r\n  \r\n        return xhr;\r\n      },\r\n  \r\n      // Destroy this model on the server if it was already persisted.\r\n      // Optimistically removes the model from its collection, if it has one.\r\n      // If `wait: true` is passed, waits for the server to respond before removal.\r\n      destroy: function(options) {\r\n        options = options ? _.clone(options) : {};\r\n        var model = this;\r\n        var success = options.success;\r\n        var wait = options.wait;\r\n  \r\n        var destroy = function() {\r\n          model.stopListening();\r\n          model.trigger('destroy', model, model.collection, options);\r\n        };\r\n  \r\n        options.success = function(resp) {\r\n          if (wait) destroy();\r\n          if (success) success.call(options.context, model, resp, options);\r\n          if (!model.isNew()) model.trigger('sync', model, resp, options);\r\n        };\r\n  \r\n        var xhr = false;\r\n        if (this.isNew()) {\r\n          _.defer(options.success);\r\n        } else {\r\n          wrapError(this, options);\r\n          xhr = this.sync('delete', this, options);\r\n        }\r\n        if (!wait) destroy();\r\n        return xhr;\r\n      },\r\n  \r\n      // Default URL for the model's representation on the server -- if you're\r\n      // using Backbone's restful methods, override this to change the endpoint\r\n      // that will be called.\r\n      url: function() {\r\n        var base =\r\n          _.result(this, 'urlRoot') ||\r\n          _.result(this.collection, 'url') ||\r\n          urlError();\r\n        if (this.isNew()) return base;\r\n        var id = this.get(this.idAttribute);\r\n        return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\r\n      },\r\n  \r\n      // **parse** converts a response into the hash of attributes to be `set` on\r\n      // the model. The default implementation is just to pass the response along.\r\n      parse: function(resp, options) {\r\n        return resp;\r\n      },\r\n  \r\n      // Create a new model with identical attributes to this one.\r\n      clone: function() {\r\n        return new this.constructor(this.attributes);\r\n      },\r\n  \r\n      // A model is new if it has never been saved to the server, and lacks an id.\r\n      isNew: function() {\r\n        return !this.has(this.idAttribute);\r\n      },\r\n  \r\n      // Check if the model is currently in a valid state.\r\n      isValid: function(options) {\r\n        return this._validate({}, _.extend({}, options, {validate: true}));\r\n      },\r\n  \r\n      // Run validation against the next complete set of model attributes,\r\n      // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\r\n      _validate: function(attrs, options) {\r\n        if (!options.validate || !this.validate) return true;\r\n        attrs = _.extend({}, this.attributes, attrs);\r\n        var error = this.validationError = this.validate(attrs, options) || null;\r\n        if (!error) return true;\r\n        this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\r\n        return false;\r\n      }\r\n  \r\n    });\r\n  \r\n    // Backbone.Collection\r\n    // -------------------\r\n  \r\n    // If models tend to represent a single row of data, a Backbone Collection is\r\n    // more analogous to a table full of data ... or a small slice or page of that\r\n    // table, or a collection of rows that belong together for a particular reason\r\n    // -- all of the messages in this particular folder, all of the documents\r\n    // belonging to this particular author, and so on. Collections maintain\r\n    // indexes of their models, both in order, and for lookup by `id`.\r\n  \r\n    // Create a new **Collection**, perhaps to contain a specific type of `model`.\r\n    // If a `comparator` is specified, the Collection will maintain\r\n    // its models in sort order, as they're added and removed.\r\n    var Collection = Backbone.Collection = function(models, options) {\r\n      options || (options = {});\r\n      this.preinitialize.apply(this, arguments);\r\n      if (options.model) this.model = options.model;\r\n      if (options.comparator !== void 0) this.comparator = options.comparator;\r\n      this._reset();\r\n      this.initialize.apply(this, arguments);\r\n      if (models) this.reset(models, _.extend({silent: true}, options));\r\n    };\r\n  \r\n    // Default options for `Collection#set`.\r\n    var setOptions = {add: true, remove: true, merge: true};\r\n    var addOptions = {add: true, remove: false};\r\n  \r\n    // Splices `insert` into `array` at index `at`.\r\n    var splice = function(array, insert, at) {\r\n      at = Math.min(Math.max(at, 0), array.length);\r\n      var tail = Array(array.length - at);\r\n      var length = insert.length;\r\n      var i;\r\n      for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\r\n      for (i = 0; i < length; i++) array[i + at] = insert[i];\r\n      for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\r\n    };\r\n  \r\n    // Define the Collection's inheritable methods.\r\n    _.extend(Collection.prototype, Events, {\r\n  \r\n      // The default model for a collection is just a **Backbone.Model**.\r\n      // This should be overridden in most cases.\r\n      model: Model,\r\n  \r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the Collection.\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // The JSON representation of a Collection is an array of the\r\n      // models' attributes.\r\n      toJSON: function(options) {\r\n        return this.map(function(model) { return model.toJSON(options); });\r\n      },\r\n  \r\n      // Proxy `Backbone.sync` by default.\r\n      sync: function() {\r\n        return Backbone.sync.apply(this, arguments);\r\n      },\r\n  \r\n      // Add a model, or list of models to the set. `models` may be Backbone\r\n      // Models or raw JavaScript objects to be converted to Models, or any\r\n      // combination of the two.\r\n      add: function(models, options) {\r\n        return this.set(models, _.extend({merge: false}, options, addOptions));\r\n      },\r\n  \r\n      // Remove a model, or a list of models from the set.\r\n      remove: function(models, options) {\r\n        options = _.extend({}, options);\r\n        var singular = !_.isArray(models);\r\n        models = singular ? [models] : models.slice();\r\n        var removed = this._removeModels(models, options);\r\n        if (!options.silent && removed.length) {\r\n          options.changes = {added: [], merged: [], removed: removed};\r\n          this.trigger('update', this, options);\r\n        }\r\n        return singular ? removed[0] : removed;\r\n      },\r\n  \r\n      // Update a collection by `set`-ing a new list of models, adding new ones,\r\n      // removing models that are no longer present, and merging models that\r\n      // already exist in the collection, as necessary. Similar to **Model#set**,\r\n      // the core operation for updating the data contained by the collection.\r\n      set: function(models, options) {\r\n        if (models == null) return;\r\n  \r\n        options = _.extend({}, setOptions, options);\r\n        if (options.parse && !this._isModel(models)) {\r\n          models = this.parse(models, options) || [];\r\n        }\r\n  \r\n        var singular = !_.isArray(models);\r\n        models = singular ? [models] : models.slice();\r\n  \r\n        var at = options.at;\r\n        if (at != null) at = +at;\r\n        if (at > this.length) at = this.length;\r\n        if (at < 0) at += this.length + 1;\r\n  \r\n        var set = [];\r\n        var toAdd = [];\r\n        var toMerge = [];\r\n        var toRemove = [];\r\n        var modelMap = {};\r\n  \r\n        var add = options.add;\r\n        var merge = options.merge;\r\n        var remove = options.remove;\r\n  \r\n        var sort = false;\r\n        var sortable = this.comparator && at == null && options.sort !== false;\r\n        var sortAttr = _.isString(this.comparator) ? this.comparator : null;\r\n  \r\n        // Turn bare objects into model references, and prevent invalid models\r\n        // from being added.\r\n        var model, i;\r\n        for (i = 0; i < models.length; i++) {\r\n          model = models[i];\r\n  \r\n          // If a duplicate is found, prevent it from being added and\r\n          // optionally merge it into the existing model.\r\n          var existing = this.get(model);\r\n          if (existing) {\r\n            if (merge && model !== existing) {\r\n              var attrs = this._isModel(model) ? model.attributes : model;\r\n              if (options.parse) attrs = existing.parse(attrs, options);\r\n              existing.set(attrs, options);\r\n              toMerge.push(existing);\r\n              if (sortable && !sort) sort = existing.hasChanged(sortAttr);\r\n            }\r\n            if (!modelMap[existing.cid]) {\r\n              modelMap[existing.cid] = true;\r\n              set.push(existing);\r\n            }\r\n            models[i] = existing;\r\n  \r\n          // If this is a new, valid model, push it to the `toAdd` list.\r\n          } else if (add) {\r\n            model = models[i] = this._prepareModel(model, options);\r\n            if (model) {\r\n              toAdd.push(model);\r\n              this._addReference(model, options);\r\n              modelMap[model.cid] = true;\r\n              set.push(model);\r\n            }\r\n          }\r\n        }\r\n  \r\n        // Remove stale models.\r\n        if (remove) {\r\n          for (i = 0; i < this.length; i++) {\r\n            model = this.models[i];\r\n            if (!modelMap[model.cid]) toRemove.push(model);\r\n          }\r\n          if (toRemove.length) this._removeModels(toRemove, options);\r\n        }\r\n  \r\n        // See if sorting is needed, update `length` and splice in new models.\r\n        var orderChanged = false;\r\n        var replace = !sortable && add && remove;\r\n        if (set.length && replace) {\r\n          orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\r\n            return m !== set[index];\r\n          });\r\n          this.models.length = 0;\r\n          splice(this.models, set, 0);\r\n          this.length = this.models.length;\r\n        } else if (toAdd.length) {\r\n          if (sortable) sort = true;\r\n          splice(this.models, toAdd, at == null ? this.length : at);\r\n          this.length = this.models.length;\r\n        }\r\n  \r\n        // Silently sort the collection if appropriate.\r\n        if (sort) this.sort({silent: true});\r\n  \r\n        // Unless silenced, it's time to fire all appropriate add/sort/update events.\r\n        if (!options.silent) {\r\n          for (i = 0; i < toAdd.length; i++) {\r\n            if (at != null) options.index = at + i;\r\n            model = toAdd[i];\r\n            model.trigger('add', model, this, options);\r\n          }\r\n          if (sort || orderChanged) this.trigger('sort', this, options);\r\n          if (toAdd.length || toRemove.length || toMerge.length) {\r\n            options.changes = {\r\n              added: toAdd,\r\n              removed: toRemove,\r\n              merged: toMerge\r\n            };\r\n            this.trigger('update', this, options);\r\n          }\r\n        }\r\n  \r\n        // Return the added (or merged) model (or models).\r\n        return singular ? models[0] : models;\r\n      },\r\n  \r\n      // When you have more items than you want to add or remove individually,\r\n      // you can reset the entire set with a new list of models, without firing\r\n      // any granular `add` or `remove` events. Fires `reset` when finished.\r\n      // Useful for bulk operations and optimizations.\r\n      reset: function(models, options) {\r\n        options = options ? _.clone(options) : {};\r\n        for (var i = 0; i < this.models.length; i++) {\r\n          this._removeReference(this.models[i], options);\r\n        }\r\n        options.previousModels = this.models;\r\n        this._reset();\r\n        models = this.add(models, _.extend({silent: true}, options));\r\n        if (!options.silent) this.trigger('reset', this, options);\r\n        return models;\r\n      },\r\n  \r\n      // Add a model to the end of the collection.\r\n      push: function(model, options) {\r\n        return this.add(model, _.extend({at: this.length}, options));\r\n      },\r\n  \r\n      // Remove a model from the end of the collection.\r\n      pop: function(options) {\r\n        var model = this.at(this.length - 1);\r\n        return this.remove(model, options);\r\n      },\r\n  \r\n      // Add a model to the beginning of the collection.\r\n      unshift: function(model, options) {\r\n        return this.add(model, _.extend({at: 0}, options));\r\n      },\r\n  \r\n      // Remove a model from the beginning of the collection.\r\n      shift: function(options) {\r\n        var model = this.at(0);\r\n        return this.remove(model, options);\r\n      },\r\n  \r\n      // Slice out a sub-array of models from the collection.\r\n      slice: function() {\r\n        return slice.apply(this.models, arguments);\r\n      },\r\n  \r\n      // Get a model from the set by id, cid, model object with id or cid\r\n      // properties, or an attributes object that is transformed through modelId.\r\n      get: function(obj) {\r\n        if (obj == null) return void 0;\r\n        return this._byId[obj] ||\r\n          this._byId[this.modelId(this._isModel(obj) ? obj.attributes : obj, obj.idAttribute)] ||\r\n          obj.cid && this._byId[obj.cid];\r\n      },\r\n  \r\n      // Returns `true` if the model is in the collection.\r\n      has: function(obj) {\r\n        return this.get(obj) != null;\r\n      },\r\n  \r\n      // Get the model at the given index.\r\n      at: function(index) {\r\n        if (index < 0) index += this.length;\r\n        return this.models[index];\r\n      },\r\n  \r\n      // Return models with matching attributes. Useful for simple cases of\r\n      // `filter`.\r\n      where: function(attrs, first) {\r\n        return this[first ? 'find' : 'filter'](attrs);\r\n      },\r\n  \r\n      // Return the first model with matching attributes. Useful for simple cases\r\n      // of `find`.\r\n      findWhere: function(attrs) {\r\n        return this.where(attrs, true);\r\n      },\r\n  \r\n      // Force the collection to re-sort itself. You don't need to call this under\r\n      // normal circumstances, as the set will maintain sort order as each item\r\n      // is added.\r\n      sort: function(options) {\r\n        var comparator = this.comparator;\r\n        if (!comparator) throw new Error('Cannot sort a set without a comparator');\r\n        options || (options = {});\r\n  \r\n        var length = comparator.length;\r\n        if (_.isFunction(comparator)) comparator = comparator.bind(this);\r\n  \r\n        // Run sort based on type of `comparator`.\r\n        if (length === 1 || _.isString(comparator)) {\r\n          this.models = this.sortBy(comparator);\r\n        } else {\r\n          this.models.sort(comparator);\r\n        }\r\n        if (!options.silent) this.trigger('sort', this, options);\r\n        return this;\r\n      },\r\n  \r\n      // Pluck an attribute from each model in the collection.\r\n      pluck: function(attr) {\r\n        return this.map(attr + '');\r\n      },\r\n  \r\n      // Fetch the default set of models for this collection, resetting the\r\n      // collection when they arrive. If `reset: true` is passed, the response\r\n      // data will be passed through the `reset` method instead of `set`.\r\n      fetch: function(options) {\r\n        options = _.extend({parse: true}, options);\r\n        var success = options.success;\r\n        var collection = this;\r\n        options.success = function(resp) {\r\n          var method = options.reset ? 'reset' : 'set';\r\n          collection[method](resp, options);\r\n          if (success) success.call(options.context, collection, resp, options);\r\n          collection.trigger('sync', collection, resp, options);\r\n        };\r\n        wrapError(this, options);\r\n        return this.sync('read', this, options);\r\n      },\r\n  \r\n      // Create a new instance of a model in this collection. Add the model to the\r\n      // collection immediately, unless `wait: true` is passed, in which case we\r\n      // wait for the server to agree.\r\n      create: function(model, options) {\r\n        options = options ? _.clone(options) : {};\r\n        var wait = options.wait;\r\n        model = this._prepareModel(model, options);\r\n        if (!model) return false;\r\n        if (!wait) this.add(model, options);\r\n        var collection = this;\r\n        var success = options.success;\r\n        options.success = function(m, resp, callbackOpts) {\r\n          if (wait) collection.add(m, callbackOpts);\r\n          if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\r\n        };\r\n        model.save(null, options);\r\n        return model;\r\n      },\r\n  \r\n      // **parse** converts a response into a list of models to be added to the\r\n      // collection. The default implementation is just to pass it through.\r\n      parse: function(resp, options) {\r\n        return resp;\r\n      },\r\n  \r\n      // Create a new collection with an identical list of models as this one.\r\n      clone: function() {\r\n        return new this.constructor(this.models, {\r\n          model: this.model,\r\n          comparator: this.comparator\r\n        });\r\n      },\r\n  \r\n      // Define how to uniquely identify models in the collection.\r\n      modelId: function(attrs, idAttribute) {\r\n        return attrs[idAttribute || this.model.prototype.idAttribute || 'id'];\r\n      },\r\n  \r\n      // Get an iterator of all models in this collection.\r\n      values: function() {\r\n        return new CollectionIterator(this, ITERATOR_VALUES);\r\n      },\r\n  \r\n      // Get an iterator of all model IDs in this collection.\r\n      keys: function() {\r\n        return new CollectionIterator(this, ITERATOR_KEYS);\r\n      },\r\n  \r\n      // Get an iterator of all [ID, model] tuples in this collection.\r\n      entries: function() {\r\n        return new CollectionIterator(this, ITERATOR_KEYSVALUES);\r\n      },\r\n  \r\n      // Private method to reset all internal state. Called when the collection\r\n      // is first initialized or reset.\r\n      _reset: function() {\r\n        this.length = 0;\r\n        this.models = [];\r\n        this._byId  = {};\r\n      },\r\n  \r\n      // Prepare a hash of attributes (or other model) to be added to this\r\n      // collection.\r\n      _prepareModel: function(attrs, options) {\r\n        if (this._isModel(attrs)) {\r\n          if (!attrs.collection) attrs.collection = this;\r\n          return attrs;\r\n        }\r\n        options = options ? _.clone(options) : {};\r\n        options.collection = this;\r\n  \r\n        var model;\r\n        if (this.model.prototype) {\r\n          model = new this.model(attrs, options);\r\n        } else {\r\n          // ES class methods didn't have prototype\r\n          model = this.model(attrs, options);\r\n        }\r\n  \r\n        if (!model.validationError) return model;\r\n        this.trigger('invalid', this, model.validationError, options);\r\n        return false;\r\n      },\r\n  \r\n      // Internal method called by both remove and set.\r\n      _removeModels: function(models, options) {\r\n        var removed = [];\r\n        for (var i = 0; i < models.length; i++) {\r\n          var model = this.get(models[i]);\r\n          if (!model) continue;\r\n  \r\n          var index = this.indexOf(model);\r\n          this.models.splice(index, 1);\r\n          this.length--;\r\n  \r\n          // Remove references before triggering 'remove' event to prevent an\r\n          // infinite loop. #3693\r\n          delete this._byId[model.cid];\r\n          var id = this.modelId(model.attributes, model.idAttribute);\r\n          if (id != null) delete this._byId[id];\r\n  \r\n          if (!options.silent) {\r\n            options.index = index;\r\n            model.trigger('remove', model, this, options);\r\n          }\r\n  \r\n          removed.push(model);\r\n          this._removeReference(model, options);\r\n        }\r\n        return removed;\r\n      },\r\n  \r\n      // Method for checking whether an object should be considered a model for\r\n      // the purposes of adding to the collection.\r\n      _isModel: function(model) {\r\n        return model instanceof Model;\r\n      },\r\n  \r\n      // Internal method to create a model's ties to a collection.\r\n      _addReference: function(model, options) {\r\n        this._byId[model.cid] = model;\r\n        var id = this.modelId(model.attributes, model.idAttribute);\r\n        if (id != null) this._byId[id] = model;\r\n        model.on('all', this._onModelEvent, this);\r\n      },\r\n  \r\n      // Internal method to sever a model's ties to a collection.\r\n      _removeReference: function(model, options) {\r\n        delete this._byId[model.cid];\r\n        var id = this.modelId(model.attributes, model.idAttribute);\r\n        if (id != null) delete this._byId[id];\r\n        if (this === model.collection) delete model.collection;\r\n        model.off('all', this._onModelEvent, this);\r\n      },\r\n  \r\n      // Internal method called every time a model in the set fires an event.\r\n      // Sets need to update their indexes when models change ids. All other\r\n      // events simply proxy through. \"add\" and \"remove\" events that originate\r\n      // in other collections are ignored.\r\n      _onModelEvent: function(event, model, collection, options) {\r\n        if (model) {\r\n          if ((event === 'add' || event === 'remove') && collection !== this) return;\r\n          if (event === 'destroy') this.remove(model, options);\r\n          if (event === 'changeId') {\r\n            var prevId = this.modelId(model.previousAttributes(), model.idAttribute);\r\n            var id = this.modelId(model.attributes, model.idAttribute);\r\n            if (prevId != null) delete this._byId[prevId];\r\n            if (id != null) this._byId[id] = model;\r\n          }\r\n        }\r\n        this.trigger.apply(this, arguments);\r\n      }\r\n  \r\n    });\r\n  \r\n    // Defining an @@iterator method implements JavaScript's Iterable protocol.\r\n    // In modern ES2015 browsers, this value is found at Symbol.iterator.\r\n    /* global Symbol */\r\n    var $$iterator = typeof Symbol === 'function' && Symbol.iterator;\r\n    if ($$iterator) {\r\n      Collection.prototype[$$iterator] = Collection.prototype.values;\r\n    }\r\n  \r\n    // CollectionIterator\r\n    // ------------------\r\n  \r\n    // A CollectionIterator implements JavaScript's Iterator protocol, allowing the\r\n    // use of `for of` loops in modern browsers and interoperation between\r\n    // Backbone.Collection and other JavaScript functions and third-party libraries\r\n    // which can operate on Iterables.\r\n    var CollectionIterator = function(collection, kind) {\r\n      this._collection = collection;\r\n      this._kind = kind;\r\n      this._index = 0;\r\n    };\r\n  \r\n    // This \"enum\" defines the three possible kinds of values which can be emitted\r\n    // by a CollectionIterator that correspond to the values(), keys() and entries()\r\n    // methods on Collection, respectively.\r\n    var ITERATOR_VALUES = 1;\r\n    var ITERATOR_KEYS = 2;\r\n    var ITERATOR_KEYSVALUES = 3;\r\n  \r\n    // All Iterators should themselves be Iterable.\r\n    if ($$iterator) {\r\n      CollectionIterator.prototype[$$iterator] = function() {\r\n        return this;\r\n      };\r\n    }\r\n  \r\n    CollectionIterator.prototype.next = function() {\r\n      if (this._collection) {\r\n  \r\n        // Only continue iterating if the iterated collection is long enough.\r\n        if (this._index < this._collection.length) {\r\n          var model = this._collection.at(this._index);\r\n          this._index++;\r\n  \r\n          // Construct a value depending on what kind of values should be iterated.\r\n          var value;\r\n          if (this._kind === ITERATOR_VALUES) {\r\n            value = model;\r\n          } else {\r\n            var id = this._collection.modelId(model.attributes, model.idAttribute);\r\n            if (this._kind === ITERATOR_KEYS) {\r\n              value = id;\r\n            } else { // ITERATOR_KEYSVALUES\r\n              value = [id, model];\r\n            }\r\n          }\r\n          return {value: value, done: false};\r\n        }\r\n  \r\n        // Once exhausted, remove the reference to the collection so future\r\n        // calls to the next method always return done.\r\n        this._collection = void 0;\r\n      }\r\n  \r\n      return {value: void 0, done: true};\r\n    };\r\n  \r\n    // Backbone.View\r\n    // -------------\r\n  \r\n    // Backbone Views are almost more convention than they are actual code. A View\r\n    // is simply a JavaScript object that represents a logical chunk of UI in the\r\n    // DOM. This might be a single item, an entire list, a sidebar or panel, or\r\n    // even the surrounding frame which wraps your whole app. Defining a chunk of\r\n    // UI as a **View** allows you to define your DOM events declaratively, without\r\n    // having to worry about render order ... and makes it easy for the view to\r\n    // react to specific changes in the state of your models.\r\n  \r\n    // Creating a Backbone.View creates its initial element outside of the DOM,\r\n    // if an existing element is not provided...\r\n    var View = Backbone.View = function(options) {\r\n      this.cid = _.uniqueId('view');\r\n      this.preinitialize.apply(this, arguments);\r\n      _.extend(this, _.pick(options, viewOptions));\r\n      this._ensureElement();\r\n      this.initialize.apply(this, arguments);\r\n    };\r\n  \r\n    // Cached regex to split keys for `delegate`.\r\n    var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\r\n  \r\n    // List of view options to be set as properties.\r\n    var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\r\n  \r\n    // Set up all inheritable **Backbone.View** properties and methods.\r\n    _.extend(View.prototype, Events, {\r\n  \r\n      // The default `tagName` of a View's element is `\"div\"`.\r\n      tagName: 'div',\r\n  \r\n      // jQuery delegate for element lookup, scoped to DOM elements within the\r\n      // current view. This should be preferred to global lookups where possible.\r\n      $: function(selector) {\r\n        return this.$el.find(selector);\r\n      },\r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the View\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // **render** is the core function that your view should override, in order\r\n      // to populate its element (`this.el`), with the appropriate HTML. The\r\n      // convention is for **render** to always return `this`.\r\n      render: function() {\r\n        return this;\r\n      },\r\n  \r\n      // Remove this view by taking the element out of the DOM, and removing any\r\n      // applicable Backbone.Events listeners.\r\n      remove: function() {\r\n        this._removeElement();\r\n        this.stopListening();\r\n        return this;\r\n      },\r\n  \r\n      // Remove this view's element from the document and all event listeners\r\n      // attached to it. Exposed for subclasses using an alternative DOM\r\n      // manipulation API.\r\n      _removeElement: function() {\r\n        this.$el.remove();\r\n      },\r\n  \r\n      // Change the view's element (`this.el` property) and re-delegate the\r\n      // view's events on the new element.\r\n      setElement: function(element) {\r\n        this.undelegateEvents();\r\n        this._setElement(element);\r\n        this.delegateEvents();\r\n        return this;\r\n      },\r\n  \r\n      // Creates the `this.el` and `this.$el` references for this view using the\r\n      // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\r\n      // context or an element. Subclasses can override this to utilize an\r\n      // alternative DOM manipulation API and are only required to set the\r\n      // `this.el` property.\r\n      _setElement: function(el) {\r\n        this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\r\n        this.el = this.$el[0];\r\n      },\r\n  \r\n      // Set callbacks, where `this.events` is a hash of\r\n      //\r\n      // *{\"event selector\": \"callback\"}*\r\n      //\r\n      //     {\r\n      //       'mousedown .title':  'edit',\r\n      //       'click .button':     'save',\r\n      //       'click .open':       function(e) { ... }\r\n      //     }\r\n      //\r\n      // pairs. Callbacks will be bound to the view, with `this` set properly.\r\n      // Uses event delegation for efficiency.\r\n      // Omitting the selector binds the event to `this.el`.\r\n      delegateEvents: function(events) {\r\n        events || (events = _.result(this, 'events'));\r\n        if (!events) return this;\r\n        this.undelegateEvents();\r\n        for (var key in events) {\r\n          var method = events[key];\r\n          if (!_.isFunction(method)) method = this[method];\r\n          if (!method) continue;\r\n          var match = key.match(delegateEventSplitter);\r\n          this.delegate(match[1], match[2], method.bind(this));\r\n        }\r\n        return this;\r\n      },\r\n  \r\n      // Add a single event listener to the view's element (or a child element\r\n      // using `selector`). This only works for delegate-able events: not `focus`,\r\n      // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\r\n      delegate: function(eventName, selector, listener) {\r\n        this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\r\n        return this;\r\n      },\r\n  \r\n      // Clears all callbacks previously bound to the view by `delegateEvents`.\r\n      // You usually don't need to use this, but may wish to if you have multiple\r\n      // Backbone views attached to the same DOM element.\r\n      undelegateEvents: function() {\r\n        if (this.$el) this.$el.off('.delegateEvents' + this.cid);\r\n        return this;\r\n      },\r\n  \r\n      // A finer-grained `undelegateEvents` for removing a single delegated event.\r\n      // `selector` and `listener` are both optional.\r\n      undelegate: function(eventName, selector, listener) {\r\n        this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\r\n        return this;\r\n      },\r\n  \r\n      // Produces a DOM element to be assigned to your view. Exposed for\r\n      // subclasses using an alternative DOM manipulation API.\r\n      _createElement: function(tagName) {\r\n        return document.createElement(tagName);\r\n      },\r\n  \r\n      // Ensure that the View has a DOM element to render into.\r\n      // If `this.el` is a string, pass it through `$()`, take the first\r\n      // matching element, and re-assign it to `el`. Otherwise, create\r\n      // an element from the `id`, `className` and `tagName` properties.\r\n      _ensureElement: function() {\r\n        if (!this.el) {\r\n          var attrs = _.extend({}, _.result(this, 'attributes'));\r\n          if (this.id) attrs.id = _.result(this, 'id');\r\n          if (this.className) attrs['class'] = _.result(this, 'className');\r\n          this.setElement(this._createElement(_.result(this, 'tagName')));\r\n          this._setAttributes(attrs);\r\n        } else {\r\n          this.setElement(_.result(this, 'el'));\r\n        }\r\n      },\r\n  \r\n      // Set attributes from a hash on this view's element.  Exposed for\r\n      // subclasses using an alternative DOM manipulation API.\r\n      _setAttributes: function(attributes) {\r\n        this.$el.attr(attributes);\r\n      }\r\n  \r\n    });\r\n  \r\n    // Proxy Backbone class methods to Underscore functions, wrapping the model's\r\n    // `attributes` object or collection's `models` array behind the scenes.\r\n    //\r\n    // collection.filter(function(model) { return model.get('age') > 10 });\r\n    // collection.each(this.addView);\r\n    //\r\n    // `Function#apply` can be slow so we use the method's arg count, if we know it.\r\n    var addMethod = function(base, length, method, attribute) {\r\n      switch (length) {\r\n        case 1: return function() {\r\n          return base[method](this[attribute]);\r\n        };\r\n        case 2: return function(value) {\r\n          return base[method](this[attribute], value);\r\n        };\r\n        case 3: return function(iteratee, context) {\r\n          return base[method](this[attribute], cb(iteratee, this), context);\r\n        };\r\n        case 4: return function(iteratee, defaultVal, context) {\r\n          return base[method](this[attribute], cb(iteratee, this), defaultVal, context);\r\n        };\r\n        default: return function() {\r\n          var args = slice.call(arguments);\r\n          args.unshift(this[attribute]);\r\n          return base[method].apply(base, args);\r\n        };\r\n      }\r\n    };\r\n  \r\n    var addUnderscoreMethods = function(Class, base, methods, attribute) {\r\n      _.each(methods, function(length, method) {\r\n        if (base[method]) Class.prototype[method] = addMethod(base, length, method, attribute);\r\n      });\r\n    };\r\n  \r\n    // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\r\n    var cb = function(iteratee, instance) {\r\n      if (_.isFunction(iteratee)) return iteratee;\r\n      if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\r\n      if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\r\n      return iteratee;\r\n    };\r\n    var modelMatcher = function(attrs) {\r\n      var matcher = _.matches(attrs);\r\n      return function(model) {\r\n        return matcher(model.attributes);\r\n      };\r\n    };\r\n  \r\n    // Underscore methods that we want to implement on the Collection.\r\n    // 90% of the core usefulness of Backbone Collections is actually implemented\r\n    // right here:\r\n    var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\r\n      foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\r\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\r\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\r\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\r\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\r\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\r\n      sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\r\n  \r\n  \r\n    // Underscore methods that we want to implement on the Model, mapped to the\r\n    // number of arguments they take.\r\n    var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\r\n      omit: 0, chain: 1, isEmpty: 1};\r\n  \r\n    // Mix in each Underscore method as a proxy to `Collection#models`.\r\n  \r\n    _.each([\r\n      [Collection, collectionMethods, 'models'],\r\n      [Model, modelMethods, 'attributes']\r\n    ], function(config) {\r\n      var Base = config[0],\r\n          methods = config[1],\r\n          attribute = config[2];\r\n  \r\n      Base.mixin = function(obj) {\r\n        var mappings = _.reduce(_.functions(obj), function(memo, name) {\r\n          memo[name] = 0;\r\n          return memo;\r\n        }, {});\r\n        addUnderscoreMethods(Base, obj, mappings, attribute);\r\n      };\r\n  \r\n      addUnderscoreMethods(Base, _, methods, attribute);\r\n    });\r\n  \r\n    // Backbone.sync\r\n    // -------------\r\n  \r\n    // Override this function to change the manner in which Backbone persists\r\n    // models to the server. You will be passed the type of request, and the\r\n    // model in question. By default, makes a RESTful Ajax request\r\n    // to the model's `url()`. Some possible customizations could be:\r\n    //\r\n    // * Use `setTimeout` to batch rapid-fire updates into a single request.\r\n    // * Send up the models as XML instead of JSON.\r\n    // * Persist models via WebSockets instead of Ajax.\r\n    //\r\n    // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\r\n    // as `POST`, with a `_method` parameter containing the true HTTP method,\r\n    // as well as all requests with the body as `application/x-www-form-urlencoded`\r\n    // instead of `application/json` with the model in a param named `model`.\r\n    // Useful when interfacing with server-side languages like **PHP** that make\r\n    // it difficult to read the body of `PUT` requests.\r\n    Backbone.sync = function(method, model, options) {\r\n      var type = methodMap[method];\r\n  \r\n      // Default options, unless specified.\r\n      _.defaults(options || (options = {}), {\r\n        emulateHTTP: Backbone.emulateHTTP,\r\n        emulateJSON: Backbone.emulateJSON\r\n      });\r\n  \r\n      // Default JSON-request options.\r\n      var params = {type: type, dataType: 'json'};\r\n  \r\n      // Ensure that we have a URL.\r\n      if (!options.url) {\r\n        params.url = _.result(model, 'url') || urlError();\r\n      }\r\n  \r\n      // Ensure that we have the appropriate request data.\r\n      if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\r\n        params.contentType = 'application/json';\r\n        params.data = JSON.stringify(options.attrs || model.toJSON(options));\r\n      }\r\n  \r\n      // For older servers, emulate JSON by encoding the request into an HTML-form.\r\n      if (options.emulateJSON) {\r\n        params.contentType = 'application/x-www-form-urlencoded';\r\n        params.data = params.data ? {model: params.data} : {};\r\n      }\r\n  \r\n      // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\r\n      // And an `X-HTTP-Method-Override` header.\r\n      if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\r\n        params.type = 'POST';\r\n        if (options.emulateJSON) params.data._method = type;\r\n        var beforeSend = options.beforeSend;\r\n        options.beforeSend = function(xhr) {\r\n          xhr.setRequestHeader('X-HTTP-Method-Override', type);\r\n          if (beforeSend) return beforeSend.apply(this, arguments);\r\n        };\r\n      }\r\n  \r\n      // Don't process data on a non-GET request.\r\n      if (params.type !== 'GET' && !options.emulateJSON) {\r\n        params.processData = false;\r\n      }\r\n  \r\n      // Pass along `textStatus` and `errorThrown` from jQuery.\r\n      var error = options.error;\r\n      options.error = function(xhr, textStatus, errorThrown) {\r\n        options.textStatus = textStatus;\r\n        options.errorThrown = errorThrown;\r\n        if (error) error.call(options.context, xhr, textStatus, errorThrown);\r\n      };\r\n  \r\n      // Make the request, allowing the user to override any Ajax options.\r\n      var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\r\n      model.trigger('request', model, xhr, options);\r\n      return xhr;\r\n    };\r\n  \r\n    // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\r\n    var methodMap = {\r\n      'create': 'POST',\r\n      'update': 'PUT',\r\n      'patch': 'PATCH',\r\n      'delete': 'DELETE',\r\n      'read': 'GET'\r\n    };\r\n  \r\n    // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\r\n    // Override this if you'd like to use a different library.\r\n    Backbone.ajax = function() {\r\n      return Backbone.$.ajax.apply(Backbone.$, arguments);\r\n    };\r\n  \r\n    // Backbone.Router\r\n    // ---------------\r\n  \r\n    // Routers map faux-URLs to actions, and fire events when routes are\r\n    // matched. Creating a new one sets its `routes` hash, if not set statically.\r\n    var Router = Backbone.Router = function(options) {\r\n      options || (options = {});\r\n      this.preinitialize.apply(this, arguments);\r\n      if (options.routes) this.routes = options.routes;\r\n      this._bindRoutes();\r\n      this.initialize.apply(this, arguments);\r\n    };\r\n  \r\n    // Cached regular expressions for matching named param parts and splatted\r\n    // parts of route strings.\r\n    var optionalParam = /\\((.*?)\\)/g;\r\n    var namedParam    = /(\\(\\?)?:\\w+/g;\r\n    var splatParam    = /\\*\\w+/g;\r\n    var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\r\n  \r\n    // Set up all inheritable **Backbone.Router** properties and methods.\r\n    _.extend(Router.prototype, Events, {\r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the Router.\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // Manually bind a single named route to a callback. For example:\r\n      //\r\n      //     this.route('search/:query/p:num', 'search', function(query, num) {\r\n      //       ...\r\n      //     });\r\n      //\r\n      route: function(route, name, callback) {\r\n        if (!_.isRegExp(route)) route = this._routeToRegExp(route);\r\n        if (_.isFunction(name)) {\r\n          callback = name;\r\n          name = '';\r\n        }\r\n        if (!callback) callback = this[name];\r\n        var router = this;\r\n        Backbone.history.route(route, function(fragment) {\r\n          var args = router._extractParameters(route, fragment);\r\n          if (router.execute(callback, args, name) !== false) {\r\n            router.trigger.apply(router, ['route:' + name].concat(args));\r\n            router.trigger('route', name, args);\r\n            Backbone.history.trigger('route', router, name, args);\r\n          }\r\n        });\r\n        return this;\r\n      },\r\n  \r\n      // Execute a route handler with the provided parameters.  This is an\r\n      // excellent place to do pre-route setup or post-route cleanup.\r\n      execute: function(callback, args, name) {\r\n        if (callback) callback.apply(this, args);\r\n      },\r\n  \r\n      // Simple proxy to `Backbone.history` to save a fragment into the history.\r\n      navigate: function(fragment, options) {\r\n        Backbone.history.navigate(fragment, options);\r\n        return this;\r\n      },\r\n  \r\n      // Bind all defined routes to `Backbone.history`. We have to reverse the\r\n      // order of the routes here to support behavior where the most general\r\n      // routes can be defined at the bottom of the route map.\r\n      _bindRoutes: function() {\r\n        if (!this.routes) return;\r\n        this.routes = _.result(this, 'routes');\r\n        var route, routes = _.keys(this.routes);\r\n        while ((route = routes.pop()) != null) {\r\n          this.route(route, this.routes[route]);\r\n        }\r\n      },\r\n  \r\n      // Convert a route string into a regular expression, suitable for matching\r\n      // against the current location hash.\r\n      _routeToRegExp: function(route) {\r\n        route = route.replace(escapeRegExp, '\\\\$&')\r\n        .replace(optionalParam, '(?:$1)?')\r\n        .replace(namedParam, function(match, optional) {\r\n          return optional ? match : '([^/?]+)';\r\n        })\r\n        .replace(splatParam, '([^?]*?)');\r\n        return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\r\n      },\r\n  \r\n      // Given a route, and a URL fragment that it matches, return the array of\r\n      // extracted decoded parameters. Empty or unmatched parameters will be\r\n      // treated as `null` to normalize cross-browser behavior.\r\n      _extractParameters: function(route, fragment) {\r\n        var params = route.exec(fragment).slice(1);\r\n        return _.map(params, function(param, i) {\r\n          // Don't decode the search params.\r\n          if (i === params.length - 1) return param || null;\r\n          return param ? decodeURIComponent(param) : null;\r\n        });\r\n      }\r\n  \r\n    });\r\n  \r\n    // Backbone.History\r\n    // ----------------\r\n  \r\n    // Handles cross-browser history management, based on either\r\n    // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\r\n    // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\r\n    // and URL fragments. If the browser supports neither (old IE, natch),\r\n    // falls back to polling.\r\n    var History = Backbone.History = function() {\r\n      this.handlers = [];\r\n      this.checkUrl = this.checkUrl.bind(this);\r\n  \r\n      // Ensure that `History` can be used outside of the browser.\r\n      if (typeof window !== 'undefined') {\r\n        this.location = window.location;\r\n        this.history = window.history;\r\n      }\r\n    };\r\n  \r\n    // Cached regex for stripping a leading hash/slash and trailing space.\r\n    var routeStripper = /^[#\\/]|\\s+$/g;\r\n  \r\n    // Cached regex for stripping leading and trailing slashes.\r\n    var rootStripper = /^\\/+|\\/+$/g;\r\n  \r\n    // Cached regex for stripping urls of hash.\r\n    var pathStripper = /#.*$/;\r\n  \r\n    // Has the history handling already been started?\r\n    History.started = false;\r\n  \r\n    // Set up all inheritable **Backbone.History** properties and methods.\r\n    _.extend(History.prototype, Events, {\r\n  \r\n      // The default interval to poll for hash changes, if necessary, is\r\n      // twenty times a second.\r\n      interval: 50,\r\n  \r\n      // Are we at the app root?\r\n      atRoot: function() {\r\n        var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\r\n        return path === this.root && !this.getSearch();\r\n      },\r\n  \r\n      // Does the pathname match the root?\r\n      matchRoot: function() {\r\n        var path = this.decodeFragment(this.location.pathname);\r\n        var rootPath = path.slice(0, this.root.length - 1) + '/';\r\n        return rootPath === this.root;\r\n      },\r\n  \r\n      // Unicode characters in `location.pathname` are percent encoded so they're\r\n      // decoded for comparison. `%25` should not be decoded since it may be part\r\n      // of an encoded parameter.\r\n      decodeFragment: function(fragment) {\r\n        return decodeURI(fragment.replace(/%25/g, '%2525'));\r\n      },\r\n  \r\n      // In IE6, the hash fragment and search params are incorrect if the\r\n      // fragment contains `?`.\r\n      getSearch: function() {\r\n        var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\r\n        return match ? match[0] : '';\r\n      },\r\n  \r\n      // Gets the true hash value. Cannot use location.hash directly due to bug\r\n      // in Firefox where location.hash will always be decoded.\r\n      getHash: function(window) {\r\n        var match = (window || this).location.href.match(/#(.*)$/);\r\n        return match ? match[1] : '';\r\n      },\r\n  \r\n      // Get the pathname and search params, without the root.\r\n      getPath: function() {\r\n        var path = this.decodeFragment(\r\n          this.location.pathname + this.getSearch()\r\n        ).slice(this.root.length - 1);\r\n        return path.charAt(0) === '/' ? path.slice(1) : path;\r\n      },\r\n  \r\n      // Get the cross-browser normalized URL fragment from the path or hash.\r\n      getFragment: function(fragment) {\r\n        if (fragment == null) {\r\n          if (this._usePushState || !this._wantsHashChange) {\r\n            fragment = this.getPath();\r\n          } else {\r\n            fragment = this.getHash();\r\n          }\r\n        }\r\n        return fragment.replace(routeStripper, '');\r\n      },\r\n  \r\n      // Start the hash change handling, returning `true` if the current URL matches\r\n      // an existing route, and `false` otherwise.\r\n      start: function(options) {\r\n        if (History.started) throw new Error('Backbone.history has already been started');\r\n        History.started = true;\r\n  \r\n        // Figure out the initial configuration. Do we need an iframe?\r\n        // Is pushState desired ... is it available?\r\n        this.options          = _.extend({root: '/'}, this.options, options);\r\n        this.root             = this.options.root;\r\n        this._wantsHashChange = this.options.hashChange !== false;\r\n        this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\r\n        this._useHashChange   = this._wantsHashChange && this._hasHashChange;\r\n        this._wantsPushState  = !!this.options.pushState;\r\n        this._hasPushState    = !!(this.history && this.history.pushState);\r\n        this._usePushState    = this._wantsPushState && this._hasPushState;\r\n        this.fragment         = this.getFragment();\r\n  \r\n        // Normalize root to always include a leading and trailing slash.\r\n        this.root = ('/' + this.root + '/').replace(rootStripper, '/');\r\n  \r\n        // Transition from hashChange to pushState or vice versa if both are\r\n        // requested.\r\n        if (this._wantsHashChange && this._wantsPushState) {\r\n  \r\n          // If we've started off with a route from a `pushState`-enabled\r\n          // browser, but we're currently in a browser that doesn't support it...\r\n          if (!this._hasPushState && !this.atRoot()) {\r\n            var rootPath = this.root.slice(0, -1) || '/';\r\n            this.location.replace(rootPath + '#' + this.getPath());\r\n            // Return immediately as browser will do redirect to new url\r\n            return true;\r\n  \r\n          // Or if we've started out with a hash-based route, but we're currently\r\n          // in a browser where it could be `pushState`-based instead...\r\n          } else if (this._hasPushState && this.atRoot()) {\r\n            this.navigate(this.getHash(), {replace: true});\r\n          }\r\n  \r\n        }\r\n  \r\n        // Proxy an iframe to handle location events if the browser doesn't\r\n        // support the `hashchange` event, HTML5 history, or the user wants\r\n        // `hashChange` but not `pushState`.\r\n        if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\r\n          this.iframe = document.createElement('iframe');\r\n          this.iframe.src = 'javascript:0';\r\n          this.iframe.style.display = 'none';\r\n          this.iframe.tabIndex = -1;\r\n          var body = document.body;\r\n          // Using `appendChild` will throw on IE < 9 if the document is not ready.\r\n          var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\r\n          iWindow.document.open();\r\n          iWindow.document.close();\r\n          iWindow.location.hash = '#' + this.fragment;\r\n        }\r\n  \r\n        // Add a cross-platform `addEventListener` shim for older browsers.\r\n        var addEventListener = window.addEventListener || function(eventName, listener) {\r\n          return attachEvent('on' + eventName, listener);\r\n        };\r\n  \r\n        // Depending on whether we're using pushState or hashes, and whether\r\n        // 'onhashchange' is supported, determine how we check the URL state.\r\n        if (this._usePushState) {\r\n          addEventListener('popstate', this.checkUrl, false);\r\n        } else if (this._useHashChange && !this.iframe) {\r\n          addEventListener('hashchange', this.checkUrl, false);\r\n        } else if (this._wantsHashChange) {\r\n          this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\r\n        }\r\n  \r\n        if (!this.options.silent) return this.loadUrl();\r\n      },\r\n  \r\n      // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\r\n      // but possibly useful for unit testing Routers.\r\n      stop: function() {\r\n        // Add a cross-platform `removeEventListener` shim for older browsers.\r\n        var removeEventListener = window.removeEventListener || function(eventName, listener) {\r\n          return detachEvent('on' + eventName, listener);\r\n        };\r\n  \r\n        // Remove window listeners.\r\n        if (this._usePushState) {\r\n          removeEventListener('popstate', this.checkUrl, false);\r\n        } else if (this._useHashChange && !this.iframe) {\r\n          removeEventListener('hashchange', this.checkUrl, false);\r\n        }\r\n  \r\n        // Clean up the iframe if necessary.\r\n        if (this.iframe) {\r\n          document.body.removeChild(this.iframe);\r\n          this.iframe = null;\r\n        }\r\n  \r\n        // Some environments will throw when clearing an undefined interval.\r\n        if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\r\n        History.started = false;\r\n      },\r\n  \r\n      // Add a route to be tested when the fragment changes. Routes added later\r\n      // may override previous routes.\r\n      route: function(route, callback) {\r\n        this.handlers.unshift({route: route, callback: callback});\r\n      },\r\n  \r\n      // Checks the current URL to see if it has changed, and if it has,\r\n      // calls `loadUrl`, normalizing across the hidden iframe.\r\n      checkUrl: function(e) {\r\n        var current = this.getFragment();\r\n  \r\n        // If the user pressed the back button, the iframe's hash will have\r\n        // changed and we should use that for comparison.\r\n        if (current === this.fragment && this.iframe) {\r\n          current = this.getHash(this.iframe.contentWindow);\r\n        }\r\n  \r\n        if (current === this.fragment) return false;\r\n        if (this.iframe) this.navigate(current);\r\n        this.loadUrl();\r\n      },\r\n  \r\n      // Attempt to load the current URL fragment. If a route succeeds with a\r\n      // match, returns `true`. If no defined routes matches the fragment,\r\n      // returns `false`.\r\n      loadUrl: function(fragment) {\r\n        // If the root doesn't match, no routes can match either.\r\n        if (!this.matchRoot()) return false;\r\n        fragment = this.fragment = this.getFragment(fragment);\r\n        return _.some(this.handlers, function(handler) {\r\n          if (handler.route.test(fragment)) {\r\n            handler.callback(fragment);\r\n            return true;\r\n          }\r\n        });\r\n      },\r\n  \r\n      // Save a fragment into the hash history, or replace the URL state if the\r\n      // 'replace' option is passed. You are responsible for properly URL-encoding\r\n      // the fragment in advance.\r\n      //\r\n      // The options object can contain `trigger: true` if you wish to have the\r\n      // route callback be fired (not usually desirable), or `replace: true`, if\r\n      // you wish to modify the current URL without adding an entry to the history.\r\n      navigate: function(fragment, options) {\r\n        if (!History.started) return false;\r\n        if (!options || options === true) options = {trigger: !!options};\r\n  \r\n        // Normalize the fragment.\r\n        fragment = this.getFragment(fragment || '');\r\n  \r\n        // Don't include a trailing slash on the root.\r\n        var rootPath = this.root;\r\n        if (fragment === '' || fragment.charAt(0) === '?') {\r\n          rootPath = rootPath.slice(0, -1) || '/';\r\n        }\r\n        var url = rootPath + fragment;\r\n  \r\n        // Strip the fragment of the query and hash for matching.\r\n        fragment = fragment.replace(pathStripper, '');\r\n  \r\n        // Decode for matching.\r\n        var decodedFragment = this.decodeFragment(fragment);\r\n  \r\n        if (this.fragment === decodedFragment) return;\r\n        this.fragment = decodedFragment;\r\n  \r\n        // If pushState is available, we use it to set the fragment as a real URL.\r\n        if (this._usePushState) {\r\n          this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\r\n  \r\n        // If hash changes haven't been explicitly disabled, update the hash\r\n        // fragment to store history.\r\n        } else if (this._wantsHashChange) {\r\n          this._updateHash(this.location, fragment, options.replace);\r\n          if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\r\n            var iWindow = this.iframe.contentWindow;\r\n  \r\n            // Opening and closing the iframe tricks IE7 and earlier to push a\r\n            // history entry on hash-tag change.  When replace is true, we don't\r\n            // want this.\r\n            if (!options.replace) {\r\n              iWindow.document.open();\r\n              iWindow.document.close();\r\n            }\r\n  \r\n            this._updateHash(iWindow.location, fragment, options.replace);\r\n          }\r\n  \r\n        // If you've told us that you explicitly don't want fallback hashchange-\r\n        // based history, then `navigate` becomes a page refresh.\r\n        } else {\r\n          return this.location.assign(url);\r\n        }\r\n        if (options.trigger) return this.loadUrl(fragment);\r\n      },\r\n  \r\n      // Update the hash location, either replacing the current entry, or adding\r\n      // a new one to the browser history.\r\n      _updateHash: function(location, fragment, replace) {\r\n        if (replace) {\r\n          var href = location.href.replace(/(javascript:|#).*$/, '');\r\n          location.replace(href + '#' + fragment);\r\n        } else {\r\n          // Some browsers require that `hash` contains a leading #.\r\n          location.hash = '#' + fragment;\r\n        }\r\n      }\r\n  \r\n    });\r\n  \r\n    // Create the default Backbone.history.\r\n    Backbone.history = new History;\r\n  \r\n    // Helpers\r\n    // -------\r\n  \r\n    // Helper function to correctly set up the prototype chain for subclasses.\r\n    // Similar to `goog.inherits`, but uses a hash of prototype properties and\r\n    // class properties to be extended.\r\n    var extend = function(protoProps, staticProps) {\r\n      var parent = this;\r\n      var child;\r\n  \r\n      // The constructor function for the new subclass is either defined by you\r\n      // (the \"constructor\" property in your `extend` definition), or defaulted\r\n      // by us to simply call the parent constructor.\r\n      if (protoProps && _.has(protoProps, 'constructor')) {\r\n        child = protoProps.constructor;\r\n      } else {\r\n        child = function(){ return parent.apply(this, arguments); };\r\n      }\r\n  \r\n      // Add static properties to the constructor function, if supplied.\r\n      _.extend(child, parent, staticProps);\r\n  \r\n      // Set the prototype chain to inherit from `parent`, without calling\r\n      // `parent`'s constructor function and add the prototype properties.\r\n      child.prototype = _.create(parent.prototype, protoProps);\r\n      child.prototype.constructor = child;\r\n  \r\n      // Set a convenience property in case the parent's prototype is needed\r\n      // later.\r\n      child.__super__ = parent.prototype;\r\n  \r\n      return child;\r\n    };\r\n  \r\n    // Set up inheritance for the model, collection, router, view and history.\r\n    Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\r\n  \r\n    // Throw an error when a URL is needed, and none is supplied.\r\n    var urlError = function() {\r\n      throw new Error('A \"url\" property or function must be specified');\r\n    };\r\n  \r\n    // Wrap an optional error callback with a fallback error event.\r\n    var wrapError = function(model, options) {\r\n      var error = options.error;\r\n      options.error = function(resp) {\r\n        if (error) error.call(options.context, model, resp, options);\r\n        model.trigger('error', model, resp, options);\r\n      };\r\n    };\r\n  \r\n    return Backbone;\r\n  });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/expalib.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/app.js");
/******/ 	
/******/ })()
;