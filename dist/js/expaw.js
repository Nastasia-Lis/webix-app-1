/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _components_login_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/login.js */ \"./src/js/components/login.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _components_logBlock_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _components_logout_autoLogout_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/logout/autoLogout.js */ \"./src/js/components/logout/autoLogout.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_adaptive_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./blocks/adaptive.js */ \"./src/js/blocks/adaptive.js\");\n/* harmony import */ var _blocks_webixGlobalPrefs_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./blocks/webixGlobalPrefs.js */ \"./src/js/blocks/webixGlobalPrefs.js\");\n/* harmony import */ var _components_routerConfig_routerStart_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/routerConfig/routerStart.js */ \"./src/js/components/routerConfig/routerStart.js\");\n/* harmony import */ var _viewTemplates_loadTemplate_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./viewTemplates/loadTemplate.js */ \"./src/js/viewTemplates/loadTemplate.js\");\nconsole.log(\"expa 1.0.62\"); \r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n         \r\n\r\n\r\n\r\n\r\n\r\nconst emptySpace = {\r\n    view    : \"align\", \r\n    align   : \"middle,center\",\r\n    id      : \"webix__none-content\",\r\n    body    : {  \r\n        borderless  : true, \r\n        template    : \"Выберите элемент дерева\", \r\n        height      : 50, \r\n        width       : 210,\r\n        css         : {\r\n            \"color\"    :\"#858585\",\r\n            \"font-size\":\"14px!important\"\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst container = {   \r\n    id  : \"container\",\r\n    cols: [\r\n        emptySpace,\r\n    ]\r\n};\r\n\r\nconst adaptive = {   \r\n    id  : \"adaptive\",\r\n    rows: []\r\n};\r\n\r\nconst sideMenuResizer = {   \r\n    id  : \"sideMenuResizer\",\r\n    view: \"resizer\",\r\n    css : \"webix_resizer-hide\",\r\n};\r\n\r\nconst logResizer = {\r\n    view : \"resizer\", \r\n    id : \"log-resizer\"\r\n};\r\n\r\nconst mainLayout = {   \r\n    hidden  : true, \r\n    id      : \"mainLayout\",\r\n    rows    : [\r\n    \r\n        {   id  : \"mainContent\",\r\n            css : \"webix_mainContent\",\r\n                                            \r\n            cols: [\r\n                { rows  : [\r\n                    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.header.create(),\r\n                    adaptive,\r\n                \r\n                    {cols : [\r\n                        {   id:\"sidebarContainer\",\r\n                            rows : [\r\n                            (0,_viewTemplates_loadTemplate_js__WEBPACK_IMPORTED_MODULE_10__.createOverlayTemplate)(\"loadTreeOverlay\"),\r\n                            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.sidebar.create(),\r\n                           \r\n                        ]},\r\n                        sideMenuResizer,\r\n                        container,\r\n                    ]}\r\n                ]}, \r\n\r\n            ]\r\n        },\r\n        logResizer,\r\n        _components_logBlock_js__WEBPACK_IMPORTED_MODULE_4__.logLayout\r\n\r\n    ]\r\n};\r\n\r\ntry{\r\n\r\n    webix.ready (function(){\r\n\r\n        (0,_blocks_webixGlobalPrefs_js__WEBPACK_IMPORTED_MODULE_8__.protoUIEdittree)();\r\n\r\n        webix.ui({\r\n            view    : \"scrollview\",\r\n            type    : \"clean\",\r\n            id      : \"layout\", \r\n            css     : \"layoutContainer\",\r\n            scroll  : \"y\", \r\n            body    : {\r\n\r\n                cells : [ \r\n                    {},\r\n                    _components_login_js__WEBPACK_IMPORTED_MODULE_1__.auth,\r\n                    mainLayout\r\n                ],\r\n\r\n            },\r\n\r\n        });\r\n\r\n\r\n\r\n\r\n        (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__.setUserPrefs)            ();\r\n        (0,_blocks_adaptive_js__WEBPACK_IMPORTED_MODULE_7__.resizeAdaptive)          ();\r\n        (0,_components_routerConfig_routerStart_js__WEBPACK_IMPORTED_MODULE_9__.setRouterStart)          ();\r\n        (0,_blocks_adaptive_js__WEBPACK_IMPORTED_MODULE_7__.adaptivePoints)          ();\r\n        (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.textInputClean)          ();\r\n\r\n        (0,_blocks_webixGlobalPrefs_js__WEBPACK_IMPORTED_MODULE_8__.backButtonBrowserLogic)  ();\r\n        (0,_components_logout_autoLogout_js__WEBPACK_IMPORTED_MODULE_5__.resetTimer)              ();\r\n        (0,_blocks_webixGlobalPrefs_js__WEBPACK_IMPORTED_MODULE_8__.webixGlobalPrefs)        ();\r\n\r\n    });\r\n\r\n} catch(err){\r\n    alert(\"Ошибка при выполнении \"+ err);\r\n    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_6__.setFunctionError)(err,\"app\",\"layout\");\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/app.js?");

/***/ }),

/***/ "./src/js/blocks/_mediator.js":
/*!************************************!*\
  !*** ./src/js/blocks/_mediator.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"mediator\": () => (/* binding */ mediator)\n/* harmony export */ });\n/* harmony import */ var _components_dashboard_dashMediator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/dashboard/_dashMediator.js */ \"./src/js/components/dashboard/_dashMediator.js\");\n/* harmony import */ var _components_table_tableMediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/table/_tableMediator.js */ \"./src/js/components/table/_tableMediator.js\");\n/* harmony import */ var _components_treeEdit_treeEditMediator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/treeEdit/_treeEditMediator.js */ \"./src/js/components/treeEdit/_treeEditMediator.js\");\n/* harmony import */ var _components_user_auth_userAuthMediator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/user_auth/_userAuthMediator.js */ \"./src/js/components/user_auth/_userAuthMediator.js\");\n/* harmony import */ var _components_settings_settingsMediator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/settings/_settingsMediator.js */ \"./src/js/components/settings/_settingsMediator.js\");\n/* harmony import */ var _components_treeSidabar_treeMediator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/treeSidabar/_treeMediator.js */ \"./src/js/components/treeSidabar/_treeMediator.js\");\n/* harmony import */ var _components_header_headerMediator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/header/_headerMediator.js */ \"./src/js/components/header/_headerMediator.js\");\n/* harmony import */ var _globalModalBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./globalModalBox.js */ \"./src/js/blocks/globalModalBox.js\");\n/* harmony import */ var _setParamToLink_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./setParamToLink.js */ \"./src/js/blocks/setParamToLink.js\");\n/* harmony import */ var _queryToString_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./queryToString.js */ \"./src/js/blocks/queryToString.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \r\nconst elems = [\r\n    \"dashboards\",\r\n    \"tables\",\r\n    \"forms\",\r\n    \"settings\",\r\n    \"user_auth\",\r\n];\r\n\r\nconst boxes = [     // id компонентов с модальными окнами\r\n    \"tree\", //\r\n    \"header\",\r\n    \"editForm\",     //при добавлении новой записи\r\n    \"refernce btn\", // кнопки у combo в edit form   //\r\n    \"table\",\r\n]; \r\n\r\n\r\n// editForm, cp, up\r\n\r\nconst forms = []; // формы\r\n\r\n\r\nconst mediator = {\r\n    dashboards  : new _components_dashboard_dashMediator_js__WEBPACK_IMPORTED_MODULE_0__.Dashboards(),\r\n    tables      : new _components_table_tableMediator_js__WEBPACK_IMPORTED_MODULE_1__.Tables    (),\r\n    forms       : new _components_table_tableMediator_js__WEBPACK_IMPORTED_MODULE_1__.Forms     (),\r\n    settings    : new _components_settings_settingsMediator_js__WEBPACK_IMPORTED_MODULE_4__.Settings  (),\r\n    user_auth   : new _components_user_auth_userAuthMediator_js__WEBPACK_IMPORTED_MODULE_3__.UserAuth  (),\r\n    treeEdit    : new _components_treeEdit_treeEditMediator_js__WEBPACK_IMPORTED_MODULE_2__.TreeEdit  (),\r\n    sidebar     : new _components_treeSidabar_treeMediator_js__WEBPACK_IMPORTED_MODULE_5__.Tree      (),\r\n    header      : new _components_header_headerMediator_js__WEBPACK_IMPORTED_MODULE_6__.Header    (),\r\n\r\n    getViews(){\r\n        return elems;\r\n    },\r\n\r\n    setForm(elem){\r\n        forms.push(elem);\r\n    },\r\n\r\n    getForms(){\r\n        return forms;\r\n    },\r\n\r\n    getGlobalModalBox(id){\r\n        return (0,_globalModalBox_js__WEBPACK_IMPORTED_MODULE_7__.clickModalBox)(id);\r\n    },\r\n\r\n    linkParam(set, param){\r\n        if (set){\r\n            (0,_setParamToLink_js__WEBPACK_IMPORTED_MODULE_8__.setParamToLink)(param);\r\n        } else {\r\n            (0,_setParamToLink_js__WEBPACK_IMPORTED_MODULE_8__.removeParamFromLink)(param);\r\n        }\r\n    },\r\n\r\n    createQuery(params){\r\n        return (0,_queryToString_js__WEBPACK_IMPORTED_MODULE_9__.encodeQueryData)(params);\r\n    }\r\n\r\n\r\n\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/_mediator.js?");

/***/ }),

/***/ "./src/js/blocks/adaptive.js":
/*!***********************************!*\
  !*** ./src/js/blocks/adaptive.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"resizeAdaptive\": () => (/* binding */ resizeAdaptive),\n/* harmony export */   \"adaptivePoints\": () => (/* binding */ adaptivePoints)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\nfunction resizeSidebar(){\r\n    const tree = $$(\"tree\");\r\n\r\n    function resizeTree(){\r\n        try{\r\n            if (tree){\r\n                tree.config.width = 250;\r\n                tree.resize();\r\n            }\r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                err, \r\n                \"adaptive\", \r\n                \"resizeSidebar => resizeTree\"\r\n            );\r\n        }\r\n    } \r\n\r\n    \r\n    if (window.innerWidth < 850){\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(tree);\r\n    }\r\n\r\n    if (!tree.isVisible()  && \r\n        window.innerWidth <= 800 ){\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem($$(\"sideMenuResizer\"));\r\n    }\r\n\r\n    if (window.innerWidth > 850 && $$(\"tree\")){\r\n        resizeTree();\r\n    }\r\n    \r\n}\r\n\r\nfunction setMinView(element, container, backBtn){\r\n    if (element.isVisible()){\r\n        element.config.width = window.innerWidth - 45;\r\n        element.resize();\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem($$(\"tree\"));\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(container);\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem(backBtn);\r\n    }\r\n}\r\n\r\nfunction setMaxWidth(tools, сontainer, backBtn){\r\n    if (tools.isVisible()          && \r\n        tools.config.width !== 350 ){\r\n        tools.config.width  = 350;\r\n        tools.resize();\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem(сontainer);\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(backBtn);\r\n    }\r\n}\r\n\r\n\r\nfunction resizeForms(){\r\n\r\n    const tools       = $$(\"formsTools\");    \r\n    const сontainer   = $$(\"formsContainer\");\r\n    const formResizer = $$(\"formsTools-resizer\");\r\n    const backBtn     = $$(\"table-backFormsBtnFilter\");\r\n\r\n    if (window.innerWidth < 850){\r\n        setMinView(tools,сontainer, backBtn);\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(formResizer);\r\n    }\r\n\r\n\r\n    if (window.innerWidth > 850){\r\n        setMaxWidth(tools, сontainer, backBtn);\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem(formResizer);\r\n    }\r\n\r\n  \r\n}\r\n\r\n\r\nfunction resizeContext(){\r\n    const dashContainer = $$(\"dashboardInfoContainer\");\r\n    const contextWindow = $$(\"dashboardContext\");\r\n    \r\n    if (window.innerWidth < 850){\r\n        setMinView(contextWindow, dashContainer);\r\n    }\r\n\r\n\r\n    if (window.innerWidth > 850){\r\n        setMaxWidth(contextWindow, dashContainer);\r\n    }\r\n}\r\n\r\nfunction resizeTools(){\r\n    const dashTool      = $$(\"dashboardTool\");\r\n    const dashContainer = $$(\"dashboardInfoContainer\");\r\n    const backBtn       = $$(\"dash-backDashBtn\");\r\n\r\n    \r\n    if (window.innerWidth < 850){\r\n        setMinView(dashTool, dashContainer, backBtn);\r\n    }\r\n\r\n\r\n    if (window.innerWidth > 850){\r\n        setMaxWidth(dashTool, dashContainer, backBtn);\r\n    }\r\n            \r\n}\r\n\r\n\r\n\r\nfunction resizeTableEditForm(){\r\n    const container = $$(\"tableContainer\");\r\n    const editForm  = $$(\"table-editForm\");\r\n    const backBtn   = $$(\"table-backTableBtn\");\r\n    const tree      = $$(\"tree\");\r\n\r\n    \r\n    if ($$(\"container\").$width < 850 && editForm.isVisible()){\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(tree);\r\n    }\r\n\r\n\r\n    if (window.innerWidth < 850){\r\n        setMinView(editForm, container, backBtn);\r\n    }\r\n\r\n    if (window.innerWidth > 850){\r\n        setMaxWidth(editForm, container, backBtn);\r\n    }\r\n\r\n}\r\n\r\nfunction resizeTableFilterForm (){\r\n\r\n    const filterForm = $$(\"filterTableBarContainer\");\r\n    \r\n    const container  = $$(\"tableContainer\");\r\n    const backBtn    = $$(\"table-backTableBtnFilter\");\r\n    const tree       = $$(\"tree\");\r\n \r\n    if (window.innerWidth < 850){\r\n        setMinView(filterForm, container, backBtn);\r\n    }\r\n\r\n    if ($$(\"container\").$width < 850 && filterForm.isVisible()){\r\n        _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(tree);\r\n    }\r\n\r\n\r\n    if (window.innerWidth > 850){\r\n        setMaxWidth(filterForm, container, backBtn);\r\n    }\r\n\r\n}\r\n\r\nfunction setSearchInputState(){\r\n    const headerChilds = $$(\"header\").getChildViews();\r\n\r\n    headerChilds.forEach(function(el){\r\n        if (el.config.id.includes(\"search\")){\r\n            el.show();\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction resizeAdaptive (){\r\n\r\n    window.addEventListener('resize', function() {\r\n  \r\n        async function getActiveView (){  \r\n\r\n            function setAdaptiveLogic(visibleEl){\r\n                if (visibleEl == \"forms\"){\r\n                    resizeForms();\r\n\r\n                } else if (visibleEl == \"dashboards\"){\r\n                    resizeTools();  \r\n                    resizeContext();\r\n                } else if (visibleEl == \"tables\"){\r\n                    resizeTableEditForm();\r\n                    resizeTableFilterForm ();\r\n\r\n                } else if (visibleEl == \"userprefs\"){\r\n                    //none\r\n\r\n                } else if (visibleEl == \"user_auth\"){\r\n                    //none\r\n\r\n                }\r\n            }\r\n\r\n            function initLogic(){\r\n\r\n                const elements = [\r\n                    \"forms\", \r\n                    \"dashboards\", \r\n                    \"tables\", \r\n                    \"userprefs\", \r\n                    \"user_auth\"\r\n                ];\r\n\r\n                elements.forEach(function(el,i){\r\n                    const elem = $$(el);\r\n                    if(elem && elem.isVisible()){\r\n                        setAdaptiveLogic(el);\r\n                    }\r\n                });\r\n                    \r\n                \r\n            }\r\n\r\n            initLogic();\r\n        \r\n        }\r\n    \r\n        getActiveView ();\r\n        resizeSidebar();\r\n\r\n        if(window.innerWidth > 850){\r\n            setSearchInputState();\r\n        }\r\n\r\n    }, true);\r\n}\r\n\r\n\r\n\r\nfunction adaptivePoints (){\r\n\r\n    const tree = $$(\"tree\");\r\n\r\n    function hideTree(){\r\n        if (window.innerWidth < 850 && tree){\r\n            tree.hide();\r\n        }\r\n    }\r\n\r\n    function addTreeEvent(){\r\n        if (window.innerWidth < 1200 ){\r\n            const editContainer = $$(\"editTableBarContainer\");\r\n\r\n            tree.attachEvent(\"onAfterLoad\", function(){\r\n                _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(editContainer);\r\n            });\r\n \r\n            _commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(editContainer);\r\n\r\n        }\r\n    }\r\n\r\n\r\n    hideTree();\r\n    addTreeEvent();\r\n\r\n\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/adaptive.js?");

/***/ }),

/***/ "./src/js/blocks/checkFonts.js":
/*!*************************************!*\
  !*** ./src/js/blocks/checkFonts.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"checkFonts\": () => (/* binding */ checkFonts)\n/* harmony export */ });\n/* harmony import */ var _components_logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/logBlock.js */ \"./src/js/components/logBlock.js\");\n\r\n\r\nfunction checkFonts (){\r\n\r\n\r\n    document.fonts.onloadingdone = function (fontFaceSetEvent) {\r\n        const fontsArr  = fontFaceSetEvent.fontfaces;\r\n        let check       = false;\r\n    \r\n        fontsArr.forEach(function(el){\r\n            if (el.family.includes(\"icomoon\")){\r\n                check = true; \r\n            }\r\n        });\r\n\r\n        if (!check){\r\n            (0,_components_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Не удалось загрузить шрифт иконок\", 'expa');\r\n        }\r\n\r\n\r\n    };\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/checkFonts.js?");

/***/ }),

/***/ "./src/js/blocks/commonFunctions.js":
/*!******************************************!*\
  !*** ./src/js/blocks/commonFunctions.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getItemId\": () => (/* binding */ getItemId),\n/* harmony export */   \"getTable\": () => (/* binding */ getTable),\n/* harmony export */   \"textInputClean\": () => (/* binding */ textInputClean),\n/* harmony export */   \"getComboOptions\": () => (/* binding */ getComboOptions),\n/* harmony export */   \"pushUserDataStorage\": () => (/* binding */ pushUserDataStorage),\n/* harmony export */   \"getUserDataStorage\": () => (/* binding */ getUserDataStorage),\n/* harmony export */   \"Action\": () => (/* binding */ Action),\n/* harmony export */   \"TableConfig\": () => (/* binding */ TableConfig)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _storageSetting_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n\r\n\r\n\r\nlet visibleItem;\r\n\r\nfunction getItemId (){\r\n    let idTable;\r\n\r\n\r\n    try{\r\n        const table     = $$(\"table\");\r\n        const tableView = $$(\"table-view\");\r\n        const dashboard = $$(\"dashboardContainer\");\r\n\r\n        if ($$(\"tables\").isVisible()){\r\n            idTable      = table.config.idTable;\r\n            visibleItem  = table;\r\n        } else if ($$(\"forms\").isVisible()){\r\n            idTable      = tableView.config.idTable;\r\n            visibleItem  = tableView; \r\n  \r\n        } else if ($$(\"dashboardContainer\").isVisible()){\r\n            idTable      = dashboard.config.idDash;\r\n            visibleItem  = dashboard; \r\n        }\r\n\r\n    } catch (err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"commonFunctions\",\"getItemId\");\r\n    }\r\n\r\n    return idTable;\r\n}\r\n\r\nfunction getTable(){\r\n    getItemId ();\r\n    return visibleItem;\r\n}\r\n\r\nclass Action {\r\n    static hideItem(item){\r\n        if (item){\r\n            item.hide();\r\n        }\r\n    }\r\n\r\n    static showItem(item){\r\n        if (item){\r\n            item.show();\r\n        }\r\n    }\r\n\r\n    static removeItem(item){\r\n        if(item){\r\n            const parent = item.getParentView();\r\n            parent.removeView(item);\r\n        }\r\n    }\r\n\r\n    static disableItem(item){\r\n        if (item && item.isEnabled()){\r\n            item.disable();\r\n        }\r\n    }\r\n\r\n    static enableItem(item){\r\n        if ( item && !(item.isEnabled()) ){\r\n            item.enable();\r\n        }\r\n    }\r\n\r\n    static destructItem(item){\r\n\r\n        if(item){\r\n            item.destructor();\r\n        }\r\n    }\r\n}\r\n\r\nclass TableConfig {\r\n\r\n    static getView (){\r\n        let view;\r\n    \r\n        try{\r\n            const table     = $$(\"table\");\r\n            const tableView = $$(\"table-view\");\r\n            console.log(table.isVisible(), tableView.isVisible());\r\n            if ($$(\"tables\").isVisible()){\r\n        \r\n                view = table;\r\n            } else if ($$(\"forms\").isVisible()){\r\n             \r\n                view = tableView; \r\n      \r\n            }\r\n    \r\n        } catch (err){\r\n            (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, \"commonFunctions\", \"getView\");\r\n        }\r\n        console.log(view);\r\n        return view;\r\n    }\r\n\r\n    static getIdField (){\r\n        const table = this.getView ();\r\n        console.log(table);\r\n        return table.config.idTable;\r\n    }\r\n}\r\n\r\nfunction textInputClean(){\r\n    let mdView = null;\r\n  \r\n    webix.event(document.body, \"mousedown\", e => { \r\n      const targetView = $$(e);\r\n      if (targetView && targetView.getInputNode){\r\n        mdView = targetView;\r\n      } \r\n    });\r\n    \r\n    webix.event(document, \"click\", e => { \r\n      const clickedView = $$(e);\r\n      if (mdView && clickedView && clickedView.config.id !== mdView.config.id){\r\n        e.cancelBubble = true; \r\n        webix.html.preventEvent(e);\r\n      }\r\n      mdView = null;\r\n    }, { capture: true });\r\n}\r\n\r\nfunction getComboOptions (refTable){\r\n    const url       = \"/init/default/api/\" + refTable;\r\n\r\n    return new webix.DataCollection({url:{\r\n        $proxy:true,\r\n        load: function(){\r\n            return ( webix.ajax().get(url).then(function (data) {\r\n                        data            = data.json().content;\r\n                        const dataArray = [];\r\n                        let keyArray;\r\n\r\n                        function stringOption(l,el){\r\n                            try{\r\n                                while (l <= Object.values(el).length){\r\n                                    if (typeof Object.values(el)[l] == \"string\"){\r\n                                        keyArray = Object.keys(el)[l];\r\n                                        break;\r\n                                    } \r\n                                    l++;\r\n                                }\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                                    err,\r\n                                    \"commonFunctions\",\r\n                                    \"getComboOptions => stringOption\"\r\n                                );\r\n                            }\r\n                        }\r\n\r\n                        function numOption(l,el){\r\n                            try{\r\n                                if (el[keyArray] == undefined){\r\n                                    while (l <= Object.values(el).length) {\r\n                                        if (typeof Object.values(el)[1] == \"number\"){\r\n                                            keyArray = Object.keys(el)[1];\r\n                                            break;\r\n                                        }\r\n                                        l++;\r\n                                    }\r\n                                }\r\n\r\n                                dataArray.push({ \"id\":el.id, \"value\":el[keyArray]});\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                                    err,\r\n                                    \"commonFunctions\",\r\n                                    \"getComboOptions => numOption\"\r\n                                );\r\n                            }\r\n                        }\r\n\r\n                        function createComboValues(){\r\n                            try{\r\n                                data.forEach((el) =>{\r\n                                    let l = 0;\r\n                                    stringOption (l,el);\r\n                                    numOption    (l,el);\r\n                                \r\n                                });\r\n                            } catch (err){  \r\n                                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                                    err,\r\n                                    \"commonFunctions\",\r\n                                    \"getComboOptions => createComboValues\"\r\n                                );\r\n                            }\r\n                        }\r\n                        createComboValues();\r\n                        return dataArray;\r\n                    \r\n                    }).catch(err => {\r\n                        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n                            err, \r\n                            \"commonFunctions\",\r\n                            \"getComboOptions\"\r\n                        );\r\n                    })\r\n            );\r\n            \r\n        }\r\n    }});\r\n}\r\n\r\nfunction getUserDataStorage(){\r\n    return  webix.storage.local.get(\"user\");\r\n}\r\n\r\nasync function pushUserDataStorage(){\r\n    const userprefsGetData = webix.ajax(\"/init/default/api/whoami\");\r\n    await userprefsGetData.then(function(data){\r\n        data      = data.json().content;\r\n\r\n        const userData = {};\r\n    \r\n        userData.id       = data.id;\r\n        userData.name     = data.first_name;\r\n        userData.username = data.username;\r\n        \r\n        (0,_storageSetting_js__WEBPACK_IMPORTED_MODULE_1__.setStorageData)(\"user\", JSON.stringify(userData));\r\n\r\n    \r\n    });\r\n    userprefsGetData.fail(function(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"commonFunctions\", \"getUserData\");\r\n    });\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/commonFunctions.js?");

/***/ }),

/***/ "./src/js/blocks/errors.js":
/*!*********************************!*\
  !*** ./src/js/blocks/errors.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setAjaxError\": () => (/* binding */ setAjaxError),\n/* harmony export */   \"setFunctionError\": () => (/* binding */ setFunctionError)\n/* harmony export */ });\n/* harmony import */ var _components_logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/logBlock.js */ \"./src/js/components/logBlock.js\");\n\r\nfunction setAjaxError(err, file, func){\r\n    if (err.status === 400 ||  err.status === 401 || err.status === 404){\r\n\r\n        (0,_components_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n            \"error\", \r\n            file +\r\n            \" function \" + func + \": \" +\r\n            err.status + \" \" + err.statusText + \" \" + \r\n            err.responseURL + \" (\" + err.responseText + \") \"\r\n        );\r\n    } else {\r\n        (0,_components_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n            \"error\", \r\n            file + \r\n            \" function \" + func + \": \" +\r\n            err.status + \" \" + err.statusText + \" \" +\r\n            err.responseURL + \" (\" + err.responseText + \") \",\r\n            \"version\"\r\n        );\r\n\r\n        window.alert(\"Ошибка. Статус: \" + err.status + \". Отсутствует соединение с сервером.\");\r\n    }\r\n}\r\n\r\nfunction setFunctionError(err, file, func){\r\n    console.log(err);\r\n    (0,_components_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", file + \" function \" + func + \": \" + err);\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/errors.js?");

/***/ }),

/***/ "./src/js/blocks/globalModalBox.js":
/*!*****************************************!*\
  !*** ./src/js/blocks/globalModalBox.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clickModalBox\": () => (/* binding */ clickModalBox),\n/* harmony export */   \"globalModalBox\": () => (/* binding */ globalModalBox)\n/* harmony export */ });\n/* harmony import */ var _notifications_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\n\r\nfunction getSettingsFormValues(id){\r\n    const storageData = webix.storage.local.get(id);\r\n    return storageData;\r\n\r\n}\r\n\r\nfunction settingsForm(form){\r\n    const id = form.config.id;\r\n    if (id == \"userprefsWorkspaceForm\" || \r\n        id == \"userprefsOtherForm\")\r\n    {\r\n        getSettingsFormValues(form);\r\n    }\r\n    const storageData = getSettingsFormValues(id);\r\n    form.setValues(storageData);\r\n}\r\n\r\nfunction unsetDirty(){\r\n    const forms = _mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.getForms();\r\n    let check = {\r\n        dirty:false\r\n    };\r\n\r\n    if (forms){\r\n        forms.forEach(function(form){\r\n\r\n            if (form && form.isDirty()){\r\n\r\n                form.clear();\r\n\r\n                settingsForm (form);\r\n\r\n                form.setDirty(false);\r\n            }\r\n        });\r\n    }\r\n\r\n    return check;\r\n}\r\n\r\n\r\n\r\nfunction successActions(){\r\n    unsetDirty();\r\n}\r\n \r\n\r\nasync function globalModalBox (idForm){\r\n    return (0,_notifications_js__WEBPACK_IMPORTED_MODULE_0__.modalBox)().then(function(result){\r\n    \r\n        if (result == 1){\r\n            successActions();\r\n            return true;\r\n\r\n        } else if (result == 2){\r\n     \r\n            if (idForm == \"table-editForm\"){\r\n                const saveBtn = $$(\"table-saveBtn\");\r\n                if (saveBtn.isVisible()){\r\n                    return _mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.tables.editForm.put(false, false)\r\n                    .then(function(result){\r\n\r\n                        if (result){\r\n                            successActions(); \r\n                            return result;\r\n                        }\r\n\r\n                     \r\n                    });\r\n                } else {\r\n                    return _mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.tables.editForm.post(false, false)\r\n                    .then(function(result){\r\n\r\n                        if (result){\r\n                            successActions();\r\n                            return result;\r\n                        }\r\n                    }); \r\n                }\r\n            \r\n            } else if (idForm == \"cp-form\"){\r\n      \r\n                return _mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.user_auth.put()\r\n                .then(function (result){\r\n           \r\n                    if (result){\r\n                        successActions();\r\n                        return result;\r\n                    }\r\n                });\r\n            } else if (idForm == \"userprefsOtherForm\" ||\r\n                       idForm == \"userprefsWorkspaceForm\"){\r\n                    \r\n                    return _mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.settings.put()   \r\n                    .then(function (result){\r\n                        if (result){\r\n                            successActions();\r\n                            return result;\r\n                        }\r\n                    }); \r\n            } \r\n            \r\n        }\r\n       \r\n    });\r\n\r\n}\r\n\r\n\r\nfunction hasDirtyForms(){\r\n    const forms = _mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.getForms();\r\n    let check = {\r\n        dirty:false\r\n    };\r\n\r\n    if (forms){\r\n        forms.forEach(function(form){\r\n\r\n            if (form && form.isDirty() && !check.dirty){\r\n                check = {\r\n                    dirty : true,\r\n                    id    : form.config.id\r\n                };\r\n            }\r\n        });\r\n    }\r\n\r\n    return check;\r\n}\r\n\r\nasync function clickModalBox(id){\r\n    const dirtyInfo = hasDirtyForms();\r\n    const isDirty   = dirtyInfo.dirty;\r\n\r\n    if (isDirty){\r\n        const idForm = dirtyInfo.id;\r\n        return globalModalBox (idForm);\r\n    } else {\r\n        return true;\r\n    }\r\n  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/globalModalBox.js?");

/***/ }),

/***/ "./src/js/blocks/globalStorage.js":
/*!****************************************!*\
  !*** ./src/js/blocks/globalStorage.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getData\": () => (/* binding */ getData),\n/* harmony export */   \"STORAGE\": () => (/* binding */ STORAGE),\n/* harmony export */   \"LoadServerData\": () => (/* binding */ LoadServerData),\n/* harmony export */   \"GetMenu\": () => (/* binding */ GetMenu),\n/* harmony export */   \"GetFields\": () => (/* binding */ GetFields)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _components_logout_common_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/logout/common.js */ \"./src/js/components/logout/common.js\");\n\r\n\r\n\r\nconst STORAGE = {};\r\n\r\nfunction getTableNames (content){\r\n    let tableNames = [];\r\n    try{\r\n        Object.values(content).forEach(function(el,i){\r\n            tableNames.push({\r\n                id:Object.keys(content)[i], \r\n                name:(el.plural) ? el.plural : el.singular\r\n            });\r\n        });\r\n    } catch (err){   \r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"globalStorage\",\"getTableNames\");\r\n    }\r\n    return tableNames;\r\n}\r\n\r\nfunction getData (fileName){\r\n \r\n \r\n    if (    window.location.pathname !== \"/index.html\"          &&  \r\n            window.location.pathname !== '/init/default/spaw'   ||\r\n            fileName == \"whoami\"\r\n        ){\r\n        return webix.ajax().get(`/init/default/api/${fileName}.json`)\r\n            .then(function (data) {\r\n                STORAGE[fileName] = data.json();\r\n                try{\r\n                    if (fileName == \"fields\" && STORAGE[fileName]){\r\n                        STORAGE.tableNames = getTableNames (STORAGE[fileName].content);\r\n                    }\r\n                } catch (err){   \r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, \"globalStorage\", \"getData\");\r\n                }\r\n                return STORAGE[fileName];\r\n            }).catch(err => {\r\n                console.log(err);\r\n                console.log(\"globalStorage function getData\"); \r\n \r\n                (0,_components_logout_common_js__WEBPACK_IMPORTED_MODULE_1__.checkNotAuth) (err);\r\n            }\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nclass LoadServerData {\r\n    static async content(nameFile){\r\n        const self = this;\r\n\r\n        if (!self[nameFile]){\r\n            const path = `/init/default/api/${nameFile}.json`;\r\n            \r\n            return webix.ajax().get(path)\r\n            .then(function (data){\r\n                self[nameFile] = data.json();\r\n                return true;\r\n            })\r\n            .fail(function (err){\r\n                if ((0,_components_logout_common_js__WEBPACK_IMPORTED_MODULE_1__.checkNotAuth) (err)){\r\n                    (0,_components_logout_common_js__WEBPACK_IMPORTED_MODULE_1__.popupNotAuth)();\r\n                } else {\r\n                    $$(\"tree\").callEvent(\"onLoadError\", [err]);\r\n                    return false;\r\n                }\r\n            });\r\n\r\n        }\r\n \r\n    }\r\n}\r\n\r\nclass GetMenu   extends LoadServerData   {\r\n\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n\r\n    static get content (){\r\n        if (this.mmenu){\r\n            return this.mmenu.mmenu;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nclass GetFields extends LoadServerData {\r\n\r\n    constructor(){\r\n        super();\r\n       // this.content = this.fields.content;\r\n    }\r\n\r\n    static attribute (key, attr){\r\n        if (this.fields && this.fields.content[key]){\r\n            return this.fields.content[key][attr];\r\n        } \r\n    }\r\n\r\n    static item (key){\r\n        if (this.fields){\r\n            return this.fields.content[key];\r\n        } \r\n    }\r\n\r\n    static get keys (){\r\n        if (this.fields){\r\n            return Object.keys  (this.fields.content);\r\n        }   \r\n    }\r\n\r\n    static get values (){\r\n        if (this.fields){\r\n            return Object.values(this.fields.content);\r\n        } \r\n    }\r\n\r\n    static get names (){\r\n        const values = this.values;\r\n        const keys   = this.keys;\r\n        if (this.fields){\r\n            const tableNames = [];\r\n            try{\r\n                values.forEach(function(el,i){\r\n                    tableNames.push({\r\n                        id  : keys[i], \r\n                        name: (el.plural) ? el.plural : el.singular\r\n                    });\r\n                });\r\n            } catch (err){   \r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"globalStorage\",\"getTableNames\");\r\n            }\r\n\r\n            return tableNames;\r\n  \r\n        } \r\n    }\r\n   \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/globalStorage.js?");

/***/ }),

/***/ "./src/js/blocks/notifications.js":
/*!****************************************!*\
  !*** ./src/js/blocks/notifications.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"popupExec\": () => (/* binding */ popupExec),\n/* harmony export */   \"modalBox\": () => (/* binding */ modalBox)\n/* harmony export */ });\nfunction popupExec (titleText) { \r\n\r\n    return webix.confirm({\r\n        width:300,\r\n        ok: 'Да',\r\n        cancel: 'Отмена',\r\n        title:titleText,\r\n        text:\"Вы уверены, что хотите продолжить?\"\r\n    });\r\n}\r\n\r\n\r\nfunction modalBox (title, text, btns){\r\n\r\n    if(!title && !text && !btns){\r\n        return webix.modalbox({\r\n            title   : \"Данные не сохранены\",\r\n            css     : \"webix_modal-custom-save\",\r\n            buttons : [\"Отмена\", \"Не сохранять\", \"Сохранить\"],\r\n            width   : 500,\r\n            text    : \"Выберите действие перед тем как продолжить\"\r\n\r\n        });\r\n    } else {\r\n        return webix.modalbox({\r\n            title   : title,\r\n            css     : \"webix_modal-custom-save\",\r\n            buttons : btns,\r\n            width   : 500,\r\n            text    : text\r\n\r\n        });\r\n    }\r\n\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/notifications.js?");

/***/ }),

/***/ "./src/js/blocks/queryToString.js":
/*!****************************************!*\
  !*** ./src/js/blocks/queryToString.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"encodeQueryData\": () => (/* binding */ encodeQueryData)\n/* harmony export */ });\nfunction encodeQueryData(data) {\r\n    const ret = [];\r\n    for (let item in data){\r\n        const name  = encodeURIComponent(item);\r\n        const param = encodeURIComponent(data[item]);\r\n        ret.push(name + '=' + param);\r\n    }\r\n \r\n    return ret.join('&');\r\n}\r\n\r\n\r\n// const data = { \r\n//     'query' : table + id, \r\n//     'sorts' : table, \r\n//     'limit' : 80 , \r\n//     'offset': 0 \r\n// };\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/queryToString.js?");

/***/ }),

/***/ "./src/js/blocks/setParamToLink.js":
/*!*****************************************!*\
  !*** ./src/js/blocks/setParamToLink.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setParamToLink\": () => (/* binding */ setParamToLink),\n/* harmony export */   \"removeParamFromLink\": () => (/* binding */ removeParamFromLink)\n/* harmony export */ });\nfunction createParameters(params){\r\n    const paramsObj =  params;\r\n    return  \"?\" + new URLSearchParams(paramsObj).toString();\r\n}\r\n\r\nfunction setParamToLink(vals){\r\n    const params = createParameters(vals);\r\n    window.history.replaceState(null, null, params);\r\n}\r\n\r\nfunction removeParamFromLink(id){\r\n    const oldUrl = window.location.href;\r\n    const url    = new URL(oldUrl);\r\n\r\n    url.searchParams.delete(id);\r\n\r\n    history.replaceState(null, null, url);\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/setParamToLink.js?");

/***/ }),

/***/ "./src/js/blocks/storageSetting.js":
/*!*****************************************!*\
  !*** ./src/js/blocks/storageSetting.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setStorageData\": () => (/* binding */ setStorageData),\n/* harmony export */   \"setUserPrefs\": () => (/* binding */ setUserPrefs)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\nfunction setStorageData (name, value){\r\n    if (typeof(Storage) !== 'undefined') {\r\n        localStorage.setItem(name, value);\r\n    } \r\n}\r\n\r\nfunction setLoginActionPref(userLocation, userprefsWorkspace){\r\n    function replaceUser(){\r\n        if (userLocation       && \r\n            userLocation.href  && \r\n            userLocation.href !== window.location.href ){\r\n        \r\n            window.location.replace(userLocation.href);\r\n        }\r\n    }\r\n    try{\r\n        if (userprefsWorkspace){\r\n            if (userprefsWorkspace.LoginActionOpt == 2){\r\n                replaceUser();\r\n            }\r\n        } else {\r\n            replaceUser();\r\n        }\r\n    } catch(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"storageSettings\",\"setLoginActionPref\");\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction moveUser(){\r\n\r\n    const localPath = \"/index.html/content\";\r\n    const expaPath  = \"/init/default/spaw/content\";\r\n\r\n\r\n\r\n    if ( window.location.pathname == localPath || window.location.pathname == expaPath ){\r\n  \r\n        const userprefsWorkspace = webix.storage.local.get(\"userprefsWorkspaceForm\");\r\n        const userLocation       = webix.storage.local.get(\"userLocationHref\");\r\n        const outsideHref        = webix.storage.local.get(\"outsideHref\");\r\n\r\n        if (outsideHref){\r\n            const url = new URL( outsideHref.href );\r\n            \r\n            if ( url.origin == window.location.origin && !(url.pathname.includes(\"logout\"))) {\r\n                setLoginActionPref( outsideHref, userprefsWorkspace );\r\n            }\r\n\r\n        } else {\r\n            const url = new URL( userLocation.href );\r\n            if ( userprefsWorkspace && userprefsWorkspace.LoginActionOpt || !userprefsWorkspace ){\r\n\r\n                if ( url.origin == window.location.origin && !(url.pathname.includes(\"logout\"))) {\r\n                    setLoginActionPref( userLocation, userprefsWorkspace );\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction setLogPref(){\r\n    const userprefsWorkspace = webix.storage.local.get(\"userprefsWorkspaceForm\");\r\n    const logLayout          = $$(\"logLayout\");\r\n    const logBtn             = $$(\"webix_log-btn\");\r\n\r\n    function hideLog(){\r\n        logLayout.config.height = 5;\r\n        logBtn.config.icon =\"icon-eye\";\r\n        logBtn.setValue(1);\r\n    }\r\n\r\n    function showLog(){\r\n        logLayout.config.height = 90;\r\n        logBtn.config.icon =\"icon-eye-slash\";\r\n        logBtn.setValue(2);\r\n    }\r\n    \r\n    try{\r\n        if (userprefsWorkspace){\r\n \r\n            if (userprefsWorkspace.logBlockOpt !== undefined ){\r\n\r\n                if (userprefsWorkspace.logBlockOpt == \"2\"){\r\n                    hideLog();\r\n\r\n                } else if(userprefsWorkspace.logBlockOpt == \"1\"){\r\n                    showLog();\r\n                }\r\n\r\n                logLayout.resize();\r\n                logBtn.refresh();\r\n            }\r\n\r\n\r\n        }\r\n    } catch(err){\r\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"storageSettings\",\"userprefsWorkspace\");\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction setUserPrefs (userData){\r\n \r\n    const userprefsData = webix.ajax(\"/init/default/api/userprefs/\");\r\n   \r\n    userprefsData.then( function (data) {\r\n        let user = webix.storage.local.get(\"user\");\r\n        data       = data.json().content;\r\n\r\n        if (userData){\r\n            user = userData;\r\n        }\r\n        \r\n        function setDataToStorage(){\r\n \r\n            try{\r\n                data.forEach(function(el,i){\r\n                    if (el.owner == user.id && !(el.name.includes(\"fav-link_\"))){\r\n                        setStorageData (el.name, el.prefs);\r\n                    }\r\n               \r\n                });\r\n            } catch(err){\r\n                (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,\"storageSettings\",\"setDataToStorage\");\r\n            }\r\n        }\r\n\r\n        \r\n        function setPrefs(){\r\n   \r\n            if (!user){\r\n                const userprefsGetData = webix.ajax(\"/init/default/api/whoami\");\r\n                userprefsGetData.then(function(data){\r\n                    data = data.json().content;\r\n                \r\n                    let userData = {};\r\n                \r\n                    userData.id       = data.id;\r\n                    userData.name     = data.first_name;\r\n                    userData.username = data.username;\r\n           \r\n                    setStorageData(\"user\", JSON.stringify(userData));\r\n                });\r\n                userprefsGetData.then(function(data){\r\n                    user = webix.storage.local.get(\"user\");\r\n                    setDataToStorage ();\r\n                    moveUser         ();\r\n                    setLogPref       ();\r\n                });\r\n\r\n                userprefsGetData.fail(function(err){\r\n                    (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(err, \"favsLink\", \"btnSaveLpostContentinkClick => getUserData\");\r\n                });\r\n    \r\n            } else {\r\n \r\n                setDataToStorage();\r\n                moveUser        ();\r\n            }\r\n\r\n        \r\n          \r\n        }\r\n        setPrefs();\r\n    }).then(function(){\r\n        setLogPref();\r\n    });\r\n    userprefsData.fail(function(err){\r\n        console.log(err);\r\n        console.log(\"storageSettings function setUserPrefs\");\r\n    });\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/storageSetting.js?");

/***/ }),

/***/ "./src/js/blocks/webixGlobalPrefs.js":
/*!*******************************************!*\
  !*** ./src/js/blocks/webixGlobalPrefs.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"webixGlobalPrefs\": () => (/* binding */ webixGlobalPrefs),\n/* harmony export */   \"protoUIEdittree\": () => (/* binding */ protoUIEdittree),\n/* harmony export */   \"backButtonBrowserLogic\": () => (/* binding */ backButtonBrowserLogic)\n/* harmony export */ });\n\r\nfunction createCustomEditor(){\r\n    webix.editors.customDate = webix.extend({\r\n        render:function(){\r\n            return webix.html.create(\"div\", {\r\n            \"class\":\"webix_dt_editor\"\r\n            }, \"<input class='webix_custom-date-editor' id='custom-date-editor' type='text'>\");\r\n    }}, webix.editors.text);\r\n    \r\n}\r\n\r\nfunction setDateFormat(){\r\n    webix.i18n.setLocale(\"ru-RU\");   \r\n    webix.i18n.parseFormat = \"%d.%m.%Y %H:%i:%s\";\r\n    webix.i18n.setLocale();\r\n    webix.Date.startOnMonday = true;\r\n}\r\n\r\nfunction setMsgPosition(){\r\n    webix.message.position = \"bottom\";\r\n}\r\n\r\nfunction protoUIEdittree () {\r\n    webix.protoUI({\r\n        name:\"edittree\"\r\n    }, webix.EditAbility, webix.ui.tree);\r\n}\r\n\r\n\r\nfunction webixGlobalPrefs (){\r\n    createCustomEditor  ();\r\n    setDateFormat       ();\r\n    setMsgPosition      ();\r\n}\r\n\r\nfunction backButtonBrowserLogic (){\r\n    window.addEventListener('popstate', function(event) {\r\n        window.location.replace(window.location.href);\r\n        window.location.reload();\r\n        \r\n    });\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/blocks/webixGlobalPrefs.js?");

/***/ }),

/***/ "./src/js/components/dashboard/_dashMediator.js":
/*!******************************************************!*\
  !*** ./src/js/components/dashboard/_dashMediator.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Dashboards\": () => (/* binding */ Dashboards)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _layout_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_layout.js */ \"./src/js/components/dashboard/_layout.js\");\n/* harmony import */ var _createDashboard_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createDashboard.js */ \"./src/js/components/dashboard/createDashboard.js\");\n\r\n\r\n\r\n\r\n\r\nclass Dashboards {\r\n    constructor (){\r\n        this.name = \"dashboards\";\r\n    }\r\n\r\n    create(){\r\n        if (!$$(this.name)){\r\n            $$(\"container\").addView(\r\n                {   view    : \"layout\",\r\n                    id      : this.name, \r\n                    hidden  : true, \r\n                    scroll  : \"auto\",\r\n                    rows    : (0,_layout_js__WEBPACK_IMPORTED_MODULE_1__.dashboardLayout)()\r\n                },\r\n            3);\r\n        }\r\n    }\r\n\r\n    showView(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(this.name));   \r\n    }\r\n\r\n    load(id){\r\n        (0,_createDashboard_js__WEBPACK_IMPORTED_MODULE_2__.createDashboard)(id);\r\n    }\r\n\r\n    defaultState(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"dashboardTool\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"dashboardInfoContainer\"));\r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/_dashMediator.js?");

/***/ }),

/***/ "./src/js/components/dashboard/_layout.js":
/*!************************************************!*\
  !*** ./src/js/components/dashboard/_layout.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"dashboardLayout\": () => (/* binding */ dashboardLayout)\n/* harmony export */ });\nfunction returnTemplate(id){\r\n    return {\r\n        id      : \"dashboard\" + id,\r\n        css     : \"webix_dashTool\", \r\n        minWidth: 200,\r\n        width   : 350,\r\n        hidden  : true,\r\n        rows    : [],\r\n        on:{\r\n            onViewShow:function(){\r\n                if (window.innerWidth > 850){\r\n                    this.config.width = 350;\r\n                    this.resize();\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nconst dashboardTool    = returnTemplate(\"Tool\");\r\nconst dashboardContext = returnTemplate(\"Context\");\r\n\r\nfunction dashboardLayout () {\r\n        return [\r\n            {   view : \"scrollview\", \r\n                id   : \"dashScroll\",  \r\n                body: \r\n                    {   \r\n                        view: \"flexlayout\",\r\n                        id  : \"dashboardContainer\",\r\n                \r\n                        cols: [\r\n                            {   id      : \"dashboardInfoContainer\",\r\n                                minWidth: 250, \r\n                                rows    : [] \r\n                            },\r\n                            {view: \"resizer\"},\r\n                            dashboardTool,\r\n                            dashboardContext\r\n                          \r\n                        \r\n                        ]\r\n                    } \r\n            }\r\n        ];\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/_layout.js?");

/***/ }),

/***/ "./src/js/components/dashboard/autorefresh.js":
/*!****************************************************!*\
  !*** ./src/js/components/dashboard/autorefresh.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"autorefresh\": () => (/* binding */ autorefresh)\n/* harmony export */ });\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\nlet idsParam;\r\n\r\n\r\n\r\n\r\nfunction setIntervalConfig(counter){\r\n    setInterval(function(){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.dashboards.load(idsParam);\r\n    },  counter );\r\n}\r\n\r\nfunction autorefresh (el, ids) {\r\n\r\n  \r\n    if (el.autorefresh){\r\n\r\n        const userprefsOther = webix.storage.local.get(\"userprefsOtherForm\");\r\n        const counter        = userprefsOther.autorefCounterOpt;\r\n        idsParam             = ids;\r\n\r\n        if ( counter !== undefined ){\r\n\r\n            if ( counter >= 15000 ){\r\n                setIntervalConfig(counter);\r\n\r\n            } else {\r\n                setIntervalConfig(50000);\r\n            }\r\n\r\n        } else {\r\n            setIntervalConfig(50000);\r\n        }\r\n\r\n       \r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/autorefresh.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createDashboard.js":
/*!********************************************************!*\
  !*** ./src/js/components/dashboard/createDashboard.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDashboard\": () => (/* binding */ createDashboard)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _createSpace_dynamicElements_layout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./createSpace/dynamicElements/_layout.js */ \"./src/js/components/dashboard/createSpace/dynamicElements/_layout.js\");\n/* harmony import */ var _createSpace_filter_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./createSpace/filter/elements.js */ \"./src/js/components/dashboard/createSpace/filter/elements.js\");\n/* harmony import */ var _autorefresh_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./autorefresh.js */ \"./src/js/components/dashboard/autorefresh.js\");\n/* harmony import */ var _createSpace_contextWindow_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./createSpace/contextWindow.js */ \"./src/js/components/dashboard/createSpace/contextWindow.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"dashboard => createDashboard\";\r\nlet idsParam;\r\n\r\nfunction getDashId ( idsParam ){\r\n    const tree = $$(\"tree\");\r\n    let itemTreeId;\r\n\r\n    if (idsParam){\r\n        itemTreeId = idsParam;\r\n    } else if (tree.getSelectedItem()){\r\n        itemTreeId = tree.getSelectedItem().id;\r\n    }\r\n\r\n    return itemTreeId;\r\n}\r\n\r\n\r\nfunction createDashSpace (){\r\n\r\n    const keys   = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.keys;\r\n    const values = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.values;\r\n\r\n    const itemTreeId = getDashId(idsParam);\r\n  \r\n    values.forEach(function(el,i){\r\n\r\n        const fieldId = keys[i];\r\n     \r\n        if (el.type == \"dashboard\" && fieldId == itemTreeId) {\r\n          \r\n            const url    = el.actions.submit.url;\r\n            const inputs = (0,_createSpace_filter_elements_js__WEBPACK_IMPORTED_MODULE_4__.createFilter) (el.inputs, el, idsParam);\r\n         \r\n            (0,_createSpace_dynamicElements_layout_js__WEBPACK_IMPORTED_MODULE_3__.createDynamicElems)(url, inputs,      idsParam);\r\n            (0,_autorefresh_js__WEBPACK_IMPORTED_MODULE_5__.autorefresh)       (el,  idsParam);\r\n        }\r\n    });\r\n}\r\n\r\nasync function getFieldsData (){\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.LoadServerData.content(\"fields\");\r\n    createDashSpace ();\r\n}\r\n\r\nfunction getData(tableId, src){\r\n\r\n    const query = [\r\n        \"query=\" + src + \".id=\" + tableId,\r\n        \"sorts=\" + src + \".id\",\r\n        \"limit=\" + 80,\r\n        \"offset=\"+ 0,\r\n    ];\r\n    const fullQuery = query.join(\"&\");\r\n    const path      = \"/init/default/api/smarts?\";\r\n    const queryData = webix.ajax(path + fullQuery);\r\n\r\n    queryData.then(function(data){\r\n        data             = data.json();\r\n        const notifyType = data.err_type;\r\n        const notifyMsg  = data.err;\r\n        const content    = data.content[0];\r\n\r\n        if (content){\r\n            (0,_createSpace_contextWindow_js__WEBPACK_IMPORTED_MODULE_6__.createContextProperty)(\r\n                content, \r\n                src\r\n            );\r\n        }\r\n\r\n        if (notifyType !== \"i\"){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                notifyMsg, \r\n                logNameFile, \r\n                \"getData\"\r\n            );\r\n        }  \r\n    });\r\n    queryData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"getTableData\"\r\n        );\r\n    });\r\n}\r\n\r\nfunction getLinkParams(param){\r\n    const href   = window.location.search;\r\n    const params = new URLSearchParams (href);\r\n    return params.get(param);\r\n}\r\n\r\nfunction selectContextId(){\r\n    const idParam  = getLinkParams(\"id\");\r\n    const srcParam = getLinkParams(\"src\");\r\n    if (idParam && srcParam){\r\n        getData(idParam , srcParam);\r\n    } \r\n}\r\nfunction createContext(){\r\n    selectContextId()\r\n}\r\n\r\n\r\nfunction createDashboard ( ids ){\r\n    idsParam = ids;\r\n\r\n    const scroll = $$(\"dashBodyScroll\");\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.removeItem(scroll);\r\n\r\n    getFieldsData ();\r\n  \r\n    createContext();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createDashboard.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/click/itemClickLogic.js":
/*!*************************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/click/itemClickLogic.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnEl\": () => (/* binding */ returnEl),\n/* harmony export */   \"setAttributes\": () => (/* binding */ setAttributes)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _updateSpace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./updateSpace.js */ \"./src/js/components/dashboard/createSpace/click/updateSpace.js\");\n/* harmony import */ var _navigate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./navigate.js */ \"./src/js/components/dashboard/createSpace/click/navigate.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst action = {\r\n    navigate: \"true - переход на другую страницу, false - обновление в данном дашборде\",\r\n    context : \"true - открыть окно с записью таблицы, false - обновить таблицу\",\r\n    field   : \"название из fields (id таблицы должен быть идентичным, если navigate = false)\",\r\n    params  :{\r\n        // sorts\r\n        filter : \"auth_group.id > 3\", \r\n    }\r\n   \r\n};\r\n\r\nconst action2 = {\r\n    navigate: false,\r\n    field   : \"auth_group\",\r\n   context : true,\r\n    params  :{\r\n        filter : \"auth_group.id = 3\" \r\n    //filter : \"auth_group.id != '1' or auth_group.id != '3' and auth_group.role contains 'р' or auth_group.role = 'а'\" \r\n    } \r\n};\r\n\r\nfunction setCursorPointer(areas, fullElems, idElem){\r\n\r\n    areas.forEach(function(el){\r\n        if (el.tagName){\r\n            const attr = el.getAttribute(\"webix_area_id\");\r\n\r\n            if (attr == idElem || fullElems){\r\n                el.style.cursor = \"pointer\";\r\n            }\r\n            \r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction cursorPointer(self, elem){\r\n    const chart          = self.getNode();\r\n    const htmlCollection = chart.getElementsByTagName('map');\r\n    const mapTag         = htmlCollection.item(0);\r\n    if (mapTag){\r\n        const areas          = mapTag.childNodes;\r\n\r\n        if (elem.action){\r\n            setCursorPointer(areas, true);\r\n        } else if (elem.data){\r\n            elem.data.forEach(function(el, i){\r\n\r\n                // if (i == 1 || i == 4 ){\r\n                //     el.action = action2; \r\n                // }\r\n            \r\n                if (el.action){\r\n                    setCursorPointer(areas, false, el.id);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nasync function findField(chartAction){\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.LoadServerData.content(\"fields\");\r\n    const keys   = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.keys;\r\n\r\n    let field = chartAction;\r\n\r\n    if (chartAction && chartAction.field){\r\n        field = chartAction.field;\r\n    }\r\n\r\n    keys.forEach(function(key){\r\n   \r\n        if ( key == field ){\r\n            if (chartAction.navigate){\r\n                (0,_navigate_js__WEBPACK_IMPORTED_MODULE_2__.postPrefs)(chartAction);\r\n            } else {\r\n                (0,_updateSpace_js__WEBPACK_IMPORTED_MODULE_1__.updateSpace)(chartAction);\r\n            } \r\n        \r\n        }\r\n    });\r\n}\r\n\r\nfunction findInnerChartField(elem, idEl){\r\n    // найти выбранный элемент в data\r\n    const collection = elem.data;\r\n        \r\n    let selectElement;\r\n\r\n    collection.forEach( function (el){\r\n        if (el.id == idEl){\r\n            selectElement = el;\r\n        }\r\n    });\r\n\r\n    const chartAction = selectElement.action;\r\n\r\n    if (chartAction){\r\n        findField(chartAction);\r\n\r\n    } \r\n}\r\n\r\nfunction setAttributes(elem, topAction){\r\n    if (topAction){\r\n        elem.action = topAction;\r\n    }\r\n\r\n    elem.borderless = true;\r\n    elem.minWidth   = 250;\r\n    elem.on         = {\r\n        onAfterRender: function(){\r\n            cursorPointer(this, elem);\r\n        },\r\n\r\n        onItemClick  : function(idEl){\r\n            console.log(\"пример: \", action);\r\n    \r\n            if (elem.action){ // action всего элемента\r\n                findField(elem.action);\r\n                \r\n            } else {          // action в data\r\n                findInnerChartField(elem, idEl);\r\n            }\r\n            \r\n        },\r\n\r\n    };\r\n     \r\n    return elem;\r\n}\r\n\r\n\r\nfunction iterateArr(container, topAction){\r\n    let res;\r\n    const elements = [];\r\n\r\n    function loop(container){\r\n        container.forEach(function(el){\r\n         \r\n            const nextContainer = el.rows || el.cols;\r\n     \r\n            if (!el.rows && !el.cols){\r\n                if (el.view && el.view == \"chart\"){\r\n                    el = setAttributes(el, topAction);\r\n                }\r\n                \r\n                elements.push(el);\r\n            } else {\r\n                loop(nextContainer);\r\n            }\r\n        });\r\n    }\r\n\r\n    loop( container );\r\n\r\n    if (elements.length){\r\n        res = elements;\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\n\r\n\r\nfunction returnEl(element, topAction){\r\n    const container = element.rows || element.cols;\r\n   \r\n    let resultElem;\r\n    \r\n    container.forEach(function(el){\r\n        const nextContainer = el.rows || el.cols;\r\n        resultElem = iterateArr(nextContainer, topAction);\r\n\r\n    });\r\n\r\n    return resultElem;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/click/itemClickLogic.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/click/navigate.js":
/*!*******************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/click/navigate.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"postPrefs\": () => (/* binding */ postPrefs)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => createSpace => click => navigate\";\r\n\r\nfunction createSentObj(prefs){\r\n    const sentObj = {\r\n        name    : \"dashboards_context-prefs\",\r\n        prefs   : prefs,\r\n    };\r\n\r\n    const ownerId = webix.storage.local.get(\"user\").id;\r\n\r\n    if (ownerId){\r\n        sentObj.owner = ownerId;\r\n    }\r\n\r\n    return sentObj;\r\n}\r\n\r\nfunction navigate(field, id){\r\n    if (id){\r\n        const path = \"tree/\" + field + \"?\" + \"prefs=\" + id;\r\n        Backbone.history.navigate(path, { trigger : true });\r\n        window.location.reload();   \r\n    } \r\n}\r\n\r\nfunction postPrefs(chartAction){\r\n    const sentObj       = createSentObj(chartAction);\r\n    const path          = \"/init/default/api/userprefs/\";\r\n    const userprefsPost = webix.ajax().post(path, sentObj);\r\n                    \r\n    userprefsPost.then(function(data){\r\n        data = data.json();\r\n   \r\n        if (data.err_type == \"i\"){\r\n            const id = data.content.id;\r\n            if (id){\r\n                navigate(chartAction.field, id);\r\n            } else {\r\n                const errs   = data.content.errors;\r\n                const values = Object.values(errs);\r\n                const keys   = Object.keys  (errs);\r\n\r\n                values.forEach(function(err, i){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                        err + \" - \" + keys[i] , \r\n                        logNameFile, \r\n                        \"postPrefs\"\r\n                    );\r\n                });\r\n               \r\n            }\r\n          \r\n\r\n        } else {\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\", data.error);\r\n        }\r\n    });\r\n\r\n    userprefsPost.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"postPrefs\"\r\n        );\r\n    });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/click/navigate.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/click/updateSpace.js":
/*!**********************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/click/updateSpace.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updateSpace\": () => (/* binding */ updateSpace)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _contextWindow_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contextWindow.js */ \"./src/js/components/dashboard/createSpace/contextWindow.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => createSpace => click => updateSpace\";\r\n\r\nfunction createQuery(filter, sorts){\r\n \r\n    const query = [ \r\n        \"query=\" + filter , \r\n        \"sorts=\" + sorts  , \r\n        \"limit=\" + 80, \r\n        \"offset=\"+ 0\r\n    ];\r\n\r\n    return query;\r\n}\r\n\r\n\r\nfunction scrollToTable(tableElem){\r\n    const node = tableElem.getNode();\r\n    node.scrollIntoView();\r\n}\r\n\r\nfunction setDataToTable(table, data){\r\n\r\n    const tableElem = $$(table);\r\n\r\n    if (tableElem){\r\n        tableElem.clearAll();\r\n        tableElem.parse(data);\r\n\r\n    } else {    \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            \"Таблица с id «\" + table + \r\n            \"» не найдена на странице\", \r\n            logNameFile, \r\n            \"setDataToTable\"\r\n        );\r\n    }\r\n\r\n    scrollToTable(tableElem);\r\n}\r\n\r\nfunction getTableData(tableId, query, onlySelect){\r\n\r\n    const fullQuery = query.join(\"&\");\r\n    const path      = \"/init/default/api/smarts?\";\r\n    const queryData = webix.ajax(path + fullQuery);\r\n\r\n    queryData.then(function(data){\r\n        data             = data.json();\r\n        const notifyType = data.err_type;\r\n        const notifyMsg  = data.err;\r\n        const content    = data.content;\r\n        const item       = content[0];\r\n\r\n        if (!onlySelect){\r\n            setDataToTable (tableId, content);\r\n        } else if (item){\r\n            (0,_contextWindow_js__WEBPACK_IMPORTED_MODULE_2__.createContextProperty) (item, tableId);\r\n        }\r\n       \r\n\r\n        if (notifyType !== \"i\"){\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\", notifyMsg);\r\n        }  \r\n    });\r\n    queryData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"getTableData\"\r\n        );\r\n    });\r\n}\r\n\r\nfunction updateSpace(chartAction){\r\n    const tableId     = chartAction.field;\r\n\r\n    const filter      = chartAction.params.filter;\r\n    const filterParam = filter || tableId + \".id > 0\" ;\r\n\r\n    const sorts     = chartAction.params.sorts;\r\n    const sortParam = sorts || tableId + \".id\" ;\r\n    const query     = createQuery(filterParam, sortParam);\r\n\r\n    const onlySelect= chartAction.context;\r\n\r\n    getTableData(tableId, query, onlySelect);\r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/click/updateSpace.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/common.js":
/*!***********************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/common.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getDashId\": () => (/* binding */ getDashId)\n/* harmony export */ });\nfunction getDashId ( idsParam ){\r\n    const tree = $$(\"tree\");\r\n    let itemTreeId;\r\n\r\n    if (idsParam){\r\n        itemTreeId = idsParam;\r\n    } else if (tree.getSelectedItem()){\r\n        itemTreeId = tree.getSelectedItem().id;\r\n    }\r\n\r\n    return itemTreeId;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/common.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/contextWindow.js":
/*!******************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/contextWindow.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createContextProperty\": () => (/* binding */ createContextProperty)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nlet container;\r\nlet item;\r\nlet field;\r\n\r\nconst headline  = {\r\n    template    : \"<div class='no-wrap-headline'>Подробности</div>\", \r\n    css         : \"webix_popup-headline\", \r\n    borderless  : true, \r\n    height      : 40 \r\n};\r\n\r\nfunction closeBtnClick(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem($$(\"dashContextLayout\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem  (container);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem  ($$(\"dashboardInfoContainer\"));\r\n\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.linkParam(false, \"id\");\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.linkParam(false, \"src\");\r\n}\r\n\r\nconst closeBtn  = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n    config   : {\r\n        id     : \"dashContexCloseBtn\",\r\n        hotkey : \"Esc\",\r\n        icon   : \"icon-arrow-right\", \r\n        click  : function (){\r\n            closeBtnClick();\r\n        }\r\n    },\r\n    css            : \"webix-transparent-btn\",\r\n    titleAttribute : \"Скрыть конекстное окно\"\r\n\r\n   \r\n}).minView();\r\n\r\nasync function findLabels(){\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__.LoadServerData.content(\"fields\");\r\n\r\n    const tableData = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__.GetFields.item(field);\r\n    const fields    = Object.values (tableData.fields);\r\n    const labels    = [];\r\n    fields.forEach(function(el){\r\n        labels.push(el.label);\r\n    });\r\n\r\n    return labels;\r\n}\r\n\r\nasync function createPropElements(){\r\n\r\n    const data = [];\r\n        if (item){\r\n        const values = Object.values(item);\r\n        const labels = await findLabels();\r\n\r\n        values.forEach(function(val, i){\r\n            data.push({\r\n                label : labels[i], \r\n                value :  val\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n    return data;\r\n}\r\n\r\nasync function returnProperty(){\r\n    const property  = {\r\n        view    : \"property\",  \r\n        id      : \"dashContextProperty\", \r\n        minHeight:100,\r\n        elements: await createPropElements(),\r\n    };\r\n\r\n    const propertyLayout = {   \r\n        scroll     : \"y\", \r\n        rows       : [\r\n            property,\r\n            {height : 20}\r\n        ]\r\n    };\r\n\r\n    return propertyLayout;\r\n}\r\n\r\n\r\nfunction goToTableBtnClick(){\r\n    const id = item.id;\r\n\r\n    if (item && item.id){\r\n        const path   = \"tree/\" + field;\r\n        const params = \"?id=\" + id;\r\n        Backbone.history.navigate(path + params, { trigger:true });\r\n        window.location.reload();\r\n    }\r\n \r\n}\r\n\r\nconst goToTableBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n    \r\n    config   : {\r\n        id       : \"goToTableBtn\",\r\n        hotkey   : \"Ctrl+Shift+Space\",\r\n        value    : \"Редактировать\", \r\n        click    : function (){\r\n            goToTableBtnClick();\r\n        }\r\n    },\r\n    titleAttribute : \"Перейти в таблицу для редактирования записи\"\r\n\r\n   \r\n}).maxView(\"primary\");\r\n\r\n\r\n\r\nasync function createLayout(){\r\n \r\n    const layout = {\r\n        id      : \"dashContextLayout\",\r\n        padding : 15,\r\n        rows    : [\r\n            {cols: [\r\n                headline,\r\n                {},\r\n                closeBtn \r\n            ]},\r\n            await returnProperty(),\r\n           // {height : 20},\r\n            goToTableBtn,\r\n            {}\r\n        ]\r\n      \r\n    };\r\n\r\n    return layout;\r\n}\r\n\r\nasync function createSpace(){\r\n    const content = $$(\"dashContextLayout\");\r\n    if (content){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem(content);\r\n    }\r\n\r\n    if (container){\r\n        container.addView(await createLayout());\r\n    }\r\n   \r\n}\r\n\r\n\r\nfunction setLinkParams(){\r\n    const params = {\r\n        src : field, \r\n        id  : item.id\r\n    };\r\n    \r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.linkParam(true, params);\r\n}\r\n\r\nfunction createContextProperty(data, idTable){\r\n    item  = data;\r\n    field = idTable;\r\n\r\n    const filters = $$(\"dashboardTool\");\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(filters);\r\n    \r\n    container = $$(\"dashboardContext\");\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem(container);\r\n    if (window.innerWidth < 850){\r\n\r\n        container.config.width = window.innerWidth - 45;\r\n        console.log(container.config.width)\r\n        container.resize();\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"dashboardInfoContainer\"));\r\n    }\r\n\r\n    setLinkParams();\r\n    createSpace();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/contextWindow.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/dynamicElements/_layout.js":
/*!****************************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/dynamicElements/_layout.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDynamicElems\": () => (/* binding */ createDynamicElems)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _filter_filterLayout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../filter/filterLayout.js */ \"./src/js/components/dashboard/createSpace/filter/filterLayout.js\");\n/* harmony import */ var _chartsLayout_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chartsLayout.js */ \"./src/js/components/dashboard/createSpace/dynamicElements/chartsLayout.js\");\n/* harmony import */ var _viewTemplates_loadTemplate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../viewTemplates/loadTemplate.js */ \"./src/js/viewTemplates/loadTemplate.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"dashboards => createSpace => dynamicElems\";\r\n\r\nlet inputsArray;\r\nlet idsParam;\r\nlet action;\r\nlet url;\r\n\r\nfunction removeCharts(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem ($$(\"dashboardInfoContainerInner\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem ($$(\"dash-template\"              ));\r\n}\r\n\r\nfunction removeFilter(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem ($$(\"dashboard-tool-main\"    ));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem ($$(\"dashboard-tool-adaptive\"));\r\n}\r\n\r\nfunction setLogHeight(height){\r\n    try{\r\n        const log = $$(\"logLayout\");\r\n\r\n        log.config.height = height;\r\n        log.resize();\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setScrollHeight\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setScrollHeight(){\r\n    const logBth = $$(\"webix_log-btn\");\r\n\r\n    if ( logBth.config.icon == \"icon-eye\" ){\r\n        setLogHeight(90);\r\n        setLogHeight(5);\r\n    } else {\r\n        setLogHeight(5);\r\n        setLogHeight(90);\r\n    }\r\n   \r\n}\r\n\r\nfunction addSuccessView (dataCharts){\r\n\r\n    if (!action){\r\n    \r\n        (0,_chartsLayout_js__WEBPACK_IMPORTED_MODULE_4__.createDashboardCharts)  (idsParam, dataCharts);\r\n        (0,_filter_filterLayout_js__WEBPACK_IMPORTED_MODULE_3__.createFilterLayout)     (inputsArray);\r\n       \r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem       ($$(\"dashboardInfoContainerInner\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem       ($$(\"dash-template\"              ));\r\n        (0,_chartsLayout_js__WEBPACK_IMPORTED_MODULE_4__.createDashboardCharts)   (idsParam, dataCharts);\r\n\r\n    }\r\n    \r\n}\r\n\r\nfunction setUpdate(dataCharts){\r\n    if (dataCharts == undefined){\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)   (\"error\", \"Ошибка при загрузке данных\");\r\n    } else {\r\n        addSuccessView(dataCharts);\r\n    }\r\n}\r\n\r\nfunction setUserUpdateMsg(){\r\n    if ( url.includes(\"?\")   || \r\n         url.includes(\"sdt\") && \r\n         url.includes(\"edt\") )\r\n        {\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n            \"success\", \r\n            \"Данные обновлены\"\r\n        );\r\n    } \r\n}\r\n\r\nfunction addLoadElem(){\r\n    const id = \"dashLoad\";\r\n    if (!($$(id))){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem($$(\"dashLoadErr\"));\r\n\r\n        const view = (0,_viewTemplates_loadTemplate_js__WEBPACK_IMPORTED_MODULE_5__.createOverlayTemplate)(id);\r\n\r\n        $$(\"dashboardInfoContainer\").addView(view);\r\n    }   \r\n}\r\n\r\n\r\nfunction removeLoadView(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem($$(\"dash-load-charts\"));\r\n}\r\n\r\nfunction getChartsLayout(){\r\n    addLoadElem();\r\n    const getData = webix.ajax().get(url);\r\n  \r\n    getData.then(function(data){\r\n   \r\n        const err = data.json();\r\n        if (err.err_type == \"i\"){\r\n\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem($$(\"dashLoad\"));\r\n            const dataCharts    = data.json().charts;\r\n    \r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem($$(\"dashBodyScroll\"));\r\n    \r\n            if ( !action ){ //не с помощью кнопки фильтра\r\n                removeFilter();\r\n            }\r\n            \r\n            removeCharts    ();\r\n            setUpdate       (dataCharts);\r\n            setUserUpdateMsg();\r\n            removeLoadView  ();\r\n            setScrollHeight ();\r\n         \r\n        } else {\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                err.err, \r\n                logNameFile, \r\n                \"getChartsLayout\"\r\n            );\r\n        }\r\n    });\r\n   \r\n    getData.fail(function(err){\r\n        const id = \"dashLoadErr\";\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem($$(\"dashLoad\"));\r\n        if ( !$$(id) ){\r\n            $$(\"dashboardInfoContainer\").addView(  \r\n            (0,_viewTemplates_loadTemplate_js__WEBPACK_IMPORTED_MODULE_5__.createOverlayTemplate)(id, \"Ошибка\"));\r\n        }\r\n   \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, logNameFile, \"getAjax\");\r\n    });\r\n    \r\n}\r\n\r\n\r\nfunction createDynamicElems ( path, array, ids, btnPress = false ) {\r\n    inputsArray = array;\r\n    idsParam    = ids;\r\n    action      = btnPress;\r\n    url         = path;\r\n    \r\n    getChartsLayout();\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/dynamicElements/_layout.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/dynamicElements/chartsLayout.js":
/*!*********************************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/dynamicElements/chartsLayout.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDashboardCharts\": () => (/* binding */ createDashboardCharts)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _click_itemClickLogic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../click/itemClickLogic.js */ \"./src/js/components/dashboard/createSpace/click/itemClickLogic.js\");\n/* harmony import */ var _viewHeadline_layout_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../viewHeadline/_layout.js */ \"./src/js/components/viewHeadline/_layout.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.js */ \"./src/js/components/dashboard/createSpace/common.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"dashboards => createSpace => dynamicElements => chartsLayout\";\r\n\r\nfunction returnHeadline (titleTemplate){\r\n    const headline = {   \r\n        template    : titleTemplate,\r\n        borderless  : true,\r\n        height      : 35,\r\n        css         : {  \r\n            \"font-weight\" : \"400 !important\", \r\n            \"font-size\"   : \"17px!important\"\r\n        }, \r\n    };\r\n \r\n    return headline;\r\n}\r\n\r\nfunction createChart(dataCharts){\r\n    const layout = [];\r\n  \r\n    try{\r\n        // const table = {\r\n        //     \"view\": \"datatable\",\r\n        //     \"id\"  : \"auth_group\",\r\n        //     \"height\": 300,\r\n        //     \"scroll\": \"xy\",\r\n        //     \"columns\": [\r\n        //         {\r\n        //             \"id\": \"id\",\r\n        //             \"header\": [\r\n        //                 {\r\n        //                     \"text\": \"id\"\r\n        //                 }\r\n        //             ],\r\n        //             \"width\": 100,\r\n        //         },\r\n        //         {\r\n        //             \"id\": \"role\",\r\n        //             \"header\": [\r\n        //                 {\r\n        //                     \"text\": \"роль\"\r\n        //                 }\r\n        //             ],\r\n                    \r\n        //         },\r\n        //         {\r\n        //             \"id\": \"description\",\r\n        //             \"header\": [\r\n        //                 {\r\n        //                     \"text\": \"описание\"\r\n        //                 }\r\n        //             ],\r\n                    \r\n        //         }\r\n        //     ],\r\n        //     \"data\": [\r\n        //         {\r\n        //             \"id\": 1,\r\n        //             \"role\": \"222\",\r\n        //             \"description\": \"333\"\r\n        //         },\r\n                \r\n        //     ],\r\n        //     \"_inner\": {\r\n        //         \"top\": false\r\n        //     },\r\n        //     \"onDblClick\": {}\r\n        // };\r\n     \r\n        // dataCharts.push(table)\r\n        dataCharts.forEach(function(el){\r\n          \r\n            if (el.cols || el.rows){\r\n                (0,_click_itemClickLogic_js__WEBPACK_IMPORTED_MODULE_1__.returnEl)(el, el.action);\r\n            } else {\r\n                el = (0,_click_itemClickLogic_js__WEBPACK_IMPORTED_MODULE_1__.setAttributes)(el);\r\n            }\r\n        \r\n            const titleTemplate = el.title;\r\n\r\n            delete el.title;\r\n        \r\n            layout.push({\r\n                css : \"webix_dash-chart\",\r\n                rows: [ \r\n                    returnHeadline (titleTemplate),\r\n                    el\r\n                ]\r\n            });\r\n\r\n\r\n        });\r\n\r\n   \r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createChart\"\r\n        );\r\n    }\r\n\r\n    return layout;\r\n}\r\n\r\nasync function setDashName(idsParam) {\r\n    const itemTreeId = (0,_common_js__WEBPACK_IMPORTED_MODULE_3__.getDashId) (idsParam);\r\n    try{\r\n        await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_4__.LoadServerData.content(\"fields\");\r\n\r\n        const names = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_4__.GetFields.names;\r\n\r\n        if (names){\r\n\r\n            names.forEach(function(el){\r\n                if (el.id == itemTreeId){\r\n                    const template  = $$(\"dash-template\");\r\n                    const value     = el.name.toString();\r\n                    template.setValues(value);\r\n                }\r\n            });\r\n        }\r\n     \r\n        \r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setDashName\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setIdAttribute(idsParam){\r\n    const container = $$(\"dashboardContainer\");\r\n    if (container){\r\n        container.config.idDash = (0,_common_js__WEBPACK_IMPORTED_MODULE_3__.getDashId) (idsParam);\r\n    }\r\n}\r\n\r\n\r\nfunction createDashLayout(dataCharts){\r\n    const layout = createChart(dataCharts);\r\n\r\n    const dashLayout = [\r\n        {   type : \"wide\",\r\n            rows : layout\r\n        }\r\n    ];\r\n \r\n    const dashCharts = {\r\n        id  : \"dashboard-charts\",\r\n        view: \"flexlayout\",\r\n        css : \"webix_dash-charts-flex\",\r\n        rows: dashLayout,\r\n    };\r\n\r\n    return dashCharts;\r\n}\r\n\r\nfunction createScrollContent(dataCharts){\r\n    const content = {\r\n        view        : \"scrollview\", \r\n        scroll      : \"y\",\r\n        id          : \"dashBodyScroll\",\r\n        borderless  : true, \r\n        body        : {\r\n            id  : \"dashboardBody\",\r\n            css : \"dashboardBody\",\r\n            cols: [\r\n                createDashLayout(dataCharts)\r\n            ]\r\n        }\r\n    };\r\n\r\n    return content;\r\n}\r\n\r\nfunction createDashboardCharts(idsParam, dataCharts){\r\n\r\n    const template  = (0,_viewHeadline_layout_js__WEBPACK_IMPORTED_MODULE_2__.createHeadline)(\"dash-template\");\r\n    const container = $$(\"dashboardInfoContainer\");\r\n\r\n    const inner =  {   \r\n        id  : \"dashboardInfoContainerInner\",\r\n        rows: [\r\n            template,\r\n            createScrollContent(dataCharts)\r\n        ]\r\n    };\r\n\r\n    try{\r\n        container.addView(inner);\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createFilterLayout\"\r\n        );\r\n    } \r\n\r\n    setDashName( idsParam );\r\n    setIdAttribute(idsParam);\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/dynamicElements/chartsLayout.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/filter/elements.js":
/*!********************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/filter/elements.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createFilter\": () => (/* binding */ createFilter),\n/* harmony export */   \"setAdaptiveWidth\": () => (/* binding */ setAdaptiveWidth)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _submitBtnClick_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./submitBtnClick.js */ \"./src/js/components/dashboard/createSpace/filter/submitBtnClick.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"dashboard => createSpace => filter\";\r\n \r\n\r\nconst inputsArray = [];\r\nlet   findAction;\r\nlet   idsParam;\r\n\r\nfunction setAdaptiveWidth(elem){\r\n    const child       = elem.getNode().firstElementChild;\r\n    child.style.width = elem.$width + \"px\";\r\n\r\n    const inp         = elem.getInputNode();\r\n    inp.style.width   = elem.$width - 5 + \"px\";\r\n}\r\n\r\nfunction resetInvalidView(self){\r\n    const node   = self.getNode();\r\n    const input  = node.getElementsByTagName(\"input\")[0];\r\n    const css    = \"dash-filter-invalid\";\r\n    if (input){\r\n        const isInvalid = input.classList.contains(css);\r\n        if (isInvalid){\r\n            webix.html.removeCss(input, css);\r\n        }   \r\n    } \r\n}\r\n\r\nfunction setNullTimeValue(self){\r\n    const value = self.getText();\r\n    if (!value){\r\n        this.setValue(\"00:00:00\");\r\n    }\r\n}\r\n\r\n\r\nfunction createDate(type, input){\r\n    const dateTemplate = {\r\n        view        : \"datepicker\",\r\n        format      : \"%d.%m.%y\",\r\n        editable    : true,\r\n        value       : new Date(),\r\n        placeholder : input.label,\r\n        height      : 42,\r\n        on          : {\r\n            onItemClick:function(){\r\n                resetInvalidView(this);\r\n            },\r\n            onAfterRender : function () {\r\n                this.getInputNode().setAttribute(\r\n                    \"title\",\r\n                    input.comment\r\n                );\r\n\r\n               setAdaptiveWidth(this);\r\n            },\r\n        }\r\n    };\r\n\r\n    function setId(id){\r\n        const dateFirst = dateTemplate;\r\n        dateFirst.id    = \"dashDatepicker_\" + id;\r\n        return dateFirst;\r\n    }\r\n\r\n    if (type == \"first\"){\r\n        return setId(\"sdt\");\r\n    } else if (type == \"last\"){\r\n        return setId(\"edt\");\r\n    }\r\n\r\n}\r\n\r\nfunction createTime (type){\r\n    const timeTemplate =  {   \r\n        view        : \"datepicker\",\r\n        format      : \"%H:%i:%s\",\r\n        placeholder : \"Время\",\r\n        height      : 42,\r\n        editable    : true,\r\n        value       : \"00:00:00\",\r\n        type        : \"time\",\r\n        seconds     : true,\r\n        suggest     : {\r\n\r\n            type    : \"timeboard\",\r\n            css     : \"dash-timeboard\",\r\n            hotkey  : \"enter\",\r\n            body    : {\r\n                button  : true,\r\n                seconds : true,\r\n                value   : \"00:00:00\",\r\n                twelve  : false,\r\n                height  : 110, \r\n            },\r\n        },\r\n        on: {\r\n            onItemClick:function(){\r\n                resetInvalidView(this);\r\n            },\r\n\r\n            onTimedKeyPress:function(){\r\n                setNullTimeValue(this);\r\n            },\r\n            onAfterRender: function () {\r\n                this.getInputNode()\r\n                .setAttribute(\r\n                    \"title\",\r\n                    \"Часы, минуты, секунды\"\r\n                );\r\n                setAdaptiveWidth(this);\r\n            }\r\n           \r\n        }\r\n    };\r\n\r\n\r\n    if (type == \"first\"){\r\n        const timeFirst = timeTemplate;\r\n        timeFirst.id    = \"dashDatepicker_\" + \"sdt\" + \"-time\";\r\n        return timeFirst;\r\n    } else if (type == \"last\"){\r\n        const timeLast  = timeTemplate;\r\n        timeLast.id     =  \"dashDatepicker_\" + \"edt\" + \"-time\"; \r\n        return timeLast;\r\n    }\r\n}\r\n\r\n\r\nfunction createBtn (input, i){\r\n\r\n    const btnFilter = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n        \r\n        config   : {\r\n            id       : \"dashBtn\" + i,\r\n            hotkey   : \"Ctrl+Shift+Space\",\r\n            value    : input.label,\r\n            click    : function(){\r\n                (0,_submitBtnClick_js__WEBPACK_IMPORTED_MODULE_2__.clickBtn)(\r\n                    i, \r\n                    inputsArray, \r\n                    idsParam, \r\n                    findAction\r\n                );\r\n            },\r\n        },\r\n        titleAttribute : input.comment,\r\n        onFunc :{\r\n            onViewResize:function(){\r\n              setAdaptiveWidth(this);\r\n            }\r\n        }\r\n\r\n    \r\n    }).maxView(\"primary\");\r\n\r\n    return  btnFilter;\r\n}\r\n\r\n\r\nfunction createHead(text){\r\n    return {   \r\n        template   : text,\r\n        height     : 30, \r\n        borderless : true,\r\n        css        : \"webix_template-datepicker\"\r\n    };\r\n}\r\n\r\n\r\nfunction createInputs( input ){\r\n\r\n    const inputs = {   \r\n        width   : 200,\r\n        id      : \"datepicker-container\"+\"sdt\",\r\n        rows    : [ \r\n\r\n            createHead ( \"Начиная с:\"  ),\r\n            createDate ( \"first\", input ),\r\n\r\n            { height:10 },\r\n\r\n            createTime (\"first\"),\r\n\r\n\r\n            { height:20 },\r\n\r\n\r\n            createHead ( \"Заканчивая:\" ),\r\n            createDate ( \"last\", input ),\r\n\r\n            { height:10 },\r\n\r\n            createTime (\"last\"),\r\n\r\n        ]\r\n    };\r\n\r\n    try{\r\n        inputsArray.push( inputs );\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"createInputs\");\r\n    }\r\n}\r\n\r\nfunction createFilter (inputs, el, ids){\r\n    idsParam = ids;\r\n    inputsArray.length = 0;\r\n    const values = Object.values(inputs);\r\n\r\n    values.forEach(function(input, i){\r\n\r\n        if (input.type == \"datetime\"&& input.order == 3){ \r\n            createInputs(input);\r\n\r\n        } else if (input.type == \"submit\"){\r\n\r\n            const actionType    = input.action;\r\n            findAction          = el.actions[actionType];\r\n            \r\n            inputsArray.push(\r\n                {height : 15}\r\n            );\r\n            inputsArray.push(\r\n                createBtn (input, i)\r\n            );\r\n\r\n        }\r\n\r\n\r\n    });\r\n\r\n    return inputsArray;\r\n  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/filter/elements.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/filter/filterLayout.js":
/*!************************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/filter/filterLayout.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createFilterLayout\": () => (/* binding */ createFilterLayout)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\nconst logNameFile = \"dashboard => createSpace => dynamicElements => filterLayout\";\r\n\r\n\r\n\r\nfunction backBtnClick (){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem ($$( \"dashboardTool\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem ($$( \"dashboardInfoContainer\"));\r\n}\r\n\r\n\r\nfunction createMainView(inputsArray){\r\n\r\n    const headline = {  \r\n        template    : \"Фильтр\",\r\n        height      : 30, \r\n        css         : \"webix_dash-filter-headline\",\r\n        borderless  : true\r\n    };\r\n\r\n    const filterBackBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n    \r\n        config   : {\r\n            id       : \"dash-backDashBtn\",\r\n            hotkey   : \"Esc\",\r\n            hidden   : true,  \r\n            icon     : \"icon-arrow-right\", \r\n            click   : function(){\r\n                backBtnClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Вернуться к дашбордам\"\r\n    \r\n       \r\n    }).minView();\r\n    \r\n \r\n    const mainView = {\r\n        id      : \"dashboard-tool-main\",\r\n        padding : 20,\r\n        hidden  : true,\r\n        minWidth: 250,\r\n        rows    : [\r\n            {   id  : \"dashboardToolHeadContainer\",\r\n                cols: [\r\n                    headline,\r\n                    filterBackBtn,\r\n                ]\r\n            },\r\n            \r\n            { rows : inputsArray }\r\n        ], \r\n    };\r\n\r\n    try{\r\n      \r\n        $$(\"dashboardTool\").addView( mainView );\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"createMainView\");\r\n    }\r\n}\r\n\r\n\r\nfunction filterBtnClick (){\r\n    const dashTool      = $$(\"dashboard-tool-main\");\r\n    const container     = $$(\"dashboardContainer\" );\r\n    const tree          = $$(\"tree\");\r\n    const backBtn       = $$(\"dash-backDashBtn\");\r\n    const tools         = $$(\"dashboardTool\");\r\n    const infoContainer = $$(\"dashboardInfoContainer\");\r\n\r\n    function filterMinAdaptive(){\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem (tree);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem (infoContainer);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem (tools);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem (backBtn);\r\n\r\n        tools.config.width = window.innerWidth - 45;\r\n        tools.resize();\r\n    }\r\n\r\n    function filterMaxAdaptive(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.removeItem($$(\"dashContextLayout\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem  ($$(\"dashboardContext\" ));\r\n        if (dashTool.isVisible()){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem (tools);\r\n\r\n        } else {\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem (tools);\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem (dashTool);\r\n        }\r\n    }\r\n\r\n    filterMaxAdaptive();\r\n\r\n\r\n    if (container.$width < 850){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(tree);\r\n\r\n        if (container.$width  < 850 ){\r\n            filterMinAdaptive();\r\n        }\r\n\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(backBtn);      \r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction addViewToContainer(filterBtn){\r\n \r\n    const container     = $$(\"dash-template\").getParentView();\r\n    const containerView = $$(container.config.id);\r\n  \r\n    if (!$$(\"dashFilterBtn\")){\r\n      \r\n        containerView.addView(\r\n            {   id  : \"dashboard-tool-btn\",\r\n                cols: [\r\n                    filterBtn\r\n                ]\r\n            }\r\n        ,2);\r\n    }\r\n}\r\n\r\n\r\nfunction createFilterBtn(){\r\n\r\n    const filterBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n        config   : {\r\n            id       : \"dashFilterBtn\",\r\n            hotkey   : \"Ctrl+Shift+F\",\r\n            icon     : \"icon-filter\", \r\n            click   : function(){\r\n                filterBtnClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Показать/скрыть фильтры\"\r\n    \r\n       \r\n    }).transparentView();\r\n\r\n  \r\n    addViewToContainer(filterBtn);\r\n  \r\n}\r\n\r\n\r\n\r\nfunction createFilterLayout(inputsArray){\r\n\r\n    createMainView (inputsArray);\r\n    createFilterBtn();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/filter/filterLayout.js?");

/***/ }),

/***/ "./src/js/components/dashboard/createSpace/filter/submitBtnClick.js":
/*!**************************************************************************!*\
  !*** ./src/js/components/dashboard/createSpace/filter/submitBtnClick.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clickBtn\": () => (/* binding */ clickBtn)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _dynamicElements_layout_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dynamicElements/_layout.js */ \"./src/js/components/dashboard/createSpace/dynamicElements/_layout.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"dashboard => createSpace => submitBtn\";\r\n\r\nlet index;\r\nlet inputsArray;\r\nlet idsParam;\r\nlet findAction;\r\n\r\n\r\nlet sdtDate;\r\nlet edtDate;\r\nlet validateEmpty;\r\n\r\nconst dateArray     = [];\r\nconst compareDates  = [];\r\n\r\n\r\n\r\nfunction createTime(id, type){\r\n    const formatTime     = webix.Date.dateToStr(\"%H:%i:%s\");\r\n    const value          = $$(id).getValue();\r\n    const formattedValue = \" \" + formatTime(value);\r\n    try{\r\n        if (value){\r\n            \r\n            if (type == \"sdt\"){\r\n                sdtDate = sdtDate.concat(formattedValue);\r\n            } else if (type == \"edt\"){\r\n                edtDate = edtDate.concat(formattedValue);\r\n            }\r\n    \r\n        } else {\r\n            validateEmpty = false;\r\n        }\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"createTime\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction createDate(id, type){\r\n    try{\r\n        if ( $$(id).getValue() !== null ){\r\n\r\n            const value      = $$(id).getValue();\r\n            const formatDate = webix.Date.dateToStr(\"%d.%m.%y\");\r\n\r\n            if (type == \"sdt\"){\r\n                sdtDate = formatDate(value); \r\n            } else if ( type ==  \"edt\"){\r\n                edtDate = formatDate(value);\r\n            }\r\n        \r\n        } else {\r\n            validateEmpty = false;\r\n        }\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"createDate\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction createFilterElems(id, type){\r\n    if (id.includes(type)){\r\n\r\n        if (id.includes(\"time\")){\r\n            createTime(id, type);\r\n\r\n        } else {\r\n            createDate(id, type);\r\n\r\n        }\r\n    }\r\n}\r\n\r\nfunction enumerationElements(el){\r\n   \r\n    const childs = $$(el.id).getChildViews();\r\n\r\n    childs.forEach(function(elem){\r\n        const id = elem.config.id;\r\n        createFilterElems(id, \"sdt\");\r\n        createFilterElems(id, \"edt\");\r\n    });\r\n\r\n}\r\n\r\n\r\nfunction setInputs(){\r\n    try{\r\n        inputsArray.forEach(function(el){\r\n            if ( el.id.includes(\"container\") ){\r\n                enumerationElements(el);\r\n            }\r\n        });\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setInputs\"\r\n        );\r\n    }\r\n}\r\nfunction createQuery(type, val){\r\n    dateArray.push( type + \"=\" + val );\r\n    compareDates.push( val ); \r\n}\r\n\r\n\r\n\r\nfunction getDataInputs(){\r\n    setInputs   ();\r\n    createQuery(\"sdt\", sdtDate);\r\n    createQuery(\"edt\", edtDate);\r\n}\r\n\r\n\r\nfunction setStateBtn(index){\r\n    try{\r\n        const btn = $$(\"dashBtn\" + index);\r\n        btn.disable();\r\n \r\n        setTimeout (function () {\r\n            const node = btn.getNode();\r\n            if (node){\r\n                btn.enable();\r\n            }\r\n          \r\n        }, 1000);\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setStateBtn\"\r\n        );\r\n    }\r\n}\r\n\r\nconst cssInvalid = \"dash-filter-invalid\";\r\n\r\nfunction markInvalid(input){\r\n    const node = input.getInputNode();\r\n    webix.html.addCss(node, cssInvalid);\r\n}\r\n\r\nfunction resetInvalidMark(childs){\r\n    childs.forEach(function(input){\r\n        const view = input.config.view;\r\n   \r\n        if (view == \"datepicker\" ){\r\n            const node = input.getInputNode();\r\n            const css = node.classList.contains(cssInvalid);\r\n\r\n            if (css){\r\n                webix.html.removeCss(node, cssInvalid);\r\n            }\r\n\r\n        }\r\n\r\n    });\r\n}\r\n\r\nfunction invalidTop(input, type){\r\n    const id = input.config.id;\r\n    if ( id.includes(\"_sdt\") && type == \"top\"){\r\n        markInvalid(input);\r\n    }\r\n}\r\n\r\nfunction invalidEmpty(input, type){\r\n    if (type == \"empty\"){\r\n        const value = input.getValue();\r\n        if (!value){\r\n            markInvalid(input);\r\n        }\r\n    } \r\n}\r\n\r\n\r\n\r\nfunction setInvalidView(type, childs){\r\n\r\n    childs.forEach(function(input){\r\n        const view = input.config.view;\r\n       \r\n        if (view == \"datepicker\"){\r\n            invalidTop  (input, type);\r\n            invalidEmpty(input, type);\r\n        }\r\n\r\n    });\r\n   \r\n}\r\n\r\nfunction loadView(){\r\n    const charts = $$(\"dashboard-charts\");\r\n    const parent = charts.getParentView();\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.removeItem(charts);\r\n    parent.addView({\r\n        id       : \"dash-load-charts\",\r\n        template : \"Загрузка...\"\r\n    }); \r\n}\r\n\r\n\r\nfunction sentQuery (){\r\n    const childs = \r\n    $$(\"datepicker-containersdt\").getChildViews();\r\n\r\n    if (validateEmpty){\r\n\r\n        const formatData = webix.Date.dateToStr (\"%Y/%m/%d %H:%i:%s\");\r\n        const start      = formatData (compareDates[0]);\r\n        const end        = formatData (compareDates[1]);\r\n\r\n        const compareValue = webix.filters.date.greater(start, end);\r\n        \r\n        if ( !(compareValue) || compareDates[0] == compareDates[1] ){\r\n\r\n            const getUrl = findAction.url + \"?\" + dateArray.join(\"&\");\r\n      \r\n            loadView();\r\n\r\n            (0,_dynamicElements_layout_js__WEBPACK_IMPORTED_MODULE_2__.createDynamicElems)(\r\n                getUrl, \r\n                inputsArray,\r\n                idsParam, \r\n                true\r\n            );\r\n\r\n            setStateBtn(index);\r\n            resetInvalidMark(childs);\r\n        } else {\r\n            setInvalidView(\"top\", childs);\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"error\", \r\n                \"Начало периода больше, чем конец\"\r\n            );\r\n        }\r\n    } else {\r\n      \r\n        setInvalidView(\"empty\", childs);\r\n     \r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n            \"error\", \r\n            \"Не все поля заполнены\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction clickBtn(i, inputs, ids, action){\r\n\r\n    index       = i;\r\n    inputsArray = inputs;\r\n    idsParam    = ids;\r\n    findAction  = action;\r\n\r\n    dateArray   .length = 0;\r\n    compareDates.length = 0;\r\n\r\n\r\n    sdtDate         = \"\";\r\n    edtDate         = \"\";\r\n    validateEmpty   = true;\r\n\r\n    getDataInputs();\r\n    sentQuery ();\r\n}\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/dashboard/createSpace/filter/submitBtnClick.js?");

/***/ }),

/***/ "./src/js/components/favorites.js":
/*!****************************************!*\
  !*** ./src/js/components/favorites.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"favsPopup\": () => (/* binding */ favsPopup)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./logBlock.js */ \"./src/js/components/logBlock.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"favorites\";\r\n\r\nfunction setAdaptiveSize(popup){\r\n    if (window.innerWidth < 1200 ){\r\n        const size  = window.innerWidth * 0.89;\r\n        try{\r\n            popup.config.width = size;\r\n            popup.resize();\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"setAdaptiveSize\"\r\n            );\r\n        }\r\n    }\r\n \r\n}\r\n\r\nfunction findFavsInUserData(data, id){\r\n    const collection = [];\r\n    try{\r\n\r\n        data.forEach(function(el){\r\n            if (el.name.includes(\"fav-link\") && id == el.owner){\r\n                const prefs  = JSON.parse(el.prefs);\r\n                prefs.dataId = el.id;\r\n                collection.push(prefs);\r\n                \r\n            }\r\n        });\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"findFavsisUserData\"\r\n        );\r\n    }\r\n    \r\n    return collection;\r\n}\r\n\r\n\r\nfunction createOptions(data, user){\r\n    const favCollection = findFavsInUserData(data, user.id);\r\n    const radio         = $$(\"favCollectionLinks\");\r\n    try{\r\n        if (favCollection.length){\r\n            favCollection.forEach(function(el){\r\n         \r\n                radio.addOption(\r\n                    {   id      : el.id,\r\n                        value   : el.name,\r\n                        favLink : el.link,\r\n                        dataId  : el.dataId\r\n                    }\r\n                );\r\n                radio.removeOption(\r\n                    \"radioNoneContent\"\r\n                );\r\n            });\r\n        }\r\n\r\n        $$(\"popupFavsLink\").show();\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createOptions\"\r\n        );\r\n    }\r\n \r\n}\r\n\r\nasync function favsPopupCollectionClick (){\r\n\r\n    let user =  (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getUserDataStorage)();\r\n\r\n    if (!user){\r\n        await (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.pushUserDataStorage)();\r\n        user =  (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getUserDataStorage)();\r\n    }\r\n\r\n    const path    = \"/init/default/api/userprefs/\";\r\n    const getData = webix.ajax().get(path);\r\n    \r\n    getData.then(function(data){\r\n        data = data.json().content;\r\n        if (user){\r\n            createOptions(data, user);\r\n        }\r\n\r\n    });\r\n\r\n    getData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            \"favsLink\",\r\n            \"favsPopupCollectionClick\"\r\n        );\r\n    });\r\n\r\n    \r\n}\r\n\r\nfunction favsPopupSubmitClick(){\r\n    try{\r\n        const radio  = $$(\"favCollectionLinks\");\r\n        const value  = radio.getValue();\r\n        const option = radio.getOption(value);\r\n        window.location.replace(option.favLink);\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"favsPopupSubmitClick\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction returnEmptyOption(){\r\n    return {   \r\n        id       : \"radioNoneContent\", \r\n        disabled : true, \r\n        value    : \"Здесь будут сохранены Ваши ссылки\"\r\n    };\r\n}\r\n\r\nconst radioLinks = {\r\n    view     : \"radio\", \r\n    id       : \"favCollectionLinks\",\r\n    vertical : true,\r\n    options  : [\r\n        returnEmptyOption()\r\n    ],\r\n    on       : {\r\n        onChange:function(newValue, oldValue){\r\n            if (newValue !== oldValue){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem($$(\"favLinkSubmit\"));\r\n            }\r\n\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem($$(\"removeFavsBtn\"));\r\n        }\r\n    }\r\n};\r\n\r\nconst container = {\r\n    view       : \"scrollview\",\r\n    scroll     : \"y\",\r\n    maxHeight  : 300,\r\n    borderless : true,\r\n    body       : {\r\n        rows: [\r\n            radioLinks\r\n        ]\r\n    }\r\n};\r\n\r\nconst btnSaveLink = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n\r\n    config   : {\r\n        id       : \"favLinkSubmit\",\r\n        hotkey   : \"Ctrl+Shift+Space\",\r\n        value    : \"Открыть ссылку\", \r\n        disabled : true,\r\n        click    : function(){\r\n            favsPopupSubmitClick();\r\n        },\r\n    },\r\n    titleAttribute : \"Открыть ссылку\"\r\n\r\n   \r\n}).maxView(\"primary\");\r\n\r\nfunction deleteUserprefsData(options, option){\r\n    const id = option.dataId;\r\n\r\n    const url = \"/init/default/api/userprefs/\" + id;\r\n    const deleteData = webix.ajax().del(url, {id : option.id});\r\n    deleteData.then(function(data){\r\n\r\n        data = data.json();\r\n\r\n        if (data.err_type == \"i\"){\r\n            const length = options.data.options.length;\r\n            if (length == 1){\r\n                const emptyOpt = returnEmptyOption();\r\n                options.addOption(emptyOpt);\r\n            }\r\n            options.removeOption(option.id);\r\n\r\n        } else {\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                data.err, \r\n                logNameFile, \r\n                \"deleteUserprefsData\" \r\n            );\r\n        }\r\n   \r\n    });\r\n\r\n    deleteData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"deleteUserprefsData\"\r\n        );\r\n    });\r\n}\r\nfunction removeBtnClick(){\r\n    const options = $$(\"favCollectionLinks\");\r\n    const value   = options.getValue();\r\n    const option  = options.getOption(value);\r\n    \r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_4__.modalBox)(\"Закладка будет удалена из избранного\", \r\n        \"Вы уверены?\", \r\n        [\"Отмена\", \"Удалить\"]\r\n    )\r\n    .then(function (result){\r\n\r\n        if (result == 1){\r\n\r\n            deleteUserprefsData(options, option);\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_5__.setLogValue) (\r\n                \"success\",\r\n                `Закладка «${option.value}» удалена из избранного`\r\n            );\r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction returnRemoveBtn(){\r\n    const removeBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n\r\n        config   : {\r\n            id       : \"removeFavsBtn\",\r\n            hotkey   : \"Alt+Shift+R\",\r\n            icon     : \"icon-trash\",\r\n            disabled : true,\r\n            click    : function(){\r\n                removeBtnClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Удалить ссылку из избранного\"\r\n       \r\n    }).minView(\"delete\");\r\n\r\n    return removeBtn;\r\n}\r\n\r\nfunction favsPopup(){\r\n\r\n    const popupFavsLink = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_2__.Popup({\r\n        headline : \"Избранное\",\r\n        config   : {\r\n            id    : \"popupFavsLink\",\r\n            width     : 400,\r\n            minHeight : 300,\r\n    \r\n        },\r\n\r\n        elements : {\r\n            padding:{\r\n                left  : 5,\r\n                right : 5\r\n            },\r\n            rows : [\r\n                container,\r\n                {height:15},\r\n                {\r\n                    cols:[\r\n                        btnSaveLink,\r\n                        returnRemoveBtn()\r\n                    ]\r\n                }\r\n               \r\n            ]\r\n          \r\n        }\r\n    });\r\n\r\n    popupFavsLink.createView ();\r\n    \r\n    favsPopupCollectionClick ();\r\n    setAdaptiveSize($$(\"popupFavsLink\"));\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/favorites.js?");

/***/ }),

/***/ "./src/js/components/header/_headerMediator.js":
/*!*****************************************************!*\
  !*** ./src/js/components/header/_headerMediator.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Header\": () => (/* binding */ Header)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _layout_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_layout.js */ \"./src/js/components/header/_layout.js\");\n/* harmony import */ var _setDefaultState_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./setDefaultState.js */ \"./src/js/components/header/setDefaultState.js\");\n/* harmony import */ var _loadContextMenu_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./loadContextMenu.js */ \"./src/js/components/header/loadContextMenu.js\");\n\r\n\r\n\r\n\r\n\r\nclass Header {\r\n    constructor (){\r\n        this.name = \"tree\";\r\n    }\r\n\r\n    create(){\r\n        return _layout_js__WEBPACK_IMPORTED_MODULE_1__.header;\r\n    }\r\n\r\n    showView(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(this.name));   \r\n    }\r\n\r\n    load(data){\r\n        (0,_loadContextMenu_js__WEBPACK_IMPORTED_MODULE_3__.generateHeaderMenu)(data);\r\n    }\r\n\r\n    defaultState(){\r\n        (0,_setDefaultState_js__WEBPACK_IMPORTED_MODULE_2__.headerDefState) ();\r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/_headerMediator.js?");

/***/ }),

/***/ "./src/js/components/header/_layout.js":
/*!*********************************************!*\
  !*** ./src/js/components/header/_layout.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"header\": () => (/* binding */ header)\n/* harmony export */ });\n/* harmony import */ var _collapseBtn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collapseBtn.js */ \"./src/js/components/header/collapseBtn.js\");\n/* harmony import */ var _logBtn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logBtn.js */ \"./src/js/components/header/logBtn.js\");\n/* harmony import */ var _userContextBtn_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./userContextBtn.js */ \"./src/js/components/header/userContextBtn.js\");\n\r\n\r\n\r\n\r\nconst logo = {\r\n    view    : \"label\",\r\n    label   : \"<img src='/init/static/images/expalogo.png' \"+\r\n        \" style='height:30px; margin: 10px;'>\", \r\n    height  : 25,\r\n};\r\n\r\nconst search = {\r\n    view        : \"search\", \r\n    id          : \"headerSearch\",\r\n    placeholder : \"Поиск (Alt+Shift+F)\", \r\n    css         : \"searchTable\",\r\n    height      : 42, \r\n    hotkey      : \"alt+shift+f\",\r\n    maxWidth    : 250, \r\n    minWidth    : 40, \r\n};\r\n\r\nconst header = {\r\n    view    : \"toolbar\", \r\n    id      : \"header\",\r\n    padding : 10,\r\n    css     : \"webix_header-style\",\r\n    elements: [\r\n        {cols: [\r\n            _collapseBtn_js__WEBPACK_IMPORTED_MODULE_0__.collapseBtn,\r\n            logo\r\n        ]},\r\n        \r\n        {},\r\n        search,\r\n        _logBtn_js__WEBPACK_IMPORTED_MODULE_1__.logBtn,\r\n        _userContextBtn_js__WEBPACK_IMPORTED_MODULE_2__.userContextBtn,\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/_layout.js?");

/***/ }),

/***/ "./src/js/components/header/collapseBtn.js":
/*!*************************************************!*\
  !*** ./src/js/components/header/collapseBtn.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"collapseBtn\": () => (/* binding */ collapseBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_checkFonts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/checkFonts.js */ \"./src/js/blocks/checkFonts.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\nfunction setSearchInputState(visible = false){\r\n    const headerChilds = $$(\"header\").getChildViews();\r\n\r\n    headerChilds.forEach(function(el){\r\n        if (el.config.id.includes(\"search\" )      || \r\n            el.config.id.includes(\"log-btn\")      || \r\n            el.config.id.includes(\"context-menu\") ){\r\n            \r\n            if(visible){\r\n                el.show();\r\n            } else {\r\n                el.hide();\r\n            }\r\n          \r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction collapseClick (){\r\n    const tree      = $$(\"tree\");\r\n    const resizer   = $$(\"sideMenuResizer\");\r\n\r\n    function showTree(){\r\n        try {\r\n            tree.show();\r\n            if(window.innerWidth >= 800){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(resizer);\r\n            } \r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"header\",\"showTree\");\r\n\r\n        }\r\n    }\r\n\r\n    try {\r\n\r\n        if (window.innerWidth > 850 ){\r\n            if (tree.isVisible()){\r\n                tree.hide();\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(resizer);\r\n\r\n            } else {\r\n                showTree(); \r\n \r\n            }\r\n        } else {\r\n            if (tree.isVisible()){\r\n                tree.hide();\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(resizer);\r\n\r\n                setSearchInputState(true);\r\n\r\n            } else {\r\n                showTree();\r\n\r\n                tree.config.width = window.innerWidth;\r\n                tree.resize();\r\n        \r\n                setSearchInputState();\r\n            }\r\n        }\r\n        this.refresh();\r\n       \r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,\"header\",\"collapseClick\");\r\n\r\n    }\r\n}\r\n\r\n\r\nconst collapseBtn = {   \r\n    view:\"button\",\r\n    type:\"icon\",\r\n    id:\"collapseBtn\",\r\n    icon:\"icon-bars\",\r\n    css:\"webix_collapse\",\r\n    title:\"текст\",\r\n    height:42, \r\n    width:40,\r\n    click:collapseClick,\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\"title\",\"Видимость бокового меню\");\r\n            (0,_blocks_checkFonts_js__WEBPACK_IMPORTED_MODULE_0__.checkFonts)();\r\n        }\r\n    }    \r\n};\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/collapseBtn.js?");

/***/ }),

/***/ "./src/js/components/header/loadContextMenu.js":
/*!*****************************************************!*\
  !*** ./src/js/components/header/loadContextMenu.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"generateHeaderMenu\": () => (/* binding */ generateHeaderMenu)\n/* harmony export */ });\nfunction createItems (){\r\n\r\n    const items = [];\r\n\r\n    function pustItem(id, value, icon){\r\n        const item = {\r\n            id    : id, \r\n            value : value, \r\n            icon  : icon\r\n        };\r\n\r\n        if (id == \"logout\"){\r\n            item.css = \"webix_logout\";\r\n        }\r\n      \r\n        items.push(item);\r\n    \r\n        return items;\r\n    }\r\n    \r\n    pustItem (\"favs\",       \"Избранное\",     \"icon-star\"     );\r\n    pustItem (\"settings\",  \"Настройки\",      \"icon-cog\"      );\r\n    pustItem (\"cp\",         \"Смена пароля\",  \"icon-lock\"     );\r\n    pustItem (\"logout\",     \"Выйти\",         \"icon-sign-out\" );\r\n\r\n      \r\n   \r\n    return items;\r\n}\r\n\r\nfunction generateHeaderMenu (menu){\r\n\r\n    const btnContext = $$(\"button-context-menu\");\r\n    let menuHeader;\r\n\r\n    menu.forEach(function(el,i){\r\n        if (el.mtype !== 3){\r\n            if (el.mtype !== 3 && el.childs.length !==0){\r\n                menuHeader = createItems (el, menu, menuHeader);\r\n            }\r\n        }\r\n    \r\n    });\r\n\r\n    if (btnContext.config.popup.data !== undefined){\r\n        btnContext.config.popup.data = menuHeader;\r\n        btnContext.enable();\r\n    }\r\n\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/loadContextMenu.js?");

/***/ }),

/***/ "./src/js/components/header/logBtn.js":
/*!********************************************!*\
  !*** ./src/js/components/header/logBtn.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logBtn\": () => (/* binding */ logBtn)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\nfunction logBtnClick(id){\r\n    const btn = $$(id);\r\n\r\n    if (btn.getValue() == 1){\r\n        btn.setValue(2);\r\n\r\n    } else {\r\n        btn.setValue(1);\r\n    }\r\n}\r\n\r\n\r\nfunction onChangeLogBtn(newValue){\r\n    const list      = $$(\"logBlock-list\");\r\n    const logLayout = $$(\"logLayout\");\r\n    const logBtn    = $$(\"webix_log-btn\");\r\n\r\n    const lastItemList = list.getLastId();\r\n\r\n    function setState (height,icon){\r\n        logBtn.config.badge     = \"\";\r\n\r\n        logLayout.config.height = height;\r\n        logLayout.resize();\r\n\r\n        logBtn.config.icon      = icon;\r\n        logBtn.refresh();\r\n    }\r\n\r\n    if (newValue == 2){\r\n        setState (90, \"icon-eye-slash\");\r\n        list.showItem(lastItemList);\r\n\r\n    } else {\r\n        setState (5, \"icon-eye\");\r\n    }\r\n}\r\n\r\n\r\nconst logBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n    \r\n    config   : {\r\n        id       : \"webix_log-btn\",\r\n        hotkey   : \"Ctrl+M\",\r\n        icon     : \"icon-eye\", \r\n        badge    : 0,\r\n        click   : function(id){\r\n            logBtnClick(id)\r\n        },\r\n    },\r\n    onFunc   :{\r\n        onChange:function(newValue){\r\n            onChangeLogBtn(newValue);\r\n        }\r\n    },\r\n    titleAttribute : \"Показать/скрыть системные сообщения\"\r\n\r\n   \r\n}).minView();\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/logBtn.js?");

/***/ }),

/***/ "./src/js/components/header/setDefaultState.js":
/*!*****************************************************!*\
  !*** ./src/js/components/header/setDefaultState.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"headerDefState\": () => (/* binding */ headerDefState)\n/* harmony export */ });\nfunction headerDefState(){\r\n    const headerChilds = $$(\"header\").getChildViews();\r\n\r\n    headerChilds.forEach(function(el){\r\n        if (el.config.id.includes(\"search\")){\r\n            el.show();\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/setDefaultState.js?");

/***/ }),

/***/ "./src/js/components/header/userContextBtn.js":
/*!****************************************************!*\
  !*** ./src/js/components/header/userContextBtn.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"userContextBtn\": () => (/* binding */ userContextBtn)\n/* harmony export */ });\n/* harmony import */ var _favorites_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../favorites.js */ \"./src/js/components/favorites.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"header => userContextBtn\";\r\n\r\nfunction navigateTo (path){\r\n    return Backbone.history.navigate(path, {trigger : true});\r\n}\r\n\r\nfunction clearTree(){\r\n    const tree = $$(\"tree\");\r\n    if (tree){\r\n        tree.unselectAll();\r\n        tree.closeAll();\r\n\r\n    }\r\n}\r\n\r\nfunction clickMenu(id, path = id){\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.getGlobalModalBox(id).then(function(result){\r\n        if (result){\r\n            clearTree();\r\n            navigateTo (path);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction itemClickContext(id){\r\n\r\n    if (id==\"logout\"){\r\n        clickMenu(\"logout\");\r\n\r\n    } else if (id == \"cp\"){\r\n        clickMenu(\"cp\", \"/cp\");\r\n\r\n    } else if (id == \"settings\"){\r\n        clickMenu(\"settings\", \"/settings\");\r\n\r\n    } else if (id == \"favs\"){\r\n        const popup = $$(\"popupFavsLink\");\r\n        if (!popup){\r\n            (0,_favorites_js__WEBPACK_IMPORTED_MODULE_0__.favsPopup)();\r\n        } else {\r\n            popup.show();\r\n        }\r\n    }\r\n \r\n}\r\n\r\nasync function onItemClickBtn(){\r\n    let ownerId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getUserDataStorage)();\r\n\r\n    if (!ownerId){\r\n        await (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.pushUserDataStorage)();\r\n        ownerId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getUserDataStorage)();\r\n    }\r\n\r\n    const getData = webix.ajax().get(\"/init/default/api/userprefs/\");\r\n\r\n    getData.then(function(data){\r\n        data = data.json().content;\r\n\r\n        const localUrl    = \"/index.html/content\";\r\n        const spawUrl     = \"/init/default/spaw/content\";\r\n        const path        = window.location.pathname;\r\n        \r\n        let settingExists = false;\r\n\r\n        function checkError(ajaxVar){\r\n            const msg = \"onItemClickBtn \" + ajaxVar;\r\n\r\n            ajaxVar.then(function(data){\r\n                data = data.json();\r\n          \r\n                if (data.err_type !== \"i\"){\r\n                   \r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                        data.error, \r\n                        logNameFile,\r\n                        msg\r\n                    );\r\n                }\r\n            }); \r\n\r\n            ajaxVar.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, logNameFile, msg);\r\n            });\r\n        }\r\n\r\n        function putUserprefs(id, sentObj){\r\n            const path = \"/init/default/api/userprefs/\" + id;\r\n            const putData = webix.ajax().put(path, sentObj);\r\n            checkError(putData);\r\n        }\r\n\r\n        function postUserprefsData (sentObj){\r\n            const path = \"/init/default/api/userprefs/\";\r\n            const postUserprefs = webix.ajax().post(path, sentObj);\r\n            checkError(postUserprefs);\r\n        }\r\n\r\n        if (path !== localUrl && path !== spawUrl){\r\n\r\n            const location = {\r\n                href : window.location.href\r\n            };\r\n\r\n            const sentObj = {\r\n                name  : \"userLocationHref\",\r\n                owner : ownerId.id,\r\n                prefs : location\r\n            };\r\n\r\n\r\n            data.forEach(function(el,i){\r\n                if (el.name == \"userLocationHref\"){\r\n                    putUserprefs(el.id, sentObj);\r\n                    settingExists = true;\r\n  \r\n                } \r\n            });\r\n\r\n            if (!settingExists){\r\n                postUserprefsData (sentObj);\r\n            }\r\n         \r\n        }\r\n    });\r\n    getData.fail(function(err){\r\n    \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"onItemClickBtn getData\"\r\n        );\r\n    });\r\n\r\n \r\n}\r\n\r\n\r\nconst userContextBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n    \r\n    config   : {\r\n        id       : \"button-context-menu\",\r\n        hotkey   : \"Ctrl+L\",\r\n        icon     : \"icon-user\", \r\n        disabled : true,\r\n        popup   : {\r\n\r\n            view    : 'contextmenu',\r\n            id      : \"contextmenu\",\r\n            css     : \"webix_contextmenu\",\r\n            data    : [],\r\n            on      : {\r\n                onItemClick: function(id){\r\n                    itemClickContext(id);\r\n                     \r\n \r\n                }\r\n            }\r\n        },\r\n    },\r\n    onFunc   :{\r\n        onItemClick: function(){\r\n            onItemClickBtn();\r\n        }\r\n    },\r\n    titleAttribute : \"Пользователь\"\r\n\r\n   \r\n}).minView();\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/header/userContextBtn.js?");

/***/ }),

/***/ "./src/js/components/logBlock.js":
/*!***************************************!*\
  !*** ./src/js/components/logBlock.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logBlock\": () => (/* binding */ logBlock),\n/* harmony export */   \"logLayout\": () => (/* binding */ logLayout),\n/* harmony export */   \"setLogValue\": () => (/* binding */ setLogValue)\n/* harmony export */ });\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\n\r\nlet typeNotify;\r\nlet specificSrc;\r\nlet notifyText;\r\n\r\n\r\nconst eyeIcon      = \"icon-eye\";\r\nconst eyeIconSlash = \"icon-eye-slash\";\r\n\r\n\r\nfunction createCurrDate(){\r\n    const date    = new Date();\r\n    const day     = date.getDate();\r\n    const month   = String(date.getMonth() + 1).padStart(2, '0');\r\n    const year    = date.getFullYear();\r\n    const hours   = date.getHours();\r\n    const minutes = String(date.getMinutes()).padStart(2, '0');\r\n    const seconds = String(date.getSeconds()).padStart(2, '0');\r\n\r\n    return `${day}.${month}.${year} ${hours}:${minutes}:${seconds}`;\r\n}\r\n\r\n\r\nfunction openLog(){\r\n    try{\r\n        const layout =  $$(\"logLayout\");\r\n        const btn    = $$(\"webix_log-btn\");\r\n        \r\n        if (btn.config.icon == eyeIcon){\r\n            layout.config.height = 90;\r\n            layout.resize();\r\n            btn   .setValue(2);\r\n\r\n            btn.config.icon = eyeIconSlash;\r\n            btn.refresh();\r\n\r\n            (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_0__.setStorageData)(\"LogVisible\", JSON.stringify(\"show\"));\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, \"logBlock\", \"openLog\");\r\n    }\r\n}\r\n\r\nfunction addErrorStyle(id){\r\n    const list = $$(\"logBlock-list\");\r\n\r\n    if (typeNotify == \"error\" && list){\r\n        try{\r\n            const item = list.getItemNode(id);\r\n            if (item){\r\n                item.style.setProperty('color', 'red', 'important');\r\n            }\r\n \r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, \"logBlock\" ,\"addErrorStyle\");\r\n        }\r\n\r\n        openLog();\r\n      \r\n    }\r\n}\r\n\r\n\r\nfunction addLogMsg (src){\r\n    const logList     = $$(\"logBlock-list\");\r\n    const currentDate = createCurrDate();\r\n    if (!src){\r\n        src = \"expa\";\r\n    }\r\n  \r\n    logList.add({\r\n        date  : currentDate,\r\n        value : notifyText,\r\n        src   : src\r\n    });\r\n\r\n    const lastId = logList.getLastId();\r\n\r\n    logList.showItem(lastId);\r\n}\r\n\r\nfunction returnName(srcTable){\r\n    const names = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.names;\r\n    let name;\r\n    try{\r\n        names.forEach(function(el,i){\r\n            if (el.id == srcTable){\r\n                name = el.name;\r\n            }\r\n        });\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, \"logBlock\", \"findTableName\");\r\n    }\r\n\r\n    return name;\r\n}\r\n\r\nasync function createLogMessage(srcTable) {\r\n    let name;\r\n\r\n    if (srcTable == \"version\"){\r\n        name = 'Expa v1.0.62';\r\n\r\n    } else if (srcTable == \"cp\"){\r\n        name = 'Смена пароля';\r\n    \r\n    } else {\r\n        await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.LoadServerData.content(\"fields\");\r\n        const keys = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.keys;\r\n        if (keys){\r\n            name = returnName(srcTable);\r\n        }\r\n    }\r\n\r\n    addLogMsg (name);\r\n}\r\n\r\nfunction initLogMsg(){\r\n    try{\r\n\r\n        let itemTreeId  = null;\r\n        const tree      = $$(\"tree\");\r\n\r\n        if (tree && tree.getSelectedItem()){\r\n            itemTreeId  = tree.getSelectedItem().id;\r\n        } else {\r\n            const href  = window.location.pathname;\r\n            const index = href.lastIndexOf( \"/\" );\r\n            itemTreeId  = href.slice( index + 1 );\r\n        }\r\n\r\n        if (specificSrc){\r\n            createLogMessage(specificSrc);\r\n\r\n        } else if (itemTreeId){\r\n            createLogMessage(itemTreeId);\r\n\r\n        } \r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, \"logBlock\", \"initLogMsg\");\r\n    }\r\n}\r\n\r\nlet notifyCounter = 0;\r\n\r\nfunction addNotify(btn){\r\n    try{\r\n   \r\n        if ( btn.config.badge == \"\" ){\r\n            notifyCounter = 0;\r\n        }\r\n        \r\n        notifyCounter++;\r\n\r\n        btn.config.badge = notifyCounter;\r\n        btn.setValue(1);\r\n        btn.refresh();\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err,\r\n            \"logBlock\",\r\n            \"onAfterAdd addNotify\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction clearNotify(btn){\r\n    try{\r\n        notifyCounter    = 0;\r\n        btn.config.badge = \"\";\r\n        btn.setValue(2);\r\n        btn.refresh();\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err,\r\n            \"logBlock\",\r\n            \"onAfterAdd clearNotify\"\r\n        );\r\n    }\r\n}\r\nconst logBlock = {\r\n    id      : \"logBlock-list\",\r\n    css     : \"webix_log-block\",\r\n    view    : \"list\",\r\n    template: \"#date# — #value#  (Источник: #src#)\",\r\n    data    : [],\r\n    on      : {\r\n        onAfterLoad:function(){\r\n            setLogValue (\r\n                \"success\", \r\n                \"Интерфейс загружен\", \r\n                \"version\"\r\n            );   \r\n        },\r\n        onAfterAdd:function(id){\r\n            const btn = $$(\"webix_log-btn\");\r\n\r\n            if ( btn.config.icon == eyeIcon ){\r\n                addNotify(btn);\r\n            } else if ( btn.config.icon == eyeIconSlash ){\r\n                clearNotify(btn);\r\n            }\r\n            \r\n            addErrorStyle(id);\r\n        }\r\n    }\r\n};\r\n\r\nconst headline = {   \r\n    template:\r\n    \"<div class='webix_log-headline'>Системные сообщения</div>\", \r\n    height:30\r\n};\r\n\r\n\r\nconst logLayout = {\r\n    id:\"logLayout\",\r\n    height:80,\r\n    rows:[\r\n        headline,\r\n        logBlock\r\n    ]\r\n};\r\n\r\nfunction setLogValue (type, text, src) {\r\n    typeNotify  = type;\r\n    specificSrc = src;\r\n    notifyText  = text;     \r\n\r\n    initLogMsg();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/logBlock.js?");

/***/ }),

/***/ "./src/js/components/login.js":
/*!************************************!*\
  !*** ./src/js/components/login.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"auth\": () => (/* binding */ auth)\n/* harmony export */ });\n/* harmony import */ var _routerConfig_router_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./routerConfig/_router.js */ \"./src/js/components/routerConfig/_router.js\");\n\r\n\r\n\r\nfunction createSentObj(){\r\n    const loginData = {};\r\n    const form      = $$(\"formAuth\");\r\n    try{\r\n     \r\n        const userData  = form.getValues();\r\n\r\n        loginData.un    = userData.username;\r\n        loginData.np    = userData.password;\r\n        \r\n    } catch (err){\r\n        console.log(err + \" login function createSentObj\");\r\n    }\r\n\r\n    return loginData;\r\n}\r\n\r\n\r\nfunction postLoginData(){\r\n    const loginData = createSentObj();\r\n    const form      = $$(\"formAuth\");\r\n\r\n    const path      = \"/init/default/login\";\r\n    const postData  = webix.ajax().post(path, loginData);\r\n\r\n    postData.then(function(data){\r\n\r\n        if (data.json().err_type == \"i\"){\r\n\r\n            data = data.json().content;\r\n\r\n            if (form){\r\n                form.clear();\r\n            }\r\n\r\n            Backbone.history.navigate(\"content\", { trigger:true});\r\n            window.location.reload();\r\n \r\n        } else {\r\n\r\n            if (form && form.isDirty()){\r\n                form.markInvalid(\"username\", \"\");\r\n                form.markInvalid(\"password\", \"Неверный логин или пароль\");\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    postData.fail(function(err){\r\n        console.log(err + \" login function postLoginData\");\r\n    });\r\n}\r\n\r\nconst invalidMsgText = \"Поле должно быть заполнено\";\r\n\r\nfunction returnLogin(){\r\n    const login =  {   \r\n        view            : \"text\", \r\n        label           : \"Логин\", \r\n        name            : \"username\",\r\n        invalidMessage  : invalidMsgText,\r\n        on              : {\r\n            onItemClick:function(){\r\n                $$('formAuth').clearValidation();\r\n            }\r\n        }  \r\n    };\r\n\r\n    return login;\r\n}\r\n\r\n\r\nfunction clickPass(event, self){\r\n    const className = event.target.className;\r\n    const input     = self.getInputNode();\r\n\r\n    function removeCss(className){\r\n        webix.html.removeCss(event.target, className);\r\n    }\r\n\r\n    function updateInput(type, className){\r\n        webix.html.addCss(event.target, className);\r\n        input.type = type;\r\n    }\r\n\r\n    if (className.includes(\"password-icon\")){\r\n   \r\n        removeCss(\"wxi-eye-slash\");\r\n        removeCss(\"wxi-eye\");\r\n\r\n        if(input.type == \"text\"){    \r\n            updateInput(\"password\", \"wxi-eye\"); \r\n        } else {\r\n            updateInput(\"text\", \"wxi-eye-slash\"); \r\n        }\r\n\r\n    }\r\n    \r\n    $$('formAuth').clearValidation();\r\n}\r\n\r\n\r\nfunction returnPass(){\r\n    const pass =  {   \r\n        view            : \"text\", \r\n        label           : \"Пароль\", \r\n        name            : \"password\",\r\n        invalidMessage  : invalidMsgText,\r\n        type            : \"password\",\r\n        icon            : \"password-icon wxi-eye\",   \r\n        on              : {\r\n            onItemClick:function(id, event){\r\n                clickPass(event, this);\r\n     \r\n            },\r\n        } \r\n    };\r\n\r\n    return pass;\r\n}\r\n\r\nfunction getLogin(){\r\n\r\n    const form = $$(\"formAuth\");\r\n\r\n    form.validate();\r\n    postLoginData();\r\n\r\n}\r\n\r\nfunction returnBtnSubmit(){\r\n    const btnSubmit = {   \r\n        view    : \"button\", \r\n        value   : \"Войти\", \r\n        css     : \"webix_primary\",\r\n        hotkey  : \"enter\", \r\n        align   : \"center\", \r\n        click   :getLogin\r\n    };\r\n\r\n    return btnSubmit;\r\n}\r\n\r\nfunction returnForm(){\r\n    const form = {\r\n        view        : \"form\",\r\n        id          : \"formAuth\",\r\n        width       : 250,\r\n        borderless  : true,\r\n        elements    : [\r\n            returnLogin     (),\r\n            returnPass      (),\r\n            returnBtnSubmit (), \r\n        ],\r\n\r\n        rules:{\r\n            \r\n            \"username\" : webix.rules.isNotEmpty,\r\n            \"password\" : webix.rules.isNotEmpty,\r\n    \r\n          },\r\n    \r\n    \r\n        elementsConfig:{\r\n            labelPosition:\"top\"\r\n        }\r\n    \r\n    };\r\n\r\n    return form;\r\n}\r\n\r\n\r\nfunction login () {\r\n    (0,_routerConfig_router_js__WEBPACK_IMPORTED_MODULE_0__.router)();\r\n    return returnForm();\r\n}\r\n\r\nconst auth = {\r\n    hidden  : true, \r\n    id      : \"userAuth\", \r\n    cols    : [\r\n        {\r\n            view    : \"align\", \r\n            align   : \"middle,center\",\r\n            body    : login()\r\n        },\r\n\r\n    ]\r\n}; \r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/login.js?");

/***/ }),

/***/ "./src/js/components/logout/autoLogout.js":
/*!************************************************!*\
  !*** ./src/js/components/logout/autoLogout.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"resetTimer\": () => (/* binding */ resetTimer)\n/* harmony export */ });\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common.js */ \"./src/js/components/logout/common.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nfunction resetTimer (){\r\n\r\n    let timeout;\r\n\r\n    window.onload       = resetTimer;\r\n    window.onmousemove  = resetTimer;\r\n    window.onmousedown  = resetTimer;      \r\n    window.ontouchstart = resetTimer;\r\n    window.onclick      = resetTimer;     \r\n    window.onkeypress   = resetTimer;   \r\n    window.addEventListener('scroll', resetTimer, true); \r\n\r\n    function resetTimer() {\r\n        try {\r\n            if (window.location.pathname !== \"/index.html\"        && \r\n                window.location.pathname !== \"/\"                  && \r\n                window.location.pathname !== \"/init/default/spaw\" ){\r\n                \r\n                clearTimeout(timeout);\r\n                timeout = setTimeout(_common_js__WEBPACK_IMPORTED_MODULE_0__.logout, 600000); // 600000\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, \"autoLogout\", \"resetTimer\");\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/logout/autoLogout.js?");

/***/ }),

/***/ "./src/js/components/logout/common.js":
/*!********************************************!*\
  !*** ./src/js/components/logout/common.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logout\": () => (/* binding */ logout),\n/* harmony export */   \"checkNotAuth\": () => (/* binding */ checkNotAuth),\n/* harmony export */   \"popupNotAuth\": () => (/* binding */ popupNotAuth)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction sentPrefs(id, sentObj){\r\n    const path    = \"/init/default/api/userprefs/\" + id;\r\n    const putData = webix.ajax().put(path, sentObj);\r\n\r\n    putData.then(function(data){\r\n        data = data.json();\r\n        if (data.err_type !== \"i\"){\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", data.err);\r\n        }\r\n    });\r\n\r\n    putData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\", \"putUserPrefs\");\r\n    });   \r\n}\r\n\r\nfunction getWhoamiData(){\r\n    const ownerId = webix.storage.local.get(\"user\").id;\r\n    let owner;\r\n    try{\r\n        if (ownerId){\r\n            owner = ownerId;\r\n        } else {\r\n            const whoamiData =  webix.ajax(\"/init/default/api/whoami\");\r\n            \r\n            whoamiData.then(function(data){\r\n                data = data.json().content;\r\n                owner = data.id;\r\n\r\n                const userData      = {};\r\n\r\n                userData.id         = data.id;\r\n                userData.name       = data.first_name;\r\n                userData.username   = data.username;\r\n            });\r\n\r\n            whoamiData.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\", \"getWhoamiData\");\r\n            });\r\n\r\n        }\r\n    }   catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, \"autoLogout\", \"getWhoamiData\")\r\n    }\r\n\r\n    return owner;\r\n}\r\n\r\n\r\nfunction putUserPrefs(data, sentObj){\r\n    let check = false;\r\n    try{\r\n        data.forEach(function(el,i){\r\n            if (el.name == \"userLocationHref\"){\r\n                check = true;\r\n                sentPrefs(el.id, sentObj);\r\n            } \r\n        });  \r\n    }   catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, \"autoLogout\", \"putUserPrefs\");\r\n    }\r\n    return check;\r\n}\r\n\r\nfunction logout() {\r\n\r\n    const userprefsData = webix.ajax().get(\"/init/default/api/userprefs/\");\r\n\r\n    userprefsData.then(function(data){\r\n        data = data.json();\r\n\r\n        if (data.err_type !== \"i\"){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(data.err, \"autoLogout\", \"putUserPrefs\");\r\n        }\r\n\r\n\r\n        const location    = {};\r\n        data              = data.content;\r\n\r\n        location.href     = window.location.href;\r\n\r\n        const sentObj = {\r\n            name  : \"userLocationHref\",\r\n            prefs : location\r\n        };\r\n      \r\n        function postUserPrefs(){\r\n            const path     = \"/init/default/api/userprefs/\";\r\n            const postData = webix.ajax().post(path, sentObj);\r\n\r\n            postData.then(function(data){\r\n                data = data.json();\r\n\r\n                if (data.err_type !== \"i\"){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(data.err, \"autoLogout\", \"putUserPrefs\");\r\n                }\r\n            });\r\n\r\n            postData.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\", \"postUserPrefs\");\r\n            });\r\n\r\n        }\r\n\r\n\r\n        if (window.location.pathname !== \"/index.html/content\"){\r\n            const settingExists = putUserPrefs(data, sentObj);\r\n\r\n            if (!settingExists){\r\n                sentObj.owner = getWhoamiData();\r\n                postUserPrefs();\r\n            }\r\n        }\r\n    });\r\n\r\n    userprefsData.then(function(data){\r\n        Backbone.history.navigate(\"logout\", { trigger:true});\r\n        Backbone.history.navigate(\"/\",      { trigger:true});\r\n    });\r\n\r\n    userprefsData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"autoLogout\", \"logout\");\r\n    });\r\n  \r\n}\r\n\r\nfunction toLogin(){\r\n    window.location.reload();\r\n}\r\n\r\nfunction popupNotAuth(){\r\n    const subtitle = {\r\n        template    :\"Войдите в систему, чтобы продолжить\",\r\n        height      :40,\r\n        borderless  :true,\r\n    };\r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n    \r\n        config   : {\r\n            id      : \"authBtnNavigate\",\r\n            hotkey  : \"Shift+Space\",\r\n            value   : \"Войти в систему\", \r\n            click   : toLogin\r\n        },\r\n        titleAttribute : \"Войти в систему\"\r\n    \r\n    }).maxView(\"primary\");\r\n\r\n    const popup = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_4__.Popup({\r\n        headline : \"Отказ в доступе\",\r\n        config   : {\r\n            id    : \"popupNotAuth\",\r\n            width     : 400,\r\n            minHeight : 300,\r\n    \r\n        },\r\n\r\n        elements : {\r\n            padding:{\r\n                left : 5,\r\n                right: 5\r\n            },\r\n            rows:[\r\n                subtitle,\r\n                btn\r\n            ]\r\n         \r\n          \r\n        }\r\n    });\r\n    if ( !($$(\"popupNotAuth\")) ){\r\n        popup.createView ();\r\n    }\r\n    popup.showPopup  ();\r\n}\r\n\r\nfunction checkNotAuth (err){\r\n    let notAuth = false;\r\n    if (err.status               === 401                  && \r\n        window.location.pathname !== \"/index.html\"        && \r\n        window.location.pathname !== \"/init/default/spaw/\"){\r\n        notAuth = true;\r\n        const prefs = {\r\n            href : window.location.href\r\n        };\r\n        (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_2__.setStorageData) (\"outsideHref\", JSON.stringify(prefs) );\r\n        Backbone.history.navigate(\"/\", { trigger:true});\r\n\r\n    }\r\n\r\n    return notAuth;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/logout/common.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/_router.js":
/*!***************************************************!*\
  !*** ./src/js/components/routerConfig/_router.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"router\": () => (/* binding */ router)\n/* harmony export */ });\n/* harmony import */ var _expalib_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../expalib.js */ \"./src/js/expalib.js\");\n/* harmony import */ var _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions/_RouterActions.js */ \"./src/js/components/routerConfig/actions/_RouterActions.js\");\n/* harmony import */ var _tree_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tree.js */ \"./src/js/components/routerConfig/tree.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index.js */ \"./src/js/components/routerConfig/index.js\");\n/* harmony import */ var _cp_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cp.js */ \"./src/js/components/routerConfig/cp.js\");\n/* harmony import */ var _settings_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings.js */ \"./src/js/components/routerConfig/settings.js\");\n/* harmony import */ var _experimental_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./experimental.js */ \"./src/js/components/routerConfig/experimental.js\");\n/* harmony import */ var _logout_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./logout.js */ \"./src/js/components/routerConfig/logout.js\");\n\r\n\r\n(0,_expalib_js__WEBPACK_IMPORTED_MODULE_0__.lib) ();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction router (){\r\n    let routes = new (Backbone.Router.extend({\r\n    \r\n        routes:{\r\n            \"\"                : \"index\" ,\r\n            \"content\"         : \"content\", \r\n            \"settings\"        : \"settings\",\r\n            \"cp\"              : \"cp\",\r\n            \"logout\"          : \"logout\",\r\n            \"tree/:id\"        : \"tree\",\r\n            \"experimental/:id\":\"experimental\"\r\n        },\r\n        \r\n        content:function(){\r\n            _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_1__.RouterActions.createContentSpace();\r\n        },\r\n    \r\n        index:function(){\r\n            (0,_index_js__WEBPACK_IMPORTED_MODULE_3__.indexRouter)();\r\n\r\n        }, \r\n\r\n        tree: function(id){\r\n            (0,_tree_js__WEBPACK_IMPORTED_MODULE_2__.treeRouter)(id);\r\n        },\r\n        \r\n        cp: function(){\r\n            (0,_cp_js__WEBPACK_IMPORTED_MODULE_4__.cpRouter)();\r\n    \r\n      \r\n        },\r\n    \r\n        settings: function(){\r\n            (0,_settings_js__WEBPACK_IMPORTED_MODULE_5__.settingsRouter)();\r\n            \r\n\r\n        },\r\n\r\n        experimental: function (){\r\n            (0,_experimental_js__WEBPACK_IMPORTED_MODULE_6__.experimentalRouter)();\r\n        },\r\n    \r\n        logout: function (){\r\n            (0,_logout_js__WEBPACK_IMPORTED_MODULE_7__.logoutRouter)();\r\n        }\r\n    \r\n    }));\r\n\r\n    return routes;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/_router.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/actions/_RouterActions.js":
/*!******************************************************************!*\
  !*** ./src/js/components/routerConfig/actions/_RouterActions.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RouterActions\": () => (/* binding */ RouterActions)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _hideAllElements_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hideAllElements.js */ \"./src/js/components/routerConfig/actions/hideAllElements.js\");\n/* harmony import */ var _createContent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./createContent.js */ \"./src/js/components/routerConfig/actions/createContent.js\");\n/* harmony import */ var _createElements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./createElements.js */ \"./src/js/components/routerConfig/actions/createElements.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass RouterActions {\r\n    static hideEmptyTemplates(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem($$(\"webix__null-content\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem  ($$(\"webix__none-content\"));     \r\n    }\r\n\r\n    static hideContent   (){\r\n        (0,_hideAllElements_js__WEBPACK_IMPORTED_MODULE_2__.hideAllElements)();\r\n    }\r\n\r\n    static createContentSpace (){\r\n        (0,_createContent_js__WEBPACK_IMPORTED_MODULE_3__.createContent)  ();\r\n    }\r\n\r\n    static async loadSpace(){\r\n        const isSidebarData = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.sidebar.dataLength();\r\n\r\n        if (!isSidebarData){\r\n            await (0,_createContent_js__WEBPACK_IMPORTED_MODULE_3__.createContent)();\r\n        }\r\n    }\r\n\r\n    static createContentElements(id){\r\n        (0,_createElements_js__WEBPACK_IMPORTED_MODULE_4__.createElements) (id);\r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/actions/_RouterActions.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/actions/createContent.js":
/*!*****************************************************************!*\
  !*** ./src/js/components/routerConfig/actions/createContent.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createContent\": () => (/* binding */ createContent)\n/* harmony export */ });\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _createElements_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./createElements.js */ \"./src/js/components/routerConfig/actions/createElements.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction getMenuTree() {\r\n\r\n    _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.LoadServerData.content(\"mmenu\")\r\n    \r\n    .then(function (result){\r\n        if (result){\r\n            const menu = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetMenu.content;\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.sidebar.load(menu);\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.header.load(menu);\r\n        }\r\n\r\n    });\r\n\r\n}\r\n\r\nfunction setUserData(){\r\n  \r\n    const data = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.whoami.content;\r\n\r\n    const userStorageData = {\r\n        id       : data.id,\r\n        name     : data.first_name,\r\n        username : data.username\r\n    };\r\n\r\n    (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_0__.setStorageData)(\r\n        \"user\", \r\n        JSON.stringify(userStorageData)\r\n    );\r\n}\r\n\r\n\r\nasync function createContent (){\r\n\r\n    if (!_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.whoami){\r\n        await (0,_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"whoami\"); \r\n    }\r\n\r\n    if (_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.whoami){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.hideItem($$(\"userAuth\"  ));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.showItem($$(\"mainLayout\"));\r\n    \r\n        setUserData();\r\n    \r\n        (0,_createElements_js__WEBPACK_IMPORTED_MODULE_3__.createElements)();\r\n    \r\n        getMenuTree();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/actions/createContent.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/actions/createElements.js":
/*!******************************************************************!*\
  !*** ./src/js/components/routerConfig/actions/createElements.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createElements\": () => (/* binding */ createElements)\n/* harmony export */ });\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\nlet specificElement;\r\n\r\nfunction createDefaultWorkspace(){\r\n    if(!specificElement){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.dashboards.create();\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.tables.create();\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.forms.create();\r\n    }\r\n}\r\n\r\nfunction createTreeTempl(){\r\n    if (specificElement == \"treeTempl\"){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.treeEdit.create();\r\n    }\r\n \r\n}\r\n\r\nfunction createCp(){\r\n    if (specificElement == \"cp\"){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.user_auth.create();\r\n    }\r\n\r\n}\r\n\r\nfunction createUserprefs(){\r\n    if (specificElement == \"settings\"){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.settings.create();\r\n    }\r\n\r\n}\r\n\r\nfunction createSpecificWorkspace (){\r\n    createTreeTempl();\r\n    createCp();\r\n    createUserprefs();\r\n}\r\n\r\n\r\nfunction createElements(specElem){\r\n    specificElement = specElem;\r\n    createDefaultWorkspace();\r\n    createSpecificWorkspace ();\r\n  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/actions/createElements.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/actions/hideAllElements.js":
/*!*******************************************************************!*\
  !*** ./src/js/components/routerConfig/actions/hideAllElements.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"hideAllElements\": () => (/* binding */ hideAllElements)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nfunction hideAllElements (){\r\n\r\n    try {\r\n        const container = $$(\"container\");\r\n        const childs    = container.getChildViews();\r\n        \r\n        childs.forEach(function(el){\r\n            const view = el.config.view;\r\n            if(view == \"scrollview\" || view == \"layout\"){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(el.config.id));\r\n            }\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            \"routerConfig => hideAllElements\",\r\n            \"hideAllElements\"\r\n        );\r\n    }\r\n  \r\n     \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/actions/hideAllElements.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/cp.js":
/*!**********************************************!*\
  !*** ./src/js/components/routerConfig/cp.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"cpRouter\": () => (/* binding */ cpRouter)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions/_RouterActions.js */ \"./src/js/components/routerConfig/actions/_RouterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => cp\";\r\n \r\nfunction setUserValues(){\r\n    const user     = webix.storage.local.get(\"user\");\r\n    const authName =  $$(\"authName\");\r\n    try{\r\n        if (user){\r\n            const values = user.name.toString();\r\n            authName.setValues(values);\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setUserValues\"\r\n        );\r\n    }\r\n}\r\n\r\n \r\nfunction createCp(){\r\n    const auth = $$(\"user_auth\");\r\n    \r\n    if(auth){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(auth);\r\n    } else {\r\n        _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.createContentElements(\"cp\");\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem($$(\"user_auth\"));\r\n   \r\n    }\r\n}\r\n\r\n\r\nfunction loadSpace(){\r\n    const isSidebarData = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.sidebar.dataLength();\r\n\r\n    if (!isSidebarData){\r\n        _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.createContentSpace(); //async ?\r\n    }\r\n}\r\n\r\nfunction cpRouter(){\r\n    \r\n    loadSpace();\r\n\r\n    _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.hideContent();\r\n    createCp        ();\r\n \r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.sidebar.close();\r\n\r\n    setUserValues     ();\r\n    _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.hideEmptyTemplates();\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/cp.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/experimental.js":
/*!********************************************************!*\
  !*** ./src/js/components/routerConfig/experimental.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"experimentalRouter\": () => (/* binding */ experimentalRouter)\n/* harmony export */ });\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions/_RouterActions.js */ \"./src/js/components/routerConfig/actions/_RouterActions.js\");\n\r\n\r\n\r\nfunction loadSpace(){\r\n    const isTreeData = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.sidebar.dataLength();\r\n    if (!isTreeData){\r\n        _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_1__.RouterActions.createContentSpace();\r\n    }\r\n}\r\n\r\nfunction createTreeTemplate(){\r\n    const id = \"treeTempl\";\r\n    if (!$$(id)){\r\n        _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_1__.RouterActions.createContentElements(id);\r\n    }\r\n\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.treeEdit.showView();\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.treeEdit.load();\r\n}\r\n\r\n\r\nfunction experimentalRouter(){\r\n    _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_1__.RouterActions.hideEmptyTemplates();\r\n   \r\n    _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_1__.RouterActions.hideContent();\r\n\r\n    loadSpace          ();\r\n    \r\n    createTreeTemplate ();\r\n    \r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_0__.mediator.sidebar.close();\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/experimental.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/index.js":
/*!*************************************************!*\
  !*** ./src/js/components/routerConfig/index.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"indexRouter\": () => (/* binding */ indexRouter)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n\r\n\r\n\r\nconst logNameFile = \"router => index\";\r\n\r\nfunction goToContentPage(){\r\n    \r\n    try {\r\n        Backbone.history.navigate(\r\n            \"content\", \r\n            {trigger : true}\r\n        );\r\n    } catch (err){\r\n        console.log(\r\n            err + \r\n            \" \" + \r\n            logNameFile + \r\n            \" goToContentPage\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction showWorkspace(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"mainLayout\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"userAuth\")  );\r\n\r\n}\r\n\r\nasync function indexRouter(){\r\n\r\n    if (!_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.whoami ){\r\n        await (0,_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.getData)(\"whoami\"); \r\n    }\r\n\r\n\r\n    if (_blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.STORAGE.whoami){\r\n        goToContentPage();\r\n\r\n    } else {\r\n        showWorkspace();\r\n    }\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/index.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/logout.js":
/*!**************************************************!*\
  !*** ./src/js/components/routerConfig/logout.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"logoutRouter\": () => (/* binding */ logoutRouter)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\nconst logNameFile = \"router => logout\";\r\n\r\nfunction clearStorage(){\r\n    try{\r\n        webix.storage.local.clear();\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"clearStorage\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction backPage(){\r\n    try{\r\n        history.back();\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"backPage\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction logoutRouter(){\r\n    const path = \"/init/default/logout/\";\r\n    const logoutData = webix.ajax().post(path);\r\n\r\n    logoutData.then(function (){\r\n        backPage        ();\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.sidebar.clear();\r\n        clearStorage    ();\r\n    });\r\n\r\n    logoutData.fail(function (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"logoutData\"\r\n        );\r\n    });  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/logout.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/routerStart.js":
/*!*******************************************************!*\
  !*** ./src/js/components/routerConfig/routerStart.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setRouterStart\": () => (/* binding */ setRouterStart)\n/* harmony export */ });\nfunction navigate(path){\r\n    Backbone.history.start({pushState: true, root: path});\r\n}\r\n\r\nfunction setRouterStart(){\r\n    if (window.location.host.includes(\"localhost:3000\")){\r\n        navigate('/index.html/');\r\n    } else {\r\n        navigate('/init/default/spaw/');\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/routerStart.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/settings.js":
/*!****************************************************!*\
  !*** ./src/js/components/routerConfig/settings.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"settingsRouter\": () => (/* binding */ settingsRouter)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions/_RouterActions.js */ \"./src/js/components/routerConfig/actions/_RouterActions.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => settings\";\r\n\r\n\r\n\r\nfunction setUserprefsNameValue (){\r\n    const user = webix.storage.local.get(\"user\");\r\n    try{\r\n        if (user){\r\n            const name = user.name.toString();\r\n            $$(\"settingsName\").setValues(name);\r\n        }\r\n    } catch (err){\r\n      \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile,\r\n            \"setUserprefsNameValue\"\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction setTemplateValue(data){\r\n\r\n    try{\r\n        data.forEach(function(el){\r\n            const name    = el.name;\r\n            const prefsId = \"userprefs\";\r\n            if (name.includes   (prefsId)     && \r\n                name.lastIndexOf(prefsId) == 0){\r\n\r\n                const prefs = JSON.parse(el.prefs);\r\n                const form  = $$(name);\r\n                form.setValues(prefs);\r\n                form.config.storagePrefs = prefs;\r\n            }\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"getDataUserprefs\"\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction getDataUserprefs(){\r\n    const path          = \"/init/default/api/userprefs/\";\r\n    const userprefsData = webix.ajax().get(path);\r\n\r\n    userprefsData.then(function(data){\r\n        data = data.json().content;\r\n        setTemplateValue(data);\r\n        \r\n    });\r\n\r\n    userprefsData.fail(function (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"getDataUserprefs\"\r\n        );\r\n    });\r\n}\r\n\r\n\r\nfunction settingsRouter(){\r\n\r\n    const id   = \"settings\";\r\n    const elem = $$(id);\r\n    \r\n    _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.hideContent();\r\n\r\n    if (_blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.sidebar.dataLength() == 0){\r\n        _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.createContentSpace();\r\n    }\r\n\r\n    if (elem){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(elem);\r\n    } else {\r\n        _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.createContentElements (id);\r\n        getDataUserprefs();\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem($$(id));\r\n    }\r\n\r\n    setUserprefsNameValue   ();\r\n\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.sidebar.close  ();\r\n    _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.hideEmptyTemplates();\r\n    \r\n  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/settings.js?");

/***/ }),

/***/ "./src/js/components/routerConfig/tree.js":
/*!************************************************!*\
  !*** ./src/js/components/routerConfig/tree.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"treeRouter\": () => (/* binding */ treeRouter)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions/_RouterActions.js */ \"./src/js/components/routerConfig/actions/_RouterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"router => tree\";\r\n\r\n \r\nlet id;\r\n\r\n\r\n\r\n// function returnTopParent(){\r\n//     let topParent;\r\n\r\n//     const pull   = tree.data.pull;\r\n//     const values = Object.values(pull);\r\n\r\n//     values.forEach(function(el){\r\n   \r\n//         if ( el.webix_kids && !(tree.exists (id)) ){\r\n//             topParent = el.id;\r\n//         }\r\n\r\n//     });\r\n\r\n//     return topParent;\r\n// }\r\n\r\n\r\nasync function getTableData (){\r\n\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.LoadServerData.content(\"fields\");\r\n    const keys = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.keys;\r\n \r\n    if (keys){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.sidebar.selectItem(id);\r\n    }\r\n}\r\n\r\n\r\nasync function createTableSpace (){\r\n    _actions_RouterActions_js__WEBPACK_IMPORTED_MODULE_3__.RouterActions.createContentSpace();\r\n\r\n    const isFieldsExists = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.keys;\r\n    try{   \r\n        const tree = $$(\"tree\");\r\n        tree.attachEvent(\"onAfterLoad\", \r\n        webix.once(function (){\r\n            if (!isFieldsExists) {\r\n                getTableData ();\r\n            } \r\n        }));         \r\n       \r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createTableSpace\"\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nasync function checkTable(){\r\n\r\n    try {\r\n        const isSidebarData = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.sidebar.dataLength();\r\n        \r\n        if (!isSidebarData){\r\n            createTableSpace ();\r\n            \r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"checkTable\"\r\n        );\r\n\r\n    }    \r\n  \r\n}\r\nasync function treeRouter(selectId){\r\n    id = selectId;\r\n\r\n    checkTable();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/routerConfig/tree.js?");

/***/ }),

/***/ "./src/js/components/settings/_layout.js":
/*!***********************************************!*\
  !*** ./src/js/components/settings/_layout.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"settingsLayout\": () => (/* binding */ settingsLayout)\n/* harmony export */ });\n/* harmony import */ var _headline_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./headline.js */ \"./src/js/components/settings/headline.js\");\n/* harmony import */ var _tabbar_layoutTab_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tabbar/_layoutTab.js */ \"./src/js/components/settings/tabbar/_layoutTab.js\");\n\r\n\r\n\r\n\r\n\r\nconst settingsLayout = {\r\n\r\n    rows:[\r\n        {   padding: {\r\n                top    : 15, \r\n                bottom : 0, \r\n                left   : 20, \r\n                right  : 0\r\n            },\r\n            rows   :_headline_js__WEBPACK_IMPORTED_MODULE_0__.layoutHeadline,\r\n        },\r\n        _tabbar_layoutTab_js__WEBPACK_IMPORTED_MODULE_1__.layoutTabbar,\r\n    ]\r\n\r\n   \r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/_layout.js?");

/***/ }),

/***/ "./src/js/components/settings/_settingsMediator.js":
/*!*********************************************************!*\
  !*** ./src/js/components/settings/_settingsMediator.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Settings\": () => (/* binding */ Settings)\n/* harmony export */ });\n/* harmony import */ var _layout_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_layout.js */ \"./src/js/components/settings/_layout.js\");\n/* harmony import */ var _tabbar_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tabbar/buttons.js */ \"./src/js/components/settings/tabbar/buttons.js\");\n\r\n\r\n\r\nclass Settings {\r\n    constructor (){\r\n        this.name = \"dashboards\";\r\n    }\r\n\r\n    create (){\r\n        $$(\"container\").addView(\r\n            {   view    :\"layout\",\r\n                id      : \"settings\", \r\n                css     :\"webix_auth\",\r\n                hidden  :true, \r\n                rows    :[\r\n                    _layout_js__WEBPACK_IMPORTED_MODULE_0__.settingsLayout,\r\n                ],\r\n            }, \r\n        8);\r\n    }\r\n\r\n    async put (){\r\n       return await (0,_tabbar_buttons_js__WEBPACK_IMPORTED_MODULE_1__.saveSettings)();\r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/_settingsMediator.js?");

/***/ }),

/***/ "./src/js/components/settings/headline.js":
/*!************************************************!*\
  !*** ./src/js/components/settings/headline.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"layoutHeadline\": () => (/* binding */ layoutHeadline)\n/* harmony export */ });\nconst headline = {   \r\n    view        : \"template\",\r\n    template    : \"<div>Настройки</div>\",\r\n    css         : \"webix_headline-userprefs\",\r\n    height      : 35, \r\n    borderless  : true,\r\n};\r\n\r\nconst userInfo =  {   \r\n    view        : \"template\",\r\n    id          : \"settingsName\",\r\n    css         : \"webix_userprefs-info\",\r\n    height      : 50, \r\n    borderless  : true,\r\n\r\n    template    : function(){\r\n        function createDivData(msg){\r\n            return `\r\n            <div style = '\r\n                display:inline-block;\r\n                color:var(--primary);\r\n                font-size:13px!important;\r\n                font-weight:600\r\n            '>Имя пользователя:</div>\r\n\r\n            <div style = '\r\n                display:inline-block;\r\n                font-size:13px!important;\r\n                font-weight:600\r\n            '>${msg}</div>`;\r\n        }\r\n\r\n        const val       = $$(\"settingsName\").getValues();\r\n        const lenghtVal = Object.keys(val).length;\r\n\r\n        if (lenghtVal !==0){\r\n            return createDivData(val); \r\n        } else {\r\n            return createDivData(\"не указано\");        \r\n        }\r\n    },\r\n};\r\n\r\n\r\nconst layoutHeadline =  [ \r\n    headline,\r\n    userInfo,\r\n];\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/headline.js?");

/***/ }),

/***/ "./src/js/components/settings/tabbar/_layoutTab.js":
/*!*********************************************************!*\
  !*** ./src/js/components/settings/tabbar/_layoutTab.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"layoutTabbar\": () => (/* binding */ layoutTabbar)\n/* harmony export */ });\n/* harmony import */ var _formOther_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formOther.js */ \"./src/js/components/settings/tabbar/formOther.js\");\n/* harmony import */ var _formWorkspace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formWorkspace.js */ \"./src/js/components/settings/tabbar/formWorkspace.js\");\n/* harmony import */ var _tabbar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tabbar.js */ \"./src/js/components/settings/tabbar/tabbar.js\");\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/components/settings/tabbar/buttons.js\");\n\r\n\r\n\r\n\r\n\r\nconst layoutTabbar =  {\r\n    rows:[\r\n        _tabbar_js__WEBPACK_IMPORTED_MODULE_2__.tabbar,\r\n        {\r\n            cells:[\r\n                _formWorkspace_js__WEBPACK_IMPORTED_MODULE_1__.workspaceLayout,\r\n                _formOther_js__WEBPACK_IMPORTED_MODULE_0__.otherFormLayout\r\n            ]\r\n        },\r\n        _buttons_js__WEBPACK_IMPORTED_MODULE_3__.buttons\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/tabbar/_layoutTab.js?");

/***/ }),

/***/ "./src/js/components/settings/tabbar/buttons.js":
/*!******************************************************!*\
  !*** ./src/js/components/settings/tabbar/buttons.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"buttons\": () => (/* binding */ buttons),\n/* harmony export */   \"saveSettings\": () => (/* binding */ saveSettings)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _commonTab_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./commonTab.js */ \"./src/js/components/settings/tabbar/commonTab.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile   = \"settings => tabbar => buttons\";\r\n\r\nlet tabbar;\r\nlet tabbarVal;\r\nlet form;\r\n\r\nlet values;\r\nlet sentObj;\r\n\r\nfunction putPrefs(el){\r\n    const path    = \"/init/default/api/userprefs/\" + el.id;\r\n    const putData = webix.ajax().put(path, sentObj);\r\n\r\n    return putData.then(function(data){\r\n        data = data.json();\r\n        if (data.err_type == \"i\"){\r\n            const formVals = JSON.stringify(values);\r\n            (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_1__.setStorageData) (tabbarVal, formVals);\r\n\r\n            const name         = tabbar.getValue();\r\n            _commonTab_js__WEBPACK_IMPORTED_MODULE_4__.defaultValue[name] = values;\r\n\r\n            form.setDirty(false);\r\n\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"success\", \r\n                \"Настройки сохранены\"\r\n            );\r\n            return true;\r\n        } else {\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", data.error);\r\n            return false;\r\n        }\r\n\r\n    }).fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"putPrefs\"\r\n        );\r\n        return false;\r\n    });\r\n}\r\n\r\n\r\nfunction findExistsData(data){\r\n    const result = {\r\n        exists : false\r\n    };\r\n\r\n    try{\r\n        data.forEach(function(el){\r\n           \r\n            if (el.name == tabbarVal){\r\n                result.exists = true;\r\n                result.findElem = el;\r\n            } \r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"findExistsData\"\r\n        );\r\n    }\r\n    return result;\r\n}\r\n\r\n\r\nfunction postPrefs(){\r\n   \r\n    const path = \"/init/default/api/userprefs/\";\r\n\r\n    const postData = webix.ajax().post(path, sentObj);\r\n\r\n    return postData.then(function(data){\r\n        data = data.json();\r\n\r\n        if (data.err_type == \"i\"){\r\n            const tabbarVal         = tabbar.getValue();\r\n            _commonTab_js__WEBPACK_IMPORTED_MODULE_4__.defaultValue[tabbarVal] = values;\r\n\r\n            form.setDirty(false);\r\n\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"success\", \r\n                \"Настройки сохранены\"\r\n            );\r\n\r\n            return true;\r\n        } else {\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"error\", \r\n                data.error\r\n            );\r\n\r\n            return false;\r\n        }\r\n\r\n    }).fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"postPrefs\"\r\n        );\r\n\r\n        return false;\r\n    });\r\n}\r\n\r\n\r\nasync function savePrefs(){\r\n    let ownerId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.getUserDataStorage)();\r\n\r\n    if (!ownerId){\r\n        await (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.pushUserDataStorage)();\r\n        ownerId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_5__.getUserDataStorage)();\r\n    }\r\n\r\n    const url     = \"/init/default/api/userprefs/\";\r\n    const getData =  webix.ajax().get(url);\r\n \r\n    return getData.then(function(data){\r\n        data = data.json().content;\r\n\r\n        values = form.getValues();\r\n\r\n        sentObj = {\r\n            name  : tabbarVal,\r\n            owner : ownerId.id,\r\n            prefs : values,\r\n        };\r\n\r\n        const result          = findExistsData(data);\r\n        const isExistsSetting = result.exists;\r\n\r\n        if (!isExistsSetting){\r\n            return postPrefs();\r\n        } else {\r\n            const findElem = result.findElem;\r\n            return putPrefs(findElem);\r\n        }\r\n\r\n    }).fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"savePrefs\"\r\n        );\r\n    });\r\n}\r\n\r\n\r\nasync function saveSettings (){\r\n    tabbar    = $$(\"userprefsTabbar\");\r\n    const value     = tabbar.getValue();\r\n    tabbarVal = value + \"Form\" ;\r\n    form      = $$(tabbarVal);\r\n\r\n    if (form.isDirty()){\r\n        return savePrefs();   \r\n   \r\n    } else {\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n            \"debug\", \r\n            \"Сохранять нечего\"\r\n        );\r\n        return true;\r\n    }\r\n}\r\n\r\nfunction clearSettings (){\r\n    const tabbar    = $$(\"userprefsTabbar\");\r\n    const value     = tabbar.getValue();\r\n    const tabbarVal = value + \"Form\" ;\r\n    const form      = $$(tabbarVal);\r\n\r\n    if (tabbarVal === \"userprefsWorkspaceForm\"){\r\n        form.setValues({\r\n            logBlockOpt    : '1', \r\n            LoginActionOpt : '1'\r\n        });\r\n\r\n    } else if (tabbarVal === \"userprefsOtherForm\"){\r\n        form.setValues({\r\n            autorefOpt        : '1', \r\n            autorefCounterOpt : 15000, \r\n            visibleIdOpt      : '1'\r\n        });\r\n    }\r\n\r\n    form.setDirty(true);\r\n\r\n    saveSettings ();\r\n}\r\n\r\n\r\nconst clearBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n    \r\n    config   : {\r\n        id       : \"userprefsResetBtn\",\r\n        hotkey   : \"Shift+X\",\r\n        value    : \"Сбросить\", \r\n        click    : clearSettings,\r\n    },\r\n    titleAttribute : \"Вернуть начальные настройки\"\r\n\r\n   \r\n}).maxView();\r\n\r\nconst submitBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n    \r\n    config   : {\r\n        id       : \"userprefsSaveBtn\",\r\n        hotkey   : \"Shift+Space\",\r\n        disabled : true,\r\n        value    : \"Сохранить настройки\", \r\n        click    : saveSettings,\r\n    },\r\n    titleAttribute : \"Применить настройки\"\r\n\r\n   \r\n}).maxView(\"primary\");\r\n\r\n\r\nconst buttons =  { \r\n    id:\"adaptiveUp\", \r\n    rows:[\r\n        {   responsive : \"adaptiveUserprefs\",\r\n            cols:[\r\n                clearBtn,\r\n                submitBtn,\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/tabbar/buttons.js?");

/***/ }),

/***/ "./src/js/components/settings/tabbar/commonTab.js":
/*!********************************************************!*\
  !*** ./src/js/components/settings/tabbar/commonTab.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"defaultValue\": () => (/* binding */ defaultValue)\n/* harmony export */ });\n\r\nconst defaultValue = {\r\n    userprefsOther     : {},\r\n    userprefsWorkspace : {},\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/tabbar/commonTab.js?");

/***/ }),

/***/ "./src/js/components/settings/tabbar/formOther.js":
/*!********************************************************!*\
  !*** ./src/js/components/settings/tabbar/formOther.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"otherFormLayout\": () => (/* binding */ otherFormLayout)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _formTemplate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formTemplate.js */ \"./src/js/components/settings/tabbar/formTemplate.js\");\n\r\n\r\n\r\n\r\nconst logNameFile   = \"settings => tabbar => otherForm\";\r\n\r\nconst autorefRadio   = {\r\n    view            : \"radio\",\r\n    labelPosition   : \"top\", \r\n    label           : \"Автообновление специфичных страниц\", \r\n    value           : 1,\r\n    name            : \"autorefOpt\", \r\n    options         : [\r\n        {\"id\" : 1, \"value\" : \"Включено\"},\r\n        {\"id\" : 2, \"value\" : \"Выключено\"}\r\n    ],\r\n    on              : {\r\n        onChange:function(newValue){\r\n\r\n            const counter = $$(\"userprefsAutorefCounter\");\r\n\r\n            if (newValue == 1 ){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem(counter);\r\n            }\r\n\r\n            if (newValue == 2){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(counter);\r\n            }\r\n        \r\n        }\r\n    }\r\n};\r\n\r\nconst autorefCounter = {   \r\n    view            : \"counter\", \r\n    id              : \"userprefsAutorefCounter\",\r\n    labelPosition   : \"top\",\r\n    name            : \"autorefCounterOpt\", \r\n    label           : \"Интервал автообновления (в миллисекундах)\" ,\r\n    min             : 15000, \r\n    max             : 900000,\r\n    on              : {\r\n        onChange:function(newValue){\r\n            function createMsg (textMsg){\r\n                return webix.message({\r\n                    type   : \"debug\",\r\n                    expire : 1000, \r\n                    text   : textMsg\r\n                });\r\n            }\r\n\r\n            try{\r\n                const counter = $$(\"userprefsAutorefCounter\");\r\n                const minVal  = counter.config.min;\r\n                const maxVal  = counter.config.max;\r\n\r\n                const defText = \"возможное значение\";\r\n                \r\n                if (newValue == minVal){\r\n                    createMsg (\"Минимально\" +  defText);\r\n\r\n                } else if (newValue == maxVal){\r\n                    createMsg (\"Максимально\" + defText);\r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"onChange\"\r\n                );\r\n            }\r\n\r\n        }\r\n    }\r\n};\r\n\r\nconst visibleIdRadio = {\r\n    view            : \"radio\",\r\n    labelPosition   : \"top\", \r\n    label           : \"ID в таблицах\", \r\n    value           : 1,\r\n    name            : \"visibleIdOpt\", \r\n    options         : [\r\n        {\"id\" : 1, \"value\" : \"Показывать\"   },\r\n        {\"id\" : 2, \"value\" : \"Не показывать\"}\r\n    ],\r\n};\r\n\r\nfunction returnForm(){\r\n    const elems = [{\r\n        rows: [\r\n            autorefRadio,\r\n            {height:5},\r\n            autorefCounter,\r\n            {height:5},\r\n            visibleIdRadio,\r\n            {}\r\n        ]\r\n    }];\r\n    \r\n \r\n    return (0,_formTemplate_js__WEBPACK_IMPORTED_MODULE_2__.returnFormTemplate)(\r\n        \"userprefsOtherForm\", \r\n        elems\r\n    );\r\n}\r\n\r\nconst otherFormLayout = {\r\n    view      : \"scrollview\",\r\n    borderless: true, \r\n    css       : \"webix_multivew-cell\",\r\n    id        : \"userprefsOther\", \r\n    scroll    : \"y\", \r\n    body      : returnForm()\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/tabbar/formOther.js?");

/***/ }),

/***/ "./src/js/components/settings/tabbar/formTemplate.js":
/*!***********************************************************!*\
  !*** ./src/js/components/settings/tabbar/formTemplate.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnFormTemplate\": () => (/* binding */ returnFormTemplate)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n \r\n\r\n\r\n\r\nfunction returnFormTemplate(id, elems){\r\n    const form =  {    \r\n        view       : \"form\", \r\n        id         : id,\r\n        borderless : true,\r\n        elements   : [\r\n            {cols  : elems},\r\n        ],\r\n    \r\n        on        :{\r\n            onViewShow: webix.once(function(){\r\n               _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.setForm(this);\r\n            }),\r\n    \r\n            onChange:function(){\r\n                const form     = this;\r\n                const isDirty  = form.isDirty();\r\n\r\n                const saveBtn  = $$(\"userprefsSaveBtn\");\r\n                const resetBtn = $$(\"userprefsResetBtn\");\r\n \r\n    \r\n                function setSaveBtnState(){\r\n                    if ( isDirty ){\r\n                        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem(saveBtn);\r\n    \r\n                    } else if ( !isDirty ){\r\n                        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem(saveBtn);\r\n    \r\n                    }\r\n                }\r\n    \r\n                function setResetBtnState(){\r\n                    if (isDirty){\r\n                        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem(resetBtn);\r\n    \r\n                    } else if ( !isDirty ){\r\n                        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem(resetBtn);\r\n    \r\n                    }  \r\n                 \r\n                }\r\n          \r\n                setSaveBtnState ();\r\n                setResetBtnState();\r\n            }\r\n        },\r\n    \r\n        \r\n    };\r\n\r\n    return form;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/tabbar/formTemplate.js?");

/***/ }),

/***/ "./src/js/components/settings/tabbar/formWorkspace.js":
/*!************************************************************!*\
  !*** ./src/js/components/settings/tabbar/formWorkspace.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"workspaceLayout\": () => (/* binding */ workspaceLayout)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _formTemplate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formTemplate.js */ \"./src/js/components/settings/tabbar/formTemplate.js\");\n \r\n\r\n\r\n\r\nconst logNameFile   = \"settings => tabbar => workspaceForm\";\r\n\r\nconst logBlockRadio = {\r\n    view         : \"radio\",\r\n    labelPosition: \"top\",\r\n    name         : \"logBlockOpt\", \r\n    label        : \"Отображение блока системных сообщений\", \r\n    value        : 1, \r\n    options      : [\r\n        {\"id\" : 1, \"value\" : \"Показать\"}, \r\n        {\"id\" : 2, \"value\" : \"Скрыть\"  }\r\n    ],\r\n    on:{\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\r\n                \"title\",\r\n                \"Показать/скрыть по умолчанию\" + \r\n                \" блок системных сообщений\"\r\n                );\r\n        },\r\n\r\n        onChange:function(newValue, oldValue){\r\n            try{\r\n                const btn = $$(\"webix_log-btn\");\r\n\r\n                if (newValue !== oldValue){\r\n             \r\n                    if (newValue == 1){\r\n                        btn.setValue(2);\r\n                    } else {\r\n                        btn.setValue(1);\r\n                    }\r\n                \r\n                }\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"onChange\"\r\n                );\r\n            }\r\n \r\n        }\r\n    }\r\n};\r\n\r\nconst loginActionSelect = {   \r\n    view          : \"select\", \r\n    name          : \"LoginActionOpt\",\r\n    label         : \"Действие после входа в систему\", \r\n    labelPosition : \"top\",\r\n    value         : 2, \r\n    options       : [\r\n    { \"id\" : 1, \"value\" : \"Перейти на главную страницу\"            },\r\n    { \"id\" : 2, \"value\" : \"Перейти на последнюю открытую страницу\" },\r\n    ],\r\n    on:{\r\n        onAfterRender: function () {\r\n            this.getInputNode().setAttribute(\r\n                \"title\",\r\n                \"Показывать/не показывать \" + \r\n                \"всплывающее окно при загрузке приложения\"\r\n            );\r\n        },\r\n\r\n    }\r\n};\r\n\r\n\r\nfunction returnForm(){\r\n    const elems = [\r\n        { rows : [  \r\n            logBlockRadio,\r\n            {height : 15},\r\n            \r\n            {cols : [\r\n                loginActionSelect,\r\n                {}\r\n            ]}\r\n\r\n        ]},\r\n    ]; \r\n\r\n    return (0,_formTemplate_js__WEBPACK_IMPORTED_MODULE_1__.returnFormTemplate)(\r\n        \"userprefsWorkspaceForm\",  \r\n        elems\r\n    );\r\n}\r\n\r\n\r\nconst workspaceLayout = {\r\n    view      : \"scrollview\",\r\n    borderless: true, \r\n    css       : \"webix_multivew-cell\",\r\n    id        : \"userprefsWorkspace\",\r\n    scroll    : \"y\", \r\n    body      : returnForm()\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/tabbar/formWorkspace.js?");

/***/ }),

/***/ "./src/js/components/settings/tabbar/tabbar.js":
/*!*****************************************************!*\
  !*** ./src/js/components/settings/tabbar/tabbar.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tabbar\": () => (/* binding */ tabbar)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/components/settings/tabbar/buttons.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile   = \"settings => tabbar => tabbar\";\r\n\r\n\r\nfunction createHeadlineSpan(headMsg){\r\n    return `<span class='webix_tabbar-filter-headline'>\r\n            ${headMsg}\r\n            </span>`;\r\n}\r\n\r\nconst tabbar = {   \r\n    view     : \"tabbar\",  \r\n    type     : \"top\", \r\n    id       : \"userprefsTabbar\",\r\n    css      : \"webix_filter-popup-tabbar\",\r\n    multiview: true, \r\n    height   : 50,\r\n    options  : [\r\n        {   value: createHeadlineSpan(\"Рабочее пространство\"), \r\n            id   : 'userprefsWorkspace' \r\n        },\r\n        {   value: createHeadlineSpan(\"Другое\"), \r\n            id   : 'userprefsOther' \r\n        },\r\n    ],\r\n\r\n    on       :{\r\n        onBeforeTabClick:function(id){\r\n            const tabbar    = $$(\"userprefsTabbar\");\r\n            const value     = tabbar.getValue();\r\n            const tabbarVal = value + \"Form\";\r\n            const form      = $$(tabbarVal);\r\n\r\n            function createModalBox(){\r\n                try{\r\n                    webix.modalbox({\r\n                        title   : \"Данные не сохранены\",\r\n                        css     : \"webix_modal-custom-save\",\r\n                        buttons : [\"Отмена\", \"Не сохранять\", \"Сохранить\"],\r\n                        width   : 500,\r\n                        text    : \"Выберите действие перед тем как продолжить\"\r\n                    }).then(function(result){\r\n\r\n                        if ( result == 1){\r\n                            \r\n                            const storageData = webix.storage.local.get(tabbarVal);\r\n                            const saveBtn     = $$(\"userprefsSaveBtn\");\r\n                            const resetBtn    = $$(\"userprefsResetBtn\");\r\n\r\n                            form.setValues(storageData);\r\n\r\n                            tabbar.setValue(id);\r\n                            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem(saveBtn);\r\n                            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem(resetBtn);\r\n\r\n                        } else if ( result == 2){\r\n                            (0,_buttons_js__WEBPACK_IMPORTED_MODULE_2__.saveSettings) ();\r\n                            tabbar.setValue(id);\r\n                        }\r\n                    });\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                        err, \r\n                        logNameFile, \r\n                        \"createModalBox\"\r\n                    );\r\n                }\r\n            }\r\n\r\n\r\n            if (form.isDirty()){\r\n                createModalBox();\r\n                return false;\r\n            }\r\n\r\n        }\r\n    }\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/settings/tabbar/tabbar.js?");

/***/ }),

/***/ "./src/js/components/table/_layout.js":
/*!********************************************!*\
  !*** ./src/js/components/table/_layout.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnLayoutForms\": () => (/* binding */ returnLayoutForms),\n/* harmony export */   \"returnLayoutTables\": () => (/* binding */ returnLayoutTables)\n/* harmony export */ });\n/* harmony import */ var _btnsInTable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./btnsInTable.js */ \"./src/js/components/table/btnsInTable.js\");\n/* harmony import */ var _toolbar_layout_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toolbar/_layout.js */ \"./src/js/components/table/toolbar/_layout.js\");\n/* harmony import */ var _formTools_viewProperty_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./formTools/viewProperty.js */ \"./src/js/components/table/formTools/viewProperty.js\");\n/* harmony import */ var _formTools_viewTools_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./formTools/viewTools.js */ \"./src/js/components/table/formTools/viewTools.js\");\n/* harmony import */ var _editForm_layout_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./editForm/_layout.js */ \"./src/js/components/table/editForm/_layout.js\");\n/* harmony import */ var _filterForm_layout_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./filterForm/_layout.js */ \"./src/js/components/table/filterForm/_layout.js\");\n/* harmony import */ var _onFuncs_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./onFuncs.js */ \"./src/js/components/table/onFuncs.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst limitLoad   = 80;\r\n\r\n\r\nfunction table (idTable, onFunc, editableParam = false) {\r\n    return {\r\n        view        : \"datatable\",\r\n        id          : idTable,\r\n        css         : \"webix_table-style webix_header_border webix_data_border \",\r\n        autoConfig  : true,\r\n        editable    : editableParam,\r\n        editaction  :\"dblclick\",\r\n        minHeight   : 350,\r\n       // height:200,\r\n        footer      : true,\r\n        select      : true,\r\n        resizeColumn: true,\r\n        sort        : [],\r\n        offsetAttr  : limitLoad,\r\n        on          : onFunc,\r\n        onClick     :{\r\n            \"wxi-trash\":function(event,config,html){\r\n                (0,_btnsInTable_js__WEBPACK_IMPORTED_MODULE_0__.trashBtn)(config,idTable);\r\n            },\r\n\r\n            \"wxi-angle-down\":function(event, cell, target){\r\n                (0,_btnsInTable_js__WEBPACK_IMPORTED_MODULE_0__.showPropBtn) (cell);\r\n            },\r\n            \r\n        },\r\n        ready:function(){ \r\n            const firstCol = this.getColumns()[0];\r\n        },\r\n    };\r\n}\r\n\r\nconst tableContainer = {   \r\n    id  : \"tableContainer\",\r\n    rows: [\r\n        (0,_toolbar_layout_js__WEBPACK_IMPORTED_MODULE_1__.tableToolbar) (\"table\"),\r\n        {   view  : \"resizer\",\r\n            class : \"webix_resizers\"\r\n        },\r\n        table (\"table\", _onFuncs_js__WEBPACK_IMPORTED_MODULE_6__.onFuncTable, true)\r\n    ]\r\n};\r\n\r\nfunction returnLayoutTables(id){\r\n\r\n    const layout = {   \r\n        id      : id, \r\n        hidden  : true, \r\n        view    : \"scrollview\", \r\n        body    : { \r\n            view  : \"flexlayout\",\r\n            id    : \"flexlayoutTable\", \r\n            cols  : [\r\n                                        \r\n                tableContainer,\r\n\r\n                {   view  : \"resizer\",\r\n                    class : \"webix_resizers\", \r\n                    id    : \"tableBarResizer\" \r\n                },\r\n          \r\n                (0,_editForm_layout_js__WEBPACK_IMPORTED_MODULE_4__.editTableBar)(),\r\n                (0,_filterForm_layout_js__WEBPACK_IMPORTED_MODULE_5__.filterForm)(),\r\n                \r\n            ]\r\n        }\r\n    \r\n    };\r\n    return layout;\r\n}\r\n\r\n\r\n\r\nconst tableLayout =  {   \r\n    view:\"scrollview\", \r\n    body: {\r\n        view:\"flexlayout\",\r\n        cols:[\r\n            table (\"table-view\"),\r\n    \r\n        ]\r\n    }\r\n};\r\n\r\nconst hiddenResizer = {   \r\n    view   : \"resizer\",\r\n    id     : \"formsTools-resizer\",\r\n    hidden : true,\r\n    class  : \"webix_resizers\",\r\n};\r\n\r\nconst formsContainer = {   \r\n    id:\"formsContainer\",\r\n    rows:[\r\n        (0,_toolbar_layout_js__WEBPACK_IMPORTED_MODULE_1__.tableToolbar)(\"table-view\", true ),\r\n        {   view : \"resizer\", \r\n            class: \"webix_resizers\"\r\n        },\r\n        tableLayout, \r\n    ]\r\n};\r\n\r\nconst tools = {   \r\n    id       : \"formsTools\",\r\n    hidden   : true,  \r\n    minWidth : 190, \r\n    rows     : [\r\n        _formTools_viewTools_js__WEBPACK_IMPORTED_MODULE_3__.viewTools,\r\n    ]\r\n};\r\n\r\nfunction returnLayoutForms(id){  \r\n   \r\n    const layout =  {   \r\n        view   : \"layout\",\r\n        id     : id, \r\n        css    : \"webix_tableView\",\r\n        hidden : true,                       \r\n        rows   : [\r\n            {cols : [\r\n                formsContainer, \r\n                hiddenResizer,\r\n                (0,_formTools_viewProperty_js__WEBPACK_IMPORTED_MODULE_2__.propertyTemplate)(\"propTableView\"),\r\n                tools,\r\n            ]},\r\n\r\n        \r\n        ],\r\n\r\n\r\n    };\r\n\r\n    return layout;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/_layout.js?");

/***/ }),

/***/ "./src/js/components/table/_tableMediator.js":
/*!***************************************************!*\
  !*** ./src/js/components/table/_tableMediator.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Tables\": () => (/* binding */ Tables),\n/* harmony export */   \"Forms\": () => (/* binding */ Forms)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _createSpace_generateTable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createSpace/generateTable.js */ \"./src/js/components/table/createSpace/generateTable.js\");\n/* harmony import */ var _layout_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_layout.js */ \"./src/js/components/table/_layout.js\");\n/* harmony import */ var _lazyLoad_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lazyLoad.js */ \"./src/js/components/table/lazyLoad.js\");\n/* harmony import */ var _onResize_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./onResize.js */ \"./src/js/components/table/onResize.js\");\n/* harmony import */ var _onColumnResize_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./onColumnResize.js */ \"./src/js/components/table/onColumnResize.js\");\n/* harmony import */ var _columnsSettings_columnsWidth_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./columnsSettings/columnsWidth.js */ \"./src/js/components/table/columnsSettings/columnsWidth.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _editForm_editFormMediator_editFormClass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./editForm/editFormMediator/editFormClass.js */ \"./src/js/components/table/editForm/editFormMediator/editFormClass.js\");\n/* harmony import */ var _filterForm_setDefaultState_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./filterForm/setDefaultState.js */ \"./src/js/components/table/filterForm/setDefaultState.js\");\n/* harmony import */ var _formTools_setDefaultState_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./formTools/setDefaultState.js */ \"./src/js/components/table/formTools/setDefaultState.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => _tableMediator\";\r\n\r\nclass Tables {\r\n    constructor (){\r\n        this.name = \"tables\";\r\n\r\n        this.components = {\r\n            editForm : new _editForm_editFormMediator_editFormClass_js__WEBPACK_IMPORTED_MODULE_8__.EditForm()\r\n        };\r\n    }\r\n\r\n    create(){\r\n        try{\r\n            if (!$$(this.name)){\r\n\r\n                $$(\"container\").addView(\r\n                    (0,_layout_js__WEBPACK_IMPORTED_MODULE_2__.returnLayoutTables)(this.name),\r\n                5);\r\n\r\n                const tableElem = $$(\"table\");\r\n                (0,_lazyLoad_js__WEBPACK_IMPORTED_MODULE_3__.sortTable)          (tableElem);\r\n                (0,_onResize_js__WEBPACK_IMPORTED_MODULE_4__.onResizeTable)      (tableElem);\r\n                (0,_lazyLoad_js__WEBPACK_IMPORTED_MODULE_3__.scrollTableLoad)    (tableElem);\r\n                (0,_columnsSettings_columnsWidth_js__WEBPACK_IMPORTED_MODULE_6__.setColsWidthStorage)(tableElem);\r\n                (0,_onColumnResize_js__WEBPACK_IMPORTED_MODULE_5__.columnResize)       (tableElem);\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_7__.setFunctionError)(\r\n                err, \r\n                logNameFile, \r\n                \"createTables\"\r\n            );\r\n        }\r\n    }\r\n\r\n    showView(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(this.name));   \r\n    }\r\n\r\n    load(id){\r\n        (0,_createSpace_generateTable_js__WEBPACK_IMPORTED_MODULE_1__.createTable)(\"table\", id);\r\n    }\r\n\r\n    get editForm (){\r\n        return _editForm_editFormMediator_editFormClass_js__WEBPACK_IMPORTED_MODULE_8__.EditForm;\r\n    }\r\n  \r\n    defaultState(type){\r\n        if (type == \"edit\"){\r\n            _editForm_editFormMediator_editFormClass_js__WEBPACK_IMPORTED_MODULE_8__.EditForm[\"default\"]();\r\n        } else if (type == \"filter\"){\r\n            (0,_filterForm_setDefaultState_js__WEBPACK_IMPORTED_MODULE_9__.filterFormDefState)();\r\n        } else {\r\n            _editForm_editFormMediator_editFormClass_js__WEBPACK_IMPORTED_MODULE_8__.EditForm.defaultState();\r\n            (0,_filterForm_setDefaultState_js__WEBPACK_IMPORTED_MODULE_9__.filterFormDefState)   ();\r\n        }\r\n  \r\n       \r\n    }\r\n\r\n}\r\n\r\n\r\nclass Forms {\r\n    constructor (){\r\n        this.name = \"forms\";\r\n    }\r\n\r\n    create(){\r\n        try{\r\n            if (!$$(this.name)){\r\n                $$(\"container\").addView(\r\n                    (0,_layout_js__WEBPACK_IMPORTED_MODULE_2__.returnLayoutForms)(this.name),\r\n                6);\r\n\r\n                const tableElem = $$(\"table-view\");\r\n\r\n                (0,_onResize_js__WEBPACK_IMPORTED_MODULE_4__.onResizeTable)      (tableElem);\r\n                (0,_columnsSettings_columnsWidth_js__WEBPACK_IMPORTED_MODULE_6__.setColsWidthStorage)(tableElem);\r\n                (0,_onColumnResize_js__WEBPACK_IMPORTED_MODULE_5__.columnResize)       (tableElem);\r\n           \r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_7__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"createForms\"\r\n            );\r\n        }\r\n    }\r\n\r\n    showView(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(this.name));   \r\n    }\r\n\r\n    load(id){\r\n        (0,_createSpace_generateTable_js__WEBPACK_IMPORTED_MODULE_1__.createTable)(\"table-view\", id);\r\n    }\r\n\r\n    defaultState(){\r\n        (0,_formTools_setDefaultState_js__WEBPACK_IMPORTED_MODULE_10__.toolsDefState) ();\r\n        _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_11__.Button.transparentDefaultState();\r\n    }\r\n\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/_tableMediator.js?");

/***/ }),

/***/ "./src/js/components/table/btnsInTable.js":
/*!************************************************!*\
  !*** ./src/js/components/table/btnsInTable.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"trashBtn\": () => (/* binding */ trashBtn),\n/* harmony export */   \"showPropBtn\": () => (/* binding */ showPropBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => btnsIntable\";\r\n\r\nfunction trashBtn(config,idTable){\r\n    function delElem(){\r\n \r\n        const table      = $$(idTable);\r\n        const formValues = table.getItem(config.row);\r\n        const itemTreeId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId) ();\r\n        const url        = \"/init/default/api/\" + itemTreeId + \"/\" + formValues.name + \".json\" ;\r\n \r\n        const delData    = webix.ajax().del(url, formValues);\r\n\r\n        delData.then(function(data){\r\n            data = data.json();\r\n            if (data.err_type == \"i\"){\r\n                try {\r\n                    const selectEl = table.getSelectedId();\r\n                    table.remove(selectEl);\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                        err,\r\n                        logNameFile,\r\n                        \"wxi-trash => delData\"\r\n                    );\r\n                }\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"success\", \"Данные успешно удалены\");\r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\", data.err);\r\n            }\r\n        });\r\n\r\n        delData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n                err, \r\n                logNameFile,\r\n                \"wxi-trash => delElem\"\r\n            );\r\n        });\r\n    }\r\n\r\n  \r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__.popupExec)(\"Запись будет удалена\").then(function(res){\r\n\r\n        if (res){\r\n            delElem();\r\n        }\r\n  \r\n    });\r\n}\r\n\r\nfunction showPropBtn (cell){\r\n    const propertyElem = $$(\"propTableView\");\r\n\r\n    function hideViewTools(){\r\n        const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n        const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n        const secondaryBtnClass = \"webix-transparent-btn\";\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.hideItem($$(\"formsTools\"));\r\n\r\n        if (btnClass.classList.contains(primaryBtnClass)){\r\n            btnClass.classList.add(secondaryBtnClass);\r\n            btnClass.classList.remove(primaryBtnClass);\r\n        }\r\n    }\r\n\r\n    function createUrl(){\r\n        let url;\r\n        try{\r\n            const id      = cell.row;\r\n            const columns = $$(\"table-view\").getColumns();\r\n\r\n\r\n            columns.forEach(function(el,i){\r\n                if (el.id == cell.column){\r\n                    url           = el.src;\r\n                    let urlArgEnd = url.search(\"{\");\r\n                    url           = url.slice(0,urlArgEnd)+id+\".json\"; \r\n                }\r\n            });  \r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"wxi-angle-down => createUrl\");\r\n        }\r\n        return url;\r\n    }\r\n\r\n    function getProp(){\r\n        const url       = createUrl();\r\n        const getData   = webix.ajax(url);\r\n\r\n        getData.then(function(data){\r\n\r\n            data = data.json().content;\r\n            \r\n            function setProps(){\r\n                const arrayProperty = [];\r\n      \r\n                try{\r\n                    data.forEach(function(el,i){\r\n                        arrayProperty.push({\r\n                            type    :\"text\", \r\n                            id      :i+1,\r\n                            label   :el.name, \r\n                            value   :el.value\r\n                        });\r\n                    });\r\n\r\n                    propertyElem.define(\"elements\", arrayProperty);\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"wxi-angle-down => setProps\");\r\n                }\r\n            }\r\n            \r\n            function initSpace(){\r\n                hideViewTools();\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.showItem(propertyElem);\r\n            }\r\n\r\n\r\n            function resizeProp(){\r\n                try{\r\n                    if (propertyElem.config.width < 200){\r\n                        propertyElem.config.width = 200;\r\n                        propertyElem.resize();\r\n                    }\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err,logNameFile,\"wxi-angle-down => resizeProp\");\r\n                }\r\n            }\r\n\r\n            setProps();\r\n            initSpace();\r\n            resizeProp();\r\n\r\n        });\r\n\r\n        getData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(err, logNameFile,\"wxi-angle-down => getProp\");\r\n        });\r\n    }\r\n\r\n    if (!(propertyElem.isVisible()))   {\r\n        getProp();\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.hideItem(propertyElem);\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/btnsInTable.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/columnsWidth.js":
/*!*****************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/columnsWidth.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setColsWidthStorage\": () => (/* binding */ setColsWidthStorage)\n/* harmony export */ });\n/* harmony import */ var _userprefsPost_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userprefsPost.js */ \"./src/js/components/table/columnsSettings/userprefsPost.js\");\n\r\n\r\nfunction setColsWidthStorage(table){\r\n    table.attachEvent(\"onColumnResize\",function(id, newWidth, oldWidth, action){\r\n        if (action){\r\n           \r\n            const cols   = table.getColumns();\r\n            const values = [];\r\n\r\n            cols.forEach(function(el){\r\n\r\n                values.push({\r\n                    column  : el.id, \r\n                    position: table.getColumnIndex(el.id),\r\n                    width   : el.width.toFixed(2)\r\n                });\r\n            });\r\n            (0,_userprefsPost_js__WEBPACK_IMPORTED_MODULE_0__.postPrefsValues)(values);\r\n        }\r\n    });     \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/columnsWidth.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/userprefsPost.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/userprefsPost.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"postPrefsValues\": () => (/* binding */ postPrefsValues)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../blocks/storageSetting.js */ \"./src/js/blocks/storageSetting.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => columnsSettings => visibleCols => userprefsPost\";\r\n\r\nfunction setUpdateCols(sentVals){\r\n    const table   = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getTable)();\r\n    const columns = table.getColumns(true);\r\n    \r\n    function findUniqueCols(col){\r\n        let result = false;\r\n\r\n        sentVals.values.forEach(function(el){\r\n            if (el.column == col){\r\n                result = true;\r\n            }\r\n            \r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    function setVisibleState(){\r\n        try{\r\n            columns.forEach(function(el,i){\r\n                \r\n                if (findUniqueCols(el.id)){\r\n                    if( !( table.isColumnVisible(el.id) ) ){\r\n                        table.showColumn(el.id);\r\n                    }\r\n                 \r\n                } else {\r\n                    const colIndex = table.getColumnIndex(el.id);\r\n                    if(table.isColumnVisible(el.id) && colIndex !== -1){\r\n                        table.hideColumn(el.id);\r\n                    }\r\n                }\r\n            });\r\n\r\n \r\n        } catch(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"setUpdateCols => setVisibleState\"\r\n            );\r\n        }\r\n    }\r\n\r\n    function moveListItem(){\r\n        sentVals.values.forEach(function(el){\r\n            table.moveColumn(el.column, el.position);\r\n        });  \r\n    }\r\n\r\n    setVisibleState ();\r\n    moveListItem    ();\r\n\r\n}\r\n\r\n\r\nfunction setSize(sentVals){\r\n    const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getTable)();\r\n    function setColWidth(el){\r\n        table.eachColumn( \r\n            function (columnId){ \r\n                if (el.column == columnId){\r\n                    table.setColumnWidth(columnId,el.width);\r\n                }\r\n            },true\r\n        );\r\n    }\r\n\r\n    sentVals.values.forEach(function(el,i){\r\n\r\n        setColWidth(el);\r\n    });\r\n}\r\n\r\nasync function postPrefsValues(values, visCol = false){\r\n\r\n    let userData = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getUserDataStorage)();\r\n    \r\n    if (!userData){\r\n        await (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.pushUserDataStorage)();\r\n        userData = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getUserDataStorage)();\r\n    }\r\n   \r\n    const id            = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getItemId)();\r\n    const sentVals      = {\r\n        values       : values, \r\n        tableIdPrefs : id\r\n    };\r\n\r\n    const sentObj = {\r\n        name  : \"visibleColsPrefs_\" + id,\r\n        owner : userData.id,\r\n        prefs : sentVals,\r\n    };\r\n\r\n    function saveExistsTemplate(sentObj,idPutData){\r\n        const url     = \"/init/default/api/userprefs/\"+idPutData;\r\n        const putData = webix.ajax().put(url, sentObj);\r\n\r\n        putData.then(function(data){\r\n            data = data.json();\r\n             \r\n            if (data.err_type !== \"i\"){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\"error\",\"toolbarTable function saveExistsTemplate putData: \"+ data.err);\r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)   (\"success\",\"Рабочая область таблицы обновлена\");\r\n                (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_3__.setStorageData)(\"visibleColsPrefs_\"+id, JSON.stringify(sentObj.prefs));\r\n                setUpdateCols (sentVals);\r\n\r\n                if (visCol){\r\n                    setSize(sentVals);\r\n                }\r\n        \r\n              \r\n            }\r\n\r\n           \r\n        });\r\n\r\n        putData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n                err, \r\n                logNameFile,\r\n                \"saveExistsTemplate => putUserprefsData\"\r\n            );\r\n        });\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.destructItem($$(\"popupVisibleCols\"));\r\n    } \r\n\r\n    function saveNewTemplate(){\r\n      \r\n        const url     = \"/init/default/api/userprefs/\";\r\n        \r\n        const userprefsPost = webix.ajax().post(url, sentObj);\r\n        \r\n        userprefsPost.then(function(data){\r\n            data = data.json();\r\n \r\n            if (data.err_type !== \"i\"){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                    data.err,\r\n                    logNameFile,\r\n                    \"saveNewTemplate\"\r\n                );\r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)   (\"success\", \"Рабочая область таблицы обновлена\");\r\n                (0,_blocks_storageSetting_js__WEBPACK_IMPORTED_MODULE_3__.setStorageData)(\"visibleColsPrefs_\" + id, JSON.stringify(sentObj.prefs));\r\n                setUpdateCols (sentVals);\r\n            }\r\n        });\r\n\r\n        userprefsPost.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, logNameFile,\"saveTemplate\");\r\n        });\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.destructItem($$(\"popupVisibleCols\"));\r\n    }\r\n\r\n    function getUserprefsData(){\r\n      \r\n        const getData = webix.ajax().get(\"/init/default/api/userprefs\");\r\n        let settingExists = false;\r\n        let idPutData;\r\n    \r\n        getData.then(function(data){\r\n            data = data.json().content;\r\n            try{\r\n                data.forEach(function(el){\r\n                    \r\n                    if (el.name == \"visibleColsPrefs_\" + id && !settingExists){\r\n                        idPutData = el.id\r\n                        settingExists = true;\r\n                \r\n                    }\r\n                });\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"getUserprefsData getData\"\r\n                );\r\n            }\r\n        });\r\n\r\n        getData.then(function(){\r\n     \r\n            if (!settingExists){\r\n                saveNewTemplate();\r\n            } else {\r\n                saveExistsTemplate(sentObj,idPutData);\r\n            }\r\n        });\r\n\r\n\r\n        getData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, logNameFile,\"getUserprefsData\");\r\n        });\r\n\r\n        return settingExists;\r\n\r\n    }\r\n    getUserprefsData();\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/userprefsPost.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/visibleCols/_layout.js":
/*!************************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/visibleCols/_layout.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createPopup\": () => (/* binding */ createPopup)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n/* harmony import */ var _clearBtn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./clearBtn.js */ \"./src/js/components/table/columnsSettings/visibleCols/clearBtn.js\");\n/* harmony import */ var _moveBtns_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./moveBtns.js */ \"./src/js/components/table/columnsSettings/visibleCols/moveBtns.js\");\n/* harmony import */ var _serachInput_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./serachInput.js */ \"./src/js/components/table/columnsSettings/visibleCols/serachInput.js\");\n/* harmony import */ var _listMoveBtns_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./listMoveBtns.js */ \"./src/js/components/table/columnsSettings/visibleCols/listMoveBtns.js\");\n/* harmony import */ var _saveBtn_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./saveBtn.js */ \"./src/js/components/table/columnsSettings/visibleCols/saveBtn.js\");\n/* harmony import */ var _createLists_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./createLists.js */ \"./src/js/components/table/columnsSettings/visibleCols/createLists.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction genetateScrollView(idCheckboxes, inner){\r\n    return {\r\n        view        : \"scrollview\",\r\n        css         : \"webix_multivew-cell\",\r\n        borderless  : true,\r\n        scroll      : false,\r\n        body        : { \r\n            id  : idCheckboxes,\r\n            rows: inner\r\n        }\r\n    };\r\n}\r\n\r\nfunction returnContent(){\r\n    const content = { \r\n        cols:[\r\n            {   \r\n                rows:[\r\n                    (0,_serachInput_js__WEBPACK_IMPORTED_MODULE_3__.returnSearch)(),\r\n\r\n                    genetateScrollView(\r\n                        \"listContent\",\r\n                        (0,_createLists_js__WEBPACK_IMPORTED_MODULE_6__.returnAvailableList)()\r\n                    ),\r\n                ]\r\n            },\r\n\r\n            {width:10},\r\n            { rows:[\r\n                {height:45},\r\n                {},\r\n                (0,_listMoveBtns_js__WEBPACK_IMPORTED_MODULE_4__.returnListBtns)(),\r\n                {}\r\n            ]},\r\n            {width:10},\r\n\r\n            { rows:[\r\n            \r\n                {cols:[\r\n                    (0,_moveBtns_js__WEBPACK_IMPORTED_MODULE_2__.returnMoveBtns)(),\r\n                    (0,_clearBtn_js__WEBPACK_IMPORTED_MODULE_1__.returnClearBtn)(),\r\n                ]},\r\n                genetateScrollView(\r\n                    \"listSelectedContent\",\r\n                    (0,_createLists_js__WEBPACK_IMPORTED_MODULE_6__.returnSelectedList)()\r\n                ),\r\n            ]},\r\n        ]\r\n    };\r\n\r\n    return content;\r\n}\r\n\r\n\r\nfunction createPopup(){\r\n       \r\n    const popup = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_0__.Popup({\r\n        headline : \"Видимость колонок\",\r\n        config   : {\r\n            id          : \"popupVisibleCols\",\r\n            width       : 600,\r\n            maxHeight   : 400,\r\n        },\r\n     \r\n\r\n        elements : {\r\n            rows:[\r\n                returnContent(),\r\n\r\n                {height:20},\r\n\r\n                (0,_saveBtn_js__WEBPACK_IMPORTED_MODULE_5__.returnSaveBtn)(),\r\n            ]\r\n          \r\n        }\r\n    });\r\n\r\n    popup.createView ();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/visibleCols/_layout.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/visibleCols/clearBtn.js":
/*!*************************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/visibleCols/clearBtn.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnClearBtn\": () => (/* binding */ returnClearBtn)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _userprefsPost_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../userprefsPost.js */ \"./src/js/components/table/columnsSettings/userprefsPost.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet table;\r\nlet values;\r\nconst logNameFile = \"table => columnsSettings => visibleCols => clearBtn\";\r\n\r\n\r\nfunction returnContainer(){\r\n    const tableId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.getTable)().config.id;\r\n    if (tableId == \"table\"){\r\n        return $$(\"tableContainer\");\r\n    } else if (tableId == \"table-view\"){\r\n        return $$(\"formsContainer\");\r\n    }\r\n    \r\n}\r\n\r\nfunction setColsSize(col, listItems){\r\n    const container  = returnContainer();\r\n\r\n    const table      = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.getTable)();\r\n    const countCols  = listItems.length;\r\n    const scroll     = 17;\r\n    const tableWidth = container.$width - scroll;\r\n    const colWidth   = tableWidth / countCols;\r\n    table.setColumnWidth(col, colWidth);\r\n    table.setColumnWidth(\"action0\", 400);\r\n}\r\n\r\n\r\nfunction returnWidthCol(){\r\n    const scrollSpace    = 77;\r\n    const treeWidth      = $$(\"tree\").$width;\r\n    const containerWidth = window.innerWidth - treeWidth - scrollSpace; \r\n    const cols           = table.getColumns(true).length;\r\n    const colWidth       = containerWidth / cols;\r\n\r\n    return colWidth.toFixed(2);\r\n}\r\n\r\nfunction returnPosition(column){\r\n    let position;\r\n    const pull = table.data.pull[1];\r\n   \r\n    if (pull){\r\n        const defaultColsPosition = Object.keys(pull);\r\n        \r\n        defaultColsPosition.forEach(function(el, i){\r\n            if (el == column){\r\n                position = i;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    return position;\r\n}\r\n\r\nfunction showCols(){\r\n    const cols = table.getColumns(true);\r\n    try{\r\n        cols.forEach(function(el,i){\r\n            const colWidth    = returnWidthCol();\r\n            const positionCol = returnPosition(el.id);\r\n\r\n            setColsSize(el.id,cols);\r\n            \r\n            if( !( table.isColumnVisible(el.id) ) ){\r\n                table.showColumn(el.id);\r\n            }\r\n       \r\n            table.setColumnWidth(el.id, colWidth);\r\n\r\n            values.push({\r\n                column   : el.id,\r\n                position : positionCol,\r\n                width    : colWidth \r\n            });\r\n        });\r\n    } catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"clearBtnColsClick => showCols\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction clearBtnColsClick (){\r\n    table        = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.getTable)();\r\n\r\n    values = [];\r\n\r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_3__.modalBox)(\"Будут установлены стандартные настройки\", \r\n            \"Вы уверены?\", \r\n            [\"Отмена\", \"Сохранить изменения\"]\r\n    )\r\n    .then(function(result){\r\n\r\n        if (result == 1){\r\n            showCols();\r\n            (0,_userprefsPost_js__WEBPACK_IMPORTED_MODULE_5__.postPrefsValues)(values);\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.destructItem($$(\"popupVisibleCols\"));\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue) (\r\n                \"success\",\r\n                \"Рабочая область таблицы обновлена\"\r\n            );\r\n        }\r\n    });\r\n}\r\n\r\nfunction returnClearBtn(){\r\n    const clearBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n\r\n        config   : {\r\n            id       : \"clearBtnCols\",\r\n            hotkey   : \"Alt+Shift+R\",\r\n            icon     : \"icon-trash\",\r\n     \r\n            click    : function(){\r\n                clearBtnColsClick();\r\n            },\r\n        },\r\n        css            : \"webix-trash-btn-color\",\r\n        titleAttribute : \"Установить стандартные настройки\"\r\n       \r\n    }).transparentView();\r\n\r\n    return clearBtn;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/visibleCols/clearBtn.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/visibleCols/createLists.js":
/*!****************************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/visibleCols/createLists.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnAvailableList\": () => (/* binding */ returnAvailableList),\n/* harmony export */   \"returnSelectedList\": () => (/* binding */ returnSelectedList)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../viewTemplates/emptyTemplate.js */ \"./src/js/viewTemplates/emptyTemplate.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\nfunction generateEmptyTemplate(id, text){\r\n\r\n    const layout = {\r\n        css:\"list-filter-empty\",\r\n        rows:[\r\n            (0,_viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_0__.createEmptyTemplate)(text, id)\r\n        ]\r\n    };\r\n\r\n    return  layout;\r\n}\r\n\r\nfunction selectPrevItem(self, id){\r\n    \r\n    const prevItem =  self.getNextId(id);\r\n    if(prevItem){\r\n        self.select(prevItem);\r\n    }\r\n}\r\n\r\nfunction hideEmptyTemplate(self, id){\r\n    const pullLength = Object.keys(self.data.pull).length;\r\n    if (!pullLength){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem($$(id));\r\n    }\r\n}\r\nfunction returnAvailableList(){\r\n    const emptyElId = \"visibleColsEmptyTempalte\";\r\n    const scrollView = [\r\n        {   template    : \"Доступные колонки\", \r\n            css         : \"list-filter-headline\",\r\n            height      : 25, \r\n            borderless  : true\r\n        },\r\n        generateEmptyTemplate(\r\n            emptyElId,\r\n            \"Нет доступных колонок\"\r\n        ),\r\n\r\n        {\r\n            view      : \"list\", \r\n            id        : \"visibleList\",\r\n            template  : \"#label#\",\r\n            select    : true,\r\n            css       : \"list-filter-borders\",\r\n            borderless: true,\r\n            data      : [],\r\n            on        : {\r\n                onAfterAdd:function(){\r\n                    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem($$(\"addColsBtn\"));\r\n                    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem  ($$(emptyElId));\r\n                },\r\n                onAfterDelete:function(id){\r\n                    hideEmptyTemplate(this, emptyElId);\r\n                    selectPrevItem   (this, id);\r\n                },\r\n            }\r\n        }\r\n        \r\n    ];\r\n\r\n    return scrollView;\r\n}\r\n\r\n\r\nfunction returnSelectedList(){\r\n    const emptyElId = \"visibleColsEmptyTempalteSelected\";\r\n    const scrollViewSelected = [\r\n        {   template    : \"Выбранные колонки\",\r\n            css         : \"list-filter-headline\",\r\n            height      : 25, \r\n            borderless  : true,\r\n         \r\n        },\r\n        generateEmptyTemplate(\r\n            emptyElId,\r\n            \"Выберите колонки из доступных\"\r\n        ),\r\n\r\n        {\r\n            view      : \"list\", \r\n            id        : \"visibleListSelected\",\r\n            template  : \"#label#\",\r\n            css       : \"list-filter-borders\",\r\n            select    : true,\r\n            borderless: true,\r\n            data      : [],\r\n            on        : {\r\n                onAfterAdd : function(){\r\n                    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem($$(\"removeColsBtn\"));\r\n                    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem  ($$(emptyElId));\r\n                },\r\n                onAfterDelete : function(id){\r\n                    hideEmptyTemplate(this, emptyElId);\r\n                    selectPrevItem   (this, id);\r\n                },\r\n            \r\n            }\r\n        }\r\n\r\n    ];\r\n\r\n    return scrollViewSelected;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/visibleCols/createLists.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/visibleCols/listMoveBtns.js":
/*!*****************************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/visibleCols/listMoveBtns.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnListBtns\": () => (/* binding */ returnListBtns)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\nfunction createMsg(){\r\n    if(!($$(\"visibleColsMsg\")) ){\r\n        webix.message({\r\n            id:\"visibleColsMsg\",\r\n            type:\"debug\", \r\n            text:\"Элемент не выбран\",\r\n        });\r\n    }\r\n}\r\n\r\n\r\nlet list;\r\nlet listSelect;\r\n\r\nfunction findPullLength(listName){\r\n    return Object.keys(listName.data.pull).length;\r\n}\r\n\r\nfunction listActions(type){\r\n\r\n    const currList  = \r\n    type == \"available\" ? list       : listSelect;\r\n\r\n    const otherList = \r\n    type == \"available\" ? listSelect : list;\r\n\r\n    const btn = $$(\"visibleColsSubmit\");\r\n    \r\n    const selectedItem  = currList.getSelectedItem();\r\n    const selectedId    = currList.getSelectedId  ();\r\n\r\n    if (selectedItem){\r\n   \r\n        otherList.add   (selectedItem);\r\n        currList .remove(selectedId);\r\n\r\n        if (type == \"available\"){\r\n            const pullLength = findPullLength(otherList);\r\n            if (!pullLength){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.disableItem(btn);\r\n            } else {\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem (btn); \r\n            }\r\n        } else {\r\n            const pullLength = findPullLength(currList);\r\n            if (!pullLength){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.disableItem(btn);\r\n            }\r\n        }\r\n\r\n    } else {\r\n        createMsg();\r\n    }\r\n}\r\n\r\n\r\nfunction colsPopupSelect(action){\r\n    list                  = $$(\"visibleList\");\r\n    listSelect            = $$(\"visibleListSelected\");\r\n\r\n    if ( action == \"add\"){\r\n        listActions(\"available\");\r\n\r\n    } else if ( action == \"remove\" ){\r\n        listActions(\"selected\");\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction returnListBtns(){\r\n    const addColsBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n\r\n        config   : {\r\n            id       : \"addColsBtn\",\r\n            hotkey   : \"Shift+A\",\r\n            icon     : \"icon-arrow-right\",\r\n            disabled : true,\r\n            click    : function(){\r\n                colsPopupSelect(\"add\");\r\n            },\r\n        },\r\n        titleAttribute : \"Добавить выбранные колонки\"\r\n       \r\n    }).transparentView();\r\n\r\n    const removeColsBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n\r\n        config   : {\r\n            id       : \"removeColsBtn\",\r\n            hotkey   : \"Shift+D\",\r\n            icon     : \"icon-arrow-left\",\r\n            disabled : true,\r\n            click    : function(){\r\n                colsPopupSelect(\"remove\");\r\n            },\r\n        },\r\n        titleAttribute : \"Убрать выбранные колонки\"\r\n       \r\n    }).transparentView();\r\n\r\n    const moveBtns = {\r\n        rows:[\r\n            addColsBtn,\r\n            removeColsBtn,\r\n        ]\r\n    };\r\n\r\n    return moveBtns;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/visibleCols/listMoveBtns.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/visibleCols/moveBtns.js":
/*!*************************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/visibleCols/moveBtns.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnMoveBtns\": () => (/* binding */ returnMoveBtns)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\nfunction setBtnSubmitState(state){\r\n    const btnSubmit  = $$(\"visibleColsSubmit\");\r\n    const check      = btnSubmit.isEnabled();\r\n\r\n    if (state == \"enable\" && !(check) ){\r\n        btnSubmit.enable();\r\n    } else if ( state == \"disable\" && check ){\r\n        btnSubmit.disable();\r\n    }\r\n}\r\n\r\nfunction createMsg(){\r\n    if(!($$(\"visibleColsMsg\")) ){\r\n        webix.message({\r\n            id:\"visibleColsMsg\",\r\n            type:\"debug\", \r\n            text:\"Элемент не выбран\",\r\n        });\r\n    }\r\n}\r\n\r\n\r\nfunction colsMove(action){\r\n    const list        = $$(\"visibleListSelected\");\r\n    const listElement = list.getSelectedId();\r\n\r\n    if( listElement ){\r\n        if (action == \"up\"){\r\n            list.moveUp(listElement,1);\r\n            setBtnSubmitState(\"enable\");\r\n        } else if (action == \"down\"){\r\n            list.moveDown(listElement,1);\r\n            setBtnSubmitState(\"enable\");\r\n        }   \r\n    } else {\r\n        createMsg();\r\n    }\r\n}\r\n\r\n\r\nfunction returnMoveBtns(){\r\n\r\n    const moveUpBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n\r\n        config   : {\r\n            id       : \"moveSelctedUp\",\r\n            hotkey   : \"Shift+U\",\r\n            icon     : \"icon-arrow-up\",\r\n            click   : function(){\r\n                colsMove(\"up\");\r\n            },\r\n        },\r\n\r\n        titleAttribute : \"Поднять выбраную колонку вверх\"\r\n       \r\n    }).transparentView(); \r\n\r\n    const moveDownBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n\r\n        config   : {\r\n            id       : \"moveSelctedDown\",\r\n            hotkey   : \"Shift+W\",\r\n            icon     : \"icon-arrow-down\",\r\n            click   : function(){\r\n                colsMove(\"down\");\r\n            },\r\n        },\r\n\r\n        titleAttribute : \"Опустить выбраную колонку вниз\"\r\n       \r\n    }).transparentView(); \r\n\r\n    const moveSelcted =  {\r\n        cols : [\r\n            moveUpBtn,\r\n            moveDownBtn,\r\n            {},\r\n        ]\r\n    };\r\n\r\n    return moveSelcted;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/visibleCols/moveBtns.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/visibleCols/saveBtn.js":
/*!************************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/visibleCols/saveBtn.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnSaveBtn\": () => (/* binding */ returnSaveBtn)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _userprefsPost_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../userprefsPost.js */ \"./src/js/components/table/columnsSettings/userprefsPost.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => columnsSettings => visibleCols => saveBtn\";\r\n\r\nfunction visibleColsSubmitClick (){\r\n\r\n    const list      = $$(\"visibleListSelected\");\r\n    const listPull  = list.data.pull;\r\n    const listItems = Object.values(listPull);\r\n    const values    = [];\r\n    const table     = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getTable)();\r\n\r\n    const containerWidth = window.innerWidth - $$(\"tree\").$width - 77; \r\n\r\n    function returnMinSize(){\r\n        const allCols = table.getColumns(true).length;\r\n        const width  = containerWidth / allCols;\r\n\r\n        return width.toFixed(2);\r\n    }\r\n\r\n    function setLastColWidth(lastColumn,widthCols){\r\n        const sumWidth       = widthCols.reduce((a, b) => a + b, 0);\r\n\r\n\r\n        let widthLastCol   =  containerWidth - sumWidth;\r\n\r\n        if (widthLastCol < 50){\r\n            widthLastCol = returnMinSize();\r\n        }\r\n\r\n        lastColumn.width = Number(widthLastCol);\r\n\r\n        values.push(lastColumn); \r\n    }\r\n\r\n\r\n    try{\r\n        const widthCols = [];\r\n        const lastColumn = {};\r\n \r\n        \r\n        listItems.forEach(function(el,i){\r\n            const positionElem = list.getIndexById(el.id);\r\n            const lastCol      = list.getLastId();\r\n         \r\n            let colWidth;\r\n\r\n            if ( el.id !== lastCol){\r\n                colWidth = table.getColumnConfig(el.column).width;\r\n              \r\n                if ( colWidth >= containerWidth ){\r\n                    colWidth = returnMinSize();\r\n                }\r\n            \r\n                widthCols.push(colWidth);\r\n           \r\n                values.push({\r\n                    column   : el.column, \r\n                    position : positionElem,\r\n                    width    : Number(colWidth)\r\n                });\r\n            } else {\r\n                lastColumn.column   = el.column;\r\n                lastColumn.position = positionElem;\r\n            } \r\n \r\n      \r\n\r\n        });\r\n        setLastColWidth(lastColumn,widthCols);\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"visibleColsSubmitClick\"\r\n        );\r\n    }\r\n\r\n    (0,_userprefsPost_js__WEBPACK_IMPORTED_MODULE_2__.postPrefsValues)(values,true);\r\n\r\n}\r\n\r\nfunction returnSaveBtn(){\r\n    const btnSaveState = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n\r\n        config   : {\r\n            id       : \"visibleColsSubmit\",\r\n            hotkey   : \"Shift+S\",\r\n            disabled : true,\r\n            value    : \"Сохранить состояние\", \r\n            click    : function(){\r\n                visibleColsSubmitClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Изменить отображение колонок в таблице\"\r\n    \r\n       \r\n    }).maxView(\"primary\");\r\n\r\n    return btnSaveState;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/visibleCols/saveBtn.js?");

/***/ }),

/***/ "./src/js/components/table/columnsSettings/visibleCols/serachInput.js":
/*!****************************************************************************!*\
  !*** ./src/js/components/table/columnsSettings/visibleCols/serachInput.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnSearch\": () => (/* binding */ returnSearch)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => columnsSettings => visibleCols => searchInput\";\r\n\r\nfunction searchColsListPress (){\r\n    const list       = $$(\"visibleList\");\r\n    const search     = $$(\"searchColsList\");\r\n    const value      = search.getValue().toLowerCase();\r\n    const emptyTempl = $$(\"visibleColsEmptyTempalte\");\r\n    let counter      = 0;\r\n    try{\r\n    \r\n        list.filter(function(obj){\r\n            const condition = obj.label.toLowerCase().indexOf(value) !== -1;\r\n\r\n            if (condition){\r\n                counter ++;\r\n            }\r\n    \r\n            return condition;\r\n        });\r\n\r\n        if (counter == 0){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem(emptyTempl);\r\n        } else {\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(emptyTempl);\r\n        }\r\n      \r\n    } catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"searchColsListPress\"\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction returnSearch(){\r\n    const search = {   \r\n        view        : \"search\", \r\n        id          : \"searchColsList\",\r\n        placeholder : \"Поиск (Alt+Shift+F)\", \r\n        css         : \"searchTable\",\r\n        height      : 42, \r\n        hotkey      : \"alt+shift+f\", \r\n        on          : {\r\n            onTimedKeyPress : function(){\r\n                searchColsListPress();\r\n            }\r\n        }\r\n    };\r\n\r\n    return search;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/columnsSettings/visibleCols/serachInput.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/cols/columnsWidth.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/createSpace/cols/columnsWidth.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setUserPrefs\": () => (/* binding */ setUserPrefs)\n/* harmony export */ });\nlet table; \r\nlet idsParam;\r\nlet storageData;\r\n\r\n\r\nfunction setColsUserSize(){\r\n    const sumWidth = [];\r\n    storageData.values.forEach(function (el){\r\n        sumWidth.push(el.width);\r\n        table.setColumnWidth(el.column, el.width);\r\n    }); \r\n\r\n    return sumWidth;  \r\n}\r\n\r\nfunction returnSumWidth(){\r\n    let sumWidth;\r\n\r\n    if ( storageData && storageData.values.length ){\r\n        sumWidth = setColsUserSize();  \r\n    }\r\n\r\n    return sumWidth;\r\n}\r\n\r\nfunction returnCountCols(){\r\n    let countCols;\r\n\r\n    if(storageData && storageData.values.length){\r\n        countCols  =  length;\r\n    } else {\r\n        const cols = table.getColumns(true);\r\n        countCols  = cols .length;\r\n    }\r\n    return countCols;\r\n}\r\n\r\nfunction returnContainerWidth(){\r\n    let containerWidth;\r\n\r\n    containerWidth = window.innerWidth - $$(\"tree\").$width - 25;\r\n\r\n    return containerWidth;\r\n}\r\n\r\nfunction setColsSize(col){\r\n    const countCols      = returnCountCols();\r\n    const containerWidth = returnContainerWidth();\r\n\r\n    const tableWidth     = containerWidth - 17;  \r\n    const colWidth       = tableWidth / countCols;\r\n\r\n\r\n    table.setColumnWidth(col, colWidth);\r\n}\r\n\r\n\r\nfunction findUniqueCols(col){\r\n    let result = false;\r\n\r\n    storageData.values.forEach(function(el){\r\n\r\n        if (el.column == col){\r\n            result = true;\r\n        }\r\n\r\n    });\r\n    return result;\r\n}\r\n\r\n\r\nfunction getSumStorageColumns(){\r\n    const sumWidth       = returnSumWidth();\r\n    return sumWidth.reduce((a, b) => +a + +b, 0);\r\n}\r\n\r\nfunction getContainerWidth(){\r\n    const tableWidth  = $$(\"tree\").$width;\r\n    const screenWidth = window.innerWidth;\r\n    return screenWidth - tableWidth;\r\n}\r\n\r\nfunction getLastColumn(){\r\n    const cols       = table.getColumns();\r\n    const lastColId  = cols.length - 1;\r\n    return cols[lastColId];\r\n}\r\n\r\n\r\nfunction setWidthLastCol(){\r\n    const reduce         = getSumStorageColumns();\r\n    const containerWidth = getContainerWidth();  \r\n\r\n    if (reduce < containerWidth){\r\n        const lastCol    = getLastColumn();\r\n        const difference = containerWidth - reduce;\r\n        const oldWidth   = lastCol.width;\r\n        const newWidth   = oldWidth + difference;\r\n\r\n        table.setColumnWidth(lastCol.id, newWidth);\r\n        \r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction setVisibleCols(allCols){\r\n\r\n    allCols.forEach(function(el,i){\r\n\r\n        if (findUniqueCols(el.id)){\r\n            if( !( table.isColumnVisible(el.id) ) ){\r\n                table.showColumn(el.id);\r\n            }\r\n        } else {\r\n            const colIndex = table.getColumnIndex(el.id);\r\n            if(table.isColumnVisible(el.id) && colIndex !== -1){\r\n                table.hideColumn(el.id);\r\n            }\r\n        }\r\n            \r\n    });\r\n}\r\n\r\n\r\nfunction setPositionCols(){\r\n    storageData.values.forEach(function(el){\r\n        table.moveColumn(el.column,el.position);\r\n            \r\n    });\r\n} \r\n\r\nfunction setUserPrefs(idTable, ids){\r\n    table       = idTable;\r\n    idsParam    = ids;\r\n\r\n    const prefsName = \"visibleColsPrefs_\" + idsParam;\r\n\r\n    storageData   = webix.storage.local.get(prefsName);\r\n\r\n    const allCols = table.getColumns       (true);\r\n \r\n   \r\n    if( storageData && storageData.values.length ){\r\n        setVisibleCols (allCols);\r\n        setPositionCols();\r\n        setWidthLastCol();\r\n\r\n    } else {   \r\n   \r\n        allCols.forEach(function(el){\r\n            setColsSize(el.id);  \r\n        });\r\n       \r\n    }\r\n\r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/cols/columnsWidth.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/cols/createCols.js":
/*!****************************************************************!*\
  !*** ./src/js/components/table/createSpace/cols/createCols.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createTableCols\": () => (/* binding */ createTableCols)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _columnsWidth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./columnsWidth.js */ \"./src/js/components/table/createSpace/cols/columnsWidth.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => createSpace => cols => createCols\";\r\n\r\nlet table;\r\nlet field;\r\n\r\nfunction refreshCols(columnsData){\r\n    if(table){\r\n        table.refreshColumns(columnsData);\r\n    }\r\n}\r\n\r\n\r\nfunction createReferenceCol (){\r\n    try{\r\n        \r\n        const findTableId= field.type.slice(10);\r\n        field.editor     = \"combo\";\r\n        field.sort       = \"int\";\r\n        field.collection = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getComboOptions) (findTableId);\r\n        field.template   = function(obj, common, val, config){\r\n            const itemId = obj[config.id];\r\n            const item   = config.collection.getItem(itemId);\r\n            return item ? item.value : \"\";\r\n        };\r\n    }catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createReferenceCol\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction createDatetimeCol  (){\r\n    try{\r\n        field.format = \r\n        webix.Date.dateToStr(\"%d.%m.%Y %H:%i:%s\");\r\n        field.editor = \"date\";\r\n        field.sort   = \"date\";\r\n        field.css    = {\"text-align\":\"right\"};\r\n    }catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createDatetimeCol\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction createTextCol      (){\r\n    try{\r\n        field.editor = \"text\";\r\n        field.sort   = \"string\";\r\n    }catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"createTextCol\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction createIntegerCol   (){\r\n    try{\r\n        field.editor         = \"text\";\r\n        field.sort           = \"int\";\r\n        field.numberFormat   = \"1 111\";\r\n        field.css            = {\"text-align\":\"right\"};\r\n        \r\n    }catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"createIntegerCol\"\r\n        );\r\n    }\r\n}\r\nfunction createBoolCol      (){\r\n    try{\r\n        field.editor     = \"combo\";\r\n        field.sort       = \"text\";\r\n        field.collection = [\r\n            {id : 1, value : \"Да\" },\r\n            {id : 2, value : \"Нет\"}\r\n        ];\r\n    }catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"createBoolCol\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setIdCol       (data){\r\n    field.id = data;\r\n}\r\n\r\nfunction setFillCol     (dataFields){\r\n    const values      = Object.values(dataFields);\r\n    const length      = values.length;\r\n    const scrollWidth = 17;\r\n    const containerWidth = $$(\"tableContainer\").$width;\r\n    const tableWidth  = containerWidth - scrollWidth;\r\n    const colWidth    = tableWidth / length;\r\n\r\n    field.width  = colWidth;\r\n}\r\n\r\n\r\nfunction setHeaderCol   (){\r\n    field.header = field[\"label\"];\r\n}\r\n\r\nfunction userPrefsId    (){\r\n    const setting = \r\n    webix.storage.local.get(\"userprefsOtherForm\");\r\n\r\n    if( setting && setting.visibleIdOpt == \"2\" ){\r\n        field.hidden = true;\r\n    }\r\n}  \r\n\r\n\r\nfunction createField(type){\r\n\r\n    if (type.includes(\"reference\")){\r\n        createReferenceCol();\r\n\r\n    } else if ( type == \"datetime\"){\r\n        createDatetimeCol ();\r\n\r\n    } else if ( type == \"boolean\"){\r\n        createBoolCol     ();\r\n\r\n    } else if ( type == \"integer\" || \r\n                type == \"id\")\r\n    {\r\n        createIntegerCol  ();\r\n\r\n    } else {\r\n        createTextCol     ();\r\n    }   \r\n}\r\n\r\nfunction createTableCols (idsParam, idCurrTable){\r\n  \r\n    const data          = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.item(idsParam);\r\n    const dataFields    = data.fields;\r\n    const colsName      = Object.keys(data.fields);\r\n    const columnsData   = [];\r\n    \r\n    table               = $$(idCurrTable);\r\n\r\n    try{\r\n        colsName.forEach(function(data) {\r\n            field = dataFields[data]; \r\n         \r\n            createField(field.type);\r\n\r\n            setIdCol    (data);\r\n            setFillCol  (dataFields);\r\n            setHeaderCol();\r\n            \r\n            if(field.id == \"id\"){\r\n                userPrefsId();\r\n            }\r\n           \r\n            if (field.label){\r\n                columnsData.push(field);\r\n            }\r\n\r\n        });\r\n\r\n        refreshCols(columnsData);\r\n        (0,_columnsWidth_js__WEBPACK_IMPORTED_MODULE_3__.setUserPrefs)(table, idsParam);\r\n\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createTableCols\"\r\n        );\r\n    }\r\n\r\n\r\n    return columnsData;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/cols/createCols.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/cols/detailAction.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/createSpace/cols/detailAction.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDetailAction\": () => (/* binding */ createDetailAction)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n\r\n\r\nfunction createDetailAction (columnsData, idsParam, idCurrTable){\r\n    let idCol;\r\n    let actionKey;\r\n    let checkAction     = false;\r\n\r\n    const data          = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.item(idsParam);\r\n    const table         = $$(idCurrTable);\r\n\r\n    columnsData.forEach(function(field, i){\r\n        if( field.type  == \"action\" && data.actions[field.id].rtype == \"detail\"){\r\n            checkAction = true;\r\n            idCol       = i;\r\n            actionKey   = field.id;\r\n        } \r\n    });\r\n    \r\n    if (actionKey !== undefined){\r\n        const urlFieldAction = data.actions[actionKey].url;\r\n    \r\n        if (checkAction){\r\n            const columns = table.config.columns;\r\n            columns.splice(0, 0, { \r\n                id      :\"action-first\" + idCol, \r\n                maxWidth:130, \r\n                src     :urlFieldAction, \r\n                css     :\"action-column\",\r\n                label   :\"Подробнее\",\r\n                header  :\"Подробнее\", \r\n                template:\"<span class='webix_icon wxi-angle-down'></span> \"\r\n            });\r\n\r\n            table.refreshColumns();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/cols/detailAction.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/cols/dynamicElements/buttonLogic.js":
/*!*********************************************************************************!*\
  !*** ./src/js/components/table/createSpace/cols/dynamicElements/buttonLogic.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"submitBtn\": () => (/* binding */ submitBtn)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\nconst logNameFile = \r\n\"table => createSpace => dynamicElements => buttonLogic\";\r\n\r\nlet idElements;\r\nlet url;\r\nlet verb;\r\nlet rtype;\r\n\r\nconst valuesArray = [];\r\n\r\nfunction createQueryRefresh(){\r\n    try{\r\n        idElements.forEach((el) => {\r\n            const val = $$(el.id).getValue();\r\n            \r\n            if (el.id.includes(\"customCombo\")){\r\n                const textVal = $$(el.id).getText();\r\n\r\n                valuesArray.push (el.name + \"=\" + textVal);\r\n\r\n            } else if ( el.id.includes(\"customInputs\")     || \r\n                        el.id.includes(\"customDatepicker\") )\r\n            {\r\n                valuesArray.push ( el.name + \"=\" + val );\r\n\r\n            }   \r\n        });\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createQueryRefresh\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setTableState(tableView, data){\r\n    const noneMsg = \"Ничего не найдено\";\r\n    try{\r\n        tableView.clearAll();\r\n  \r\n        if (data.length !== 0){\r\n            tableView.hideOverlay(noneMsg);\r\n            tableView.parse(data);\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Данные обновлены\");\r\n\r\n        } else {\r\n            tableView.showOverlay(noneMsg);\r\n\r\n        }\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setTableState\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setTableCounter(tableView){\r\n    try{\r\n        const findElementView = $$(\"table-view-findElements\");\r\n        const prevCountRows   = tableView.count().toString();\r\n\r\n        findElementView.setValues(prevCountRows);\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"setTableCounter\");\r\n    }\r\n}\r\n\r\nfunction refreshButton(){\r\n    createQueryRefresh();\r\n    const path    = url + \"?\" + valuesArray.join(\"&\");\r\n    const getData = webix.ajax(path);\r\n    \r\n    getData.then(function(data){\r\n        const tableView = $$(\"table-view\");\r\n        data            = data.json().content;\r\n  \r\n        if (data.json().err_type == \"i\"){\r\n            setTableState   (tableView, data);\r\n            setTableCounter (tableView);\r\n\r\n        } else {\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                data.err, \r\n                logNameFile, \r\n                \"refreshButton\"\r\n            );\r\n        }\r\n    });\r\n\r\n    getData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"refreshButton\"\r\n        );\r\n    });\r\n}\r\n\r\nfunction downloadButton(){\r\n\r\n    webix.ajax().response(\"blob\").get(url, function(text, blob, xhr) {\r\n        try {\r\n            webix.html.download(blob, \"table.docx\");\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                err, \r\n                logNameFile, \r\n                \"downloadButton\"\r\n            );\r\n        } \r\n    }).catch(err => {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"downloadButton\"\r\n        );\r\n    });\r\n}\r\n\r\n\r\nasync function uploadData(formData, link){\r\n    fetch(link, {\r\n        method  : \"POST\", \r\n        body    : formData\r\n    })  \r\n\r\n    .then(( response ) => response.json())\r\n    .then(function( data ){\r\n        const loadEl = $$(\"templateLoad\");\r\n\r\n        if ( data.err_type == \"i\" ){\r\n            loadEl.setValues( \"Файл загружен\" );\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"success\",\r\n                \"Файл успешно загружен\"\r\n            );\r\n\r\n        } else {\r\n            loadEl.setValues( \"Ошибка\" );\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)     ( \"error\", data.err );\r\n        }\r\n    })\r\n    \r\n    .catch(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"uploadData\"\r\n        );\r\n    });\r\n\r\n}\r\n\r\nfunction addLoadEl(container){\r\n    container.addView({\r\n        id:\"templateLoad\",\r\n        template: function(){\r\n            const value      = $$(\"templateLoad\").getValues();\r\n            const valsLength = Object.keys( value ).length;\r\n\r\n            if ( valsLength !==0 ){\r\n                return value;\r\n            } else {\r\n                return \"Загрузка ...\";\r\n            }\r\n        },\r\n        borderless:true,\r\n    });\r\n}\r\n\r\nfunction postButton(){\r\n    try{\r\n   \r\n        idElements.forEach((el,i) => {\r\n            if (el.id.includes(\"customUploader\")){\r\n                const tablePull = $$(el.id).files.data.pull;\r\n                const value     = Object.values(tablePull)[0];\r\n                const link      = $$(el.id).config.upload;\r\n\r\n                let formData = new FormData();  \r\n                let container = $$(el.id).getParentView();\r\n                addLoadEl(container);\r\n\r\n                formData.append(\"file\", value.file);\r\n\r\n                uploadData(formData, link);\r\n               \r\n            }\r\n        });\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"postButton\");\r\n    } \r\n}\r\n\r\n\r\nfunction submitBtn (id, path, action, type){\r\n\r\n    idElements = id;\r\n    url        = path;\r\n    verb       = action;\r\n    rtype      = type;\r\n\r\n    valuesArray.length = 0;\r\n\r\n    if (verb==\"get\"){ \r\n        if(rtype==\"refresh\"){\r\n            refreshButton();\r\n        } else if (rtype==\"download\"){\r\n            downloadButton();\r\n        } \r\n    } else if (verb==\"post\"){\r\n        postButton();\r\n    } \r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/cols/dynamicElements/buttonLogic.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/cols/dynamicElements/createElements.js":
/*!************************************************************************************!*\
  !*** ./src/js/components/table/createSpace/cols/dynamicElements/createElements.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDynamicElems\": () => (/* binding */ createDynamicElems)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _createInputs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./createInputs.js */ \"./src/js/components/table/createSpace/cols/dynamicElements/createInputs.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => createSpace => dynamicElements => createElements\";\r\n\r\nlet data; \r\nlet idCurrTable;\r\nlet idsParam;\r\n\r\nlet btnClass;\r\nlet formResizer;\r\nlet tools;\r\n\r\nlet secondaryBtnClass = \"webix-transparent-btn\";\r\nlet primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n\r\n\r\nfunction maxInputsSize (customInputs){\r\n\r\n    const inpObj = {\r\n        id      : \"customInputs\",\r\n        css     : \"webix_custom-inp\", \r\n        rows    : [\r\n            { height : 20 },\r\n            { rows   : customInputs }\r\n        ],\r\n    };\r\n\r\n       \r\n    try{\r\n        $$(\"viewToolsContainer\").addView(inpObj, 0);\r\n    \r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"maxInputsSize\");\r\n    } \r\n    \r\n\r\n}\r\n\r\nfunction toolMinAdaptive(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem($$(\"formsContainer\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem($$(\"tree\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem($$(\"table-backFormsBtnFilter\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(formResizer);\r\n\r\n    tools.config.width = window.innerWidth - 45;\r\n    tools.resize();\r\n}\r\n\r\n\r\nfunction toolMaxAdaptive(){\r\n    const formsTools = $$(\"viewTools\");\r\n\r\n    btnClass = document.querySelector(\".webix_btn-filter\");\r\n    \r\n    if (btnClass.classList.contains(primaryBtnClass)){\r\n\r\n        btnClass.classList.add   (secondaryBtnClass);\r\n        btnClass.classList.remove(primaryBtnClass);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(tools);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(formResizer);\r\n        \r\n\r\n    } else if (btnClass.classList.contains(secondaryBtnClass)){\r\n\r\n        btnClass.classList.add   (primaryBtnClass);\r\n        btnClass.classList.remove(secondaryBtnClass);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(tools);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(formResizer);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(formsTools);\r\n    }\r\n}\r\n\r\nfunction setStateTool(){\r\n\r\n   \r\n    formResizer         = $$(\"formsTools-resizer\");\r\n    const contaierWidth = $$(\"container\").$width;\r\n\r\n    if(!(btnClass.classList.contains(secondaryBtnClass))){\r\n   \r\n        if (contaierWidth < 850  ){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem($$(\"tree\"));\r\n            if (contaierWidth  < 850 ){\r\n                toolMinAdaptive();\r\n            }\r\n        } else {\r\n     \r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem($$(\"table-backFormsBtnFilter\"));\r\n            tools.config.width = 350;\r\n            tools.resize();\r\n        }\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(formResizer);\r\n\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(tools);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(formResizer);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem($$(\"table-backFormsBtnFilter\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem($$(\"formsContainer\"));\r\n    }\r\n}\r\n\r\nfunction viewToolsBtnClick(){\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem($$(\"propTableView\"));\r\n\r\n    toolMaxAdaptive();\r\n\r\n    setStateTool   ();\r\n\r\n}\r\n\r\nfunction adaptiveCustomInputs (){\r\n    \r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem($$(\"contextActionsBtn\"));\r\n\r\n    const viewToolsBtn  = $$(\"viewToolsBtn\");\r\n    tools               = $$(\"formsTools\");\r\n\r\n    if (data.inputs){  \r\n   \r\n        const customInputs  = (0,_createInputs_js__WEBPACK_IMPORTED_MODULE_4__.generateCustomInputs) (data, idCurrTable);\r\n        const filterBar     = $$(\"table-view-filterId\").getParentView();\r\n\r\n        const btnTools = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n            config   : {\r\n                id       : \"viewToolsBtn\",\r\n                hotkey   : \"Ctrl+Shift+G\",\r\n                icon     : \"icon-filter\",\r\n                click    : function(){\r\n                    viewToolsBtnClick();\r\n                },\r\n            },\r\n            css            :  \"webix_btn-filter\",\r\n            titleAttribute : \"Показать/скрыть фильтры доступные дейсвтия\"\r\n        \r\n           \r\n        }).transparentView();\r\n\r\n        \r\n        if( !viewToolsBtn ){\r\n            filterBar.addView( btnTools, 2 );\r\n        } else {\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem  (viewToolsBtn);\r\n        }\r\n\r\n        maxInputsSize  ( customInputs );\r\n\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(tools);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem(viewToolsBtn);\r\n      \r\n    }\r\n}\r\n\r\nfunction createDynamicElems (id, ids){\r\n    idCurrTable = id;\r\n    idsParam    = ids;\r\n    data        = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.item(idsParam);  \r\n \r\n    adaptiveCustomInputs ();\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/cols/dynamicElements/createElements.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/cols/dynamicElements/createInputs.js":
/*!**********************************************************************************!*\
  !*** ./src/js/components/table/createSpace/cols/dynamicElements/createInputs.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"generateCustomInputs\": () => (/* binding */ generateCustomInputs)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _buttonLogic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buttonLogic.js */ \"./src/js/components/table/createSpace/cols/dynamicElements/buttonLogic.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => createSpace => dynamicElements => createInputs\";\r\n\r\nlet data; \r\nlet idCurrTable;\r\nlet field; \r\nlet dataInputsArray;\r\n\r\n\r\nfunction setAdaptiveWidth(elem){\r\n\r\n    const child       = elem.getNode().firstElementChild;\r\n    child.style.width = elem.$width + \"px\";\r\n\r\n    const inp         = elem.getInputNode();\r\n    inp.style.width   = elem.$width - 5 + \"px\";\r\n}\r\n\r\nfunction createTextInput    (i){\r\n    return {   \r\n        view            : \"text\",\r\n        placeholder     : field.label, \r\n        id              : \"customInputs\" + i,\r\n        height          : 48,\r\n        labelPosition   : \"top\",\r\n        on              : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute(\"title\", field.comment);\r\n                setAdaptiveWidth(this);\r\n            },\r\n            onChange:function(){\r\n                const inputs = $$(\"customInputs\").getChildViews();\r\n\r\n                inputs.forEach(function(el){\r\n                    const view = el.config.view;\r\n                    const btn  = $$(el.config.id);\r\n\r\n                    if (view == \"button\"){\r\n                        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem(btn);\r\n                    }\r\n                });\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getOptionData      (){\r\n    const url = \"/init/default/api/\" + field.apiname;\r\n\r\n    return new webix.DataCollection({url:{\r\n        $proxy:true,\r\n        load: function(){\r\n            return ( webix.ajax().get(url).then(function (data) {   \r\n                    \r\n                const dataSrc     = data.json().content;\r\n                const dataOptions = [];\r\n                let optionElement;\r\n\r\n   \r\n\r\n                function dataTemplate(i,valueElem){\r\n                const template = { \r\n                        id    : i + 1, \r\n                        value : valueElem\r\n                    };\r\n                return template;\r\n                }\r\n\r\n      \r\n                function createOptions(){\r\n              \r\n                    try{\r\n                        dataSrc.forEach(function(data, i) {\r\n                            const name = dataSrc[0].name;\r\n                            const title = name ? name : data;\r\n                            optionElement = dataTemplate(i, title);\r\n                            dataOptions.push(optionElement); \r\n                        });\r\n                \r\n                    } catch (err){\r\n                        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                            err,\r\n                            logNameFile,\r\n                            \"generateCustomInputs => getOptionData\"\r\n                        );\r\n                    } \r\n                }\r\n\r\n                createOptions();\r\n\r\n                return dataOptions;\r\n\r\n            }).catch(err => {\r\n                console.log(err);\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"generateCustomInputs => getOptionData\"\r\n                );\r\n                \r\n            }));\r\n            \r\n        \r\n            \r\n        }\r\n    }});\r\n}\r\n\r\nfunction createSelectInput  (el, i){\r\n\r\n    return   {   \r\n        view          : \"combo\",\r\n        height        : 48,\r\n        id            : \"customCombo\" + i,\r\n        placeholder   : field.label, \r\n        labelPosition : \"top\", \r\n        options       : {\r\n            data : getOptionData ( dataInputsArray, el )\r\n        },\r\n        on: {\r\n            onAfterRender: function () {\r\n                this.getInputNode()\r\n                .setAttribute( \"title\", field.comment );\r\n                setAdaptiveWidth(this);\r\n            },\r\n        }               \r\n    };\r\n}\r\n\r\nfunction createDeleteAction (i){\r\n    const table     = $$(idCurrTable);\r\n    const countCols = table.getColumns().length;\r\n    const columns   = table.config.columns;\r\n\r\n    try{\r\n        columns.splice (countCols, 0 ,{ \r\n            id      : \"action\"+i, \r\n            header  : \"Действие\",\r\n            label   : \"Действие\",\r\n            css     : \"action-column\",\r\n            template: \"{common.trashIcon()}\"\r\n        });\r\n\r\n        table.refreshColumns();\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"generateCustomInputs => createDeleteAction\"\r\n        );\r\n    } \r\n\r\n}\r\n\r\nfunction getInputsId        (element){\r\n\r\n    const parent     = element.getParentView();\r\n    const childs     = parent .getChildViews();\r\n    const idElements = [];\r\n\r\n    try{\r\n        childs.forEach((el,i) => {\r\n            const view = el.config.view;\r\n            const id   = el.config.id;\r\n            if ( id !== undefined ){\r\n                if ( view == \"text\" ){\r\n                    idElements.push({\r\n                        id  : id, \r\n                        name: \"substr\"\r\n                    });\r\n\r\n                } else if ( view == \"combo\"){\r\n                    idElements.push({\r\n                        id  : id, \r\n                        name: \"valtype\"\r\n                    });\r\n                } else if ( view == \"uploader\"    || \r\n                            view == \"datepicker\"  ){\r\n                    idElements.push({ \r\n                        id : id \r\n                    });\r\n                }\r\n            }\r\n\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"generateCustomInputs => getInputsId\"\r\n        );\r\n    } \r\n    return idElements;\r\n}\r\n\r\nfunction createDeleteBtn    (findAction,i){\r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n\r\n        config   : {\r\n            id       : \"customBtnDel\" + i,\r\n            hotkey   : \"Shift+Q\",\r\n            icon     : \"icon-trash\", \r\n            value    : field.label,\r\n            click    : function () {\r\n                const idElements = getInputsId (this);\r\n                (0,_buttonLogic_js__WEBPACK_IMPORTED_MODULE_3__.submitBtn)( idElements, findAction.url, \"delete\" );\r\n            },\r\n        },\r\n        titleAttribute : field.comment\r\n    \r\n       \r\n    }).minView(\"delete\");\r\n\r\n    return btn;\r\n}\r\n\r\n\r\nfunction submitClick(findAction, i, id, elem){\r\n\r\n    const idElements = getInputsId (elem);\r\n    const btn        =  $$(\"contextActionsPopup\");\r\n\r\n    if (findAction.verb== \"GET\"){\r\n        if ( findAction.rtype == \"refresh\") {\r\n            (0,_buttonLogic_js__WEBPACK_IMPORTED_MODULE_3__.submitBtn)( \r\n                idElements, \r\n                findAction.url, \r\n                \"get\", \r\n                \"refresh\" \r\n            );\r\n\r\n        } else if (findAction.rtype == \"download\") {\r\n            (0,_buttonLogic_js__WEBPACK_IMPORTED_MODULE_3__.submitBtn)( \r\n                idElements, \r\n                findAction.url, \r\n                \"get\", \r\n                \"download\"\r\n            );\r\n\r\n        }\r\n        \r\n    } else if ( findAction.verb == \"POST\" ){\r\n        (0,_buttonLogic_js__WEBPACK_IMPORTED_MODULE_3__.submitBtn)( \r\n            idElements, \r\n            findAction.url, \r\n            \"post\" \r\n        );\r\n        $$(\"customBtn\" + i ).disable();\r\n    } \r\n    else if (findAction.verb == \"download\"){\r\n        (0,_buttonLogic_js__WEBPACK_IMPORTED_MODULE_3__.submitBtn)( \r\n            idElements, \r\n            findAction.url, \r\n            \"get\", \r\n            \"download\", \r\n            id \r\n        );\r\n\r\n    }\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(btn);    \r\n}\r\n\r\nfunction createCustomBtn    (findAction, i){\r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n        \r\n        config   : {\r\n            id       : \"customBtn\" + i,\r\n            value    : field.label,\r\n            click    : function (id) {\r\n                submitClick(findAction, i, id, this);\r\n            },\r\n        },\r\n        titleAttribute : field.comment,\r\n        onFunc         : {\r\n            onViewResize:function(){\r\n                setAdaptiveWidth(this);\r\n            }\r\n        }\r\n\r\n    \r\n    }).maxView(\"primary\");\r\n\r\n    return btn;\r\n}\r\n\r\nfunction createUpload       (i){\r\n    return  {   \r\n        view         : \"uploader\", \r\n        value        : \"Upload file\", \r\n        id           : \"customUploader\" + i,\r\n        height       : 42,\r\n        autosend     : false,\r\n        upload       : data.actions.submit.url,\r\n        label        : field.label, \r\n        labelPosition: \"top\",\r\n        on: {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute( \"title\", field.comment );\r\n                setAdaptiveWidth(this);\r\n                const parent = this  .getParentView();\r\n                const childs = parent.getChildViews();\r\n\r\n                childs.forEach(function(el,i){\r\n                    if (el.config.id.includes(\"customBtn\")){\r\n                        el.disable();\r\n                    }\r\n                });\r\n            },\r\n            onBeforeFileAdd:function(){\r\n                const loadEl = $$(\"templateLoad\");\r\n                if (loadEl){\r\n                    loadEl.getParentView().removeView(loadEl);\r\n                }\r\n            },\r\n            onAfterFileAdd:function(file){\r\n                const parent = this  .getParentView();\r\n                const childs = parent.getChildViews();\r\n\r\n                childs.forEach(function(el){\r\n                    if (el.config.id.includes(\"customBtn\")){\r\n                        el.enable();\r\n                    }\r\n                });\r\n            }\r\n\r\n        }\r\n    };\r\n}\r\n\r\nfunction createDatepicker   (i){\r\n    return {   \r\n        view         : \"datepicker\",\r\n        format       : \"%d.%m.%Y %H:%i:%s\",\r\n        placeholder  : field.label,  \r\n        id           :\"customDatepicker\"+i, \r\n        timepicker   : true,\r\n        labelPosition:\"top\",\r\n        height       :48,\r\n        on           : {\r\n            onAfterRender: function () {\r\n                this.getInputNode().setAttribute( \"title\", field.comment );\r\n                setAdaptiveWidth(this);\r\n            },\r\n            onChange:function(){\r\n                try{\r\n                    const inputs = $$(\"customInputs\").getChildViews();\r\n                    inputs.forEach(function(el,i){\r\n                        const btn  = $$(el.config.id);\r\n                        const view = el.config.view;\r\n                        if ( view == \"button\" && !(btn.isEnabled()) ){\r\n                            btn.enable();\r\n                        }\r\n                    });\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                        err,\r\n                        logNameFile,\r\n                        \"generateCustomInputs => createDatepicker onChange\"\r\n                    );\r\n                } \r\n\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nfunction createCheckbox     (i){\r\n    return {   \r\n        view       : \"checkbox\", \r\n        id         : \"customСheckbox\" + i, \r\n        css        : \"webix_checkbox-style\",\r\n        labelRight : field.label, \r\n        on         : {\r\n            onAfterRender: function () {\r\n                this.getInputNode()\r\n                .setAttribute(\"title\", field.comment);\r\n            },\r\n\r\n            onChange:function(){\r\n                try{\r\n                    const inputs = $$(\"customInputs\").getChildViews();\r\n                    inputs.forEach(function(el,i){\r\n                        const view = el.config.view;\r\n                        const btn  = $$(el.config.id);\r\n                        if (view == \"button\" && !(btn.isEnabled())){\r\n                            btn.enable();\r\n                        }\r\n                    });\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                        err,\r\n                        logNameFile,\r\n                        \"generateCustomInputs => createCheckbox onChange\"\r\n                    );\r\n                } \r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nfunction generateCustomInputs (dataFields, id){  \r\n    idCurrTable = id;\r\n    data        = dataFields;  \r\n\r\n    dataInputsArray     = data.inputs;\r\n\r\n    const customInputs  = [];\r\n    const objInuts      = Object.keys(data.inputs);\r\n\r\n    objInuts.forEach((el,i) => {\r\n        field = dataInputsArray[el];\r\n        if ( field.type == \"string\" ){\r\n            customInputs.push(\r\n                createTextInput(i)\r\n            );\r\n        } else if ( field.type == \"apiselect\" ) {\r\n           \r\n            customInputs.push(\r\n                createSelectInput(el, i, dataInputsArray)\r\n            );\r\n\r\n        } else if ( field.type == \"submit\" || \r\n                    field.type == \"button\" ){\r\n\r\n            const actionType = field.action;\r\n            const findAction = data.actions[actionType];\r\n        \r\n            if ( findAction.verb == \"DELETE\" && actionType !== \"submit\" ){\r\n                createDeleteAction (i);\r\n            } else if ( findAction.verb == \"DELETE\" ) {\r\n                customInputs.push(\r\n                    createDeleteBtn(findAction, i)\r\n                );\r\n            } else {\r\n                customInputs.push(\r\n                    createCustomBtn(findAction, i)\r\n                        \r\n                );\r\n            }\r\n        } else if ( field.type == \"upload\" ){\r\n            customInputs.push(\r\n                createUpload(i)\r\n            );\r\n        } else if ( field.type == \"datetime\" ){\r\n            customInputs.push(\r\n                createDatepicker(i)\r\n            );\r\n        }else if ( field.type == \"checkbox\" ){\r\n            customInputs.push(\r\n                createCheckbox(i)\r\n            );\r\n\r\n        } \r\n    });\r\n\r\n\r\n    return customInputs;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/cols/dynamicElements/createInputs.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/createContextSpace.js":
/*!*******************************************************************!*\
  !*** ./src/js/components/table/createSpace/createContextSpace.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"selectContextId\": () => (/* binding */ selectContextId)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\nfunction getLinkParams(param){\r\n    const href   = window.location.search;\r\n    const params = new URLSearchParams (href);\r\n    return params.get(param);\r\n}\r\n\r\nfunction selectContextId(){\r\n    const idParam = getLinkParams(\"id\");\r\n    const table   = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getTable)();\r\n    \r\n    if (table && table.exists(idParam)){\r\n        table.select(idParam);\r\n    } else {\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.linkParam(false, \"id\");\r\n    }\r\n \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/createContextSpace.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/generateTable.js":
/*!**************************************************************!*\
  !*** ./src/js/components/table/createSpace/generateTable.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createTable\": () => (/* binding */ createTable)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _rows_createRows_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./rows/createRows.js */ \"./src/js/components/table/createSpace/rows/createRows.js\");\n/* harmony import */ var _cols_createCols_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cols/createCols.js */ \"./src/js/components/table/createSpace/cols/createCols.js\");\n/* harmony import */ var _cols_detailAction_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cols/detailAction.js */ \"./src/js/components/table/createSpace/cols/detailAction.js\");\n/* harmony import */ var _cols_dynamicElements_createElements_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cols/dynamicElements/createElements.js */ \"./src/js/components/table/createSpace/cols/dynamicElements/createElements.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"getContent => getInfoTable\";\r\n\r\nlet titem;\r\nlet idsParam;\r\nlet idCurrTable;\r\n\r\nfunction setTableName(idCurrTable, idsParam) {\r\n  \r\n    try{\r\n        const names = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.names;\r\n\r\n        if (names){\r\n\r\n            names.forEach(function(el){\r\n                if (el.id == idsParam){  \r\n                    const template  = $$(idCurrTable + \"-templateHeadline\");\r\n                    const value     = el.name.toString();\r\n                    template.setValues(value);\r\n                }\r\n            });\r\n        }\r\n       // $$(\"tree\").callEvent(\"onBeforeOpen\", [ \"\",\"auth_group\" ]);\r\n\r\n        \r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, logNameFile, \"setTableName\");\r\n    }\r\n} \r\n\r\n\r\nfunction getValsTable (){\r\n    titem     = $$(\"tree\").getItem(idsParam);\r\n\r\n    if (!titem){\r\n        titem = idsParam;\r\n    }\r\n}\r\n\r\n\r\nfunction preparationTable (){\r\n    try{\r\n        $$(idCurrTable).clearAll();\r\n\r\n        if (idCurrTable == \"table-view\"){\r\n            const popup       = $$(\"contextActionsPopup\");\r\n            \r\n            if (popup){\r\n                popup.destructor();\r\n            }\r\n\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_7__.Action.removeItem($$(\"contextActionsBtnAdaptive\"));\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_7__.Action.removeItem($$(\"customInputs\"             ));\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_7__.Action.removeItem($$(\"customInputsMain\"         ));\r\n\r\n        \r\n        }\r\n    } catch (err){  \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(err, logNameFile, \"preparationTable\");\r\n    }\r\n}\r\n\r\n\r\n\r\nasync function generateTable (){ \r\n\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.LoadServerData.content(\"fields\");\r\n\r\n    const keys = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.keys;\r\n\r\n    if (keys){\r\n        const columnsData = (0,_cols_createCols_js__WEBPACK_IMPORTED_MODULE_4__.createTableCols) (idsParam, idCurrTable);\r\n\r\n        (0,_cols_detailAction_js__WEBPACK_IMPORTED_MODULE_5__.createDetailAction)  (columnsData, idsParam, idCurrTable);\r\n\r\n        (0,_cols_dynamicElements_createElements_js__WEBPACK_IMPORTED_MODULE_6__.createDynamicElems)  (idCurrTable, idsParam);\r\n\r\n        (0,_rows_createRows_js__WEBPACK_IMPORTED_MODULE_3__.createTableRows)     (idCurrTable, idsParam);\r\n       \r\n        setTableName        (idCurrTable, idsParam);\r\n    }\r\n   \r\n} \r\n\r\n\r\nfunction createTable (id, ids) {\r\n  \r\n    idCurrTable = id;\r\n    idsParam    = ids;\r\n\r\n    getValsTable ();\r\n   \r\n    if (titem == undefined) {\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\",\"Данные не найдены\");\r\n    } else {\r\n        preparationTable ();\r\n        generateTable ();\r\n    } \r\n\r\n \r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/generateTable.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/returnLostData.js":
/*!***************************************************************!*\
  !*** ./src/js/components/table/createSpace/returnLostData.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnLostData\": () => (/* binding */ returnLostData)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\nlet prop;\r\nlet form;\r\n\r\nfunction getLinkParams(param){\r\n    const href   = window.location.search;\r\n    const params = new URLSearchParams (href);\r\n    return params.get(param);\r\n}\r\n\r\nfunction isThisIdSelected(id){\r\n    const selectedId = getLinkParams(\"id\");\r\n    if (id == selectedId){\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction setVals(values){\r\n    prop.setValues(values);\r\n    form.setDirty(true);\r\n\r\n    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n        \"success\", \r\n        \"Данные редактора восстановлены\"\r\n    );\r\n}\r\n\r\nfunction returnLostData(){\r\n  \r\n\r\n    const data = webix.storage.local.get(\"editFormTempData\");\r\n\r\n    if (data){\r\n        prop          = $$(\"editTableFormProperty\");\r\n        form          = $$(\"table-editForm\");\r\n        const table   = $$(\"table\");\r\n        const tableId = table.config.idTable;\r\n\r\n        const values  = data.values;\r\n        const field   = data.table;\r\n        const status  = data.status;\r\n\r\n        if (tableId == field ){\r\n    \r\n            if (status === \"put\"){\r\n                const id = values.id;\r\n                if (table.exists(id)     &&\r\n                    isThisIdSelected(id) )\r\n                {\r\n\r\n                    table.select(id);\r\n                    setVals(values);\r\n                        \r\n                }\r\n            \r\n            } else if (status === \"post\"){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem(form);\r\n                _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.tables.editForm.postState();\r\n                setVals(values);\r\n            }\r\n        }\r\n    }\r\n \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/returnLostData.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/returnSortData.js":
/*!***************************************************************!*\
  !*** ./src/js/components/table/createSpace/returnSortData.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnSortData\": () => (/* binding */ returnSortData)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\nfunction returnSortData(){\r\n    const values = webix.storage.local.get(\"tableSortData\");\r\n\r\n    if (values){\r\n        const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getTable)();\r\n        table.config.sort = {\r\n            idCol : values.idCol,\r\n            type  : values.type\r\n        };\r\n\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/returnSortData.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/rows/autorefresh.js":
/*!*****************************************************************!*\
  !*** ./src/js/components/table/createSpace/rows/autorefresh.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"autorefresh\": () => (/* binding */ autorefresh)\n/* harmony export */ });\n/* harmony import */ var _createRows_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createRows.js */ \"./src/js/components/table/createSpace/rows/createRows.js\");\n\r\n\r\nfunction setIntervalConfig(type, counter){\r\n    setInterval(function(){\r\n        if( type == \"dbtable\" ){\r\n            (0,_createRows_js__WEBPACK_IMPORTED_MODULE_0__.getItemData) (\"table\");\r\n        } else if ( type == \"tform\" ){\r\n            (0,_createRows_js__WEBPACK_IMPORTED_MODULE_0__.getItemData) (\"table-view\");\r\n        }\r\n    }, counter );\r\n}\r\n\r\nfunction autorefresh (data){\r\n    if (data.autorefresh){\r\n\r\n        const userprefsOther = webix.storage.local.get(\"userprefsOtherForm\");\r\n        let counter;\r\n\r\n        if (userprefsOther){\r\n            counter = userprefsOther.autorefCounterOpt;\r\n        }\r\n\r\n        if ( userprefsOther && counter !== undefined ){\r\n            if ( counter >= 15000 ){\r\n                setIntervalConfig(data.type, counter);\r\n                \r\n            } else {\r\n                setIntervalConfig(data.type, 120000);\r\n            }\r\n        }\r\n    } \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/rows/autorefresh.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/rows/createRows.js":
/*!****************************************************************!*\
  !*** ./src/js/components/table/createSpace/rows/createRows.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createTableRows\": () => (/* binding */ createTableRows),\n/* harmony export */   \"getItemData\": () => (/* binding */ getItemData)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _autorefresh_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./autorefresh.js */ \"./src/js/components/table/createSpace/rows/autorefresh.js\");\n/* harmony import */ var _loadRows_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loadRows.js */ \"./src/js/components/table/createSpace/rows/loadRows.js\");\n\r\n\r\n\r\n\r\nlet idCurrTable;\r\nlet offsetParam;\r\nlet itemTreeId;\r\nlet idFindElem;\r\n\r\n\r\nfunction getItemData (table){\r\n\r\n    const tableElem = $$(table);\r\n\r\n    const reccount  = tableElem.config.reccount;\r\n\r\n    if (reccount){\r\n        const remainder = reccount - offsetParam;\r\n\r\n        if (remainder > 0){\r\n            (0,_loadRows_js__WEBPACK_IMPORTED_MODULE_2__.loadTableData)(table, idCurrTable, itemTreeId, offsetParam  ); \r\n        }\r\n\r\n    } else {\r\n        (0,_loadRows_js__WEBPACK_IMPORTED_MODULE_2__.loadTableData)(table, idCurrTable, itemTreeId, offsetParam ); \r\n    }\r\n\r\n   \r\n}\r\n\r\nfunction setDataRows (type){\r\n    if(type == \"dbtable\"){\r\n        getItemData (\"table\");\r\n    } else if (type == \"tform\"){\r\n        getItemData (\"table-view\");\r\n    }\r\n}\r\n\r\n\r\nfunction createTableRows (id, idsParam, offset = 0){\r\n\r\n    const data  = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.item(idsParam);\r\n\r\n    idCurrTable = id;\r\n    offsetParam = offset;      \r\n    itemTreeId  = idsParam;\r\n    idFindElem  = idCurrTable + \"-findElements\";\r\n\r\n    setDataRows         (data.type);\r\n    (0,_autorefresh_js__WEBPACK_IMPORTED_MODULE_1__.autorefresh)         (data);\r\n          \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/rows/createRows.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/rows/formattingData.js":
/*!********************************************************************!*\
  !*** ./src/js/components/table/createSpace/rows/formattingData.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"formattingBoolVals\": () => (/* binding */ formattingBoolVals),\n/* harmony export */   \"formattingDateVals\": () => (/* binding */ formattingDateVals)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\nconst logNameFile = \"table => createSpace => formattingData\";\r\n\r\nlet idCurrView;\r\n\r\n// date\r\n\r\nfunction findDateCols (columns){\r\n    const dateCols = [];\r\n    try{\r\n        columns.forEach(function(col,i){\r\n            if ( col.type == \"datetime\" ){\r\n                dateCols.push( col.id );\r\n            }\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"findDateCols\");\r\n    }\r\n\r\n    return dateCols;\r\n}\r\n\r\nfunction changeDateFormat (data, elType){\r\n    data.forEach(function(el){\r\n        if ( el[elType] ){\r\n            const dateFormat = new Date( el[elType] );\r\n            el[elType]       = dateFormat;\r\n            \r\n        }\r\n    });\r\n}\r\n\r\nfunction formattingDateVals (table, data){\r\n\r\n    const columns  = $$(table).getColumns();\r\n    const dateCols = findDateCols (columns);\r\n\r\n    function setDateFormatting (){\r\n        dateCols.forEach(function(el,i){\r\n            changeDateFormat (data, el);\r\n        });\r\n    }\r\n\r\n    setDateFormatting ();\r\n     \r\n   \r\n}\r\n\r\n\r\n\r\n// boolean\r\n\r\nfunction findBoolColumns(cols){\r\n    const boolsArr = [];\r\n\r\n    cols.forEach(function(el,i){\r\n        if (el.type == \"boolean\"){\r\n            boolsArr.push(el.id);\r\n        }\r\n    });\r\n\r\n    return boolsArr;\r\n}\r\n\r\n \r\n\r\nfunction isBoolField(cols, key){\r\n    const boolsArr = findBoolColumns(cols);\r\n    let check      = false;\r\n    boolsArr.forEach(function(el,i){\r\n        if (el == key){\r\n            check = true;\r\n        } \r\n    });\r\n\r\n    return check;\r\n}\r\n\r\n\r\nfunction getBoolFieldNames(){\r\n    const boolKeys = [];\r\n    const cols     = idCurrView.getColumns(true);\r\n\r\n    cols.forEach(function(key){\r\n    \r\n        if( isBoolField(cols, key.id)){\r\n            boolKeys.push(key.id);\r\n    \r\n        }\r\n    });\r\n\r\n    return boolKeys;\r\n}\r\n\r\nfunction setBoolValues(element){\r\n    const boolFields = getBoolFieldNames();\r\n\r\n    boolFields.forEach(function(el){\r\n \r\n        if (element[el] !== undefined){\r\n            if ( element[el] == false ){\r\n                element[el] = 2;\r\n            } else {\r\n                element[el] = 1;\r\n            }\r\n        }\r\n      \r\n    });\r\n\r\n}\r\n\r\nfunction formattingBoolVals(id, data){\r\n    idCurrView = id;\r\n\r\n    data.forEach(function(el,i){\r\n        setBoolValues(el);\r\n    });\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/rows/formattingData.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/rows/loadRows.js":
/*!**************************************************************!*\
  !*** ./src/js/components/table/createSpace/rows/loadRows.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadTableData\": () => (/* binding */ loadTableData)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _userContext_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./userContext.js */ \"./src/js/components/table/createSpace/rows/userContext.js\");\n/* harmony import */ var _popupNotAuth_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./popupNotAuth.js */ \"./src/js/components/table/createSpace/rows/popupNotAuth.js\");\n/* harmony import */ var _formattingData_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./formattingData.js */ \"./src/js/components/table/createSpace/rows/formattingData.js\");\n/* harmony import */ var _setDefaultValues_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./setDefaultValues.js */ \"./src/js/components/table/createSpace/rows/setDefaultValues.js\");\n/* harmony import */ var _createContextSpace_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../createContextSpace.js */ \"./src/js/components/table/createSpace/createContextSpace.js\");\n/* harmony import */ var _returnLostData_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../returnLostData.js */ \"./src/js/components/table/createSpace/returnLostData.js\");\n/* harmony import */ var _returnSortData_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../returnSortData.js */ \"./src/js/components/table/createSpace/returnSortData.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => createSpace => loadData\";\r\n\r\n\r\nlet idCurrTable;\r\nlet offsetParam;\r\nlet itemTreeId;\r\n\r\nlet idFindElem;\r\n\r\n\r\nfunction setTableState(table){\r\n     \r\n    if (table == \"table\"){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem($$(\"table-newAddBtnId\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem($$(\"table-filterId\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem($$(\"table-exportBtn\"));\r\n    }\r\n\r\n}\r\n\r\nfunction enableVisibleBtn(){\r\n    const viewBtn =  $$(\"table-view-visibleCols\");\r\n    const btn     =  $$(\"table-visibleCols\");\r\n  \r\n    if ( viewBtn.isVisible() ){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem(viewBtn);\r\n\r\n    } else if ( btn.isVisible() ){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem(btn);\r\n\r\n    }\r\n  \r\n}\r\n\r\n \r\nlet idCurrView;\r\n\r\n\r\nfunction checkNotUnique(idAddRow){    \r\n    const tablePool = idCurrView.data.pull;\r\n    const values    = Object.values(tablePool);\r\n    \r\n    values.forEach(function(el){\r\n        if ( el.id == idAddRow ){\r\n            idCurrView.remove(el.id);\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction changeFullTable(data){\r\n\r\n    if (data.length !== 0){\r\n        idCurrView.hideOverlay(\"Ничего не найдено\");\r\n        idCurrView.parse      (data);\r\n\r\n    } else {\r\n        idCurrView.showOverlay(\"Ничего не найдено\");\r\n        idCurrView.clearAll   ();\r\n    }\r\n\r\n    setTimeout(() => {\r\n        enableVisibleBtn();\r\n    }, 1000);\r\n}\r\n\r\nfunction changePart(data){\r\n    data.forEach(function(el,i){\r\n        checkNotUnique(el.id);\r\n        idCurrView.add(el);\r\n    });\r\n}\r\n\r\nfunction parseRowData (data){\r\n\r\n    idCurrView = $$(idCurrTable);\r\n   \r\n    if (!offsetParam){\r\n        idCurrView.clearAll();\r\n    }\r\n\r\n    (0,_formattingData_js__WEBPACK_IMPORTED_MODULE_4__.formattingBoolVals) (idCurrView, data);\r\n    (0,_formattingData_js__WEBPACK_IMPORTED_MODULE_4__.formattingDateVals) (idCurrView, data);\r\n    (0,_setDefaultValues_js__WEBPACK_IMPORTED_MODULE_5__.setDefaultValues)   (data);\r\n \r\n \r\n    if ( !offsetParam ){\r\n        changeFullTable(data);\r\n    } else {\r\n        changePart     (data);\r\n    }\r\n  \r\n}\r\n\r\n\r\nfunction setCounterVal (data){\r\n    try{\r\n        const prevCountRows = data;\r\n        $$(idFindElem).setValues(prevCountRows);\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"setCounterVal\");\r\n    }\r\n}\r\n\r\n\r\nfunction getLinkParams(param){\r\n    const  params = new URLSearchParams (window.location.search);\r\n    return params.get(param);\r\n}\r\n\r\nfunction filterParam(){\r\n    const  value = getLinkParams(\"prefs\");\r\n    return value;\r\n}\r\n\r\n\r\nasync function returnFilter(tableElem){\r\n    const filterString = tableElem.config.filter;\r\n    const urlParameter = filterParam();\r\n\r\n    let filter;\r\n\r\n    if (urlParameter){\r\n        filter = await (0,_userContext_js__WEBPACK_IMPORTED_MODULE_2__.getUserPrefsContext)(urlParameter, \"filter\");\r\n    }\r\n\r\n    if (!filter){\r\n        if (filterString && filterString.table === itemTreeId){\r\n            filter = filterString.query;\r\n\r\n        } else {\r\n            filter = itemTreeId +'.id+%3E%3D+0';\r\n          \r\n        }\r\n    }\r\n\r\n    return filter;\r\n}\r\n\r\n\r\nfunction returnSort(tableElem){\r\n    let sort;\r\n\r\n    const firstCol = tableElem.getColumns()[0].id;\r\n    const sortCol  = tableElem.config.sort.idCol;\r\n    const sortType = tableElem.config.sort.type;\r\n   \r\n    if (sortCol){\r\n        if (sortType == \"desc\"){\r\n            sort = \"~\" + itemTreeId + '.' + sortCol;\r\n        } else {\r\n            sort = itemTreeId + '.' + sortCol;\r\n        }\r\n        tableElem.markSorting(sortCol, sortType);\r\n    } else {\r\n        sort = itemTreeId + '.' + firstCol;\r\n        tableElem.markSorting(firstCol, \"asc\");\r\n    }\r\n\r\n\r\n    return sort;\r\n}\r\n\r\n\r\nfunction returnPath(tableElem, query){\r\n    const tableType = tableElem.config.id;\r\n    let path;\r\n     \r\n    if (tableType == \"table\"){\r\n        path = \"/init/default/api/smarts?\"+ query.join(\"&\");\r\n    } else {\r\n        path = \"/init/default/api/\" + itemTreeId;\r\n    }\r\n\r\n    return path;\r\n}\r\n\r\nfunction setConfigTable(tableElem, data, limitLoad){\r\n\r\n    const tableType = tableElem.config.id;\r\n\r\n    if ( !offsetParam && tableType == \"table\" ){\r\n        tableElem.config.reccount  = data.reccount;\r\n        tableElem.config.idTable   = itemTreeId;\r\n        tableElem.config.limitLoad = limitLoad;\r\n        setCounterVal (data.reccount.toString());\r\n    }\r\n\r\n    if( tableType == \"table-view\" ){\r\n        tableElem.config.idTable   = itemTreeId;\r\n        setCounterVal (data.content.length.toString());\r\n    }\r\n}\r\n\r\n\r\nfunction tableErrorState (){\r\n    const prevCountRows = \"-\";\r\n    const value         = prevCountRows.toString();\r\n    try {\r\n        $$(idFindElem).setValues(value);\r\n        \r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem($$(\"table-newAddBtnId\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem($$(\"table-filterId\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem($$(\"table-exportBtn\"));\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"tableErrorState\");\r\n\r\n    }\r\n}\r\n\r\n\r\nasync function loadTableData(table, id, idsParam, offset){\r\n    const tableElem = $$(table);\r\n    const limitLoad = 80;\r\n\r\n    idCurrTable = id;\r\n    offsetParam = offset;      \r\n    itemTreeId  = idsParam;\r\n\r\n    idFindElem  = idCurrTable + \"-findElements\";\r\n\r\n    const filter    = await returnFilter(tableElem);\r\n\r\n    if (!offsetParam){\r\n        (0,_returnSortData_js__WEBPACK_IMPORTED_MODULE_8__.returnSortData) ();\r\n    }\r\n\r\n\r\n    const sort      = returnSort  (tableElem);\r\n\r\n    const query = [ \"query=\" + filter, \r\n                    \"sorts=\" + sort, \r\n                    \"limit=\" + limitLoad, \r\n                    \"offset=\"+ offsetParam\r\n    ];\r\n\r\n    tableElem.load({\r\n        $proxy : true,\r\n        load   : function(){\r\n            \r\n          \r\n            const path      = returnPath (tableElem, query);\r\n     \r\n            const getData = webix.ajax().get( path );\r\n      \r\n    \r\n            getData.then(function(data){\r\n                data = data.json();\r\n\r\n                \r\n                setConfigTable(tableElem, data, limitLoad);\r\n\r\n                data  = data.content;\r\n \r\n                // data = [\r\n                //     {\r\n                //         \"created_on\": \"2022-11-23 17:33:03\",\r\n                //         \"id\": 2,\r\n                //         \"renew\": true,\r\n                //         \"service\": \"fffs\",\r\n                //         \"ticket\": \"ddddafa\",\r\n                //         \"user_id\": 1,\r\n                //     },\r\n                //     {\r\n                //        // \"created_on\": \"2021-02-13 20:33:03\",\r\n                //         \"id\": 3,\r\n                //         //\"renew\": true,\r\n                //         \"service\": \"22233323\",\r\n                //         \"ticket\": \"fffffff\",\r\n                //         \"user_id\": 2,\r\n                //     }\r\n                // ]\r\n        \r\n   \r\n                setTableState(table);\r\n                parseRowData (data);\r\n                if (!offsetParam){\r\n                \r\n                    (0,_createContextSpace_js__WEBPACK_IMPORTED_MODULE_6__.selectContextId)();  \r\n                    (0,_returnLostData_js__WEBPACK_IMPORTED_MODULE_7__.returnLostData) ();\r\n                   \r\n                }\r\n            \r\n\r\n            });\r\n            \r\n            getData.fail(function(err){\r\n\r\n                tableErrorState ();\r\n\r\n                if (err.status == 401 && !($$(\"popupNotAuth\"))){\r\n                    (0,_popupNotAuth_js__WEBPACK_IMPORTED_MODULE_3__.popupNotAuth)();\r\n                } \r\n\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"getInfoTable\", \"getData\");\r\n            });\r\n\r\n        }\r\n    });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/rows/loadRows.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/rows/popupNotAuth.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/createSpace/rows/popupNotAuth.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"popupNotAuth\": () => (/* binding */ popupNotAuth)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => createSpace => popupNotAuth\";\r\n\r\nfunction destructPopup(){\r\n    try{\r\n        const popup = $$(\"popupNotAuth\");\r\n        if (popup){\r\n            popup.destructor();\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"notAuthPopup btnClosePopup click\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst popupSubtitle = {   \r\n    template    : \"Войдите в систему, чтобы продолжить.\",\r\n    css         : \"webix_template-not-found-descr\", \r\n    borderless  : true, \r\n    height      : 35 \r\n};\r\n\r\n\r\n\r\nfunction submitClick(){\r\n\r\n    function navigate(){\r\n        try{\r\n            Backbone.history.navigate(\"/\", { trigger:true});\r\n            window.location.reload();\r\n\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                err, \r\n                logNameFile,\r\n                \"notAuthPopup navigate\"\r\n            );\r\n        }\r\n    }\r\n    destructPopup();\r\n    navigate();\r\n \r\n}\r\n\r\nconst mainBtnPopup = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n\r\n    config   : {\r\n        id       : \"webix_btn-go-login\",\r\n        hotkey   : \"Shift+Space\",\r\n        value    : \"Войти\", \r\n        click   : function(){\r\n            submitClick();\r\n        },\r\n    },\r\n    titleAttribute : \"Перейти на страницу авторизации\"\r\n\r\n   \r\n}).maxView(\"primary\");\r\n\r\n\r\nfunction popupNotAuth(){\r\n\r\n    const popup = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_2__.Popup({\r\n        headline : \"Вы не авторизованы\",\r\n        config   : {\r\n            id    : \"popupNotAuth\",\r\n            width   : 340,\r\n            height  : 125,\r\n        },\r\n\r\n        elements : {\r\n            padding:{\r\n                left : 5,\r\n                right: 5\r\n            },\r\n            rows:[\r\n                popupSubtitle,\r\n                {   padding:{\r\n                        left : 5,\r\n                        right: 5\r\n                    },\r\n                    rows:[\r\n                        mainBtnPopup,\r\n                    ]\r\n                }\r\n            \r\n            ]\r\n          \r\n        }\r\n    });\r\n\r\n    popup.createView ();\r\n    popup.showPopup  ();\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/rows/popupNotAuth.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/rows/setDefaultValues.js":
/*!**********************************************************************!*\
  !*** ./src/js/components/table/createSpace/rows/setDefaultValues.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setDefaultValues\": () => (/* binding */ setDefaultValues)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _defaultValues_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../defaultValues.js */ \"./src/js/components/table/defaultValues.js\");\n\r\n\r\n\r\n\r\nfunction isExists(value){\r\n    if (value){\r\n        return value.toString().length;\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction returnValue(fieldValue){\r\n    const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getTable)();\r\n    const cols  = table.getColumns(true);\r\n    \r\n   \r\n    cols.forEach(function(el){\r\n        const defValue =  (0,_defaultValues_js__WEBPACK_IMPORTED_MODULE_1__.returnDefaultValue)(el);\r\n       \r\n        const value = fieldValue[el.id];\r\n\r\n        if (isExists(defValue) && !value){\r\n            fieldValue[el.id] = (0,_defaultValues_js__WEBPACK_IMPORTED_MODULE_1__.returnDefaultValue)(el);\r\n        }\r\n\r\n    });\r\n}\r\n\r\nfunction setDefaultValues (data){\r\n\r\n    data.forEach(function(el){\r\n        returnValue(el);\r\n    });\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/rows/setDefaultValues.js?");

/***/ }),

/***/ "./src/js/components/table/createSpace/rows/userContext.js":
/*!*****************************************************************!*\
  !*** ./src/js/components/table/createSpace/rows/userContext.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getUserPrefsContext\": () => (/* binding */ getUserPrefsContext)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n \r\nconst logNameFile = \"table => createSpace => userContext\";\r\n\r\nlet prefs;\r\nlet tableId;\r\n\r\nfunction returnParameter(el, parameter){\r\n    const prefs = JSON.parse(el.prefs)[parameter];\r\n    return prefs;\r\n}\r\n\r\nfunction removePref(el){\r\n    const path          = \"/init/default/api/userprefs/\" + el.id;\r\n    const userprefsDel = webix.ajax().del(path, el);\r\n                    \r\n    userprefsDel.then(function (data){\r\n        data = data.json();\r\n        if (data.err_type !== \"i\"){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                data.err, \r\n                logNameFile, \r\n                \"removePref\"\r\n            );\r\n        }\r\n    });\r\n\r\n    userprefsDel.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"userprefsDel\"\r\n        );\r\n    });\r\n}\r\n\r\n\r\nfunction createQuery(id){\r\n \r\n    const tableSort = \"userprefs.id\";\r\n \r\n    const data = { \r\n        'query' : tableSort + \"=\" + id, \r\n        'sorts' : tableSort, \r\n        'limit' : 80 , \r\n        'offset': 0 \r\n    };\r\n\r\n    const  queryString = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.createQuery(data);\r\n\r\n    return queryString;\r\n}\r\n\r\nasync function getDataPrefs(urlParameter){\r\n    const query        = createQuery(urlParameter);\r\n    const path         = \"/init/default/api/smarts?\" + query ;\r\n    const userprefsGet = webix.ajax().get(path);\r\n                    \r\n    await userprefsGet.then(function (data){\r\n        data         = data.json().content;\r\n        const item   = data[0];\r\n        \r\n        if (item){\r\n            prefs        = returnParameter(item, \"params\");\r\n            tableId      = returnParameter(item, \"field\");\r\n            removePref(item);\r\n        }\r\n    \r\n    });\r\n\r\n    userprefsGet.fail(function (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"userprefsGet\"\r\n        );\r\n    });\r\n}\r\n\r\n\r\nasync function getUserPrefsContext(urlParameter, parameter){\r\n \r\n    await getDataPrefs(urlParameter);\r\n\r\n    if (prefs){\r\n        return prefs[parameter];\r\n    }\r\n   \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/createSpace/rows/userContext.js?");

/***/ }),

/***/ "./src/js/components/table/defaultValues.js":
/*!**************************************************!*\
  !*** ./src/js/components/table/defaultValues.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnDefaultValue\": () => (/* binding */ returnDefaultValue)\n/* harmony export */ });\nconst formatData  = webix.Date.dateToStr(\"%d.%m.%y %H:%i:%s\");\r\n\r\n\r\nfunction createGuid() {  \r\n    const mask = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\r\n    return mask.replace(/[xy]/g, function(c) {  \r\n        var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\r\n        return v.toString(16);  \r\n    });  \r\n}\r\n\r\nfunction dateFormatting (el){\r\n    const date = new Date(el.default);\r\n    return formatData(date);\r\n}\r\n\r\nfunction returnDefaultValue (el){\r\n    let defVal;\r\n\r\n\r\n\r\n    const def      = el.default;\r\n    const parsDate = Date.parse(new Date(def));\r\n\r\n    const type     = el.type ;\r\n\r\n    if (def === \"now\" && type == \"datetime\"){\r\n        defVal = formatData(new Date());\r\n \r\n    } else if (parsDate && type == \"datetime\" ){\r\n        defVal = dateFormatting (el);\r\n\r\n    } \r\n\r\n    else if (def && def.includes(\"make_guid\")) {\r\n        defVal = createGuid();\r\n\r\n    } \r\n    \r\n    else if (def == \"False\"){\r\n        defVal = 2;\r\n\r\n    } else if (def  == \"True\"){\r\n        defVal = 1;\r\n\r\n    } \r\n\r\n    else if (def !== \"None\" && def !== \"null\"){\r\n        defVal = def;\r\n\r\n    } else if (def  == \"null\") {\r\n        defVal = null;\r\n    }\r\n\r\n\r\n    return defVal;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/defaultValues.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/_layout.js":
/*!*****************************************************!*\
  !*** ./src/js/components/table/editForm/_layout.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editTableBar\": () => (/* binding */ editTableBar)\n/* harmony export */ });\n/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./property.js */ \"./src/js/components/table/editForm/property.js\");\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/components/table/editForm/buttons.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\n\r\n\r\nconst editForm = {\r\n    view        : \"form\", \r\n    id          : \"table-editForm\",\r\n    hidden      : true,\r\n    css         : \"webix_form-edit\",\r\n    minHeight   : 350,\r\n    minWidth    : 230,\r\n    borderless  : true,\r\n    scroll      : true,\r\n    elements    : [\r\n        _buttons_js__WEBPACK_IMPORTED_MODULE_1__.editFormBtns,\r\n        _property_js__WEBPACK_IMPORTED_MODULE_0__.propertyLayout,  \r\n    ],\r\n    on:{\r\n        onViewShow: webix.once(function(){\r\n            this.config.width = 350;\r\n            this.resize();\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.setForm(this);\r\n        }),\r\n    },\r\n   \r\n    rules       : {\r\n        $all:webix.rules.isNotEmpty\r\n    },\r\n\r\n    ready       : function(){\r\n        this.validate();\r\n    },\r\n\r\n};\r\n\r\n\r\n\r\nfunction editTableBar (){\r\n    return editForm;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/_layout.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/buttons.js":
/*!*****************************************************!*\
  !*** ./src/js/components/table/editForm/buttons.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editFormBtns\": () => (/* binding */ editFormBtns)\n/* harmony export */ });\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../viewTemplates/emptyTemplate.js */ \"./src/js/viewTemplates/emptyTemplate.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction setFormState(){\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.postState();\r\n}\r\n\r\nfunction modalBoxAddItem(){\r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__.modalBox)().then(function (result){\r\n        if (result == 1){\r\n            setFormState();\r\n        } else if (result == 2){\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.put(false).then(function(result){\r\n                if (result){\r\n                    setFormState();\r\n                }\r\n            });\r\n \r\n        }\r\n    });\r\n\r\n \r\n}\r\n\r\n\r\nfunction addItem () {\r\n\r\n    const isDirtyForm = $$(\"table-editForm\").isDirty();\r\n    const table       = $$(\"table\");\r\n\r\n    if (isDirtyForm){\r\n        modalBoxAddItem();\r\n    } else {\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.clearTempStorage();\r\n        setFormState();\r\n        table.hideOverlay(\"Ничего не найдено\");\r\n    }\r\n\r\n}\r\n\r\nfunction backTableBtnClick() {\r\n    const form           = $$(\"table-editForm\");\r\n    const tableContainer = $$(\"tableContainer\");\r\n    const table          = $$(\"table\");\r\n\r\n    function defaultState(){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.clearTempStorage();\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(form);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem(tableContainer);\r\n        if (table){\r\n            table.clearSelection();\r\n        }\r\n    }\r\n\r\n    function createModalBox(){\r\n\r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_0__.modalBox)().then(function (result){\r\n                        \r\n            if (result == 1 || result == 2){\r\n                if (result == 1){\r\n                    defaultState();\r\n                } else if (result == 2){\r\n                    const isExists = $$(\"table-saveBtn\").isVisible();\r\n                    \r\n                    if (isExists){\r\n                        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.put();\r\n                    } else {\r\n                        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.post();\r\n                    }\r\n                }\r\n                form.setDirty(false);\r\n            }\r\n        });\r\n    }\r\n\r\n   \r\n\r\n    if (form.isDirty()){\r\n        createModalBox ();\r\n    \r\n    } else {\r\n        defaultState();\r\n    }\r\n  \r\n\r\n}\r\n\r\n\r\nconst newAddBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n    \r\n    config   : {\r\n        id          : \"table-newAddBtnId\",\r\n        hotkey      : \"Alt+A\",\r\n        disabled    : true,\r\n        value       : \"Новая запись\", \r\n        click       : addItem,\r\n    },\r\n    titleAttribute : \"Добавить новую запись\",\r\n    adaptValue     : \"+\",\r\n\r\n   \r\n}).maxView();\r\n\r\nconst delBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n    \r\n    config   : {\r\n        id       : \"table-delBtnId\",\r\n        hotkey   : \"Ctrl+Enter\",\r\n        disabled : true,\r\n        icon     : \"icon-trash\", \r\n        click    : function (){\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.remove();\r\n        },\r\n    },\r\n    titleAttribute : \"Удалить запись из таблицы\"\r\n\r\n   \r\n}).minView(\"delete\");\r\n\r\n\r\nconst saveBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n    \r\n    config   : {\r\n        id       : \"table-saveBtn\",\r\n        hotkey   : \"Shift+Space\",\r\n        hidden   : true, \r\n        value    : \"Сохранить\", \r\n        click    : function(){\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.put();\r\n        },\r\n        on:{\r\n            onViewShow:function(){\r\n                if (this.isVisible()){\r\n                    $$(\"editTableFormProperty\")\r\n                    .config.tableStatus = \"put\";\r\n                }\r\n   \r\n            }\r\n        }\r\n    },\r\n    titleAttribute : \"Сохранить запись в таблицу\"\r\n\r\n   \r\n}).maxView(\"primary\");\r\n\r\n\r\nconst saveNewBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n    \r\n    config   : {\r\n        id       : \"table-saveNewBtn\",\r\n        hotkey   : \"Ctrl+Shift+Space\",\r\n        hidden   : true, \r\n        value    : \"Сохранить\", \r\n        click    : function(){\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm.post();\r\n        },\r\n        on:{\r\n            onViewShow:function(){\r\n\r\n                if (this.isVisible()){\r\n                    $$(\"editTableFormProperty\")\r\n                    .config.tableStatus = \"post\";\r\n                }\r\n   \r\n            }\r\n        }\r\n    },\r\n    titleAttribute : \"Сохранить новую запись в таблицу\"\r\n\r\n   \r\n}).maxView(\"primary\");\r\n\r\n\r\nconst backTableBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n    \r\n    config   : {\r\n        id       : \"table-backTableBtn\",\r\n        hotkey   : \"Shift+Q\",\r\n        hidden   : true,  \r\n        icon     : \"icon-arrow-left\", \r\n        click    : backTableBtnClick,\r\n    },\r\n    titleAttribute : \"Вернуться к таблице\"\r\n\r\n   \r\n}).minView();\r\n\r\n\r\n\r\n\r\nconst editFormBtns = {\r\n    minHeight : 48,\r\n    css       : \"webix_form-adaptive\", \r\n    margin    : 5, \r\n    rows:[\r\n        {cols:[\r\n            {   id      : \"tablePropBtnsSpace\",\r\n                width   : 35, \r\n                hidden  : true\r\n            },\r\n            {rows:[\r\n                {\r\n                    margin : 5,\r\n                    rows   : [\r\n                        {\r\n                            margin : 2,\r\n                            cols   : [\r\n                                backTableBtn,\r\n                                newAddBtn,  \r\n                                delBtn,\r\n                            ]\r\n                        },\r\n                \r\n                    ]\r\n                },\r\n        \r\n                {   margin : 10, \r\n                    rows   : [ \r\n                        saveBtn,\r\n                        saveNewBtn,\r\n                        {   id        : \"EditEmptyTempalte\",\r\n                            rows      : [\r\n                                {height:20},\r\n                                (0,_viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_3__.createEmptyTemplate)(\r\n                                    \"Добавьте новую запись или \" +\r\n                                    \"выберите существующую из таблицы\")\r\n                            ],\r\n                        }\r\n                    \r\n                    ]\r\n                },\r\n             \r\n            ]}\r\n        ]}\r\n   \r\n     \r\n\r\n    ]\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/buttons.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/createProperty.js":
/*!************************************************************!*\
  !*** ./src/js/components/table/editForm/createProperty.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createProperty\": () => (/* binding */ createProperty)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _propBtns_calendar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./propBtns/calendar.js */ \"./src/js/components/table/editForm/propBtns/calendar.js\");\n/* harmony import */ var _propBtns_textarea_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./propBtns/textarea.js */ \"./src/js/components/table/editForm/propBtns/textarea.js\");\n/* harmony import */ var _propBtns_reference_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./propBtns/reference.js */ \"./src/js/components/table/editForm/propBtns/reference.js\");\n/* harmony import */ var _defaultValues_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../defaultValues.js */ \"./src/js/components/table/defaultValues.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => createProperty\";\r\n\r\nfunction createDateEditor(){\r\n    webix.editors.$popup = {\r\n        date:{\r\n           view : \"popup\",\r\n           body : {\r\n            view        :\"calendar\",\r\n            weekHeader  :true,\r\n            events      :webix.Date.isHoliday,\r\n            timepicker  : true,\r\n            icons       : true,\r\n           }\r\n        }\r\n     };\r\n}\r\n\r\n\r\n\r\nfunction createEmptySpace(){\r\n    $$(\"propertyRefbtnsContainer\").addView({\r\n        height : 29,\r\n        width  : 1\r\n    });\r\n}\r\n\r\n\r\nfunction createBtnsContainer(refBtns){\r\n    try{\r\n        refBtns.addView({\r\n            id   : \"propertyRefbtnsContainer\",\r\n            rows : []\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createBtnsContainer\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setToolBtns(){\r\n    const property      = $$(\"editTableFormProperty\");\r\n    const refBtns       = $$(\"propertyRefbtns\");\r\n    const propertyElems = property.config.elements;\r\n\r\n\r\n    if (!(refBtns._cells.length)){\r\n\r\n        if (!$$(\"propertyRefbtnsContainer\")){\r\n            createBtnsContainer(refBtns);\r\n        }\r\n\r\n        propertyElems.forEach(function(el,i){\r\n            if (el.type == \"combo\"){\r\n                (0,_propBtns_reference_js__WEBPACK_IMPORTED_MODULE_4__.createRefBtn)(el.id);\r\n\r\n            } else if (el.customType == \"popup\"){\r\n                (0,_propBtns_textarea_js__WEBPACK_IMPORTED_MODULE_3__.createPopupOpenBtn)(el);\r\n                \r\n            } else if (el.type == \"customDate\") {\r\n                (0,_propBtns_calendar_js__WEBPACK_IMPORTED_MODULE_2__.createDatePopup)(el);\r\n\r\n            } else {    \r\n                createEmptySpace();\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction addEditInputs(arr){\r\n    const property = $$(\"editTableFormProperty\");\r\n    property.define(\"elements\", arr);\r\n    property.refresh();\r\n}\r\n\r\nfunction returnTemplate(el){\r\n    const template = {\r\n        id      : el.id,\r\n        label   : el.label, \r\n        unique  : el.unique,\r\n        notnull : el.notnull,\r\n        length  : el.length,\r\n        value   : (0,_defaultValues_js__WEBPACK_IMPORTED_MODULE_5__.returnDefaultValue) (el),\r\n\r\n    };\r\n\r\n    return template;\r\n}\r\n\r\n\r\n\r\nfunction createDateTimeInput(el){\r\n    const template =  returnTemplate(el);\r\n    template.type  = \"customDate\";\r\n\r\n    return template;\r\n\r\n}\r\n\r\n\r\nfunction comboTemplate(obj, config){\r\n    const value = obj.value;\r\n    const item  = config.collection.getItem(value);\r\n    return item ? item.value : \"\";\r\n}\r\nfunction createReferenceInput(el){\r\n   \r\n    const template =  returnTemplate(el);    \r\n    \r\n    let findTableId   = el.type.slice(10);\r\n    \r\n    template.type     = \"combo\";\r\n    template.css      = el.id + \"_container\";\r\n    template.options  = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getComboOptions)(findTableId);\r\n    template.template = function(obj, common, val, config){\r\n       return comboTemplate(obj, config);\r\n    };\r\n\r\n    return template;\r\n}\r\n\r\n\r\nfunction createBooleanInput(el){\r\n    const template =  returnTemplate(el);    \r\n \r\n    template.type     = \"combo\";\r\n    template.options  = [\r\n        {id:1, value: \"Да\"},\r\n        {id:2, value: \"Нет\"}\r\n    ];\r\n    template.template = function(obj, common, val, config){\r\n        return comboTemplate(obj, config);\r\n    };\r\n\r\n    return template;\r\n}\r\n\r\n\r\nfunction createTextInput(el){\r\n    const template =  returnTemplate(el);\r\n\r\n    if (el.length == 0 || el.length > 512){\r\n        template.customType=\"popup\";\r\n\r\n    } \r\n    template.type = \"text\";\r\n    return template;\r\n}\r\n\r\nfunction addIntegerType(el){\r\n    const template =  createTextInput(el);\r\n    template.customType = \"integer\";\r\n    return template;\r\n}\r\n\r\nfunction returnPropElem(el){\r\n    let propElem;\r\n\r\n    if (el.type == \"datetime\"){\r\n        propElem = createDateTimeInput(el);\r\n\r\n    } else if (el.type.includes(\"reference\")) {\r\n        propElem = createReferenceInput(el);\r\n\r\n    } else if (el.type.includes(\"boolean\")) {\r\n        propElem = createBooleanInput(el);\r\n\r\n    } else if (el.type.includes(\"integer\")) {\r\n        propElem = addIntegerType(el);\r\n\r\n    } else {\r\n        propElem = createTextInput(el);\r\n    }\r\n\r\n    return propElem;\r\n}\r\nfunction createProperty (parentElement) {\r\n\r\n    const property         = $$(parentElement);\r\n    const columnsData      = $$(\"table\").getColumns(true);\r\n    const elems            = property.elements;\r\n    const propertyLength   = Object.keys(elems).length;\r\n\r\n    try {\r\n        \r\n        if ( !propertyLength ){\r\n            const propElems = [];\r\n\r\n            columnsData.forEach((el) => {\r\n\r\n                const propElem = returnPropElem(el);\r\n                propElems.push(propElem);\r\n\r\n            });\r\n\r\n        \r\n            createDateEditor();\r\n            addEditInputs   (propElems);\r\n            setToolBtns     ();\r\n    \r\n\r\n        } else {\r\n            property.clear();\r\n            property.clearValidation();\r\n\r\n            if(parentElement == \"table-editForm\"){\r\n                $$(\"table-delBtnId\").enable();\r\n            }\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createEditFields\"\r\n        );\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/createProperty.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/editFormMediator/editFormClass.js":
/*!****************************************************************************!*\
  !*** ./src/js/components/table/editForm/editFormMediator/editFormClass.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EditForm\": () => (/* binding */ EditForm)\n/* harmony export */ });\n/* harmony import */ var _setState_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setState.js */ \"./src/js/components/table/editForm/editFormMediator/setState.js\");\n/* harmony import */ var _formAcitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formAcitions.js */ \"./src/js/components/table/editForm/editFormMediator/formAcitions.js\");\n\r\n\r\n\r\n\r\n\r\n        \r\nclass EditForm {\r\n    static defaultState (){\r\n        (0,_setState_js__WEBPACK_IMPORTED_MODULE_0__.editTableDefState)();\r\n    }\r\n\r\n    static putState     (){\r\n       (0,_setState_js__WEBPACK_IMPORTED_MODULE_0__.editTablePutState)();\r\n    }\r\n\r\n    static postState    (){\r\n        (0,_setState_js__WEBPACK_IMPORTED_MODULE_0__.editTablePostState)();\r\n    }\r\n\r\n    static put (updateSpace = true, isNavigate = false){\r\n        return (0,_formAcitions_js__WEBPACK_IMPORTED_MODULE_1__.putTable) (updateSpace, isNavigate, this); \r\n    }\r\n\r\n    static post (updateSpace = true, isNavigate = false){\r\n        return (0,_formAcitions_js__WEBPACK_IMPORTED_MODULE_1__.postTable)(updateSpace, isNavigate, this);\r\n    }\r\n\r\n    static remove (){\r\n        (0,_formAcitions_js__WEBPACK_IMPORTED_MODULE_1__.removeTableItem)(this);\r\n    }\r\n\r\n    static clearTempStorage(){\r\n        $$(\"editTableFormProperty\").config.tempData = false;\r\n        webix.storage.local.remove(\"editFormTempData\");\r\n    }\r\n\r\n\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/editFormMediator/editFormClass.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/editFormMediator/formAcitions.js":
/*!***************************************************************************!*\
  !*** ./src/js/components/table/editForm/editFormMediator/formAcitions.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"putTable\": () => (/* binding */ putTable),\n/* harmony export */   \"postTable\": () => (/* binding */ postTable),\n/* harmony export */   \"removeTableItem\": () => (/* binding */ removeTableItem)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _validation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../validation.js */ \"./src/js/components/table/editForm/validation.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => formActions\";\r\n\r\nfunction unsetDirtyProp(){\r\n    $$(\"table-editForm\").setDirty(false);\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_5__.mediator.tables.editForm.clearTempStorage();\r\n}\r\n\r\nfunction updateTable (itemData){\r\n    try{\r\n        const table = $$(\"table\");\r\n        const id    = itemData.id;\r\n        table.updateItem(id, itemData);\r\n        table.clearSelection();\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"updateTable\"\r\n        );\r\n    }  \r\n    \r\n}\r\n\r\n\r\n\r\nfunction dateFormatting(arr){\r\n    const vals          = Object.values(arr);\r\n    const keys          = Object.keys(arr);\r\n    const formattingArr = arr;\r\n\r\n    keys.forEach(function(el, i){\r\n        const prop       = $$(\"editTableFormProperty\");\r\n        const item       = prop.getItem(el);\r\n        const formatData = webix.Date.dateToStr(\"%d.%m.%Y %H:%i:%s\");\r\n\r\n        if ( item.type == \"customDate\" ){\r\n            formattingArr[el] = formatData(vals[i]);\r\n        }\r\n    });\r\n\r\n\r\n    return formattingArr;\r\n}\r\n\r\nfunction formattingBoolVals(arr){\r\n    const table = $$( \"table\" );\r\n    const cols  = table.getColumns();\r\n    cols.forEach(function(el,i){\r\n\r\n        if ( arr[el.id] && el.type == \"boolean\" ){\r\n            if (arr[el.id] == 2){\r\n                arr[el.id] = false;\r\n            } else {\r\n                arr[el.id] = true;\r\n            }\r\n        }\r\n    });\r\n\r\n    return arr;\r\n\r\n} \r\n\r\nfunction createSentObj (values){\r\n    const uniqueVals     = (0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.uniqueData)     (values    );\r\n    const dateFormatVals = dateFormatting (uniqueVals);\r\n    return formattingBoolVals(dateFormatVals);\r\n}\r\n\r\nfunction putTable (updateSpace, isNavigate, form){\r\n    try{    \r\n        const property = $$(\"editTableFormProperty\");\r\n        const itemData = property.getValues();   \r\n        const currId   = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getItemId) ();\r\n        const isError  = (0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.validateProfForm)().length;\r\n        const id       = itemData.id;\r\n\r\n        const isDirtyForm = $$(\"table-editForm\").isDirty();\r\n \r\n        if (!isError && id && isDirtyForm){\r\n          \r\n            const path    = \"/init/default/api/\" + currId + \"/\" + id;\r\n            const sentObj = createSentObj (itemData);\r\n    \r\n            const putData = webix.ajax().put(path, sentObj);\r\n       \r\n            return putData.then(function (data){\r\n                data = data.json();\r\n             \r\n                if (data.err_type == \"i\"){\r\n\r\n\r\n                    if (updateSpace){\r\n                        form.defaultState();\r\n                    }\r\n\r\n                 // для модальных окон без перехода на другую стр.\r\n                    if (updateSpace || !isNavigate){ \r\n                        updateTable   (itemData);\r\n                    }\r\n\r\n                    unsetDirtyProp();\r\n\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                        \"success\", \r\n                        \"Данные сохранены\", \r\n                        currId\r\n                    );\r\n\r\n                    return true;\r\n\r\n                } else {\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                        \"error\", \r\n                        logNameFile + \r\n                        \" function saveItem: \" + \r\n                        data.err\r\n                    );\r\n\r\n                    return false;\r\n                }\r\n            }).fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n                    err, \r\n                    logNameFile, \r\n                    \"saveItem\"\r\n                );\r\n            });\r\n                \r\n\r\n        } else {\r\n            if (isError){\r\n                (0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.validateProfForm)()\r\n                .forEach(function(){\r\n                    (0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.setLogError) ();\r\n                });\r\n            } else if (!id){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                    \"error\", \r\n                    \"Поле id не заполнено\"\r\n                );\r\n            } else if (!isDirtyForm){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                    \"error\", \r\n                    \"Обновлять нечего\"\r\n                );\r\n            }\r\n           \r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"saveItem\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\n// post\r\nfunction removeNullFields(arr){\r\n    const vals    = Object.values(arr);\r\n    const keys    = Object.keys(arr);\r\n    const sentObj = {};\r\n\r\n    vals.forEach(function(el,i){\r\n        if (el){\r\n            sentObj[keys[i]]= el;\r\n        }\r\n        dateFormatting(arr);\r\n    });\r\n\r\n    return sentObj;\r\n}\r\n\r\nfunction setCounterVal (){\r\n    try{\r\n        const counter = $$(\"table-findElements\");\r\n        \r\n        const oldVal  = counter.getValues();\r\n        const newVal  = +oldVal + 1;\r\n\r\n        counter.setValues(newVal.toString());\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setCounterVal\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction addToTable(newValues){\r\n    const table  = $$(\"table\");\r\n    const offset = table.config.offsetAttr;\r\n\r\n    if (newValues.id <= offset ){  // изменить \r\n        table.add(newValues); \r\n    }\r\n\r\n    setCounterVal ();\r\n}\r\n\r\nfunction createPostObj(newValues){\r\n    const notNullVals    = removeNullFields(newValues);\r\n    const dateFormatVals = dateFormatting  (notNullVals);\r\n    return formattingBoolVals(dateFormatVals);\r\n}\r\n\r\n\r\nfunction postTable (updateSpace, isNavigate, form){\r\n    const currId  = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getItemId) ();\r\n    const isError = (0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.validateProfForm)().length;\r\n  \r\n    if (!isError){\r\n        const property  = $$(\"editTableFormProperty\");\r\n        const newValues = property.getValues();\r\n        const postObj   = createPostObj(newValues);\r\n \r\n        const path      = \"/init/default/api/\" + currId;\r\n        return  webix.ajax().post(path, postObj)\r\n            .then(function(data){\r\n   \r\n            data         = data.json();\r\n            const id     = data.content.id;\r\n            newValues.id = id;\r\n\r\n \r\n            if (data.err_type == \"i\" && id){\r\n           \r\n\r\n                if (updateSpace){\r\n                    form.defaultState();\r\n                }\r\n\r\n            // для модальных окон без перехода на другую стр.\r\n                if (updateSpace || !isNavigate){ \r\n                    addToTable    (newValues);\r\n                }\r\n\r\n                unsetDirtyProp();\r\n\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                    \"success\",\r\n                    \"Данные успешно добавлены\",\r\n                    currId\r\n                );\r\n\r\n                return true;\r\n                \r\n            } else {\r\n               \r\n                const errs   = data.content.errors;\r\n                let msg      = \"\";\r\n                if (errs){\r\n                    const values = Object.values(errs);\r\n                    values.forEach(function(err, i){\r\n                        const errorField = Object.keys(errs)[i];\r\n                        msg += err + \" (Поле: \" + errorField + \"); \";\r\n                    });\r\n                } else {\r\n                    msg = data.err; \r\n                }\r\n\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                    \"error\",\r\n                    \"editTableForm function saveNewItem: \" + \r\n                    msg\r\n                );\r\n\r\n                return false;\r\n            }\r\n        }).fail(function(err){\r\n            console.log(err);\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n                err, \r\n                \"tableEditForm => btns\",\r\n                \"saveNewItem\"\r\n            );\r\n            return false;\r\n        });\r\n    \r\n\r\n    } else {\r\n        (0,_validation_js__WEBPACK_IMPORTED_MODULE_1__.setLogError) ();\r\n    }\r\n}\r\n\r\n\r\n// remove\r\nfunction removeRow(){\r\n    const table       = $$( \"table\" );\r\n    const tableSelect = table.getSelectedId().id;\r\n\r\n    if(table){\r\n        table.remove(tableSelect);\r\n    }\r\n\r\n}\r\n\r\nfunction removeTableItem(form){\r\n\r\n    const currId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getItemId) ();\r\n\r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_4__.popupExec)(\"Запись будет удалена\").then(\r\n        function(){\r\n        \r\n            const formValues = $$(\"editTableFormProperty\").getValues();\r\n            const id    = formValues.id;\r\n            const path  =\"/init/default/api/\" + currId + \"/\" + id + \".json\";\r\n            const removeData = webix.ajax().del(path, formValues);\r\n\r\n            removeData.then(function(data){\r\n                data = data.json();\r\n\r\n                if (data.err_type == \"i\"){\r\n                    \r\n                    form.defaultState();\r\n\r\n                    unsetDirtyProp();\r\n\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                        \"success\",\r\n                        \"Данные успешно удалены\"\r\n                    );\r\n                    removeRow();\r\n                } else {\r\n                    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_3__.setLogValue)(\r\n                        \"error\",\r\n                        \"editTableForm function removeItem: \" +\r\n                        data.err\r\n                    );\r\n                }\r\n            });\r\n            removeData.fail(function(err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n                    err, \r\n                    logNameFile,\r\n                    \"removeItem\"\r\n                );\r\n            });\r\n    \r\n        }\r\n    );\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/editFormMediator/formAcitions.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/editFormMediator/setState.js":
/*!***********************************************************************!*\
  !*** ./src/js/components/table/editForm/editFormMediator/setState.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editTableDefState\": () => (/* binding */ editTableDefState),\n/* harmony export */   \"editTablePutState\": () => (/* binding */ editTablePutState),\n/* harmony export */   \"editTablePostState\": () => (/* binding */ editTablePostState)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _createProperty_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../createProperty.js */ \"./src/js/components/table/editForm/createProperty.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => editForm => setState\";\r\n\r\n\r\nfunction initPropertyForm(){\r\n    const property = $$(\"editTableFormProperty\");\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem(property);\r\n    property.clear();\r\n    $$(\"table-editForm\").setDirty(false);\r\n}\r\n\r\nfunction setWorkspaceState (table){\r\n    const emptyTemplate = $$(\"EditEmptyTempalte\");\r\n    function tableState(){\r\n        table.filter(false);\r\n        table.clearSelection();\r\n    }\r\n\r\n    function buttonsState(){\r\n        $$(\"table-delBtnId\")   .disable();\r\n        $$(\"table-saveBtn\")    .hide();\r\n        $$(\"table-saveNewBtn\") .show();\r\n        $$(\"table-newAddBtnId\").disable();\r\n    }\r\n\r\n    try{\r\n        tableState();\r\n        buttonsState();\r\n        (0,_createProperty_js__WEBPACK_IMPORTED_MODULE_4__.createProperty)(\"table-editForm\");\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(emptyTemplate);\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setWorkspaceState\"\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction editTablePostState(){\r\n    const table = $$(\"table\");\r\n    initPropertyForm();\r\n    setWorkspaceState (table);\r\n    table.hideOverlay(\"Ничего не найдено\");\r\n}\r\n\r\n//select exists entry\r\nfunction setPropertyWidth(prop){\r\n    const form = $$(\"table-editForm\");\r\n\r\n    if (prop && !(prop.isVisible())){\r\n        prop.show();\r\n\r\n        if (window.innerWidth > 850){\r\n            form.config.width = 350;   \r\n            form.resize();\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction adaptiveView (editForm){\r\n    try {\r\n        const container = $$(\"container\");\r\n\r\n        if (container.$width < 850){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"tree\"));\r\n\r\n            if (container.$width < 850){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"tableContainer\"));\r\n                editForm.config.width = window.innerWidth;\r\n                editForm.resize();\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"table-backTableBtn\"));\r\n            }\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"adaptiveView\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction editTablePutState(){\r\n  \r\n    try{\r\n        const editForm  = $$(\"table-editForm\");\r\n        setPropertyWidth($$(\"editTableFormProperty\"));\r\n        editForm.setDirty(false);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem  ($$(\"table-saveBtn\"    ));\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem  ($$(\"table-saveNewBtn\" ));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem  ($$(\"EditEmptyTempalte\"));\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem($$(\"table-delBtnId\"   ));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem($$(\"table-newAddBtnId\"));\r\n   \r\n        if( !(editForm.isVisible()) ){\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.tables.defaultState(\"filter\");\r\n            _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button.transparentDefaultState();\r\n            adaptiveView (editForm);\r\n            editForm.show();\r\n        }\r\n \r\n    } catch (err){   \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"editTablePutState\"\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nfunction defPropertyState(){\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.tables.editForm.clearTempStorage();\r\n    const property = $$(\"editTableFormProperty\");\r\n\r\n    if (property){\r\n        property.clear();\r\n        property.hide();\r\n    }\r\n}\r\n\r\nfunction unsetDirtyProp(){\r\n    $$(\"table-editForm\").setDirty(false);\r\n}\r\n\r\nfunction editTableDefState(){\r\n    unsetDirtyProp();\r\n    \r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem   ($$(\"table-editForm\"    ));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem   ($$(\"tablePropBtnsSpace\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem   ($$(\"table-saveNewBtn\"  ));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem   ($$(\"table-saveBtn\"     ));\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem   ($$(\"tableContainer\"    ));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem   ($$(\"EditEmptyTempalte\" ));\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem ($$(\"table-newAddBtnId\" ));\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem ($$(\"propertyRefbtnsContainer\"));\r\n\r\n    defPropertyState();\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/editFormMediator/setState.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/propBtns/calendar.js":
/*!***************************************************************!*\
  !*** ./src/js/components/table/editForm/propBtns/calendar.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDatePopup\": () => (/* binding */ createDatePopup)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet property;\r\n\r\nconst logNameFile = \"tableEditForm => propBtns => calendar\";\r\n\r\n\r\nfunction unsetDirtyProp(elem){\r\n    elem.config.dirtyProp = false;\r\n}\r\n\r\nfunction formatDate(format){\r\n    return webix.Date.dateToStr(\"%\" + format);\r\n}\r\n\r\nconst formatHour = formatDate(\"H\");\r\nconst formatMin  = formatDate(\"i\");\r\nconst formatSec  = formatDate(\"s\");\r\n\r\n\r\nfunction setTimeInputsValue(value){\r\n    $$(\"hourInp\").setValue (formatHour(value));\r\n    $$(\"minInp\") .setValue (formatMin (value));\r\n    $$(\"secInp\") .setValue (formatSec (value));\r\n}\r\n\r\nfunction unsetDirtyPropInputs(calendar){\r\n    unsetDirtyProp( calendar     );\r\n    unsetDirtyProp( $$(\"hourInp\"));\r\n    unsetDirtyProp( $$(\"minInp\" ) );\r\n    unsetDirtyProp( $$(\"secInp\" ) );\r\n}\r\n\r\nfunction setPropValues(elem){\r\n \r\n    const val       = property.getValues()[elem.id];\r\n    const valFormat = formatHour(val);\r\n\r\n    const calendar  = $$(\"editCalendarDate\");\r\n    const btn       = $$(\"editPropCalendarSubmitBtn\");\r\n\r\n    try{\r\n\r\n        if ( val && !isNaN(valFormat) ){\r\n            calendar.setValue (val);\r\n            setTimeInputsValue(val);\r\n\r\n        } else {\r\n            calendar.setValue( new Date() );\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.disableItem(btn);\r\n        }\r\n\r\n        unsetDirtyPropInputs(calendar);\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"setValuesDate\");\r\n    }\r\n    \r\n}\r\n\r\nfunction returnTimeValue(h, m, s){\r\n    return h + \":\" + m+\":\" + s;;\r\n}\r\n\r\nfunction returnSentValue(date, time){\r\n    return date + \" \" + time;\r\n}\r\n\r\nconst errors = [];\r\n\r\nfunction validTime(item, count, idEl){\r\n\r\n    function markInvalid (){\r\n        try{\r\n            $$(\"timeForm\").markInvalid(idEl);\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                err, \r\n                logNameFile, \r\n                \"validTime element: \" + idEl\r\n            );\r\n        }\r\n        errors.push(idEl);\r\n    }\r\n    \r\n    if (item > count){\r\n        markInvalid ();\r\n    }\r\n\r\n    if ( !( /^\\d+$/.test(item) ) ){\r\n        markInvalid ();\r\n    }\r\n\r\n    if (item.length < 2){\r\n        markInvalid ();\r\n    }\r\n\r\n    return errors;\r\n}\r\n\r\nfunction setValToProperty(sentVal, elem){\r\n    const propId  = property.getValues().id;\r\n    try{\r\n        if ( !(errors, errors.length) ){\r\n            property.setValues({ [elem.id] : sentVal}, true);\r\n\r\n            if(propId){\r\n                property.setValues({ id : propId}, true);\r\n\r\n            }\r\n\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.destructItem($$(\"editTablePopupCalendar\"));\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"setValToProperty\");\r\n    }\r\n}\r\n\r\nfunction inputItterate(name, count){\r\n    const val = $$(name).getValue();\r\n    validTime(val, count, name);\r\n    return val;\r\n}\r\n\r\nfunction submitClick (elem){\r\n    errors.length  = 0;\r\n\r\n    const calendar = $$(\"editCalendarDate\");\r\n    const form     = $$(\"table-editForm\");\r\n\r\n    const hour = inputItterate(\"hourInp\", 23);\r\n    const min  = inputItterate(\"minInp\",  59);\r\n    const sec  = inputItterate(\"secInp\",  59);\r\n  \r\n    const calendarVal    = calendar.getValue();\r\n    const fullFormatDate = formatDate(\"d.%m.%y\");\r\n    const dateVal        = fullFormatDate(calendarVal);\r\n\r\n    const timeVal        = returnTimeValue(hour, min, sec);\r\n\r\n    const sentVal = returnSentValue(dateVal, timeVal);\r\n    setValToProperty(sentVal, elem);\r\n\r\n    form.setDirty(true);\r\n\r\n    form.callEvent(\"onTimedKeyPress\");\r\n    return errors.length;\r\n}\r\n\r\nfunction isDirty(){\r\n    let check      = false;\r\n    function checkDirty(elem){\r\n        if ( elem.config.dirtyProp && !check ){\r\n            check = true;\r\n        }\r\n    }\r\n\r\n    checkDirty ($$(\"editCalendarDate\"));\r\n    checkDirty ($$(\"hourInp\"         ));\r\n    checkDirty ($$(\"minInp\"          ));\r\n    checkDirty ($$(\"secInp\"          ));\r\n\r\n    return check;\r\n}\r\n\r\n\r\nconst closePopupClick = function (elem){\r\n    const calendar = $$(\"editTablePopupCalendar\");\r\n\r\n    if (isDirty()){\r\n  \r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_1__.modalBox)().then(function(result){\r\n\r\n            if (result == 1){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.destructItem(calendar);\r\n            }\r\n\r\n            if (result == 2 && !submitClick(elem)){\r\n\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.destructItem(calendar);\r\n\r\n            }\r\n        });\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.destructItem(calendar);\r\n    }\r\n\r\n};\r\n\r\n\r\nfunction returnCalendar(){\r\n    const calendar = {\r\n        view        :\"calendar\",\r\n        id          :\"editCalendarDate\",\r\n        format      :\"%d.%m.%y\",\r\n        borderless  :true,\r\n        width       :300,\r\n        height      :250,\r\n        dirtyProp   :false,\r\n        on          :{\r\n            onChange:function(){\r\n                this.config.dirtyProp = true;\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.enableItem($$(\"editPropCalendarSubmitBtn\"));\r\n            }\r\n        }\r\n    } ;\r\n\r\n    return calendar;\r\n}\r\n\r\n\r\nfunction returnInput(idEl){\r\n    const calendar = $$(\"editPropCalendarSubmitBtn\");\r\n    return {\r\n        view        : \"text\",\r\n        name        : idEl,\r\n        id          : idEl,\r\n        placeholder : \"00\",\r\n        attributes  : { maxlength :2 },\r\n        dirtyProp   : false,\r\n        on          : {\r\n            onKeyPress:function(){\r\n                $$(\"timeForm\").markInvalid(idEl, false);\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.enableItem(calendar);\r\n            },\r\n\r\n            onChange:function(){\r\n                this.config.dirtyProp = true;\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.enableItem(calendar);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nfunction returnTimeSpacer (idEl){\r\n    return {   \r\n        template   : \":\",\r\n        id         : idEl,\r\n        borderless : true,\r\n        width      : 9,\r\n        height     : 5,\r\n        css        : \"popup_time-spacer\"\r\n    };\r\n}\r\n\r\nfunction returnTimePrompt(){\r\n \r\n    const prompt = {   \r\n        template:\"<div style='font-size:13px!important'>\"+\r\n        \"Введите время в формате xx : xx : xx</div>\",\r\n        borderless:true,\r\n        css:\"popup_time-timeFormHead\",\r\n    };\r\n\r\n    return prompt;\r\n}\r\n\r\nfunction returnTimeForm(){\r\n    const timeForm = {\r\n        view    : \"form\", \r\n        id      : \"timeForm\",\r\n        height  : 85,\r\n        type    : \"space\",\r\n        elements: [\r\n            returnTimePrompt(),\r\n            { cols:[\r\n                returnInput(\"hourInp\"),\r\n                returnTimeSpacer (1),\r\n                returnInput(\"minInp\"),\r\n                returnTimeSpacer (2),\r\n                returnInput(\"secInp\")\r\n            ]}\r\n        ]\r\n    };\r\n\r\n    return timeForm;\r\n}\r\n\r\nfunction returnDateEditor(){\r\n    const dateEditor = {\r\n        rows:[\r\n            returnCalendar(), \r\n            {height:10}, \r\n            returnTimeForm(),\r\n            {height:10}, \r\n        ]\r\n    };\r\n\r\n    return dateEditor;\r\n}\r\n\r\nfunction returnSubmitBtn(elem){\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__.Button({\r\n\r\n        config   : {\r\n            id       : \"editPropCalendarSubmitBtn\",\r\n            hotkey   : \"Ctrl+Space\",\r\n            value    : \"Добавить значение\", \r\n            click    : function(){\r\n                submitClick(elem);\r\n            },\r\n        },\r\n        titleAttribute : \"Добавить значение в запись таблицы\"\r\n    \r\n       \r\n    }).maxView(\"primary\");\r\n\r\n    return btn;\r\n\r\n}\r\nfunction popupEdit(elem){\r\n\r\n    const headline = \"Редактор поля  «\" + elem.label + \"»\";\r\n\r\n    const popup = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_3__.Popup({\r\n        headline : headline,\r\n        config   : {\r\n            id        : \"editTablePopupCalendar\",\r\n            width     : 400,\r\n            minHeight : 300,\r\n        },\r\n        closeClick : closePopupClick,\r\n        elements : {\r\n            rows : [\r\n                returnDateEditor(),\r\n                {height:15},\r\n                returnSubmitBtn(elem),\r\n            ]\r\n          \r\n        }\r\n    });\r\n    \r\n    popup.createView ();\r\n    popup.showPopup  ();\r\n\r\n    setPropValues(elem);\r\n\r\n}\r\n\r\nfunction propBtnClick(elem){\r\n    property = $$(\"editTableFormProperty\");\r\n    popupEdit(elem);\r\n}\r\n\r\n\r\nfunction createDateBtn(elem){\r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__.Button({\r\n\r\n        config   : {\r\n            width    : 30,\r\n            height   : 29,\r\n            icon     : \"icon-calendar\", \r\n            click    : function(){\r\n                propBtnClick (elem);\r\n            },\r\n        },\r\n        titleAttribute : \"Открыть календарь\"\r\n    \r\n       \r\n    }).minView();\r\n\r\n\r\n    try{\r\n        $$(\"propertyRefbtnsContainer\").addView(btn);\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"createDateBtn\");\r\n    }\r\n}\r\n\r\nfunction createDatePopup(el){\r\n    createDateBtn(el);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem($$(\"tablePropBtnsSpace\"));\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/propBtns/calendar.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/propBtns/reference.js":
/*!****************************************************************!*\
  !*** ./src/js/components/table/editForm/propBtns/reference.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createRefBtn\": () => (/* binding */ createRefBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => propBtns => reference\";\r\n\r\n\r\nlet selectBtn;\r\nlet idPost;\r\n\r\nfunction toRefTable (refTable){ \r\n    let url = \"tree/\" + refTable;\r\n\r\n    if (idPost){\r\n        url = url + \"?id=\" + idPost;\r\n    }\r\n\r\n    if (refTable){\r\n        Backbone.history.navigate(url, { trigger : true});\r\n        window.location.reload();\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction setRefTable (srcTable){\r\n    const table = $$(\"table\");\r\n    const cols  = table.getColumns();\r\n    const tree  = $$(\"tree\");\r\n\r\n    try {\r\n        cols.forEach(function(col){\r\n\r\n            if ( col.id == srcTable ){\r\n            \r\n                const refTable = col.type.slice(10);\r\n\r\n                toRefTable (refTable);\r\n            \r\n            }\r\n\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setRefTable\"\r\n        );\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem($$(\"EditEmptyTempalte\"));\r\n    }\r\n}\r\n\r\n\r\nfunction createModalBox (srcTable){\r\n   \r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_3__.modalBox)().then(function(result){\r\n        const editForm =  $$(\"table-editForm\");\r\n\r\n        if (result == 1 || result == 2){\r\n            const idExists = $$(\"table-saveBtn\").isVisible();\r\n\r\n            const form = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_4__.mediator.tables.editForm;\r\n            \r\n            if (result == 2){\r\n                if (idExists){\r\n                    form.put(false, true)\r\n                    .then(function (result){\r\n                        if (result){\r\n                            editForm.setDirty(false);\r\n                            setRefTable (srcTable);\r\n                        }\r\n                    });\r\n                } else {\r\n                    form.post(false, true)\r\n                    .then(function (result){\r\n                        if (result){\r\n                            editForm.setDirty(false);\r\n                            setRefTable (srcTable); \r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                editForm.setDirty(false);\r\n                setRefTable      (srcTable); \r\n            }\r\n        }\r\n    });\r\n        \r\n    \r\n}\r\n\r\nfunction findIdPost(editor){\r\n    const prop = $$(\"editTableFormProperty\");\r\n    const item = prop.getItem(editor);\r\n    return item.value;\r\n}\r\n\r\nfunction btnClick (idBtn){\r\n    const config      = $$(idBtn).config;\r\n    const srcTable    = config.srcTable;\r\n    const isDirtyForm = $$(\"table-editForm\").isDirty();\r\n    idPost            = findIdPost(config.idEditor);\r\n    \r\n    if (isDirtyForm){\r\n        createModalBox (srcTable);\r\n    } else {\r\n        setRefTable    (srcTable);\r\n    }\r\n}\r\n\r\nfunction btnLayout(idEditor){\r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__.Button({\r\n\r\n        config   : {\r\n            width    : 30,\r\n            height   : 29,\r\n            idEditor : idEditor,\r\n            icon     : \"icon-share-square-o\", \r\n            srcTable : selectBtn,\r\n            click    : function(id){\r\n                btnClick (id);\r\n            },\r\n        },\r\n        titleAttribute : \"Перейти в родительскую таблицу\"\r\n    \r\n       \r\n    }).minView();\r\n\r\n    try{\r\n        $$(\"propertyRefbtnsContainer\").addView(btn);\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"btnLayout\");\r\n    }\r\n}\r\n\r\nfunction createRefBtn(btn){\r\n    selectBtn = btn;\r\n    btnLayout(btn);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem($$(\"tablePropBtnsSpace\"));\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/propBtns/reference.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/propBtns/textarea.js":
/*!***************************************************************!*\
  !*** ./src/js/components/table/editForm/propBtns/textarea.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createPopupOpenBtn\": () => (/* binding */ createPopupOpenBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => propBtns => textarea\";\r\n\r\nlet property;\r\nlet elem;\r\n\r\nfunction setPropValue(value){\r\n    property.setValues({ \r\n        [elem.id]:[value] \r\n    }, true);\r\n}\r\n\r\nfunction submitClick (){\r\n    try{\r\n        const value = $$(\"editPropTextarea\").getValue();\r\n        setPropValue(value);\r\n        $$(\"table-editForm\").setDirty(true);\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"submitClick\"\r\n        );\r\n    }\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.destructItem($$(\"editTablePopupText\"));\r\n}\r\n\r\nfunction setTextareaVal(){\r\n    try{\r\n        const area = $$(\"editPropTextarea\");\r\n        const val  = elem.value;\r\n        if (val){\r\n            area.setValue(val);\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setTextareaVal\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction createModalBox(area){\r\n   \r\n    const value = area.getValue();\r\n    const popup = $$(\"editTablePopupText\");\r\n\r\n    if (area.dirtyValue){\r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_1__.modalBox)().then(function(result){\r\n\r\n            if (result == 1 || result == 2){\r\n                if (result == 2){\r\n                    setPropValue(value);\r\n                }\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.destructItem(popup);\r\n            }\r\n        });\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.destructItem(popup);\r\n    } \r\n}\r\n\r\n\r\nconst closePopupClick = function (){\r\n    const area  = $$(\"editPropTextarea\");\r\n\r\n    if (area){\r\n        createModalBox(area);\r\n    }\r\n   \r\n};\r\n\r\nfunction returnTextArea(){\r\n    const textarea = { \r\n        view        : \"textarea\",\r\n        id          : \"editPropTextarea\", \r\n        height      : 150, \r\n        dirtyValue  : false,\r\n        placeholder : \"Введите текст\",\r\n        on          : {\r\n            onKeyPress:function(){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.enableItem($$(\"editPropSubmitBtn\"));\r\n\r\n                $$(\"editPropTextarea\").dirtyValue = true;\r\n            }\r\n        }\r\n    };\r\n\r\n    return textarea;\r\n}\r\n\r\nfunction returnSubmitBtn(){\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__.Button({\r\n\r\n        config   : {\r\n            id       : \"editPropSubmitBtn\",\r\n            disabled : true,\r\n            hotkey   : \"Ctrl+Space\",\r\n            value    : \"Добавить значение\", \r\n            click    : function(){\r\n                submitClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Добавить значение в запись таблицы\"\r\n    \r\n       \r\n    }).maxView(\"primary\");\r\n\r\n    return btn;\r\n}\r\nfunction popupEdit(){\r\n    const headline = \"Редактор поля  «\" + elem.label + \"»\";\r\n\r\n    const popup = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_3__.Popup({\r\n        headline : headline,\r\n        config   : {\r\n            id        : \"editTablePopupText\",\r\n            width     : 400,\r\n            minHeight : 300,\r\n    \r\n        },\r\n\r\n        closeClick :  closePopupClick,\r\n    \r\n        elements   : {\r\n            padding:{\r\n                left  : 9,\r\n                right : 9\r\n            },\r\n            rows   : [\r\n                returnTextArea(),\r\n                {height : 15},\r\n                returnSubmitBtn(),\r\n            ]\r\n          \r\n        }\r\n    });\r\n    \r\n    popup.createView ();\r\n    popup.showPopup  ();\r\n\r\n    setTextareaVal();\r\n\r\n}\r\n\r\nfunction btnClick (){\r\n    popupEdit();\r\n}\r\n\r\n\r\nfunction createBtnTextEditor(){\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__.Button({\r\n\r\n        config   : {\r\n            width    : 30,\r\n            height   : 29,\r\n            icon     : \"icon-window-restore\", \r\n            click    : function(){\r\n                btnClick ();\r\n            },\r\n        },\r\n        titleAttribute : \"Открыть большой редактор текста\"\r\n    \r\n       \r\n    }).minView();\r\n    \r\n    try{\r\n        $$(\"propertyRefbtnsContainer\").addView(btn);\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"createBtnTextEditor\");\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction createPopupOpenBtn(el){\r\n    property = $$(\"editTableFormProperty\");\r\n    elem     = el;\r\n\r\n    createBtnTextEditor();\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem($$(\"tablePropBtnsSpace\"));\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/propBtns/textarea.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/property.js":
/*!******************************************************!*\
  !*** ./src/js/components/table/editForm/property.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"propertyLayout\": () => (/* binding */ propertyLayout)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => property\";\r\n\r\nfunction editingEnd (editor, value){\r\n    try{\r\n        const property = $$(\"editTableFormProperty\");\r\n        const item     = property.getItem(editor);\r\n        item.value     = value;\r\n\r\n        property.updateItem(editor);\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"editingEnd\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction propTooltipAction (obj){\r\n   \r\n    const label      = obj.label;\r\n    const labelText  = \"Название: \" + label + \" <br>\";\r\n    const formatData = webix.Date.dateToStr(\"%d.%m.%Y %H:%i:%s\");\r\n    let value;\r\n    let typeElem;\r\n    \r\n    if        ( obj.type       == \"date\" ){\r\n        typeElem = \"Выберите дату\";\r\n\r\n    } else if ( obj.type       == \"combo\" ){\r\n        typeElem = \"Выберите значение\";\r\n        const node     = $$(\"editTableFormProperty\").getItemNode(obj.id);\r\n\r\n        if (node){\r\n            const valueCss = \"webix_property_value\";\r\n            const valueDiv = node.getElementsByClassName(valueCss)[0];\r\n            const text     = valueDiv.innerHTML;\r\n            obj.value      = text ? text : obj.value;\r\n        }\r\n\r\n    } else if ( obj.customType == \"integer\" ){\r\n        typeElem = \"Введите число\";\r\n\r\n    } else {\r\n        typeElem = \"Введите текст\";\r\n    } \r\n    \r\n    if (obj.type == \"date\"){\r\n        value = formatData(obj.value);  \r\n    } else {\r\n        value = obj.value;\r\n    }\r\n\r\n    if (obj.value){\r\n        return labelText + \"Значение: \" + value;\r\n    } else {\r\n        return labelText + typeElem;\r\n    }\r\n}\r\n\r\n\r\nfunction createTemplate (){\r\n    document.getElementById('custom-date-editor')\r\n    .addEventListener('input', function (e) {\r\n\r\n        const x = e.target.value.replace(/\\D/g, '')\r\n        .match(/(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})/);\r\n\r\n        function setNum(index){\r\n            return (x[index] ? x[index] : ' __ ');\r\n        }\r\n\r\n        if (e.inputType !== \"deleteContentBackward\"){\r\n            e.target.value =  setNum(1) + '.' +  setNum(2) + '.' + setNum(3) \r\n            + '  '+ \r\n            setNum(4) + ':' + setNum(5) + ':' + setNum(6);\r\n        }\r\n     \r\n    });\r\n}\r\n\r\nfunction setFormDirty(){\r\n    const form = $$(\"table-editForm\");\r\n    if ( form && !(form.isDirty()) ){\r\n        form.setDirty(true);\r\n    }\r\n  \r\n}\r\n\r\nfunction isEqual(obj1, obj2) {\r\n    if (obj1){\r\n        const keys1 = Object.keys(obj1);\r\n        const keys2 = Object.keys(obj2);\r\n\r\n        if (keys1.length !== keys2.length) {\r\n            return false;\r\n        }\r\n        for (let key of keys1) {\r\n            if (obj1[key] !== obj2[key]) {\r\n                return false;\r\n            }\r\n        }\r\n    } else {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction createTempData(self){\r\n    if (!self.config.tempData){\r\n        self.config.tempData = true;\r\n    }\r\n   \r\n    const id      = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getItemId)();\r\n    const status  = self.config.tableStatus;\r\n    const values  = self.getValues();\r\n\r\n    const tableValue  = $$(\"table\").getItem(values.id);\r\n    const storageName = \"editFormTempData\";\r\n\r\n    if ( !isEqual(tableValue, values) ){\r\n        const sentVals= {\r\n            table : id,\r\n            status: status,\r\n            values: values\r\n        };\r\n\r\n        webix.storage.local.put(\r\n            storageName, \r\n            sentVals\r\n        );\r\n    } else {\r\n        webix.storage.local.remove(storageName);\r\n    }\r\n}\r\n\r\n\r\nconst propertyEditForm = {   \r\n    view     : \"property\",  \r\n    id       : \"editTableFormProperty\", \r\n    css      : \"webix_edit-table-form-property\",\r\n    dirty    : false,\r\n    editable : true,\r\n    tooltip  : propTooltipAction,\r\n    hidden   : true,\r\n    tempData :false,\r\n    elements : [],\r\n    keyPressTimeout:800,\r\n    on       : {\r\n\r\n        onAfterEditStop:function(state, editor){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem($$(\"table-saveBtn\"));\r\n\r\n            const inputEditor = document\r\n            .getElementById('custom-date-editor');\r\n\r\n            if (inputEditor){\r\n                createTemplate ();\r\n            }\r\n \r\n            setFormDirty();// for combo inputs\r\n\r\n            editingEnd (editor.config.id, state.value);\r\n            createTempData(this);\r\n        },\r\n\r\n        onEditorChange:function(){\r\n            setFormDirty(); // for text inputs\r\n        },\r\n\r\n        onBeforeRender:function (){\r\n\r\n            const size = this.config.elements.length * 28;\r\n            \r\n            if (size && this.$height !== size){\r\n                this.define(\"height\", size);\r\n                this.resize();\r\n            }\r\n    \r\n          \r\n        },\r\n\r\n        onItemClick:function(id){\r\n            const property = $$(\"editTableFormProperty\");\r\n            const item     = property.getItem(id);\r\n            item.css       = \"\";\r\n            property.refresh();\r\n        },\r\n\r\n        onTimedKeyPress:function(){\r\n            createTempData(this);\r\n        }\r\n    }\r\n};\r\n\r\nconst propertyRefBtns = {  \r\n    cols:[\r\n        {   id:\"propertyRefbtns\",  \r\n            rows:[]\r\n        },\r\n        {width:5}\r\n    ] \r\n \r\n};\r\n\r\n\r\nconst propertyLayout = {   \r\n    scroll:\"y\", \r\n    cols:[\r\n        propertyRefBtns,\r\n        {width:4},\r\n        propertyEditForm,\r\n        {width:4}\r\n    ]\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/property.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/states.js":
/*!****************************************************!*\
  !*** ./src/js/components/table/editForm/states.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"defaultStateForm\": () => (/* binding */ defaultStateForm)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => states\";\r\n\r\n\r\nfunction defaultStateForm () {\r\n\r\n    const property = $$(\"editTableFormProperty\");\r\n    \r\n    function btnsState(){\r\n        \r\n        const saveBtn    = $$(\"table-saveBtn\");\r\n        const saveNewBtn = $$(\"table-saveNewBtn\");\r\n        const delBtn     = $$(\"table-delBtnId\");\r\n\r\n        if (saveNewBtn.isVisible()) {\r\n            saveNewBtn.hide();\r\n\r\n        } else if (saveBtn.isVisible()){\r\n            saveBtn.hide();\r\n\r\n        }\r\n\r\n        delBtn.disable();\r\n    }\r\n\r\n    function formPropertyState(){\r\n \r\n        if (property){\r\n            property.clear();\r\n            property.hide();\r\n        }\r\n    }\r\n\r\n\r\n    function removeRefBtns(){\r\n        const refBtns = $$(\"propertyRefbtnsContainer\");\r\n        const parent  = $$(\"propertyRefbtns\");\r\n        if ( refBtns ){\r\n            parent.removeView( refBtns );\r\n        }\r\n    }\r\n\r\n    try{\r\n        btnsState();\r\n        formPropertyState();\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem($$(\"EditEmptyTempalte\"));\r\n        removeRefBtns();\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"defaultStateForm\");\r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/states.js?");

/***/ }),

/***/ "./src/js/components/table/editForm/validation.js":
/*!********************************************************!*\
  !*** ./src/js/components/table/editForm/validation.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"validateProfForm\": () => (/* binding */ validateProfForm),\n/* harmony export */   \"setLogError\": () => (/* binding */ setLogError),\n/* harmony export */   \"uniqueData\": () => (/* binding */ uniqueData)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../logBlock.js */ \"./src/js/components/logBlock.js\");\n\r\n\r\n\r\nconst logNameFile = \"tableEditForm => validation\";\r\n\r\nfunction validateProfForm (){\r\n\r\n    const errors = {};\r\n    const messageErrors = [];\r\n    const property      = $$(\"editTableFormProperty\");\r\n    \r\n    function checkConditions (){ \r\n       \r\n        const propVals = Object.keys(property.getValues());\r\n\r\n        propVals.forEach(function(el){\r\n\r\n\r\n            const propElement = property.getItem(el);\r\n            const values      = property.getValues();\r\n\r\n            let propValue  = values[el];\r\n            errors[el] = {};\r\n\r\n            function numberField(){\r\n                \r\n                function containsText(str) {\r\n                    return /\\D/.test(str);\r\n                }\r\n\r\n       \r\n                if (propElement.customType              &&\r\n                    propElement.customType == \"integer\" ){\r\n\r\n                    const check =  containsText(propValue) ;\r\n\r\n                    if ( check ){\r\n                        errors[el].isNum = \"Данное поле должно содержать только числа\";\r\n                    } else {\r\n                        errors[el].isNum = null;\r\n                    }\r\n                       \r\n                }\r\n            }\r\n\r\n            function dateField(){\r\n\r\n                function getAllIndexes(arr, val) {\r\n                    let indexes = [], i;\r\n                    for(i = 0; i < arr.length; i++){\r\n                        if (arr[i] === val){\r\n                            indexes.push(i);\r\n                        }\r\n                    }\r\n                         \r\n                    return indexes;\r\n                }\r\n\r\n                function isTrueLength(arr){\r\n                    if (arr.length === 2){\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                function isTrueIndexes(arr, first, second){\r\n                    if (arr[0] == first && arr[1] == second){\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                function checkArr(arr, firstIndex, secondIndex){\r\n                    if (isTrueLength(arr) && \r\n                        isTrueIndexes(arr, firstIndex, secondIndex )){\r\n                            return true;\r\n                    }\r\n                }\r\n \r\n                function findDividers(arr){\r\n                    if (arr.length === 17) {\r\n                        const dateDividers = getAllIndexes(arr, \".\");\r\n                        const timeDividers = getAllIndexes(arr, \":\");\r\n\r\n                        const dateResult = checkArr(dateDividers, 2,  5 );\r\n                        const timeResult = checkArr(timeDividers, 11, 14);\r\n\r\n                        if (dateResult && timeResult){\r\n                            return false;\r\n                        } else {\r\n                            return true;\r\n                        }\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                }\r\n         \r\n                if (propElement.type                 &&\r\n                    propElement.type == \"customDate\" &&\r\n                    propValue                        ){\r\n                 \r\n                    const dateArray = propValue.split('');\r\n                    \r\n                    let check      = findDividers(dateArray);\r\n                    let countEmpty = 0;\r\n                         \r\n                    const x = propValue.replace(/\\D/g, '')\r\n                    .match(/(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})(\\d{0,2})/);\r\n        \r\n                    for (let i = 1; i < 7; i++) {\r\n\r\n                        if (x[i].length == 0){\r\n                            countEmpty++;\r\n                        }\r\n\r\n                        if (x[i].length !== 2){\r\n                         \r\n                            if (!check){\r\n                                check = true;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n\r\n                    if ( countEmpty == 6 ){\r\n                        errors[el].date = null;\r\n\r\n                    } else {\r\n\r\n                        if( (x[1] > 31 || x[1] < 1) ||\r\n                            (x[2] > 12 || x[2] < 1) ||\r\n\r\n                            x[4] > 23 ||\r\n                            x[5] > 59 ||\r\n                            x[6] > 59 ){\r\n                                check = true;\r\n                            }\r\n      \r\n                        if ( check ) {\r\n                            errors[el].date = \r\n                            \"Неверный формат даты. Введите дату в формате xx.xx.xx xx:xx:xx\";\r\n    \r\n                        } else {\r\n                            errors[el].date = null;\r\n                        }\r\n                    }\r\n                       \r\n                }\r\n       \r\n            }\r\n\r\n            function valLength(){ \r\n                try{\r\n               \r\n                    if(propValue){\r\n                        \r\n                        if (propValue.length > propElement.length && propElement.length !== 0){\r\n                            errors[el].length = \"Длина строки не должна превышать \" + propElement.length + \" симв.\";\r\n                        } else {\r\n                            errors[el].length = null;\r\n                        }\r\n                    }\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"valLength\");\r\n                }\r\n            }\r\n\r\n            function valNotNull (){\r\n                try{\r\n                    if ( propElement.notnull == true && propValue.length == 0 ){\r\n                        errors[el].notnull = \"Поле не может быть пустым\";\r\n                    } else {\r\n                        errors[el].notnull = null;\r\n                    }\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"valNotNull\");\r\n                }\r\n            }\r\n\r\n            function valUnique (){\r\n                try{\r\n                    errors[el].unique = null;\r\n                                  \r\n                    if (propElement.unique == true){\r\n\r\n                        const tableRows   = Object.values($$(\"table\").data.pull);\r\n\r\n                        tableRows.forEach(function(row){\r\n                            let tableValue = row[el];\r\n\r\n                            function numToString(element){\r\n                                if (element && typeof element === \"number\"){\r\n                                    return element.toString();\r\n                                } else {\r\n                                    return element;\r\n                                }\r\n                            }\r\n\r\n                            tableValue = numToString(tableValue);\r\n                            propValue  = numToString(propValue);\r\n                   \r\n                            if (tableValue && typeof tableValue == \"number\"){\r\n                                tableValue = tableValue.toString();\r\n                            }\r\n\r\n                            if (propValue && tableValue){\r\n                                const isIdenticValues = propValue.localeCompare(tableValue) == 0;\r\n                                const tableElemId     = row.id;\r\n                                const propElemId      = values.id;\r\n\r\n                                if (isIdenticValues && propElemId !== tableElemId){\r\n                                    errors[el].unique = \"Поле должно быть уникальным\";\r\n    \r\n                                } \r\n                              \r\n                            }\r\n                        });\r\n                    }\r\n                } catch (err){\r\n                    (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"valUnique\");\r\n                }\r\n            }\r\n           \r\n            dateField   ();\r\n            numberField ();\r\n            valLength   ();\r\n            valNotNull  ();\r\n            valUnique   ();\r\n        });\r\n    }\r\n\r\n    function createErrorMessage (){\r\n     \r\n        function findErrors (){\r\n            Object.values(errors).forEach(function(col, i){\r\n\r\n                function createMessage (){\r\n                    Object.values(col).forEach(function(error,e){\r\n                        if (error !== null){\r\n                            let nameCol = Object.keys(errors)[i];\r\n                            let textError = error;\r\n                            let typeError = Object.keys(col)[e];\r\n                            messageErrors.push({nameCol,typeError,textError})\r\n                        }\r\n                        \r\n                    });\r\n                    return messageErrors;\r\n                }\r\n\r\n                createMessage ();\r\n        \r\n            });\r\n        }\r\n\r\n        findErrors ();\r\n        \r\n    }\r\n    try{\r\n        checkConditions ();\r\n        createErrorMessage ();\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"validateProfForm\");\r\n    }\r\n\r\n  \r\n    if (messageErrors.length){\r\n     \r\n        messageErrors.forEach(function(prop){\r\n            const item =  property.getItem(prop.nameCol);\r\n            item.css = \"propery-error\";\r\n            property.refresh();\r\n\r\n        });\r\n\r\n       \r\n    }\r\n    return messageErrors;\r\n}\r\n\r\nfunction setLogError (){\r\n    try{\r\n        const table = $$(\"table\");\r\n        validateProfForm ().forEach(function(el){\r\n\r\n            let nameEl;\r\n\r\n            table.getColumns(true).forEach(function(col){\r\n             \r\n                if (col.id == el.nameCol){\r\n                    nameEl = col.label;\r\n                }\r\n            });\r\n\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\"error\", el.textError + \" (Поле: \" + nameEl + \")\");\r\n        });\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"setLogError\");\r\n    }\r\n}\r\n\r\n\r\nfunction uniqueData (itemData){\r\n    const validateData = {};\r\n    try{\r\n        const table      = $$(\"table\");\r\n        const dataValues = Object.values(itemData);\r\n\r\n        dataValues.forEach(function(el, i){\r\n\r\n            const oldValues    = table.getItem(itemData.id);\r\n            const oldValueKeys = Object.keys(oldValues);\r\n\r\n            function compareVals (){\r\n                const newValKey = Object.keys(itemData)[i];\r\n\r\n                oldValueKeys.forEach(function(oldValKey){\r\n                    if (oldValKey == newValKey){\r\n                        \r\n                        if (oldValues   [oldValKey] !== Object.values(itemData)[i]){\r\n                            validateData[newValKey]  =  Object.values(itemData)[i];\r\n                        } \r\n                        \r\n                    }\r\n                }); \r\n            }\r\n            compareVals ();\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"uniqueData\");\r\n    }\r\n\r\n    return validateData;\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/editForm/validation.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/_layout.js":
/*!*******************************************************!*\
  !*** ./src/js/components/table/filterForm/_layout.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"filterForm\": () => (/* binding */ filterForm)\n/* harmony export */ });\n/* harmony import */ var _buttons_layoutBtn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buttons/_layoutBtn.js */ \"./src/js/components/table/filterForm/buttons/_layoutBtn.js\");\n/* harmony import */ var _viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../viewTemplates/emptyTemplate.js */ \"./src/js/viewTemplates/emptyTemplate.js\");\n\r\n\r\n\r\nfunction returnBtns(){\r\n    const btns = [\r\n        {   rows   : [\r\n            {   \r\n                margin      : 2, \r\n                cols        : [\r\n                    (0,_buttons_layoutBtn_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"filterBackTableBtn\"),\r\n                    (0,_buttons_layoutBtn_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formEditBtn\"),\r\n                    (0,_buttons_layoutBtn_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formResetBtn\"),\r\n                ],\r\n            },\r\n            ]\r\n        },\r\n\r\n        {   id   : \"btns-adaptive\",\r\n            rows : [\r\n                {  \r\n                    margin      : 2, \r\n                    cols        : [\r\n                        (0,_buttons_layoutBtn_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formBtnSubmit\"),\r\n                        (0,_buttons_layoutBtn_js__WEBPACK_IMPORTED_MODULE_0__.buttonsFormFilter)(\"formLibrarySaveBtn\"),\r\n                    ]\r\n                },\r\n                \r\n            ]\r\n        }\r\n    ];\r\n\r\n    return btns;\r\n}\r\n\r\nconst filterTableForm = {\r\n    view        : \"form\", \r\n    hidden      : true,\r\n    id          : \"filterTableForm\",\r\n    minHeight   : 350,\r\n    scroll      : true,\r\n    elements    : [\r\n        {   \r\n            css       : \"webix_form-adaptive\",\r\n            rows      :  returnBtns()\r\n        },\r\n        {   id        : \"filterEmptyTempalte\",\r\n            rows      : [\r\n                (0,_viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_1__.createEmptyTemplate)(\r\n                    \"Добавьте фильтры из редактора\"\r\n                )\r\n            ],\r\n        }\r\n\r\n        \r\n    ],\r\n\r\n    rules:{\r\n        $all:webix.rules.isNotEmpty\r\n    },\r\n\r\n\r\n    ready:function(){\r\n        this.validate();\r\n    },\r\n\r\n};\r\n\r\nfunction filterForm (){\r\n    const form = {   \r\n        id       : \"filterTableBarContainer\", \r\n        minWidth : 250,\r\n        width    : 350, \r\n        hidden   : true, \r\n        rows     : [\r\n            {   id   : \"editFilterBarAdaptive\", \r\n                rows : [\r\n                    filterTableForm\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n    \r\n    return form;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/_layout.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/actions/_FilterActions.js":
/*!**********************************************************************!*\
  !*** ./src/js/components/table/filterForm/actions/_FilterActions.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Filter\": () => (/* binding */ Filter)\n/* harmony export */ });\n/* harmony import */ var _visibleField_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./visibleField.js */ \"./src/js/components/table/filterForm/actions/visibleField.js\");\n/* harmony import */ var _clearSpace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./clearSpace.js */ \"./src/js/components/table/filterForm/actions/clearSpace.js\");\n\r\n\r\n\r\n\r\nconst visibleInputs = {};\r\n\r\nclass FilterPull {\r\n    static pushInPull (key, el){\r\n        visibleInputs[key].push(el);\r\n      \r\n    }\r\n\r\n    static clearItem (key){\r\n        visibleInputs[key] = [];\r\n    }\r\n\r\n\r\n    static getItem (key){\r\n        return visibleInputs[key];\r\n    }\r\n\r\n    static getAllChilds (){\r\n        return Object.values(visibleInputs);\r\n    }\r\n\r\n\r\n\r\n    static getAll (){\r\n        return visibleInputs;\r\n    }\r\n\r\n    static getItems (){\r\n        return Object.keys(visibleInputs);\r\n    }\r\n\r\n\r\n    static lengthItem(key){\r\n        return visibleInputs[key].length;\r\n    }\r\n\r\n    static lengthPull (){\r\n        const length = this.getItems().length;\r\n        return length;\r\n    }\r\n\r\n    \r\n    static clearAll(){\r\n        const keys = this.getItems();\r\n        if (keys){\r\n            keys.forEach(function(key){\r\n                delete visibleInputs[key];\r\n            });\r\n        }\r\n    }\r\n\r\n    static removeItemChild(key, child){\r\n        const item = this.getItem(key);\r\n\r\n        item.forEach(function(id, i){\r\n            if (id == child){\r\n                item.splice(i, 1);\r\n            }\r\n        });\r\n    }\r\n   \r\n    static spliceChild (key, pos, child){\r\n        visibleInputs[key].splice(pos, 0, child);\r\n    }\r\n\r\n}\r\n\r\nclass Filter extends FilterPull {\r\n\r\n    static addClass(elem, className){\r\n        if (!(elem.classList.contains(className))){\r\n            elem.classList.add(className);\r\n        }\r\n    }\r\n    \r\n    static removeClass(elem, className){\r\n        if (elem.classList.contains(className)){\r\n       \r\n            elem.classList.remove(className);\r\n           \r\n        }\r\n    }\r\n\r\n    static setFieldState(visible, cssClass, element){\r\n        (0,_visibleField_js__WEBPACK_IMPORTED_MODULE_0__.visibleField) (visible, cssClass, element);\r\n    }\r\n\r\n    static clearFilter(){\r\n        (0,_clearSpace_js__WEBPACK_IMPORTED_MODULE_1__.clearSpace)();\r\n    }\r\n\r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/actions/_FilterActions.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/actions/clearSpace.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/filterForm/actions/clearSpace.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clearSpace\": () => (/* binding */ clearSpace)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _FilterActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n \r\nfunction hideElements(arr){\r\n    arr.forEach(function(el){\r\n        if ( !el.includes(\"_filter-child-\") ){\r\n\r\n            const colId      = $$(el).config.columnName;\r\n            const segmentBtn = $$(el + \"_segmentBtn\");\r\n\r\n            _FilterActions_js__WEBPACK_IMPORTED_MODULE_1__.Filter.setFieldState(0, colId, el);\r\n            segmentBtn.setValue (1);\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem     (segmentBtn);\r\n        }   \r\n    });\r\n}\r\n\r\nfunction clearTableFilter(){\r\n    const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getTable)();\r\n    table.config.filter = null;\r\n}\r\n\r\nfunction clearSpace(){\r\n\r\n    clearTableFilter();\r\n\r\n    const values = _FilterActions_js__WEBPACK_IMPORTED_MODULE_1__.Filter.getAllChilds ();\r\n\r\n    values.forEach(function(el){\r\n    \r\n        if (el.length){\r\n            hideElements(el);\r\n        }\r\n    });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/actions/clearSpace.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/actions/visibleField.js":
/*!********************************************************************!*\
  !*** ./src/js/components/table/filterForm/actions/visibleField.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"visibleField\": () => (/* binding */ visibleField)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _FilterActions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"filterForm => actions => visibleField\";\r\n\r\n\r\nconst showClass   = \"webix_show-content\";\r\nconst hideClass   = \"webix_hide-content\";\r\n\r\nlet segmentBtn;\r\nlet elementClass;\r\nlet condition;\r\nlet el;\r\n\r\nfunction checkChild(elementClass){\r\n    let unique = true;\r\n    \r\n    if (_FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.lengthItem(elementClass)){\r\n        unique = false;\r\n    }\r\n\r\n    return unique;\r\n \r\n}\r\n\r\n\r\nfunction editStorage(){\r\n    if (condition && el !== \"selectAll\"){\r\n       \r\n        const item = _FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.getItem(elementClass);\r\n\r\n        if (!item){\r\n            _FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.clearItem (elementClass); // =>  key = []\r\n        }\r\n\r\n\r\n        const unique = checkChild(elementClass, el);\r\n\r\n        if (unique){\r\n            _FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.pushInPull(elementClass, el);\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem  (segmentBtn);\r\n        }\r\n     \r\n\r\n    } else if (el !== \"selectAll\") {\r\n        _FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.clearItem(elementClass);\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction showInputContainers(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(el));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(el + \"_container-btns\"));\r\n}\r\n\r\nfunction setValueHiddenBtn(btn, value){\r\n    if( btn ){\r\n        btn.setValue(value);\r\n    }\r\n}\r\nfunction setDefStateBtns(){\r\n    const operBtn    = $$(el + \"-btnFilterOperations\");\r\n    const btns       = $$(el + \"_container-btns\"     );\r\n\r\n    \r\n    setValueHiddenBtn(operBtn   , \"=\");\r\n    setValueHiddenBtn(segmentBtn,  1);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem  (segmentBtn    );\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem  (btns          );\r\n}\r\n\r\nfunction setDefStateInputs (){\r\n    $$(el).setValue(\"\");\r\n    $$(el).hide();\r\n}\r\n\r\n\r\nfunction setHtmlState(add, remove){\r\n  \r\n    const css = \".webix_filter-inputs\";\r\n    const htmlElement = document.querySelectorAll(css);\r\n    \r\n    try{\r\n        htmlElement.forEach(function (elem){\r\n            const isClassExists = elem.classList.contains(elementClass);\r\n     \r\n            if (isClassExists){\r\n                _FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.addClass   (elem, add   );\r\n                _FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.removeClass(elem, remove);\r\n            } \r\n\r\n        });\r\n\r\n        \r\n\r\n    } catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"hideHtmlEl\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction removeChilds(){\r\n    const container       = $$(el + \"_rows\");\r\n    const containerChilds = container.getChildViews();\r\n\r\n    const values = Object.values(containerChilds);\r\n    const childs = [];\r\n\r\n    try{\r\n       \r\n        values.forEach(function(elem){\r\n            const id = elem.config.id;\r\n\r\n            if (id.includes(\"child\")){\r\n                childs.push($$(id));\r\n            }\r\n\r\n        });\r\n\r\n        childs.forEach(function(el){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem(el);\r\n        });\r\n\r\n    } catch(err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"removeChids\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction isChildExists(){\r\n    let checkChilds = false;\r\n\r\n    if (el !== \"selectAll\"){\r\n        const container = $$(el + \"_rows\");\r\n        const childs    = container.getChildViews();\r\n\r\n        if (childs.length > 1){\r\n            checkChilds = true;\r\n        }\r\n     \r\n    }\r\n\r\n    return checkChilds;\r\n}\r\n\r\nfunction showInput(){\r\n\r\n    setHtmlState(showClass, hideClass);\r\n    showInputContainers ();\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem   ($$(\"resetFilterBtn\"        ));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem   ($$(\"filterLibrarySaveBtn\"  ));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem     ($$(\"filterEmptyTempalte\"   ));  \r\n}\r\n\r\nfunction hideInput(){\r\n\r\n    if ($$(el).isVisible()){\r\n        setHtmlState(hideClass, showClass);\r\n    }\r\n\r\n \r\n\r\n    if($$(el + \"_rows\")){\r\n        removeChilds();\r\n    }\r\n\r\n    setDefStateInputs();\r\n    setDefStateBtns  ();\r\n\r\n}\r\n\r\n\r\nfunction visibleField (visible, cssClass, element){\r\n \r\n    condition    = visible;\r\n    elementClass = cssClass;\r\n    el           = element;\r\n\r\n    segmentBtn   = $$( el + \"_segmentBtn\");\r\n    \r\n    editStorage();\r\n\r\n    if (!isChildExists()){\r\n        if (condition){\r\n            showInput();\r\n        } else {\r\n            hideInput();\r\n        }\r\n    } else if (!condition){\r\n        hideInput(); \r\n    }\r\n\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/actions/visibleField.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/_layoutBtn.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/_layoutBtn.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"buttonsFormFilter\": () => (/* binding */ buttonsFormFilter)\n/* harmony export */ });\n/* harmony import */ var _libSaveBtn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./libSaveBtn.js */ \"./src/js/components/table/filterForm/buttons/libSaveBtn.js\");\n/* harmony import */ var _backBtn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backBtn.js */ \"./src/js/components/table/filterForm/buttons/backBtn.js\");\n/* harmony import */ var _editBtn_layout_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./editBtn/_layout.js */ \"./src/js/components/table/filterForm/buttons/editBtn/_layout.js\");\n/* harmony import */ var _submitBtn_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./submitBtn.js */ \"./src/js/components/table/filterForm/buttons/submitBtn.js\");\n/* harmony import */ var _resetBtn_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resetBtn.js */ \"./src/js/components/table/filterForm/buttons/resetBtn.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nfunction buttonsFormFilter (name) {\r\n    if ( name == \"formResetBtn\" ) {\r\n        return _resetBtn_js__WEBPACK_IMPORTED_MODULE_4__.resetBtn;\r\n    } else if ( name == \"formBtnSubmit\" ){\r\n        return _submitBtn_js__WEBPACK_IMPORTED_MODULE_3__.submitBtn;\r\n    } else if ( name == \"formEditBtn\" ){\r\n        return _editBtn_layout_js__WEBPACK_IMPORTED_MODULE_2__.editBtn;\r\n    } else if ( name == \"filterBackTableBtn\" ){\r\n        return _backBtn_js__WEBPACK_IMPORTED_MODULE_1__.backBtn;\r\n    } else if ( name == \"formLibrarySaveBtn\" ){\r\n        return _libSaveBtn_js__WEBPACK_IMPORTED_MODULE_0__.librarySaveBtn;\r\n    }\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/_layoutBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/backBtn.js":
/*!***************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/backBtn.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"backBtn\": () => (/* binding */ backBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\nfunction setBtnFilterState(){\r\n    const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n    const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n    const secondaryBtnClass = \"webix-transparent-btn\";\r\n\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.addClass   (btnClass, secondaryBtnClass);\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_2__.Filter.removeClass(btnClass, primaryBtnClass  );\r\n\r\n}\r\n\r\n\r\nfunction defaultFormState(){\r\n    const filterForm     = $$(\"filterTableBarContainer\");\r\n    const tableContainer = $$(\"tableContainer\");\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(filterForm);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem(tableContainer);\r\n}\r\n\r\n\r\nfunction clearTableSelection(){\r\n    const table = $$(\"table\");\r\n    if (table){\r\n        table.clearSelection();\r\n    } \r\n}\r\n\r\n\r\n\r\nfunction backTableBtnClick() {\r\n    defaultFormState    ();\r\n    clearTableSelection ();\r\n    setBtnFilterState   ();\r\n  \r\n}\r\n\r\n\r\n\r\nconst backBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n    \r\n    config   : {\r\n        id       : \"table-backTableBtnFilter\",\r\n        hotkey   : \"Shift+Q\",\r\n        hidden   : true,  \r\n        icon     : \"icon-arrow-left\", \r\n        click   : function(){\r\n            backTableBtnClick();\r\n        },\r\n    },\r\n    titleAttribute : \"Вернуться к таблице\"\r\n\r\n   \r\n}).minView();\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/backBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/editBtn/_layout.js":
/*!***********************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/editBtn/_layout.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editBtn\": () => (/* binding */ editBtn)\n/* harmony export */ });\n/* harmony import */ var _click_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./click.js */ \"./src/js/components/table/filterForm/buttons/editBtn/click.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\nconst editBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n    \r\n    config   : {\r\n        hotkey   : \"Alt+A\",\r\n        value    : \"Открыть редактор\", \r\n        click    : _click_js__WEBPACK_IMPORTED_MODULE_0__.editFiltersBtn\r\n    },\r\n    titleAttribute : \"Добавить/удалить фильтры\"\r\n\r\n   \r\n}).maxView();\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/editBtn/_layout.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/editBtn/click.js":
/*!*********************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/editBtn/click.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editFiltersBtn\": () => (/* binding */ editFiltersBtn)\n/* harmony export */ });\n/* harmony import */ var _popup_layoutPopup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../popup/_layoutPopup.js */ \"./src/js/components/table/filterForm/popup/_layoutPopup.js\");\n/* harmony import */ var _createLibTab_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createLibTab.js */ \"./src/js/components/table/filterForm/buttons/editBtn/createLibTab.js\");\n/* harmony import */ var _createFieldsTab_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createFieldsTab.js */ \"./src/js/components/table/filterForm/buttons/editBtn/createFieldsTab.js\");\n\r\n\r\n\r\n\r\n\r\nfunction editFiltersBtn (){\r\n\r\n    (0,_popup_layoutPopup_js__WEBPACK_IMPORTED_MODULE_0__.createFilterPopup)();\r\n\r\n    (0,_createLibTab_js__WEBPACK_IMPORTED_MODULE_1__.createLibTab) ();\r\n\r\n    (0,_createFieldsTab_js__WEBPACK_IMPORTED_MODULE_2__.createFieldsTab)();\r\n \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/editBtn/click.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/editBtn/createFieldsTab.js":
/*!*******************************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/editBtn/createFieldsTab.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createFieldsTab\": () => (/* binding */ createFieldsTab)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableFilter => buttons => editBtn => createFieldsTab\";\r\n\r\nfunction popupSizeAdaptive(){\r\n    const k     = 0.89;\r\n    const size  = window.innerWidth * k;\r\n    const popup = $$(\"popupFilterEdit\");\r\n    try{\r\n        popup.config.width = size;\r\n        popup.resize();\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"popupSizeAdaptive\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setValueCheckbox(){\r\n    const content     = $$(\"editFormPopupScrollContent\");\r\n    const checkboxes  = content.getChildViews();\r\n    const isSelectAll = $$(\"selectAll\").getValue();\r\n    try{\r\n        checkboxes.forEach(function(el){\r\n            const isCheckbox = el.config.id.includes(\"checkbox\");\r\n\r\n            if (isCheckbox){\r\n                if(isSelectAll){\r\n                    el.setValue(1);\r\n                } else {\r\n                    el.setValue(0);\r\n                }\r\n            }\r\n\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setValueCheckbox\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction returnSelectAllCheckbox(){\r\n    const checkbox =  {\r\n        view        : \"checkbox\", \r\n        id          : \"selectAll\", \r\n        labelRight  : \r\n        \"<div style='font-weight:600'>Выбрать всё</div>\", \r\n        labelWidth  : 0,\r\n        name        : \"selectAll\",\r\n        on          : {\r\n            onChange:function(){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem($$(\"popupFilterSubmitBtn\"));\r\n                setValueCheckbox (); \r\n            },\r\n    \r\n        } \r\n    };\r\n\r\n    return checkbox;\r\n}\r\n\r\nfunction createCheckboxData(config){\r\n    return { \r\n        id    : config.id, \r\n        label : config.label \r\n    };\r\n}\r\n\r\nfunction getAllCheckboxes(){\r\n    const checkboxes           = [];\r\n    const filterTableElements  = $$(\"filterTableForm\").elements;\r\n\r\n    const values = Object.values(filterTableElements);\r\n    try{\r\n        values.forEach(function(el){\r\n            checkboxes.push(\r\n                createCheckboxData(el.config)\r\n            );\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n            err, \r\n            logNameFile, \r\n            \"getAllCheckboxes\" \r\n        );\r\n    }\r\n \r\n    return checkboxes;\r\n}\r\n\r\n\r\nfunction getStatusCheckboxes(array){\r\n    let counter = 0;\r\n\r\n    try{\r\n        array.forEach(function(el){\r\n            const isCheckbox = el.config.id.includes(\"checkbox\");\r\n            \r\n            if (isCheckbox){\r\n                const value = el.config.value;\r\n\r\n                if ( !(value) || value == \"\" ){\r\n                   counter ++;\r\n                }\r\n            }\r\n           \r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"getStatusCheckboxes\"\r\n        );\r\n    }\r\n\r\n    return counter;\r\n}\r\n\r\n \r\n\r\nfunction setValueSelectAll(selectAll, val){\r\n    try {\r\n        selectAll.config.value = val;\r\n        selectAll.refresh();\r\n    } catch (err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setSelectAllState\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setSelectAllState(el) {\r\n    const parent  = $$(el.id + \"_checkbox\").getParentView();\r\n    const childs  = parent.getChildViews();\r\n    const counter = getStatusCheckboxes(childs);\r\n\r\n    const selectAll     = $$(\"selectAll\");\r\n    const isTrueValue = selectAll.config.value;\r\n\r\n    if (!counter){\r\n        setValueSelectAll(selectAll, 1);\r\n\r\n    } else if (isTrueValue){\r\n        setValueSelectAll(selectAll, 0);\r\n        \r\n    }\r\n \r\n}\r\n\r\nfunction checkboxOnChange (el){\r\n    const parent  = $$(el.id + \"_checkbox\").getParentView();\r\n    const childs  = parent.getChildViews();\r\n    getStatusCheckboxes(childs);\r\n\r\n    setSelectAllState  (el);\r\n    \r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem  ($$(\"popupFilterSubmitBtn\"));\r\n\r\n}\r\n\r\n\r\n\r\nfunction returnCheckboxesContainer(layout){\r\n    const nameList = [\r\n        {cols:[\r\n            {   id  : \"editFormPopupScrollContent\",\r\n                css : \"webix_edit-form-popup-scroll-content\",\r\n                rows: layout\r\n            }\r\n        ]}\r\n    ];\r\n\r\n    return nameList;\r\n}\r\n\r\nfunction returnTemplate(el){\r\n    const template = {\r\n        view        : \"checkbox\", \r\n        id          : el.id + \"_checkbox\", \r\n        labelRight  : el.label, \r\n        labelWidth  : 0,\r\n        name        : el.id,\r\n        on          : {\r\n            onChange:function(){\r\n                checkboxOnChange (el);\r\n            }\r\n        } \r\n    };\r\n\r\n    return template;\r\n}\r\n\r\n\r\nfunction createCheckbox(el){\r\n\r\n    const template = returnTemplate(el);\r\n\r\n    const field     = $$(el.id);\r\n    const container = $$(el.id + \"_rows\");\r\n    const childs    = container.getChildViews();\r\n\r\n\r\n    if (field && field.isVisible() || childs.length > 1 ){\r\n        template.value = 1;\r\n    }\r\n\r\n    return template;\r\n    \r\n}\r\n\r\n\r\nfunction addCheckboxesToLayout(checkboxesLayout){\r\n    const scroll = $$(\"editFormPopupScroll\");\r\n    const layout = returnCheckboxesContainer(checkboxesLayout);\r\n    try{\r\n        if (scroll){\r\n            scroll.addView( {rows : layout}, 1 );\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"addCheckboxesToLayout\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction createCheckboxes(){\r\n\r\n    const checkboxesLayout = [\r\n        returnSelectAllCheckbox()\r\n    ];\r\n\r\n    try {  \r\n        const formData = getAllCheckboxes();\r\n\r\n        formData.forEach(function (el){\r\n            const isChild  = el.id.includes(\"child\");\r\n\r\n            if(!isChild){\r\n                checkboxesLayout.push(\r\n                    createCheckbox(el)\r\n                );\r\n            }\r\n        });\r\n\r\n        addCheckboxesToLayout(checkboxesLayout);\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createCheckboxes\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction stateSelectAll(){\r\n    const selectAll  = $$(\"selectAll\");\r\n    \r\n    const container  = $$(\"editFormPopupScrollContent\");\r\n    const checkboxes = container.getChildViews();\r\n    const counter    = getStatusCheckboxes(checkboxes);\r\n \r\n    if (!counter){\r\n        setValueSelectAll(selectAll, 1);\r\n    } \r\n    \r\n}\r\n\r\n\r\nfunction createFieldsTab (){\r\n    \r\n    if (window.innerWidth < 1200 ){\r\n        popupSizeAdaptive();\r\n    }\r\n \r\n    createCheckboxes();\r\n \r\n    stateSelectAll();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/editBtn/createFieldsTab.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/editBtn/createLibTab.js":
/*!****************************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/editBtn/createLibTab.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createLibTab\": () => (/* binding */ createLibTab)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"filterForm => buttons => editBtn => createLibTab\";\r\nlet user;\r\nlet prefsData;\r\nlet lib;\r\n\r\nfunction clearOptionsPull() {\r\n    \r\n    const oldOptions = [];\r\n\r\n    const options     = lib.config.options;\r\n    const isLibExists = options.length;\r\n\r\n    if (lib && isLibExists){\r\n        options.forEach(function(el){\r\n            oldOptions.push(el.id);\r\n        });\r\n\r\n        oldOptions.forEach(function(el){\r\n            lib.removeOption(el);\r\n        });\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction createOption(i, data){\r\n    const prefs   = JSON.parse(data.prefs);\r\n    const idPrefs = prefs.table;\r\n    const currId  = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getItemId) ();\r\n\r\n    if (idPrefs == currId){\r\n        lib.addOption( {\r\n            id    : i + 1, \r\n            value : prefs.name,\r\n            prefs : data\r\n        });\r\n\r\n    }\r\n}\r\n\r\nfunction isThisOption(data){\r\n    const dataOwner = data.owner;\r\n    const currOwner = user.id;\r\n\r\n    const name           = \"filter-template_\";\r\n    const isNameTemplate = data.name.includes(name);\r\n\r\n    if (isNameTemplate && dataOwner == currOwner){\r\n        return true;\r\n    }\r\n\r\n}\r\nfunction setTemplates(){\r\n   \r\n    clearOptionsPull();\r\n\r\n    const dataSrc = prefsData.json().content;\r\n    try {\r\n        dataSrc.forEach(function(data, i){\r\n            if(isThisOption(data)){\r\n                createOption(i, data);\r\n            }\r\n        \r\n        });\r\n    } catch (err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setTemplates\"\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction setEmptyOption(){\r\n    $$(\"filterEditLib\").addOption(\r\n        {   id      : \"radioNoneContent\",\r\n            disabled: true, \r\n            value   : \"Сохранённых шаблонов нет\"\r\n        }\r\n    );\r\n}\r\n\r\nasync function createLibTab(){ \r\n    lib  = $$(\"filterEditLib\");\r\n    user = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getUserDataStorage)();\r\n\r\n    if (!user){\r\n        await (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.pushUserDataStorage) ();\r\n        user =  (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getUserDataStorage)();\r\n    }\r\n\r\n    const path = \"/init/default/api/userprefs/\";\r\n    const userprefsGetData = webix.ajax(path);\r\n\r\n    userprefsGetData.then(function(getData){\r\n        prefsData = getData;\r\n        if(user){\r\n            setTemplates();\r\n\r\n            const lib = $$(\"filterEditLib\");\r\n            \r\n            if (lib && lib.data.options.length == 0 ){\r\n                setEmptyOption();\r\n            }\r\n        \r\n        }\r\n       \r\n        \r\n    });\r\n    \r\n    userprefsGetData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"saveTemplate\"\r\n        );\r\n    });\r\n   \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/editBtn/createLibTab.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/libSaveBtn.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/libSaveBtn.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"librarySaveBtn\": () => (/* binding */ librarySaveBtn)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile   = \"tableFilter => buttons => libSaveBtn\";\r\n\r\nlet nameTemplate;\r\nlet template;\r\nlet currId;\r\nlet sentObj;\r\nlet currName;\r\n\r\n\r\nfunction isParent(el){\r\n    const config = el.config;\r\n    const name   = config.columnName;\r\n    const parent = name + \"_filter\";\r\n    const id     = config.id;\r\n\r\n    let check    = null;\r\n\r\n    if (parent !== id){\r\n        check = name;\r\n    } else {\r\n\r\n    }\r\n\r\n    return check;\r\n}\r\n\r\nfunction pushValues(id, logic){\r\n\r\n    const btn = $$(id + \"-btnFilterOperations\");\r\n\r\n    const operation = btn.getValue();\r\n    const value     = $$(id).getValue();\r\n    const parent    = isParent($$(id));\r\n\r\n    template.values.push({\r\n        id          : id, \r\n        value       : value,\r\n        operation   : operation,\r\n        logic       : logic,\r\n        parent      : parent,\r\n    });\r\n\r\n}\r\n\r\nfunction setOperation(arr){\r\n    arr.forEach(function(el){\r\n   \r\n        try{\r\n            const segmentBtn = $$( el + \"_segmentBtn\" );\r\n\r\n            let logic = null;\r\n\r\n            if (segmentBtn.isVisible()){\r\n                logic = segmentBtn.getValue();\r\n            }\r\n\r\n            pushValues(el, logic);\r\n\r\n        } catch(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"setOperation\"\r\n            );\r\n        }\r\n    });\r\n}\r\n\r\nfunction createPrefsValue(){\r\n    const keys       = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.getItems  ();\r\n    const keysLength = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.lengthPull();\r\n   \r\n    for (let i = 0; i < keysLength; i++) {   \r\n        const key = keys[i];\r\n        setOperation(_actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.getItem(key));\r\n    }\r\n\r\n}\r\n\r\nfunction isTemplateExists(){\r\n    let exists = {\r\n        check : false\r\n    };\r\n    \r\n    const path = \"/init/default/api/userprefs/\";\r\n    const userprefsData = webix.ajax().get(path);\r\n\r\n    return userprefsData.then(function(data){\r\n        data = data.json().content;\r\n\r\n        data.forEach(function(el){\r\n       \r\n            if (el.name == currName){\r\n                exists = {\r\n                    check : true,\r\n                    id    : el.id\r\n                };\r\n            } \r\n        });\r\n\r\n        return exists;\r\n    \r\n    }).fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"isTemplateExists\"\r\n        );\r\n        return exists;\r\n    });\r\n\r\n}\r\n\r\n\r\nfunction putUserprefsTemplate(id){\r\n    const path = \"/init/default/api/userprefs/\" + id;\r\n    \r\n    const putData = webix.ajax().put(path, sentObj);\r\n\r\n    putData.then(function(data){\r\n        data = data.json();\r\n        if (data.err_type == \"i\"){\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"success\",\r\n                \"Шаблон\" +\r\n                \" «\" +\r\n                nameTemplate +\r\n                \"» \" +\r\n                \" сохранён в библиотеку\"\r\n            );\r\n        } else {\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                data.err,\r\n                logNameFile,\r\n                \"saveExistsTemplate\"\r\n            );\r\n        }\r\n    });\r\n\r\n    putData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"putUserprefsData\"\r\n        );\r\n    });\r\n}\r\n\r\nasync function saveExistsTemplate(id){\r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)(   \"Шаблон с таким именем существует\", \r\n                \"После сохранения предыдущие данные будут стёрты\", \r\n                [\"Отмена\", \"Сохранить изменения\"]\r\n                )\r\n    .then(function(result){\r\n\r\n        if (result == 1){\r\n            putUserprefsTemplate(id);\r\n        }\r\n    });\r\n \r\n}\r\n\r\n \r\n\r\nfunction saveNewTemplate(){\r\n  \r\n    const path = \"/init/default/api/userprefs/\";\r\n\r\n    const userprefsPost = webix.ajax().post(path, sentObj);\r\n    \r\n    userprefsPost.then(function(data){\r\n        data = data.json();\r\n\r\n        if (data.err_type == \"i\"){\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"success\",\r\n                \"Шаблон\" +\r\n                \" «\" +\r\n                nameTemplate +\r\n                \"» \" +\r\n                \" сохранён в библиотеку\"\r\n            );\r\n        } else {\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                data.err,\r\n                logNameFile,\r\n                \"saveNewTemplate\"\r\n            );\r\n        }\r\n    });\r\n\r\n    userprefsPost.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"saveTemplate => saveNewTemplate\"\r\n        );\r\n    });\r\n\r\n}\r\n\r\n\r\nasync function saveTemplate (result){ \r\n\r\n    let user = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getUserDataStorage)();\r\n    \r\n    if (!user){\r\n        await (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.pushUserDataStorage)();\r\n        user = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getUserDataStorage)();\r\n    } \r\n\r\n    nameTemplate = result;\r\n    currId             = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId)();\r\n\r\n    currName = currId + \"_filter-template_\" + nameTemplate;\r\n\r\n    template           = {\r\n        name   : nameTemplate,\r\n        table  : currId,\r\n        values : []\r\n    };\r\n\r\n    sentObj            = {\r\n        name    : currName,\r\n        prefs   : template,\r\n        owner   : user.id\r\n    };\r\n\r\n  \r\n    createPrefsValue();\r\n    const existsInfo = await isTemplateExists();\r\n    const isExists   = existsInfo.check;\r\n    \r\n\r\n    if (isExists){\r\n        const id = existsInfo.id;\r\n        saveExistsTemplate(id);  \r\n    } else {\r\n        saveNewTemplate();\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction libraryBtnClick () {\r\n    try {\r\n        webix.prompt({\r\n            title       : \"Название шаблона\",\r\n            ok          : \"Сохранить\",\r\n            cancel      : \"Отменить\",\r\n            css         : \"webix_prompt-filter-lib\",\r\n            input       : {\r\n                required    : true,\r\n                placeholder : \"Введите название шаблона...\",\r\n            },\r\n            width       : 350,\r\n        }).then(function(result){\r\n            saveTemplate (result);\r\n\r\n        });\r\n    \r\n    } catch(err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"filterSubmitBtn\"\r\n        );\r\n    }\r\n}\r\n\r\nconst librarySaveBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__.Button({\r\n    \r\n    config   : {\r\n        id       : \"filterLibrarySaveBtn\",\r\n        hotkey   : \"Shift+Esc\",\r\n        icon     : \"icon-file\",\r\n        disabled : true, \r\n        click    : libraryBtnClick\r\n    },\r\n    titleAttribute : \r\n    \"Сохранить шаблон с полями в библиотеку\"\r\n\r\n   \r\n}).minView();\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/libSaveBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/resetBtn.js":
/*!****************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/resetBtn.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"resetBtn\": () => (/* binding */ resetBtn)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile   = \"tableFilter => buttons => resetBtn\";\r\n\r\n\r\n\r\nfunction removeValues(collection){\r\n\r\n    if (collection){\r\n\r\n        collection.forEach(function(el){\r\n            const idChild = el.includes(\"_filter-child-\");\r\n\r\n            if (idChild){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.removeItem($$(el + \"-container\"));\r\n            }\r\n     \r\n        });\r\n    }\r\n    \r\n}\r\n\r\nfunction removeChilds(){\r\n   const keys = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.getItems();\r\n\r\n    keys.forEach(function(key){ \r\n        const item = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.getItem(key);\r\n        removeValues(item);\r\n    });\r\n\r\n}\r\n\r\nfunction setDataTable(data, table){\r\n    const overlay = \"Ничего не найдено\";\r\n    try{\r\n        if (data.length !== 0){\r\n            table.hideOverlay(overlay);\r\n            table.clearAll   ();\r\n            table.parse      (data);\r\n\r\n        } else {\r\n            table.clearAll   ();\r\n            table.showOverlay(overlay);\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setDataTable\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setFilterCounterVal(table){\r\n    try{\r\n        const filterTable     = $$(\"table-idFilterElements\");\r\n        const filterCountRows = table.count();\r\n        const value           = filterCountRows.toString();\r\n\r\n        filterTable.setValues(value);\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"setFilterCounterVal\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction clearFilterValues(){\r\n    const form = $$(\"filterTableForm\");\r\n    if(form){\r\n        form.clear(); \r\n    }\r\n}\r\n\r\nfunction hideInputsContainer(){\r\n    const css       = \".webix_filter-inputs\";\r\n    const inputs    = document.querySelectorAll(css);\r\n    const hideClass = \"webix_hide-content\";\r\n\r\n    try{\r\n        inputs.forEach(function(elem){\r\n            _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.addClass(elem, hideClass);\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"hideInputsContainer\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction resetTable(){\r\n    const itemTreeId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getItemId) ();\r\n    const table      = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getTable)  ();\r\n    const query      = [\r\n        `query=${itemTreeId}.id+%3E%3D+0&sorts=\r\n               ${itemTreeId}.id&limit=80&offset=0\r\n        `\r\n    ];\r\n   \r\n\r\n    const path       = \"/init/default/api/smarts?\" + query;\r\n    const queryData  = webix.ajax(path);\r\n\r\n     \r\n    queryData.then(function(data){\r\n        const dataErr =  data.json();\r\n      \r\n        data = data.json().content;\r\n\r\n        if (dataErr.err_type == \"i\"){\r\n            try{\r\n                setDataTable        (data, table);\r\n                setFilterCounterVal (table);\r\n                removeChilds        ();\r\n            \r\n                clearFilterValues   ();\r\n                hideInputsContainer ();\r\n\r\n                _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.clearFilter  ();\r\n\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem   ($$(\"tableFilterPopup\"    ));\r\n\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.disableItem($$(\"filterLibrarySaveBtn\"));\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.disableItem($$(\"resetFilterBtn\"      ));\r\n\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.showItem   ($$(\"filterEmptyTempalte\" ));\r\n\r\n                _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_5__.Filter.clearAll(); // clear inputs storage\r\n\r\n            } catch (err){\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"resetFilterBtn\"\r\n                );\r\n            }\r\n        \r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Фильтры очищены\");\r\n        } else {\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"error\", \r\n                \"resetFilterBtn ajax: \" +\r\n                dataErr.err\r\n            );\r\n        }\r\n    });\r\n\r\n    queryData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"resetFilterBtn\"\r\n        );\r\n    });\r\n}\r\n\r\n\r\nfunction resetFilterBtnClick (){\r\n    const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getTable)();\r\n    try {\r\n\r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_4__.modalBox)(\"Все фильтры будут удалены\", \r\n                 \"Вы уверены?\", \r\n                [\"Отмена\", \"Удалить\"]\r\n        )\r\n        .then(function (result){\r\n            if (result == 1){\r\n                resetTable();\r\n                table.config.filter = null;\r\n            }\r\n\r\n        });\r\n        \r\n\r\n    } catch(err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            \"Ошибка при очищении фильтров; \" +\r\n            \"filterForm => buttons\",\r\n            \"resetFilterBtnClick\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nconst resetBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n    \r\n    config   : {\r\n        id       : \"resetFilterBtn\",\r\n        hotkey   : \"Shift+Esc\",\r\n        disabled : true,\r\n        icon     : \"icon-trash\", \r\n        click    : function(){\r\n             resetFilterBtnClick();\r\n        }\r\n    },\r\n    titleAttribute : \"Сбросить фильтры\",\r\n    onFunc: {\r\n        resetFilter:function(){\r\n            const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getTable)();\r\n            table.config.filter = null;\r\n            resetTable();\r\n        }\r\n    }\r\n\r\n   \r\n}).minView(\"delete\");\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/resetBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/buttons/submitBtn.js":
/*!*****************************************************************!*\
  !*** ./src/js/components/table/filterForm/buttons/submitBtn.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"submitBtn\": () => (/* binding */ submitBtn)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\nconst logNameFile   = \"tableFilter => buttons => submitBtn\";\r\n\r\n\r\nfunction setLogicValue(value){\r\n    let logic = null; \r\n    \r\n    if (value == \"1\"){\r\n        logic = \"+and+\";\r\n\r\n    } else if (value == \"2\"){\r\n        logic = \"+or+\";\r\n    }\r\n\r\n    return logic;\r\n}\r\n\r\n\r\nfunction setOperationValue(value){\r\n    let operation;\r\n\r\n    if (!value){\r\n        operation =  \"=\";\r\n    } else if (value === \"⊆\"){\r\n        operation = \"contains\";\r\n    } else {\r\n        operation = value;\r\n    }\r\n\r\n    return \"+\" + operation + \"+\";\r\n}\r\n\r\nfunction setName(value){\r\n    const itemTreeId = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getItemId) ();\r\n\r\n    return itemTreeId + \".\" + value;\r\n}\r\n\r\nfunction isBool(name){\r\n    const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getTable)();\r\n    const col   = table.getColumnConfig(name);\r\n    const type  = col.type;\r\n\r\n    let check   = false;\r\n  \r\n    if (type && type === \"boolean\"){\r\n        check = true;\r\n    }\r\n\r\n    return check;\r\n}\r\n\r\nfunction returnBoolValue(value){\r\n    if (value == 1){\r\n        return true;\r\n    } else if (value == 2){\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction setValue(name, value){\r\n\r\n    let sentValue = \"'\" + value + \"'\";\r\n\r\n\r\n    if (isBool(name)){\r\n        sentValue = returnBoolValue(value);\r\n    }\r\n\r\n    return sentValue;\r\n}\r\n\r\nfunction createQuery (input){\r\n    const name      = setName           (input.name);\r\n    const value     = setValue          (input.name, input.value);\r\n    const logic     = setLogicValue     (input.logic);\r\n    const operation = setOperationValue (input.operation);\r\n\r\n    let query = name + operation + value;\r\n\r\n    if (logic){\r\n        query = query + logic;\r\n    }\r\n\r\n    return query;\r\n}\r\n\r\nfunction segmentBtnValue(input) {\r\n \r\n    const segmentBtn = $$(input + \"_segmentBtn\");\r\n    const isVisible  = segmentBtn.isVisible();\r\n\r\n    let value = null;\r\n\r\n    if (isVisible){\r\n        value = segmentBtn.getValue();\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nfunction concatInputs(){\r\n    // объединить все inputs в один массив \r\n\r\n    const items      = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.getAllChilds ();\r\n\r\n    function concat(arr) {\r\n        return [].concat(...arr);\r\n    }\r\n\r\n    return concat(items);\r\n}\r\n\r\n\r\nfunction createValuesArray(){\r\n    const valuesArr  = [];\r\n    const inputs     = concatInputs();\r\n\r\n    inputs.forEach(function(input){\r\n        \r\n        const name       = $$(input).config.columnName;\r\n        const value      = $$(input)                         .getValue();\r\n        const operation  = $$(input + \"-btnFilterOperations\").getValue();\r\n\r\n        const logic      = segmentBtnValue(input); \r\n\r\n        valuesArr.push ( { \r\n            id        : input,\r\n            name      : name, \r\n            value     : value,\r\n            operation : operation,\r\n            logic     : logic  \r\n        });\r\n    });\r\n\r\n    return valuesArr;\r\n}\r\n\r\n\r\nfunction createGetData(){\r\n       \r\n    const format         = \"%d.%m.%Y %H:%i:%s\";\r\n    const postFormatData = webix.Date.dateToStr(format);\r\n    const valuesArr      = createValuesArray();\r\n    const query          = [];\r\n\r\n    valuesArr.forEach(function(el){\r\n  \r\n        const filterEl = $$(el.id);\r\n\r\n        let value      = el.value;\r\n   \r\n        function formattingDateValue(){\r\n            const view = filterEl.config.view; \r\n            if ( view == \"datepicker\" ){\r\n                value = postFormatData(value);\r\n            }\r\n        }\r\n\r\n        function formattingSelectValue(){\r\n            const text = filterEl.config.text;\r\n            if ( text && text == \"Нет\" ){\r\n                value = 0;\r\n            }\r\n        }\r\n\r\n        if (filterEl){\r\n            formattingDateValue ();\r\n            formattingSelectValue();\r\n            query.push(createQuery(el));\r\n           \r\n        }\r\n\r\n    });\r\n\r\n    return query;\r\n}\r\n\r\nfunction createSentQuery(){\r\n    const query = createGetData();\r\n    return query.join(\"\");\r\n}\r\n\r\nfunction setTableConfig(table, query){\r\n    table.config.filter = {\r\n        table:  table.config.filter,\r\n        query:  query\r\n    };\r\n}\r\n\r\nfunction setData(currTableView, data){\r\n    const overlay = \"Ничего не найдено\";\r\n    try{\r\n        currTableView.clearAll();\r\n        if (data.length){\r\n            currTableView.hideOverlay(overlay);\r\n            currTableView.parse(data);\r\n        } else {\r\n            currTableView.showOverlay(overlay);\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setData\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction setCounterValue (reccount){\r\n    try{\r\n        const counter = $$(\"table-idFilterElements\");\r\n        counter.setValues(reccount.toString());\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setCounterVal\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction filterSubmitBtn (){\r\n                           \r\n \r\n    const isValid = $$(\"filterTableForm\").validate();\r\n\r\n    if (isValid){\r\n\r\n        const currTableView = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.getTable)();\r\n        const query         = createSentQuery();\r\n\r\n        setTableConfig(currTableView, query);\r\n\r\n        const path = \"/init/default/api/smarts?query=\" + query;\r\n        const queryData = webix.ajax(path);\r\n\r\n        queryData.then(function(data){\r\n            data             = data.json();\r\n            const reccount   = data.reccount;\r\n            const notifyType = data.err_type;\r\n            const notifyMsg  = data.err;\r\n            data             = data.content;\r\n         \r\n            if (notifyType == \"i\"){\r\n\r\n                setData         (currTableView, data);\r\n                setCounterValue (reccount);\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_2__.Action.hideItem ($$(\"tableFilterPopup\"));\r\n        \r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                    \"success\",\r\n                    \"Фильтры успшено применены\"\r\n                );\r\n            \r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"error\", notifyMsg);\r\n            } \r\n        });\r\n\r\n        queryData.fail(function (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n                err, \r\n                logNameFile, \r\n                \"createGetData\"\r\n            );\r\n        });\r\n\r\n    } else {\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n            \"error\", \r\n            \"Не все поля формы заполнены\"\r\n        );\r\n    }\r\n  \r\n\r\n}\r\n\r\n\r\nconst submitBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n\r\n    config   : {\r\n        id       : \"btnFilterSubmit\",\r\n        hotkey   : \"Ctrl+Shift+Space\",\r\n        disabled : true,\r\n        value    : \"Применить фильтры\", \r\n        click    : filterSubmitBtn,\r\n    },\r\n    titleAttribute : \"Применить фильтры\"\r\n\r\n\r\n}).maxView(\"primary\");\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/buttons/submitBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/createElements/buttons/_layoutBtns.js":
/*!**********************************************************************************!*\
  !*** ./src/js/components/table/filterForm/createElements/buttons/_layoutBtns.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createBtns\": () => (/* binding */ createBtns)\n/* harmony export */ });\n/* harmony import */ var _contextBtn_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./contextBtn.js */ \"./src/js/components/table/filterForm/createElements/buttons/contextBtn.js\");\n/* harmony import */ var _operationBtn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./operationBtn.js */ \"./src/js/components/table/filterForm/createElements/buttons/operationBtn.js\");\n\r\n\r\n\r\nfunction createBtns(element, typeField, isChild, uniqueId = null){\r\n    let id;\r\n    let hideAttribute = false;\r\n\r\n    if (isChild){\r\n        id =  element.id + \"_filter-child-\" + uniqueId;\r\n    } else {\r\n        id =  element.id + \"_filter\";\r\n        hideAttribute = true;\r\n    }\r\n\r\n\r\n    return {\r\n        id      : id + \"_container-btns\",\r\n        hidden  : hideAttribute,\r\n        css     : {\"margin-top\" : \"22px!important\"},\r\n        cols    : [\r\n            (0,_operationBtn_js__WEBPACK_IMPORTED_MODULE_1__.createOperationBtn) (typeField, id, isChild),\r\n            (0,_contextBtn_js__WEBPACK_IMPORTED_MODULE_0__.createContextBtn)   (element,   id, isChild) \r\n        ]\r\n    };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/createElements/buttons/_layoutBtns.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/createElements/buttons/contextBtn.js":
/*!*********************************************************************************!*\
  !*** ./src/js/components/table/filterForm/createElements/buttons/contextBtn.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createContextBtn\": () => (/* binding */ createContextBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _childFilter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../childFilter.js */ \"./src/js/components/table/filterForm/createElements/childFilter.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"createElement => contextBtn\";\r\n\r\n\r\n\r\nfunction getVisibleInfo(lastIndex = false){\r\n \r\n    const values = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.getAllChilds();\r\n\r\n    const fillElements = [];\r\n    \r\n    let counter = 0;\r\n\r\n    values.forEach(function(value, i){\r\n        if (value.length){\r\n            counter ++;\r\n            fillElements.push(i);\r\n        }\r\n    });\r\n\r\n    if (lastIndex){\r\n        return fillElements.pop();\r\n    } else {\r\n        return counter;\r\n    }\r\n\r\n \r\n}\r\n\r\n\r\n\r\nfunction isLastInput(lastInput, thisInput){\r\n\r\n    let check = false;\r\n\r\n    if ( lastInput === thisInput){\r\n        check = true;\r\n    }\r\n\r\n    return check;\r\n}\r\n\r\nfunction isLastKey(inputsKey, keys) {\r\n \r\n    const result = {check : false};\r\n\r\n    keys.forEach(function(input, i){\r\n        const lastIndex = getVisibleInfo(true);\r\n\r\n        if ( i === lastIndex && input == inputsKey ){\r\n            result.check = true;\r\n            result.index = i;\r\n        }  \r\n    });\r\n\r\n    return result;\r\n}\r\n\r\nfunction prevArray(keys, currKey){\r\n\r\n    let value;\r\n\r\n    function loop(key){\r\n        const indexCurrKey = keys.indexOf(key);\r\n        let indexPrevKey   = indexCurrKey - 1;\r\n        \r\n        if (indexPrevKey >= 0){\r\n\r\n            const key    = keys[indexPrevKey];\r\n            const length = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.lengthItem (key);\r\n\r\n            if (length){\r\n                value = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.getItem(key);\r\n            } else {\r\n                loop(key);\r\n            }\r\n           \r\n        } \r\n    }\r\n    \r\n    loop(currKey);\r\n\r\n    return value;\r\n}\r\n\r\nfunction showEmptyTemplate(){\r\n \r\n    if (!getVisibleInfo()){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"filterEmptyTempalte\"));\r\n    }\r\n\r\n}\r\n\r\nfunction findInputs(id, keys){\r\n\r\n    const result    = {};\r\n\r\n    let isLastCollection = false;\r\n\r\n    let inputs       = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.getItem(id);\r\n\r\n    result.prevIndex = inputs.length - 2;\r\n    result.lastIndex = inputs.length - 1;\r\n    result.lastInput = inputs[result.lastIndex]; \r\n \r\n    if (result.prevIndex < 0){ // удален последний элемент из коллекции\r\n        inputs = prevArray(keys, id); // найти не пустую коллекцию\r\n     \r\n        if (!inputs){\r\n            isLastCollection = true;  // то была последняя коллекция в пулле\r\n        } else {\r\n            result.prevIndex = inputs.length - 1;\r\n        }\r\n    }\r\n\r\n\r\n    if (!isLastCollection){\r\n        result.prevInput = inputs[result.prevIndex];\r\n    } else {\r\n        showEmptyTemplate();\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction hideBtn(input){\r\n    const btn = $$(input + \"_segmentBtn\");\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(btn);\r\n\r\n}\r\n\r\nfunction hideSegmentBtn (action, inputsKey, thisInput){\r\n \r\n    const keys      = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.getItems();\r\n    const checkKey  = isLastKey(inputsKey, keys);\r\n  \r\n    if (action === \"add\" && checkKey.check){\r\n \r\n        const inputs     = findInputs (inputsKey, keys);\r\n        const checkInput = isLastInput(inputs.lastInput, thisInput);\r\n    \r\n        if (checkInput){\r\n            hideBtn( inputs.lastInput );\r\n        }\r\n \r\n\r\n    } else if (action === \"remove\" && checkKey.check){\r\n \r\n        const inputs     = findInputs (inputsKey, keys);\r\n        const checkInput = isLastInput(inputs.lastInput, thisInput);\r\n\r\n        if (checkInput){\r\n            hideBtn( inputs.prevInput );\r\n        }\r\n   \r\n    }\r\n}\r\n\r\nfunction hideHtmlEl(id){\r\n    const idContainer = $$(id + \"_filter_rows\");\r\n    const showClass   = \"webix_show-content\";\r\n    const hideClass   = \"webix_hide-content\";\r\n\r\n    const childs = idContainer.getChildViews();\r\n\r\n    if (childs.length == 1){\r\n        const div = idContainer.getNode();\r\n       \r\n        _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.removeClass (div, showClass);\r\n        _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.addClass    (div, hideClass);\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction hideMainInput(thisInput, mainInput){\r\n    const btnOperations = $$(thisInput + \"-btnFilterOperations\");\r\n\r\n    try{\r\n        mainInput.forEach(function(el){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(el);\r\n        });\r\n\r\n        btnOperations.setValue(\" = \");\r\n\r\n    } catch(err){ \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"contextBtn remove => hideMainInput\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction clickContextBtnParent (id, el){\r\n\r\n    const thisInput  = el.id + \"_filter\";\r\n    const segmentBtn = $$(thisInput + \"_segmentBtn\");       \r\n    \r\n    function removeInput (){\r\n\r\n        const container  = $$(thisInput).getParentView();\r\n        const mainInput  = container.getChildViews();\r\n     \r\n        hideMainInput       (thisInput, mainInput);\r\n\r\n        hideHtmlEl          (el.id);\r\n\r\n        hideSegmentBtn      (\"remove\", el.id, thisInput);\r\n\r\n        _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.removeItemChild(el.id, thisInput);\r\n\r\n        showEmptyTemplate   ();\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)         (\"success\", \"Поле удалено\"); \r\n\r\n    }\r\n\r\n    function addInput (){\r\n    \r\n        const idChild = (0,_childFilter_js__WEBPACK_IMPORTED_MODULE_5__.createChildFields) (el);\r\n \r\n        hideSegmentBtn (\"add\", el.id, idChild);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem(segmentBtn);\r\n     \r\n    }\r\n\r\n\r\n    if ( id === \"add\" ){\r\n        addInput();\r\n        \r\n    } else if (id === \"remove\"){\r\n\r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_3__.popupExec)(\"Поле фильтра будет удалено\").then(\r\n            function(){\r\n                removeInput ();\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(segmentBtn);\r\n                \r\n            }\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction returnThisInput(thisElem){\r\n    const master    = thisElem.config.master;\r\n    const index     = master.indexOf(\"_contextMenuFilter\");\r\n    const thisInput = master.slice(0, index);\r\n\r\n    return thisInput;\r\n}\r\n\r\n\r\n\r\nfunction returnInputPosition(id, thisContainer){\r\n    \r\n    const parentInput  = $$(id + \"_filter\");\r\n    const isVisibleParent = parentInput.isVisible();\r\n\r\n    const item = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.getItem(id);\r\n\r\n    let childPosition = 0;\r\n\r\n    item.forEach(function(input, i){\r\n        const inputContainer = input + \"-container\";\r\n\r\n        if (inputContainer === thisContainer){\r\n            childPosition = i + 1;\r\n        }\r\n    });\r\n\r\n    if (!isVisibleParent){\r\n        childPosition++;\r\n    }\r\n\r\n    return childPosition;\r\n}\r\n\r\n\r\n\r\nlet thisInput;\r\nlet thisContainer;\r\nlet element;\r\n \r\nfunction addChild(){\r\n    const segmentBtn = $$(thisInput  + \"_segmentBtn\");\r\n\r\n    const childPosition = returnInputPosition(\r\n        element.id, \r\n        thisContainer\r\n    );\r\n\r\n    const idChild = (0,_childFilter_js__WEBPACK_IMPORTED_MODULE_5__.createChildFields) (element, childPosition);\r\n    hideSegmentBtn  (\"add\", element.id, idChild);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem (segmentBtn);\r\n}\r\n\r\n\r\nfunction removeInput(){\r\n    hideSegmentBtn          (\"remove\", element.id    ,thisInput);\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.removeItemChild  (element.id, thisInput);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem       ( $$(thisContainer));\r\n    showEmptyTemplate       ();\r\n\r\n    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)             (\"success\", \"Поле удалено\"); \r\n\r\n}\r\n\r\n\r\nfunction clickContextBtnChild(id, el, thisElem){\r\n\r\n    element       = el;\r\n    thisInput     = returnThisInput(thisElem);\r\n    thisContainer = thisInput + \"-container\";\r\n\r\n\r\n    if ( id == \"add\" ){\r\n\r\n        addChild();\r\n     \r\n    } else if (id === \"remove\"){\r\n     \r\n        (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_3__.popupExec)(\"Поле фильтра будет удалено\").then(\r\n            function(res){\r\n  \r\n                if(res){\r\n                    removeInput();\r\n                }\r\n\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction returnActions(){\r\n    const actions = [\r\n        {   id      : \"add\",   \r\n            value   : \"Добавить поле\", \r\n            icon    : \"icon-plus\",\r\n        },\r\n        {   id      : \"remove\", \r\n            value   : \"Удалить поле\", \r\n            icon    : \"icon-trash\"\r\n        }\r\n    ];\r\n\r\n\r\n    return actions;\r\n}\r\n\r\nfunction createContextBtn (el, id, isChild){\r\n  \r\n    const popup = {\r\n        view: 'contextmenu',\r\n        css :\"webix_contextmenu\",\r\n        data: returnActions(),\r\n        on  :{\r\n            onMenuItemClick:function(idClick){\r\n                if (isChild){\r\n                    clickContextBtnChild (idClick, el, this);\r\n                } else {\r\n                    clickContextBtnParent(idClick, el); \r\n                }\r\n               \r\n            },\r\n         \r\n        }\r\n    };\r\n\r\n    const contextBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_4__.Button({\r\n    \r\n        config   : {\r\n            id       :  id + \"_contextMenuFilter\",\r\n            icon     : 'wxi-dots',\r\n            width    : 40,\r\n            inputHeight:38,\r\n            popup       : popup,\r\n        },\r\n        titleAttribute : \"Добавить/удалить поле\",\r\n        css            : \"webix_filterBtns\",\r\n    \r\n       \r\n    }).minView();\r\n\r\n\r\n    return contextBtn;       \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/createElements/buttons/contextBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/createElements/buttons/operationBtn.js":
/*!***********************************************************************************!*\
  !*** ./src/js/components/table/filterForm/createElements/buttons/operationBtn.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createOperationBtn\": () => (/* binding */ createOperationBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableFilter => createElement => buttons => operationBtn\";\r\n\r\n \r\n\r\n\r\nfunction filterOperationsBtnLogic (idBtn, id){\r\n  \r\n    const btnFilterOperations = $$(idBtn);\r\n    let operation;\r\n\r\n    id === \"notEqual\" ? operation = \"!=\"\r\n    : id === \"less\"     ? operation = \"<\"\r\n    : id === \"more\"     ? operation = \">\"\r\n    : id === \"mrEqual\"  ? operation = \">=\"\r\n    : id === \"lsEqual\"  ? operation = \"<=\"\r\n    : id === \"contains\" ? operation = \"⊆\"\r\n    : operation = \"=\";\r\n\r\n    try {\r\n        btnFilterOperations.setValue(operation);\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"filterOperationsBtnLogic\"\r\n        );\r\n    }\r\n\r\n\r\n\r\n}\r\nfunction addOperation (self, value, id){\r\n    self.add( { \r\n        value: value,       \r\n        id   : id      \r\n    });\r\n}\r\n\r\nfunction addDefaultOperations(self){\r\n    addOperation (self, '='       , \"eql\"     );\r\n    addOperation (self, '!='      , \"notEqual\");\r\n    \r\n}\r\n\r\nfunction addMoreLessOperations(self){\r\n    addOperation (self, '< ' , \"less\"    );\r\n    addOperation (self, '> ' , \"more\"    );\r\n    addOperation (self, '>=' , \"mrEqual\" );\r\n    addOperation (self, '<=' , \"lsEqual\" );  \r\n}\r\n\r\nfunction filterOperationsBtnData (typeField){\r\n\r\n    return webix.once(function(){\r\n\r\n        if (typeField == \"combo\" || typeField == \"boolean\" ){\r\n            addDefaultOperations(this);\r\n\r\n        } else if (typeField  == \"text\" ){\r\n            addDefaultOperations(this);\r\n            addOperation (this, \"содержит\", \"contains\");\r\n\r\n        } else if (typeField  == \"date\"){\r\n            addDefaultOperations  (this);\r\n            addMoreLessOperations (this);\r\n\r\n        } else if (typeField  == \"integer\"   ){\r\n            addDefaultOperations  (this);\r\n            addMoreLessOperations (this);\r\n            addOperation (this, \"содержит\", \"contains\");\r\n\r\n        }   \r\n    });\r\n}\r\n\r\n\r\nfunction createOperationBtn(typeField, elemId){\r\n    const popup = {\r\n        view  : 'contextmenu',\r\n        width : 100,\r\n        data  : [],\r\n        on    : {\r\n            onMenuItemClick(id) {\r\n                filterOperationsBtnLogic (idBtnOperation, id);\r\n            },\r\n            onAfterLoad: filterOperationsBtnData(typeField)\r\n           \r\n        }\r\n    };\r\n    \r\n    const idBtnOperation = elemId + \"-btnFilterOperations\";\r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n    \r\n        config   : {\r\n            id       : idBtnOperation,\r\n            value    : \"=\", \r\n            width    : 40,\r\n            popup    : popup,\r\n            inputHeight:38,\r\n        },\r\n        titleAttribute : \"Выбрать условие поиска по полю\",\r\n        css            : \"webix_filterBtns\",\r\n    \r\n       \r\n    }).maxView();\r\n    \r\n    return btn;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/createElements/buttons/operationBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/createElements/childFilter.js":
/*!**************************************************************************!*\
  !*** ./src/js/components/table/filterForm/createElements/childFilter.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createChildFields\": () => (/* binding */ createChildFields)\n/* harmony export */ });\n/* harmony import */ var _createElements_field_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createElements/field.js */ \"./src/js/components/table/filterForm/createElements/field.js\");\n/* harmony import */ var _createElements_buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../createElements/buttons/_layoutBtns.js */ \"./src/js/components/table/filterForm/createElements/buttons/_layoutBtns.js\");\n/* harmony import */ var _createElements_segmentBtn_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../createElements/segmentBtn.js */ \"./src/js/components/table/filterForm/createElements/segmentBtn.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nlet element;\r\nlet elemId;\r\nlet uniqueId;\r\nlet position;\r\nlet typeField;\r\n\r\nfunction returnArrPosition(){\r\n    let arrPosition = position;\r\n    const isInputVisible = $$(elemId + \"_filter\").isVisible();\r\n\r\n    if (!isInputVisible){\r\n        arrPosition = position - 1;\r\n    } \r\n\r\n    return arrPosition;\r\n}\r\n\r\n\r\nfunction addInputToStorage(id){\r\n    const arrPosition = returnArrPosition();\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_3__.Filter.spliceChild (elemId, arrPosition, id);\r\n}\r\n\r\nfunction setClearStorage(){\r\n    const item = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_3__.Filter.getItem (elemId);\r\n\r\n    if ( !item ){\r\n        _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_3__.Filter.clearItem (elemId);\r\n    }\r\n\r\n}\r\n\r\nfunction returnBtns(input){\r\n    const btns = [\r\n       \r\n        {   id      : webix.uid(),\r\n            height  : 105,\r\n            rows    : [\r\n              \r\n                {cols : [\r\n                   input,              \r\n                    (0,_createElements_buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_1__.createBtns)(\r\n                        element, \r\n                        typeField, \r\n                        true, \r\n                        uniqueId\r\n                    ) \r\n                ]},\r\n\r\n                (0,_createElements_segmentBtn_js__WEBPACK_IMPORTED_MODULE_2__.segmentBtn)(\r\n                    element, \r\n                    true, \r\n                    uniqueId\r\n                ),  \r\n            ]\r\n        }\r\n    ];\r\n\r\n    return btns\r\n\r\n}\r\n\r\nfunction addInputToContainer(btns){\r\n    const containerRows = $$(elemId + \"_filter_rows\");\r\n    const idContainer   = \r\n    elemId + \"_filter-child-\" + uniqueId + \"-container\";\r\n\r\n    containerRows.addView(\r\n        {   id          : idContainer,\r\n            padding     : 5,\r\n            positionElem: position,\r\n            rows        : btns\r\n        }, position\r\n    ); \r\n}\r\n\r\nfunction addInput(){\r\n   \r\n    setClearStorage();\r\n\r\n    const input = (0,_createElements_field_js__WEBPACK_IMPORTED_MODULE_0__.field) (\r\n        uniqueId, \r\n        typeField, \r\n        element\r\n    );\r\n\r\n    addInputToStorage      (input.id);\r\n\r\n    const btns = returnBtns(input);\r\n\r\n    addInputToContainer    (btns);\r\n}\r\n\r\n\r\nfunction getTypeField(el){\r\n    if (el.type !== \"boolean\"){\r\n        typeField = el.editor;\r\n    } else {\r\n        typeField = \"boolean\";\r\n    }\r\n}\r\n\r\n\r\nfunction getPosition(customPosition){\r\n    if (customPosition == undefined){\r\n        position = 1;\r\n    } else {\r\n        position = customPosition;\r\n    }\r\n}\r\n\r\n\r\nfunction getIdCreatedField(){\r\n    const  idCreateField = elemId + \"_filter-child-\" + uniqueId;\r\n    return idCreateField;\r\n}\r\n\r\nfunction createChildFields (el, customPosition) {\r\n    element  = el;\r\n    elemId   = el.id;\r\n    uniqueId = webix.uid();\r\n\r\n    getPosition (customPosition);\r\n    getTypeField(el);\r\n\r\n    addInput    ();\r\n\r\n    return getIdCreatedField();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/createElements/childFilter.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/createElements/field.js":
/*!********************************************************************!*\
  !*** ./src/js/components/table/filterForm/createElements/field.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"field\": () => (/* binding */ field)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\nlet el ;\r\nlet uniqueId;\r\nlet typeField;\r\n\r\n\r\n\r\nfunction createFieldTemplate(){\r\n\r\n    const elemId  = el.id;\r\n    const fieldId = elemId + \"_filter-child-\" + uniqueId;\r\n\r\n    const fieldTemplate = {\r\n        id        : fieldId, \r\n        name      : fieldId,\r\n        label     : el.label,\r\n        columnName: elemId,\r\n        labelPosition:\"top\",\r\n        on        :{\r\n            onKeyPress:function(){\r\n               \r\n                $$(\"filterTableForm\").clearValidation();\r\n       \r\n                const btn = $$(\"btnFilterSubmit\");\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem(btn);\r\n            },\r\n        }\r\n    };\r\n\r\n    return fieldTemplate;\r\n}\r\n\r\n\r\nfunction createText(type){\r\n    const element = createFieldTemplate();\r\n    element.view  = \"text\";\r\n\r\n    if(type == \"text\"){\r\n        element.placeholder = \"Введите текст\";\r\n    } else if (type == \"int\"){\r\n        element.placeholder    = \"Введите число\";\r\n        element.invalidMessage = \r\n        \"Поле поддерживает только числовой формат\";\r\n        element.validate       = function(val){\r\n            return !isNaN(val*1);\r\n        };\r\n    }\r\n   \r\n\r\n    return element;\r\n}\r\n\r\nfunction findComboTable(){\r\n    if (el.editor && el.editor == \"combo\"){\r\n        return el.type.slice(10);\r\n    } \r\n}\r\n\r\nfunction createCombo(type){\r\n\r\n    const element       = createFieldTemplate();\r\n    const findTableId   = findComboTable();\r\n\r\n    element.view        = \"combo\";\r\n    element.placeholder = \"Выберите вариант\";\r\n\r\n    if (type == \"default\"){\r\n        element.options     = {\r\n            data:(0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getComboOptions)(findTableId)\r\n        };\r\n\r\n    } else if (type == \"bool\"){\r\n        element.options = [\r\n            {id:1, value: \"Да\"},\r\n            {id:2, value: \"Нет\"}\r\n        ];\r\n    }\r\n\r\n    return element;\r\n}\r\n\r\nfunction createDatepicker() {\r\n    const element       = createFieldTemplate();\r\n    element.view        = \"datepicker\";\r\n    element.placeholder = \"дд.мм.гг\";\r\n    element.format      = \"%d.%m.%Y %H:%i:%s\";\r\n    element.timepicker  = true;\r\n  \r\n    return element;\r\n}\r\n\r\nfunction createField(){\r\n\r\n    if (typeField==\"text\"){\r\n        return createText(\"text\");\r\n\r\n    } else if (typeField==\"combo\"){\r\n        return createCombo(\"default\");\r\n\r\n    } else if (typeField==\"boolean\"){\r\n        return createCombo(\"bool\");\r\n\r\n    } else if (typeField==\"date\"){\r\n        return createDatepicker();\r\n\r\n    } else if (typeField==\"integer\"){\r\n        return createText(\"int\");\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction field (id, type, element){\r\n    uniqueId    = id;\r\n    el          = element;\r\n    typeField   = type;\r\n\r\n    return createField();\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/createElements/field.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/createElements/parentFilter.js":
/*!***************************************************************************!*\
  !*** ./src/js/components/table/filterForm/createElements/parentFilter.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createParentFilter\": () => (/* binding */ createParentFilter)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buttons/_layoutBtns.js */ \"./src/js/components/table/filterForm/createElements/buttons/_layoutBtns.js\");\n/* harmony import */ var _segmentBtn_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./segmentBtn.js */ \"./src/js/components/table/filterForm/createElements/segmentBtn.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableFilter => createElements => parentFilter\";\r\n\r\nlet parentElement;\r\nlet viewPosition;\r\n\r\nlet inputTemplate;\r\n\r\nfunction createInputTemplate (el){\r\n    const id = el.id + \"_filter\";\r\n \r\n    inputTemplate = { \r\n        id              : id,\r\n        name            : id, \r\n        hidden          : true,\r\n        label           : el.label, \r\n        labelPosition   : \"top\",\r\n        columnName      : el.id,\r\n        on:{\r\n            onItemClick:function(){\r\n                $$(parentElement).clearValidation();\r\n                $$(\"btnFilterSubmit\").enable();\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\n\r\n\r\nfunction createDatepicker(){\r\n    const elem       = inputTemplate;\r\n    elem.view        = \"datepicker\";\r\n    elem.format      = \"%d.%m.%Y %H:%i:%s\";\r\n    elem.placeholder = \"дд.мм.гг\";\r\n    elem.timepicker  = true;\r\n    return elem;\r\n}\r\n\r\n\r\nfunction createCombo(findTableId){\r\n    const elem       = inputTemplate;\r\n    elem.view        = \"combo\";\r\n    elem.placeholder = \"Выберите вариант\";\r\n    elem.options     = {\r\n        data:(0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.getComboOptions)(findTableId)\r\n    };\r\n    return elem;\r\n}\r\n\r\nfunction createBoolCombo (){\r\n    const elem       = inputTemplate;\r\n    elem.view        = \"combo\";\r\n    elem.placeholder = \"Выберите вариант\";\r\n    elem.options     = [\r\n        {id:1, value: \"Да\"},\r\n        {id:2, value: \"Нет\"}\r\n    ];\r\n    return elem;\r\n}\r\n\r\nfunction createText (type){\r\n    \r\n    const elem = inputTemplate;\r\n    elem.view  = \"text\";\r\n    elem.css   = {\"passing-bottom\":\"5px!important\"};\r\n\r\n    if        (type == \"text\"){\r\n        elem.placeholder = \"Введите текст\";\r\n\r\n    } else if (type == \"int\"){\r\n        elem.placeholder     = \"Введите число\";\r\n        elem.invalidMessage  = \r\n        \"Поле поддерживает только числовой формат\";\r\n        elem.validate        = function (val) {\r\n            return !isNaN(val*1);\r\n        };\r\n    }\r\n    \r\n    return elem;\r\n}\r\n\r\n\r\nfunction returnFilter(el){\r\n\r\n    if (el.type == \"datetime\"){\r\n        return [\r\n            createDatepicker (), \r\n            (0,_buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_2__.createBtns)(el, \"date\"),  \r\n        ];\r\n\r\n    } \r\n    else if (el.type.includes(\"reference\")) {\r\n        let findTableId = el.type.slice(10);\r\n\r\n        return [\r\n            createCombo(findTableId),\r\n            (0,_buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_2__.createBtns)(el, \"combo\"), \r\n        ];\r\n \r\n    } \r\n    else if (el.type.includes(\"boolean\")) {\r\n        return [\r\n            createBoolCombo(),\r\n            (0,_buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_2__.createBtns)(el, \"combo\")\r\n        ];\r\n    \r\n    } \r\n    else if (el.type.includes(\"integer\")) {\r\n        return [\r\n            createText (\"int\"),\r\n            (0,_buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_2__.createBtns)(el, \"integer\"), \r\n        ];\r\n    }\r\n    else{\r\n\r\n        return [ \r\n            createText (\"text\"),\r\n            (0,_buttons_layoutBtns_js__WEBPACK_IMPORTED_MODULE_2__.createBtns)(el, \"text\"), \r\n        ];\r\n    }\r\n}\r\n\r\n\r\nfunction generateElements(){\r\n    const inputsArray = [];\r\n    const columnsData = $$(\"table\").getColumns(true);\r\n    try{\r\n        columnsData.forEach((el) => {\r\n            const id = el.id;\r\n\r\n            createInputTemplate (el);\r\n\r\n            const idFullContainer  = id + \"_filter_rows\";\r\n            const idInnerContainer = id + \"_filter-container\";\r\n            const cssContainer     = id + \" webix_filter-inputs\";\r\n        \r\n            const filter  =  {   \r\n                id  : idFullContainer,\r\n                css : cssContainer,\r\n                rows: [\r\n                    {   id      : idInnerContainer,\r\n                        padding : 5,\r\n                        rows    : [\r\n                            \r\n                            { cols: \r\n                                returnFilter(el),\r\n                            },\r\n                            (0,_segmentBtn_js__WEBPACK_IMPORTED_MODULE_3__.segmentBtn)(el, false),\r\n                            \r\n                        ]\r\n                    }\r\n                ]\r\n            };\r\n\r\n            inputsArray.push (filter);\r\n\r\n\r\n        });\r\n\r\n        return inputsArray;\r\n    } catch (err){ \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"generateElements\"\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction createFilter(arr){\r\n\r\n    const inputs = {\r\n        margin  : 8,\r\n        id      : \"inputsFilter\",\r\n        css     : \"webix_inputs-table-filter\", \r\n        rows    : arr\r\n    };\r\n\r\n    return inputs;\r\n}\r\n\r\n\r\nfunction addInputs(inputs){\r\n\r\n    const elem = $$(parentElement);\r\n    \r\n    try{\r\n        if(elem){ \r\n            elem.addView(\r\n                createFilter(inputs), \r\n                viewPosition\r\n            );\r\n        }\r\n    } catch (err){ \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"addInputs\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction clearFormValidation(){\r\n    const elem = $$(parentElement);\r\n\r\n    try{\r\n        if(elem){\r\n            elem.clear();\r\n            elem.clearValidation();\r\n        }\r\n    } catch (err){ \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"clearFormValidation\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction enableDelBtn(){\r\n    const delBtn = $$(\"table-delBtnId\");\r\n    try{\r\n        if(parentElement == \"table-editForm\" && delBtn ){\r\n            delBtn.enable();\r\n        }\r\n    } catch (err){ \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err,logNameFile,\"enableDelBtn\");\r\n    }\r\n}\r\n\r\nfunction createParentFilter (parentElem, positon = 1) {\r\n    parentElement      = parentElem;\r\n    viewPosition       = positon;\r\n\r\n    const childs       = $$(parentElement).elements;\r\n    const childsLength = Object.keys(childs).length;\r\n\r\n\r\n    if(childsLength == 0 ){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem($$(\"inputsFilter\"));\r\n        const inputs = generateElements();\r\n        addInputs       (inputs);\r\n\r\n    } else {\r\n        clearFormValidation();\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"inputsFilter\"));\r\n    }\r\n\r\n    enableDelBtn();\r\n    \r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/createElements/parentFilter.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/createElements/segmentBtn.js":
/*!*************************************************************************!*\
  !*** ./src/js/components/table/filterForm/createElements/segmentBtn.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"segmentBtn\": () => (/* binding */ segmentBtn)\n/* harmony export */ });\nfunction segmentBtn(element, isChild, uniqueId){\r\n    let id;\r\n    let hideAttribute = false;\r\n\r\n    const idEl = element.id + \"_filter\";\r\n\r\n    if (isChild){\r\n        id = idEl + \"-child-\" + uniqueId;\r\n    } else {\r\n        id            = idEl;\r\n        hideAttribute = true;\r\n    }\r\n\r\n    return {\r\n        view    : \"segmented\", \r\n        id      : id + \"_segmentBtn\",\r\n        hidden  : hideAttribute,\r\n        value   : 1, \r\n        options : [\r\n            { \"id\" : \"1\", \"value\" : \"и\" }, \r\n            { \"id\" : \"2\", \"value\" : \"или\" }, \r\n        ]\r\n    };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/createElements/segmentBtn.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/popup/_layoutPopup.js":
/*!******************************************************************!*\
  !*** ./src/js/components/table/filterForm/popup/_layoutPopup.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createFilterPopup\": () => (/* binding */ createFilterPopup)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n/* harmony import */ var _viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../viewTemplates/emptyTemplate.js */ \"./src/js/viewTemplates/emptyTemplate.js\");\n/* harmony import */ var _buttons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buttons.js */ \"./src/js/components/table/filterForm/popup/buttons.js\");\n/* harmony import */ var _tabbar_layoutTab_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabbar/_layoutTab.js */ \"./src/js/components/table/filterForm/popup/tabbar/_layoutTab.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst editFormPopup = {\r\n    view        : \"form\", \r\n    id          : \"editFormPopup\",\r\n    css         : \"webix_edit-form-popup\",\r\n    borderless  : true,\r\n    elements    : [\r\n\r\n        { rows : [ \r\n            _tabbar_layoutTab_js__WEBPACK_IMPORTED_MODULE_3__.layoutTab,\r\n    \r\n            {height : 20},\r\n            _buttons_js__WEBPACK_IMPORTED_MODULE_2__.btnLayout\r\n        ]},\r\n        {}\r\n\r\n    ],\r\n};\r\n\r\n\r\n\r\nfunction createFilterPopup() {\r\n\r\n    const popup = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_0__.Popup({\r\n        headline : \"Редактор фильтров\",\r\n        config   : {\r\n            id    : \"popupFilterEdit\",\r\n            height  : 400,\r\n            width   : 400,\r\n    \r\n        },\r\n    \r\n        elements : {\r\n            rows : [\r\n                (0,_viewTemplates_emptyTemplate_js__WEBPACK_IMPORTED_MODULE_1__.createEmptyTemplate)(\r\n                    \"Выберите нужные поля или шаблон из библиотеки\"\r\n                ),\r\n                editFormPopup\r\n            ]\r\n          \r\n        }\r\n    });\r\n    \r\n    popup.createView ();\r\n    popup.showPopup  ();\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/popup/_layoutPopup.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/popup/buttons.js":
/*!*************************************************************!*\
  !*** ./src/js/components/table/filterForm/popup/buttons.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"btnLayout\": () => (/* binding */ btnLayout)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _userTemplate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../userTemplate.js */ \"./src/js/components/table/filterForm/userTemplate.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableFilter => popup => buttons\";\r\n\r\n\r\nfunction returnCollection(value){\r\n    const colId      = $$(value).config.columnName;\r\n    return _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.getItem(colId);\r\n}\r\n\r\nfunction visibleSegmentBtn(selectAll, selectValues){\r\n\r\n    const selectLength = selectValues.length;\r\n\r\n    selectValues.forEach(function(value, i){\r\n        const collection = returnCollection(value);\r\n    \r\n        const length     = collection.length;\r\n        const lastIndex  = length - 1;\r\n        const lastId     = collection[lastIndex];\r\n\r\n        const segmentBtn = $$(lastId + \"_segmentBtn\");\r\n\r\n        const lastElem   = selectLength - 1;\r\n        const prevElem   = selectLength - 1;\r\n\r\n        if ( i === lastElem){\r\n          //  скрыть последний элемент\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.hideItem(segmentBtn);\r\n\r\n        } else if ( i === prevElem || selectAll){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.showItem(segmentBtn);\r\n        }\r\n   \r\n    });\r\n}\r\n\r\n\r\nfunction createWorkspaceCheckbox (){\r\n    const values       = $$(\"editFormPopup\").getValues();\r\n    const selectValues = [];\r\n\r\n    try{\r\n        const keys    = Object.keys(values); \r\n        let selectAll = false;\r\n\r\n        keys.forEach(function(el){\r\n            const isChecked = values[el];\r\n\r\n            if (isChecked && el !== \"selectAll\"){\r\n                selectValues.push(el);\r\n            } else if (el == \"selectAll\"){\r\n                selectAll = true;\r\n            }\r\n\r\n            const columnName = $$(el).config.columnName;\r\n            _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.setFieldState(values[el], columnName, el);\r\n  \r\n        });\r\n\r\n        visibleSegmentBtn(selectAll, selectValues);\r\n\r\n    } catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"createWorkspaceCheckbox\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction visibleCounter(){\r\n    const elements      = $$(\"filterTableForm\").elements;\r\n    const values        = Object.values(elements);\r\n    let visibleElements = 0;\r\n    try{\r\n        values.forEach(function(el){\r\n            const isVisibleElem = el.config.hidden;\r\n            if ( !isVisibleElem ){\r\n                visibleElements++;\r\n            }\r\n            \r\n        });\r\n\r\n    } catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"visibleCounter\"\r\n        );\r\n    }\r\n\r\n    return visibleElements;\r\n}\r\n\r\n\r\nfunction resetLibSelectOption(){\r\n    if (_userTemplate_js__WEBPACK_IMPORTED_MODULE_3__.SELECT_TEMPLATE){\r\n        delete _userTemplate_js__WEBPACK_IMPORTED_MODULE_3__.SELECT_TEMPLATE.id;\r\n        delete _userTemplate_js__WEBPACK_IMPORTED_MODULE_3__.SELECT_TEMPLATE.value;\r\n    }\r\n}\r\n\r\nfunction setDisableTabState(){\r\n    const visibleElements = visibleCounter();\r\n\r\n    if (!(visibleElements)){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.showItem     ($$(\"filterEmptyTempalte\" ));\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.disableItem  ($$(\"btnFilterSubmit\"     ));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.disableItem  ($$(\"filterLibrarySaveBtn\"));\r\n    } \r\n}\r\n\r\nfunction getCheckboxData(){\r\n      \r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.enableItem($$(\"filterLibrarySaveBtn\"));\r\n    createWorkspaceCheckbox ();\r\n\r\n    setDisableTabState();\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.destructItem($$(\"popupFilterEdit\"));\r\n\r\n    resetLibSelectOption();\r\n\r\n    (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n        \"success\",\r\n        \"Рабочая область фильтра обновлена\"\r\n    );\r\n}\r\n\r\nfunction showEmptyTemplate(){\r\n    const keys = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_6__.Filter.lengthPull();\r\n    if ( !keys ){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.showItem($$(\"filterEmptyTempalte\"));\r\n    }\r\n}\r\n\r\nfunction popupSubmitBtn (){\r\n    try {                                             \r\n        const tabbarValue = $$(\"filterPopupTabbar\").getValue();\r\n\r\n        if (tabbarValue == \"editFormPopupLib\" ){\r\n   \r\n            $$(\"resetFilterBtn\").callEvent(\"resetFilter\");\r\n            (0,_userTemplate_js__WEBPACK_IMPORTED_MODULE_3__.getLibraryData) ();\r\n\r\n        } else if (tabbarValue == \"editFormScroll\" ){\r\n            getCheckboxData();\r\n        }\r\n\r\n    } catch (err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n            err ,\r\n            logNameFile, \r\n            \"popupSubmitBtn\"\r\n        );\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.destructItem($$(\"popupFilterEdit\"));\r\n    }\r\n\r\n    showEmptyTemplate();\r\n\r\n}\r\n\r\n\r\n\r\nlet lib;\r\nlet radioValue;\r\n\r\nfunction removeOptionState (){\r\n    const id      = radioValue.id;\r\n    const options = lib.config.options;\r\n    try{\r\n        options.forEach(function(el){\r\n            if (el.id == id){\r\n                el.value = el.value + \" (шаблон удалён)\";\r\n                lib.refresh();\r\n                lib.disableOption(lib.getValue());\r\n                lib.setValue(\"\");\r\n            }\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"removeOptionState\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction deleteElement(){\r\n    const prefs   = radioValue.prefs;\r\n    const idPrefs = prefs.id;\r\n\r\n    const path = \"/init/default/api/userprefs/\" + idPrefs;\r\n    const deleteTemplate = webix.ajax().del(path, prefs);\r\n\r\n    deleteTemplate.then(function(data){\r\n        data = data.json();\r\n\r\n        const value = radioValue.value;\r\n\r\n        if (data.err_type == \"i\"){\r\n            (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                \"success\",\r\n                \"Шаблон « \" + value + \" » удален\"\r\n            );\r\n            removeOptionState ();\r\n        } else {\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                data.err, \r\n                logNameFile, \r\n                \"userprefsData\"\r\n            );\r\n        }\r\n\r\n    });\r\n\r\n    deleteTemplate.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"getLibraryData\"\r\n        );\r\n    });\r\n}\r\n\r\nasync function userprefsData (){ \r\n\r\n    lib = $$(\"filterEditLib\");\r\n    const libValue = lib.getValue();\r\n    radioValue = lib.getOption(libValue);\r\n\r\n    const idPrefs = radioValue.prefs.id;\r\n\r\n    if (idPrefs){\r\n        deleteElement       (radioValue, lib);\r\n        resetLibSelectOption();\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.disableItem  ($$(\"editFormPopupLibRemoveBtn\"));\r\n    }\r\n\r\n    \r\n\r\n}\r\n\r\n\r\nfunction removeBtnClick (){\r\n\r\n    (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)(   \"Шаблон будет удалён\", \r\n                \"Вы уверены, что хотите продолжить?\", \r\n                [\"Отмена\", \"Удалить\"]\r\n    ).then(function(result){\r\n\r\n        if (result == 1){\r\n            userprefsData ();\r\n            \r\n        }\r\n    });\r\n}\r\n\r\n\r\nconst submitBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__.Button({\r\n    \r\n    config   : {\r\n        id       : \"popupFilterSubmitBtn\",\r\n        hotkey   : \"Shift+Space\",\r\n        disabled : true, \r\n        value    : \"Применить\", \r\n        click    : popupSubmitBtn\r\n    },\r\n    titleAttribute : \"Выбранные фильтры будут\" +\r\n    \"добавлены в рабочее поле, остальные скрыты\"\r\n\r\n}).maxView(\"primary\");\r\n\r\n\r\nconst removeBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__.Button({\r\n    \r\n    config   : {\r\n        id       : \"editFormPopupLibRemoveBtn\",\r\n        hotkey   : \"Shift+Q\",\r\n        hidden   : true,  \r\n        disabled : true,\r\n        icon     : \"icon-trash\", \r\n        click   : function(){\r\n            removeBtnClick ();\r\n        },\r\n    },\r\n    titleAttribute : \"Выбранный шаблон будет удален\"\r\n\r\n   \r\n}).minView(\"delete\");\r\n\r\n\r\nconst btnLayout = {\r\n    cols   : [\r\n        submitBtn,\r\n        {width : 5},\r\n        removeBtn,\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/popup/buttons.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/popup/tabbar/_layoutTab.js":
/*!***********************************************************************!*\
  !*** ./src/js/components/table/filterForm/popup/tabbar/_layoutTab.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"layoutTab\": () => (/* binding */ layoutTab)\n/* harmony export */ });\n/* harmony import */ var _tabbar_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tabbar.js */ \"./src/js/components/table/filterForm/popup/tabbar/tabbar.js\");\n/* harmony import */ var _tabForm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tabForm.js */ \"./src/js/components/table/filterForm/popup/tabbar/tabForm.js\");\n/* harmony import */ var _tabLibrary_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tabLibrary.js */ \"./src/js/components/table/filterForm/popup/tabbar/tabLibrary.js\");\n\r\n\r\n\r\n\r\n\r\nconst layoutTab = {\r\n    rows:[\r\n        _tabbar_js__WEBPACK_IMPORTED_MODULE_0__.tabbar,\r\n                \r\n        {   height : 200,\r\n            cells  : [\r\n                _tabForm_js__WEBPACK_IMPORTED_MODULE_1__.tabForm,\r\n                _tabLibrary_js__WEBPACK_IMPORTED_MODULE_2__.tabLibrary,\r\n            ]   \r\n        },\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/popup/tabbar/_layoutTab.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/popup/tabbar/tabForm.js":
/*!********************************************************************!*\
  !*** ./src/js/components/table/filterForm/popup/tabbar/tabForm.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tabForm\": () => (/* binding */ tabForm)\n/* harmony export */ });\nconst tabForm = {   \r\n    view        :\"scrollview\",\r\n    id          : \"editFormScroll\", \r\n    borderless  : true, \r\n    css         : \"webix_multivew-cell\",\r\n    scroll      : \"y\", \r\n    body        : { \r\n        id  : \"editFormPopupScroll\",\r\n        rows: [ ]\r\n    }\r\n\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/popup/tabbar/tabForm.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/popup/tabbar/tabLibrary.js":
/*!***********************************************************************!*\
  !*** ./src/js/components/table/filterForm/popup/tabbar/tabLibrary.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tabLibrary\": () => (/* binding */ tabLibrary)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _userTemplate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../userTemplate.js */ \"./src/js/components/table/filterForm/userTemplate.js\");\n\r\n\r\n\r\n\r\nfunction onChangeLibBtn (){\r\n    const submitBtn = $$(\"popupFilterSubmitBtn\");\r\n\r\n    const selectedValue = _userTemplate_js__WEBPACK_IMPORTED_MODULE_1__.SELECT_TEMPLATE.id;\r\n\r\n    const lib        = $$(\"filterEditLib\");\r\n    const libValue   = lib.getValue ();\r\n    const radioValue = lib.getOption(libValue);\r\n\r\n    if (radioValue && radioValue.id !== selectedValue){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem ($$(\"editFormPopupLibRemoveBtn\"));\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.enableItem (submitBtn);\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem(submitBtn);\r\n    }\r\n\r\n\r\n}\r\n\r\nconst radioLibBtn =  {   \r\n    view    : \"radio\", \r\n    id      : \"filterEditLib\",\r\n    vertical: true,\r\n    options : [],\r\n    on      : {\r\n        onChange: function(){\r\n            onChangeLibBtn ();\r\n        }\r\n    }\r\n};\r\n\r\nconst tabLibrary = {  \r\n    view        : \"form\", \r\n    scroll      : true ,\r\n    id          : \"editFormPopupLib\",\r\n    css         : \"webix_multivew-cell\",\r\n    borderless  : true,\r\n    elements    : [\r\n        radioLibBtn\r\n    ],\r\n\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/popup/tabbar/tabLibrary.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/popup/tabbar/tabbar.js":
/*!*******************************************************************!*\
  !*** ./src/js/components/table/filterForm/popup/tabbar/tabbar.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tabbar\": () => (/* binding */ tabbar)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _userTemplate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../userTemplate.js */ \"./src/js/components/table/filterForm/userTemplate.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"tableFilter => popup => tabbar => tabbar\";\r\n\r\nfunction btnSubmitState (state){\r\n\r\n    const btn = $$(\"popupFilterSubmitBtn\");\r\n\r\n    if (state==\"enable\"){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem(btn);\r\n\r\n    } else if (state==\"disable\"){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.disableItem(btn);\r\n        \r\n    }\r\n    \r\n}\r\n\r\nfunction visibleRemoveBtn (param){\r\n    const btn = $$(\"editFormPopupLibRemoveBtn\");\r\n   \r\n    if (param){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem(btn);\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(btn);\r\n    }\r\n    \r\n}\r\n\r\nfunction setSelectedOption(){\r\n    const radio = $$(\"filterEditLib\");\r\n\r\n    if (_userTemplate_js__WEBPACK_IMPORTED_MODULE_2__.SELECT_TEMPLATE && _userTemplate_js__WEBPACK_IMPORTED_MODULE_2__.SELECT_TEMPLATE.id){\r\n        radio.setValue   (_userTemplate_js__WEBPACK_IMPORTED_MODULE_2__.SELECT_TEMPLATE.id);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.enableItem($$(\"editFormPopupLibRemoveBtn\"));\r\n        btnSubmitState   (\"disable\");\r\n    }\r\n}\r\n\r\nfunction filterLibrary(){\r\n\r\n    function setStateSubmitBtn (){\r\n        \r\n        if ($$(\"filterEditLib\").getValue() !== \"\" ){\r\n            btnSubmitState (\"enable\");\r\n        } else {\r\n            btnSubmitState (\"disable\");\r\n        }\r\n    }\r\n\r\n    try{\r\n \r\n        setStateSubmitBtn ();\r\n        visibleRemoveBtn  (true);\r\n        setSelectedOption ();\r\n    }catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"filterLibrary\"\r\n        );\r\n    }  \r\n\r\n}\r\n\r\n\r\n\r\nfunction editFilter (){\r\n    \r\n    const checkboxes = $$(\"editFormPopup\").getValues();\r\n    const values     = Object.values(checkboxes);\r\n    let counter = 0;\r\n    \r\n    function countChecked(){\r\n        try{\r\n            values.forEach(function(el,i){\r\n                if (el){\r\n                    counter++;\r\n                }\r\n            });\r\n        } catch(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                err, \r\n                logNameFile, \r\n                \"countChecked\"\r\n            );\r\n        }\r\n    }\r\n    \r\n    function setStateSubmitBtn(){\r\n        if (counter > 0){\r\n            btnSubmitState (\"enable\");\r\n        } else {\r\n            btnSubmitState (\"disable\");\r\n        }\r\n    }\r\n\r\n    countChecked     ();\r\n    visibleRemoveBtn (false);\r\n    setStateSubmitBtn();\r\n   \r\n}\r\n\r\n\r\nfunction tabbarClick (id){\r\n\r\n    if (id ==\"editFormPopupLib\"){\r\n        filterLibrary();  \r\n    }\r\n\r\n    if (id ==\"editFormScroll\"){\r\n        editFilter ();\r\n    } \r\n\r\n}\r\n\r\n\r\nfunction returnDivHeadline(title){\r\n    return  \"<span\" + \r\n            \"class='webix_tabbar-filter-headline'>\" +\r\n            title +\r\n            \"</span>\";\r\n}\r\n\r\n\r\n\r\nconst tabbar =  {\r\n    view        : \"tabbar\",  \r\n    type        : \"top\", \r\n    id          : \"filterPopupTabbar\",\r\n    css         : \"webix_filter-popup-tabbar\",\r\n    multiview   : true, \r\n    height      : 50,\r\n\r\n    options     : [\r\n        {   value: returnDivHeadline(\"Поля\"), \r\n            id: 'editFormScroll' \r\n        },\r\n        {   value: returnDivHeadline(\"Библиотека\"), \r\n            id: 'editFormPopupLib' \r\n        },\r\n    ],\r\n\r\n    on:{\r\n        onAfterTabClick: function(id){\r\n            tabbarClick(id);\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/popup/tabbar/tabbar.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/setDefaultState.js":
/*!***************************************************************!*\
  !*** ./src/js/components/table/filterForm/setDefaultState.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"filterFormDefState\": () => (/* binding */ filterFormDefState)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\nconst logNameFile = \"table => filterForm => setDefaultState\";\r\n\r\n\r\nfunction filterFormDefState(){\r\n    const filterContainer = $$(\"filterTableBarContainer\");\r\n    const inputs          = $$(\"inputsFilter\");\r\n\r\n    try{\r\n        if (filterContainer && filterContainer.isVisible()){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem  (filterContainer);\r\n        }\r\n\r\n       _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem($$(\"btnFilterSubmit\"));\r\n       _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem($$(\"filterLibrarySaveBtn\"));\r\n       _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem($$(\"resetFilterBtn\"));\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem(inputs);\r\n\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"filterEmptyTempalte\"));\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setFilterDefaultState\"\r\n        );\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/setDefaultState.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/toolbarBtnClick.js":
/*!***************************************************************!*\
  !*** ./src/js/components/table/filterForm/toolbarBtnClick.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"filterBtnClick\": () => (/* binding */ filterBtnClick)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n/* harmony import */ var _createElements_parentFilter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createElements/parentFilter.js */ \"./src/js/components/table/filterForm/createElements/parentFilter.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst primaryBtnClass   = \"webix-transparent-btn--primary\";\r\nconst secondaryBtnClass = \"webix-transparent-btn\";\r\n\r\nfunction resizeContainer(width){\r\n    const filterContainer = $$(\"filterTableBarContainer\");\r\n\r\n    filterContainer.config.width = width;\r\n    filterContainer.resize();\r\n}\r\n\r\nfunction filterMinAdaptive(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"tableContainer\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"tree\"));\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"table-backTableBtnFilter\"));\r\n\r\n    const emptySpace = 45;\r\n    resizeContainer(window.innerWidth - emptySpace);\r\n\r\n}\r\n\r\nfunction setBtnCssState(btnClass, add, remove){\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_1__.Filter.addClass    (btnClass, add);\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_1__.Filter.removeClass (btnClass, remove);\r\n}\r\n\r\n\r\nlet btnClass;\r\n\r\nfunction setPrimaryState(filter){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem ($$(\"table-editForm\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem (filter);\r\n\r\n    const isChildExists = filter.getChildViews();\r\n\r\n    if(isChildExists){\r\n        (0,_createElements_parentFilter_js__WEBPACK_IMPORTED_MODULE_2__.createParentFilter)(\"filterTableForm\", 3);\r\n    }\r\n\r\n    setBtnCssState(\r\n        btnClass, \r\n        primaryBtnClass, \r\n        secondaryBtnClass\r\n    );\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"filterTableBarContainer\"));\r\n}\r\n\r\nfunction setSecondaryState(){\r\n    setBtnCssState(\r\n        btnClass, \r\n        secondaryBtnClass, \r\n        primaryBtnClass\r\n    );\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"filterTableForm\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"filterTableBarContainer\"));\r\n}\r\n\r\nfunction toolbarBtnLogic(filter){\r\n    btnClass = document.querySelector(\".webix_btn-filter\");\r\n    const isPrimaryClass = btnClass.classList.contains(primaryBtnClass);\r\n    \r\n    if(!isPrimaryClass){\r\n        setPrimaryState(filter);\r\n    } else {\r\n        setSecondaryState();\r\n    }\r\n}     \r\n\r\nfunction filterMaxAdaptive(filter, idTable){\r\n\r\n    $$(idTable).clearSelection();\r\n\r\n    toolbarBtnLogic(filter);\r\n    resizeContainer(350);\r\n}\r\n\r\n\r\nfunction filterBtnClick (idTable){\r\n\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_1__.Filter.clearAll(); // clear inputs storage\r\n    \r\n    const filter    = $$(\"filterTableForm\");\r\n    const container = $$(\"container\");\r\n\r\n    filterMaxAdaptive(filter, idTable);\r\n    \r\n    const width    = container.$width;\r\n    const minWidth = 850;\r\n\r\n    if (width < minWidth){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"tree\"));\r\n\r\n        if (width < minWidth ){\r\n            filterMinAdaptive();\r\n        }\r\n\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"table-backTableBtnFilter\"));\r\n        filter.config.width = 350;\r\n        filter.resize();\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/toolbarBtnClick.js?");

/***/ }),

/***/ "./src/js/components/table/filterForm/userTemplate.js":
/*!************************************************************!*\
  !*** ./src/js/components/table/filterForm/userTemplate.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getLibraryData\": () => (/* binding */ getLibraryData),\n/* harmony export */   \"SELECT_TEMPLATE\": () => (/* binding */ SELECT_TEMPLATE)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _createElements_childFilter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./createElements/childFilter.js */ \"./src/js/components/table/filterForm/createElements/childFilter.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./actions/_FilterActions.js */ \"./src/js/components/table/filterForm/actions/_FilterActions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile     = \"tableFilter => userTemplate\";\r\n\r\nconst SELECT_TEMPLATE = {};\r\n\r\nfunction setValue(el, value){\r\n    if (value){\r\n        el.setValue(value);\r\n    }\r\n}\r\n\r\nfunction setBtnsValue(el){\r\n        \r\n    const id = el.id;\r\n    const segmentBtn    = $$(id + \"_segmentBtn\");\r\n    const operationsBtn = $$(id + \"-btnFilterOperations\");\r\n\r\n    setValue(segmentBtn   , el.logic    );\r\n    setValue(operationsBtn, el.operation);\r\n    \r\n}\r\n\r\nfunction showParentField (el){\r\n    const idEl      = el.id;\r\n    const element   = $$(idEl);\r\n    const htmlClass = element.config.columnName;\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.setFieldState(1, htmlClass, idEl);\r\n   // visibleField(1, htmlClass, idEl);\r\n\r\n    setBtnsValue(el);\r\n    setValue    (element, el.value);\r\n}\r\n\r\nfunction createChildField(el){\r\n    const table = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getTable)();\r\n    const col   = table.getColumnConfig(el.parent);\r\n \r\n    const idField = (0,_createElements_childFilter_js__WEBPACK_IMPORTED_MODULE_2__.createChildFields) (col);\r\n\r\n    const values = el;\r\n    values.id = idField;\r\n  \r\n    setBtnsValue(values);\r\n    setValue    ($$(idField), el.value);\r\n}\r\n\r\n\r\nfunction returnValue(array, index){\r\n    const lastKey = array.length - index;\r\n    return array[lastKey];\r\n}\r\n\r\nfunction hideSegmentBtn(){\r\n    const lastCollection = returnValue (_actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.getItems(), 1);\r\n    const lastInput      = returnValue (_actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.getItem(lastCollection), 1);\r\n    const segmentBtn     = $$(lastInput + \"_segmentBtn\");\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.hideItem(segmentBtn);\r\n}\r\n\r\n\r\nfunction  createWorkspace(prefs){\r\n\r\n    _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.clearFilter();\r\n\r\n    const values = prefs.values;\r\n\r\n    values.forEach(function(el,i){\r\n        \r\n        if (!el.parent){\r\n            showParentField  (el);\r\n        } else {\r\n            createChildField(el);\r\n        }\r\n    });\r\n\r\n    hideSegmentBtn();\r\n\r\n}\r\n\r\nfunction setToSelectStorage(id, val){\r\n    SELECT_TEMPLATE.id    = id;\r\n    SELECT_TEMPLATE.value = val;\r\n}\r\n\r\nfunction createFiltersByTemplate(data) {\r\n    const currId     = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId) ();\r\n\r\n    data             = data.json().content;\r\n\r\n    const lib        = $$(\"filterEditLib\");\r\n    const libValue   = lib.getValue ();\r\n    const radioValue = lib.getOption(libValue);\r\n\r\n    try{\r\n        data.forEach(function (el){\r\n            const value = radioValue.value;\r\n\r\n            const name = \r\n            currId + \"_filter-template_\" + value;\r\n\r\n            if (el.name == name){\r\n                const prefs = JSON.parse(el.prefs);\r\n                createWorkspace(prefs);\r\n            }\r\n\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.destructItem($$(\"popupFilterEdit\"));\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.enableItem  ($$(\"btnFilterSubmit\"));\r\n            setToSelectStorage (radioValue.id, value);\r\n\r\n        });\r\n    } catch(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"createFiltersByTemplate\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction showHtmlContainers(){\r\n    const keys = _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.getItems();\r\n    \r\n    keys.forEach(function(el){\r\n        const htmlElement = document.querySelector(\".\" + el );\r\n        _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.addClass   (htmlElement, \"webix_show-content\");\r\n        _actions_FilterActions_js__WEBPACK_IMPORTED_MODULE_4__.Filter.removeClass(htmlElement, \"webix_hide-content\");\r\n    });\r\n}\r\n\r\nfunction getLibraryData(){\r\n\r\n    const userprefsData = webix.ajax(\"/init/default/api/userprefs/\");\r\n\r\n    userprefsData.then(function(data){\r\n        createFiltersByTemplate(data);\r\n        showHtmlContainers     ();\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n            \"success\", \r\n            \"Рабочая область фильтра обновлена\"\r\n        );\r\n\r\n    });\r\n\r\n    userprefsData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n            err, \r\n            logNameFile, \r\n            \"getLibraryData\"\r\n        );\r\n    });\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/filterForm/userTemplate.js?");

/***/ }),

/***/ "./src/js/components/table/formTools/setDefaultState.js":
/*!**************************************************************!*\
  !*** ./src/js/components/table/formTools/setDefaultState.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolsDefState\": () => (/* binding */ toolsDefState)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\nfunction toolsDefState(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"formsTools\"    ));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(\"formsContainer\"));\r\n\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/formTools/setDefaultState.js?");

/***/ }),

/***/ "./src/js/components/table/formTools/viewProperty.js":
/*!***********************************************************!*\
  !*** ./src/js/components/table/formTools/viewProperty.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"propertyTemplate\": () => (/* binding */ propertyTemplate)\n/* harmony export */ });\nfunction propertyTemplate (idProp){\r\n    return {\r\n        view      : \"property\",  \r\n        id        : idProp, \r\n        tooltip   : \r\n        \"Имя: #label#<br> Значение: #value#\",\r\n        width     : 348,\r\n        nameWidth : 150,\r\n        editable  : true,\r\n        scroll    : true,\r\n        hidden    : true,\r\n    };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/formTools/viewProperty.js?");

/***/ }),

/***/ "./src/js/components/table/formTools/viewTools.js":
/*!********************************************************!*\
  !*** ./src/js/components/table/formTools/viewTools.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"viewTools\": () => (/* binding */ viewTools)\n/* harmony export */ });\n\r\nfunction setBtnFilterState(){\r\n    const btnClass          = document.querySelector(\".webix_btn-filter\");\r\n    const primaryBtnClass   = \"webix-transparent-btn--primary\";\r\n    const secondaryBtnClass = \"webix-transparent-btn\";\r\n\r\n    if (btnClass.classList.contains(primaryBtnClass  )){\r\n        btnClass.classList.add   (secondaryBtnClass);\r\n        btnClass.classList.remove(primaryBtnClass  );\r\n    }\r\n}\r\n\r\nfunction defaultState(){\r\n    const tools       = $$(\"formsTools\");    \r\n    const сontainer   = $$(\"formsContainer\");\r\n    const formResizer = $$(\"formsTools-resizer\");\r\n    \r\n    if ( tools && tools.isVisible() ){\r\n        tools.hide();\r\n        formResizer.hide();\r\n    }\r\n\r\n    if ( сontainer && !(сontainer.isVisible()) ){\r\n        сontainer.show();\r\n    }\r\n}\r\n\r\nfunction backFilterBtnClick (){\r\n    defaultState();\r\n    setBtnFilterState();\r\n}\r\n\r\nconst filterBackTableBtn = { \r\n    view    : \"button\", \r\n    id      : \"table-backFormsBtnFilter\",\r\n    type    : \"icon\",\r\n    icon    : \"icon-arrow-right\",\r\n    value   : \"Вернуться к таблице\",\r\n    height  : 28,\r\n    minWidth: 50,\r\n    width   : 55,\r\n   \r\n    click   : function(){\r\n        backFilterBtnClick();\r\n    },\r\n\r\n    on: {\r\n        onAfterRender: function () {\r\n            this.getInputNode()\r\n            .setAttribute(\"title\", \"Вернуться к таблице\");\r\n        }\r\n    } \r\n};\r\n\r\nconst viewTools = {\r\n    id       : \"viewTools\",\r\n    padding  : 10,\r\n    rows     : [\r\n       {cols : [\r\n\r\n            {  \r\n                template   : \"Действия\",\r\n                height     : 30, \r\n                css        : \"popup_headline\",\r\n                borderless : true,\r\n            },\r\n            {},\r\n            filterBackTableBtn\r\n        ]},\r\n   \r\n        {\r\n            id   : \"viewToolsContainer\", \r\n            rows : [\r\n                {}\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/formTools/viewTools.js?");

/***/ }),

/***/ "./src/js/components/table/lazyLoad.js":
/*!*********************************************!*\
  !*** ./src/js/components/table/lazyLoad.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"sortTable\": () => (/* binding */ sortTable),\n/* harmony export */   \"scrollTableLoad\": () => (/* binding */ scrollTableLoad)\n/* harmony export */ });\n/* harmony import */ var _createSpace_rows_createRows_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createSpace/rows/createRows.js */ \"./src/js/components/table/createSpace/rows/createRows.js\");\n\r\n\r\nconst limitLoad   = 80;\r\n\r\n\r\nfunction refreshTable(table){\r\n    const tableId           = table.config.idTable;\r\n    const oldOffset         = table.config.offsetAttr;\r\n\r\n    const newOffset         = oldOffset + limitLoad;\r\n\r\n    table.config.offsetAttr = newOffset;\r\n    table.refresh();\r\n\r\n    (0,_createSpace_rows_createRows_js__WEBPACK_IMPORTED_MODULE_0__.createTableRows) (\"table\", tableId, oldOffset);\r\n}\r\n\r\n\r\nfunction sortTable(table){\r\n    table.attachEvent(\"onAfterSort\", function(id, sortType){\r\n        \r\n        const sortInfo = {\r\n            idCol : id,\r\n            type  : sortType\r\n        };\r\n\r\n        table.config.sort       = sortInfo;\r\n        table.config.offsetAttr = 0;\r\n\r\n\r\n        webix.storage.local.put(\r\n            \"tableSortData\", \r\n            sortInfo\r\n        );\r\n\r\n        table.clearAll();\r\n        refreshTable(table);\r\n        \r\n    });\r\n}\r\n\r\n\r\nfunction scrollTableLoad(table){\r\n    table.attachEvent(\"onScrollY\", function(){\r\n        const table        = this;\r\n        const scrollState  = table.getScrollState();\r\n        const maxHeight    = table._dtable_height;\r\n        const offsetHeight = table._dtable_offset_height;\r\n \r\n        if (maxHeight - scrollState.y == offsetHeight){ \r\n            refreshTable(table);\r\n        }\r\n      \r\n\r\n    });\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/lazyLoad.js?");

/***/ }),

/***/ "./src/js/components/table/onColumnResize.js":
/*!***************************************************!*\
  !*** ./src/js/components/table/onColumnResize.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"columnResize\": () => (/* binding */ columnResize)\n/* harmony export */ });\n\r\nlet cols;\r\nlet lengthCols;\r\n\r\nfunction returnCol(index){\r\n    const currIndex = lengthCols - index;\r\n    return cols[currIndex];\r\n}\r\n\r\nfunction returnSumWidthCols(){\r\n    let sum = 0;\r\n    cols.forEach(function(col){\r\n        sum += col.width;\r\n    });\r\n    return sum;\r\n}\r\n\r\nfunction setNewWidth(table){\r\n    const lastCol      = returnCol(1);\r\n    const scrollWidth  = 17;\r\n    const widthTable   = table.$width - scrollWidth;\r\n    const sumWidthCols = returnSumWidthCols();\r\n    \r\n    if (sumWidthCols < widthTable && lastCol){\r\n        const different = widthTable - sumWidthCols;\r\n        const newWidth  = lastCol.width + different;\r\n        \r\n        table.setColumnWidth(lastCol.id, newWidth);\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction columnResize(table){\r\n\r\n    table.attachEvent(\"onColumnResize\", function(id, newWidth, oldWidth, userAction){\r\n  \r\n        cols       = table.getColumns();\r\n        lengthCols = cols.length;\r\n  \r\n        if (userAction){\r\n            const lastResizer = 2;\r\n            const isExists    = lengthCols - lastResizer;\r\n            const prevCol     = returnCol(lastResizer);\r\n         \r\n        //    if ( isExists > -1 && prevCol.id == id){ // это последняя колонка\r\n                setNewWidth(table);\r\n               \r\n           // }\r\n        }\r\n\r\n    });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/onColumnResize.js?");

/***/ }),

/***/ "./src/js/components/table/onFuncs.js":
/*!********************************************!*\
  !*** ./src/js/components/table/onFuncs.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onFuncTable\": () => (/* binding */ onFuncTable)\n/* harmony export */ });\n/* harmony import */ var _editForm_states_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./editForm/states.js */ \"./src/js/components/table/editForm/states.js\");\n/* harmony import */ var _editForm_createProperty_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editForm/createProperty.js */ \"./src/js/components/table/editForm/createProperty.js\");\n/* harmony import */ var _blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/notifications.js */ \"./src/js/blocks/notifications.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _editForm_editFormMediator_editFormClass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editForm/editFormMediator/editFormClass.js */ \"./src/js/components/table/editForm/editFormMediator/editFormClass.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => onFuncs\";\r\n\r\nfunction toEditForm (nextItem) {\r\n    const valuesTable = $$(\"table\").getItem(nextItem); \r\n\r\n    function setViewDate(){\r\n        const parseDate = webix.Date.dateToStr(\"%d.%m.%y %H:%i:%s\");\r\n \r\n        const values    = Object.values(valuesTable);\r\n    \r\n        try{\r\n            values.forEach(function(el, i){\r\n                if(el instanceof Date){\r\n           \r\n                    const key        = Object.keys(valuesTable)[i];\r\n                    const value      = parseDate(el);\r\n                    valuesTable[key] = value;\r\n                }\r\n            \r\n            });\r\n        } catch (err){ \r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err, logNameFile, \"setViewDate\");\r\n        }\r\n    }\r\n\r\n    \r\n    _editForm_editFormMediator_editFormClass_js__WEBPACK_IMPORTED_MODULE_5__.EditForm.putState();\r\n    setViewDate();\r\n    const prop = $$(\"editTableFormProperty\");\r\n    prop.setValues(valuesTable);\r\n \r\n\r\n}\r\n\r\n\r\nconst onFuncTable = {\r\n\r\n    onBeforeLoad:function(){\r\n        this.showOverlay(\"Загрузка...\");\r\n    },\r\n\r\n    onBeforeEditStop:function(state, editor){\r\n        const table      = $$(\"table\");\r\n        try {\r\n            if(state.value != state.old){\r\n\r\n                const idRow = editor.row;\r\n                const col   = editor.column;\r\n                const value   = state.value;\r\n\r\n                const item     = this.getItem(editor.row);\r\n\r\n                const oldValue = item[editor.column];\r\n\r\n                item[editor.column] = value;\r\n\r\n                const property  = $$(\"editTableFormProperty\");\r\n                property.setValues(item);\r\n\r\n                table.updateItem (idRow, {[col] : oldValue});\r\n  \r\n                _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_6__.mediator.tables.editForm.put(false);\r\n\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(\r\n                err, \r\n                logNameFile, \r\n                \"onBeforeEditStop\"\r\n            );\r\n        }\r\n\r\n    },\r\n    \r\n    onBeforeSelect:function(selection){\r\n        const table     = $$(\"table\");\r\n        const nextItem   = selection.id;\r\n\r\n        function successAction(){\r\n            $$(\"table-editForm\").setDirty(false);\r\n            table.select(selection.id);\r\n        }\r\n\r\n        function modalBoxTable (){\r\n  \r\n            try{ \r\n                (0,_blocks_notifications_js__WEBPACK_IMPORTED_MODULE_2__.modalBox)().then(function(result){\r\n                    const saveBtn  = $$(\"table-saveBtn\");\r\n                    const form     = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_6__.mediator.tables.editForm;\r\n      \r\n                    if (result == 1){\r\n                        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_6__.mediator.tables.editForm.defaultState();\r\n                        table.select(selection.id);\r\n                    } \r\n\r\n                    else if (result == 2){\r\n                    \r\n                        if (saveBtn.isVisible()){\r\n                            form.put(false)\r\n                            .then(function (result){\r\n                     \r\n                                if (result){\r\n                                    successAction();\r\n                                }\r\n\r\n                            });\r\n                        } else {\r\n                            form.post(false)\r\n                            .then(function (result){\r\n\r\n                                if (result){\r\n                                    successAction();\r\n                                }\r\n\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                });\r\n\r\n                return false;\r\n          \r\n            } catch (err){ \r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(\r\n                    err,\r\n                    logNameFile,\r\n                    \"onBeforeSelect => modalBoxTable\"\r\n                );\r\n            }\r\n        }\r\n        \r\n        const isDirtyForm = $$(\"table-editForm\").isDirty();\r\n        if (isDirtyForm){\r\n            modalBoxTable ();\r\n            return false;\r\n        } else {\r\n            (0,_editForm_createProperty_js__WEBPACK_IMPORTED_MODULE_1__.createProperty)(\"table-editForm\");\r\n            toEditForm(nextItem);\r\n        }\r\n    },\r\n    onAfterSelect:function(row){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_6__.mediator.linkParam(true, {id: row.id});\r\n    },\r\n\r\n    onAfterUnSelect:function(){\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_6__.mediator.linkParam(false, \"id\");\r\n    },\r\n\r\n    onAfterLoad:function(){\r\n        try {\r\n            this.hideOverlay();\r\n\r\n            (0,_editForm_states_js__WEBPACK_IMPORTED_MODULE_0__.defaultStateForm) ();\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"onAfterLoad\"\r\n            );\r\n        }\r\n    },  \r\n\r\n    onAfterDelete: function() {\r\n        function setOverlayState(){\r\n            const id    = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.getTable)().config.id;\r\n            const table = $$(id);\r\n\r\n\r\n            if ( !table.count() ){\r\n                table.showOverlay(\"Ничего не найдено\");\r\n            } else {\r\n                table.hideOverlay();\r\n            }\r\n        }\r\n\r\n        setOverlayState();\r\n      \r\n    },\r\n\r\n    onAfterAdd: function() {\r\n        this.hideOverlay();\r\n    },\r\n\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/onFuncs.js?");

/***/ }),

/***/ "./src/js/components/table/onResize.js":
/*!*********************************************!*\
  !*** ./src/js/components/table/onResize.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"onResizeTable\": () => (/* binding */ onResizeTable)\n/* harmony export */ });\nfunction onResizeTable(table){\r\n    table.attachEvent(\"onResize\", function(width){\r\n        const cols = table.getColumns();\r\n        width -= 17;\r\n        let sum = 0;\r\n        cols.forEach(function(col,i){\r\n            sum += col.width;\r\n        });\r\n\r\n        if (sum < width){\r\n            const different = width - sum;\r\n \r\n            const lastCol = cols.length - 1;\r\n            cols.forEach(function(col,i){\r\n                if (i == lastCol){\r\n                    const newWidth = col.width + different;\r\n                    table.setColumnWidth(col.id, newWidth);\r\n                }\r\n        \r\n            });\r\n\r\n        } \r\n\r\n    });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/onResize.js?");

/***/ }),

/***/ "./src/js/components/table/toolbar/_layout.js":
/*!****************************************************!*\
  !*** ./src/js/components/table/toolbar/_layout.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tableToolbar\": () => (/* binding */ tableToolbar)\n/* harmony export */ });\n/* harmony import */ var _viewHeadline_layout_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../viewHeadline/_layout.js */ \"./src/js/components/viewHeadline/_layout.js\");\n/* harmony import */ var _visibleColsBtn_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./visibleColsBtn.js */ \"./src/js/components/table/toolbar/visibleColsBtn.js\");\n/* harmony import */ var _filterBtn_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filterBtn.js */ \"./src/js/components/table/toolbar/filterBtn.js\");\n/* harmony import */ var _editFormBtn_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./editFormBtn.js */ \"./src/js/components/table/toolbar/editFormBtn.js\");\n/* harmony import */ var _exportBtn_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./exportBtn.js */ \"./src/js/components/table/toolbar/exportBtn.js\");\n/* harmony import */ var _counter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./counter.js */ \"./src/js/components/table/toolbar/counter.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction tableToolbar (idTable, visible = false) {\r\n\r\n    const idFindElements   = idTable + \"-findElements\",\r\n          idFilterElements = idTable + \"-idFilterElements\",\r\n          idHeadline       = idTable + \"-templateHeadline\"\r\n    ;\r\n\r\n    return { \r\n        \r\n        rows:[\r\n            (0,_viewHeadline_layout_js__WEBPACK_IMPORTED_MODULE_0__.createHeadline)(idHeadline),\r\n            {\r\n                css     : \"webix_filterBar\",\r\n                padding : {\r\n                    bottom : 4,\r\n                }, \r\n                height  : 40,\r\n                cols    : [\r\n                    (0,_filterBtn_js__WEBPACK_IMPORTED_MODULE_2__.toolbarFilterBtn)      (idTable, visible),\r\n                    (0,_editFormBtn_js__WEBPACK_IMPORTED_MODULE_3__.toolbarEditButton)     (idTable, visible),\r\n                    {},\r\n                    (0,_visibleColsBtn_js__WEBPACK_IMPORTED_MODULE_1__.toolbarVisibleColsBtn) (idTable),\r\n                    (0,_exportBtn_js__WEBPACK_IMPORTED_MODULE_4__.toolbarDownloadButton) (idTable, visible)\r\n                ],\r\n            },\r\n\r\n            { cols : [\r\n                (0,_counter_js__WEBPACK_IMPORTED_MODULE_5__.createTemplateCounter) (\r\n                    idFindElements  , \r\n                    \"Общее количество записей\"  \r\n                ),\r\n\r\n                (0,_counter_js__WEBPACK_IMPORTED_MODULE_5__.createTemplateCounter) (\r\n                    idFilterElements, \r\n                    \"Видимое количество записей\"\r\n                ),\r\n            ]},\r\n        ]\r\n    };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/toolbar/_layout.js?");

/***/ }),

/***/ "./src/js/components/table/toolbar/counter.js":
/*!****************************************************!*\
  !*** ./src/js/components/table/toolbar/counter.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createTemplateCounter\": () => (/* binding */ createTemplateCounter)\n/* harmony export */ });\nfunction createTemplateCounter(idEl, text){\r\n    const view = {   \r\n        view    : \"template\",\r\n        id      : idEl,\r\n        css     : \"webix_style-template-count\",\r\n        height  : 30,\r\n        template: function () {\r\n\r\n            const values = $$(idEl).getValues();\r\n            const keys   = Object.keys(values);\r\n\r\n            if (keys.length){\r\n                return \"<div style='color:#999898;'>\" + \r\n                        text + \": \" + values + \r\n                        \" </div>\"\r\n                ;\r\n                \r\n            } else {\r\n                return \"\";\r\n            }\r\n        }\r\n    };\r\n\r\n    return view;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/toolbar/counter.js?");

/***/ }),

/***/ "./src/js/components/table/toolbar/editFormBtn.js":
/*!********************************************************!*\
  !*** ./src/js/components/table/toolbar/editFormBtn.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolbarEditButton\": () => (/* binding */ toolbarEditButton)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\n \r\nconst logNameFile = \"tableEditForm => toolbarBtn\";\r\n\r\nfunction setSecondaryState(){\r\n    const btnClass       = document.querySelector(\".webix_btn-filter\");\r\n    const primaryClass   = \"webix-transparent-btn--primary\";\r\n    const secondaryClass = \"webix-transparent-btn\";\r\n\r\n    try{\r\n        btnClass.classList.add   (secondaryClass);\r\n        btnClass.classList.remove(primaryClass  );\r\n    } catch (err) {   \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"setSecondaryState\");\r\n    }\r\n}\r\n\r\n\r\nfunction editBtnClick() {\r\n    const editForm  = $$(\"table-editForm\");\r\n    const backBtn   = $$(\"table-backTableBtn\");\r\n    const tree      = $$(\"tree\");\r\n    const container = $$(\"container\");\r\n\r\n\r\n    function maxView () {\r\n        const editContainer   = $$(\"editTableBarContainer\");\r\n        const filterContainer = $$(\"filterTableBarContainer\");\r\n\r\n        const filterForm      = $$(\"filterTableForm\");\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem   (filterContainer);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem   (filterForm);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.disableItem($$(\"table-delBtnId\"));\r\n    \r\n   \r\n\r\n        setSecondaryState ();\r\n\r\n        if (editForm && editForm.isVisible()){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem (editForm);\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem (editContainer);\r\n\r\n        }else if (editForm && !(editForm.isVisible())) {\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem (editForm);\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem (editContainer);\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem ($$(\"tablePropBtnsSpace\"));\r\n        }\r\n\r\n    }\r\n\r\n    function minView () {\r\n        const tableContainer = $$(\"tableContainer\");\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem (tableContainer);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem (tree);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem (backBtn);\r\n        \r\n        const padding = 45;\r\n        editForm.config.width = window.innerWidth - padding;\r\n        editForm.resize();\r\n    }\r\n\r\n    maxView ();\r\n    if (container.$width < 850 ){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(tree);\r\n \r\n\r\n        if (container.$width < 850 ){\r\n            minView ();\r\n        }\r\n      \r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem(backBtn);\r\n        editForm.config.width = 350;\r\n        editForm.resize();\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction toolbarEditButton (idTable, visible){\r\n    const idBtnEdit = idTable + \"-editTableBtnId\";\r\n\r\n    function returnValue( empty = true ){\r\n        const icon = \"<span class='webix_icon icon-pencil btn-edit-icon-toolbar'></span>\";\r\n        const text = \"<span style='padding-left: 5px; font-size:13px!important; margin-right: 11px;' >Редактор записи</span>\";\r\n\r\n        if (empty){\r\n            return icon;\r\n        } else {\r\n            return icon + text;\r\n        }\r\n    }   \r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n        config   : {\r\n            id       : idBtnEdit,\r\n            hotkey   : \"Ctrl+Shift+X\",\r\n            value    : returnValue( false ),\r\n            hidden   : visible,\r\n            minWidth : 40,\r\n            maxWidth : 200, \r\n            onlyIcon : false,\r\n            click    : function(){\r\n                editBtnClick(idBtnEdit);\r\n            },\r\n        },\r\n        css            : \"edit-btn-icon\",\r\n        titleAttribute : \"Показать/скрыть фильтры\",\r\n        adaptValue     : returnValue( ),\r\n    \r\n       \r\n    }).maxView();\r\n\r\n    return btn;\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/toolbar/editFormBtn.js?");

/***/ }),

/***/ "./src/js/components/table/toolbar/exportBtn.js":
/*!******************************************************!*\
  !*** ./src/js/components/table/toolbar/exportBtn.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolbarDownloadButton\": () => (/* binding */ toolbarDownloadButton)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\nfunction exportToExcel(idTable){\r\n    try{\r\n        webix.toExcel(idTable, {\r\n            filename    : \"Table\",\r\n            filterHTML  : true,\r\n            styles      : true\r\n        });\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Таблица сохранена\");\r\n\r\n    } catch (err) {   \r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, \"toolbarTable\", \"exportToExcel\");\r\n    }\r\n}\r\n\r\nfunction toolbarDownloadButton(idTable, visible){\r\n    const idExport = idTable + \"-exportBtn\";\r\n\r\n    const exportBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_2__.Button({\r\n    \r\n        config   : {\r\n            id       : idExport,\r\n            hotkey   : \"Ctrl+Shift+Y\",\r\n            hidden   : visible, \r\n            icon     : \"icon-arrow-circle-down\",\r\n            click    : function(){\r\n                exportToExcel(idTable);\r\n            },\r\n        },\r\n        titleAttribute : \"Экспорт таблицы\"\r\n    \r\n       \r\n    }).transparentView();\r\n    \r\n    return exportBtn;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/toolbar/exportBtn.js?");

/***/ }),

/***/ "./src/js/components/table/toolbar/filterBtn.js":
/*!******************************************************!*\
  !*** ./src/js/components/table/toolbar/filterBtn.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolbarFilterBtn\": () => (/* binding */ toolbarFilterBtn)\n/* harmony export */ });\n/* harmony import */ var _filterForm_toolbarBtnClick_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../filterForm/toolbarBtnClick.js */ \"./src/js/components/table/filterForm/toolbarBtnClick.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\nfunction toolbarFilterBtn(idTable, visible){\r\n    let idBtnEdit = idTable + \"-editTableBtnId\",\r\n        idFilter  = idTable + \"-filterId\"\r\n    ;\r\n\r\n    const btn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_1__.Button({\r\n        config   : {\r\n            id       : idFilter,\r\n            hotkey   : \"Ctrl+Shift+F\",\r\n            disabled : true,\r\n            hidden   : visible,\r\n            icon     : \"icon-filter\",\r\n            click    : function(){\r\n                (0,_filterForm_toolbarBtnClick_js__WEBPACK_IMPORTED_MODULE_0__.filterBtnClick)(idTable, idBtnEdit);\r\n            },\r\n        },\r\n        css            : \"webix_btn-filter\",\r\n        titleAttribute : \"Показать/скрыть фильтры\",\r\n    \r\n       \r\n    }).transparentView();\r\n\r\n    return btn;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/toolbar/filterBtn.js?");

/***/ }),

/***/ "./src/js/components/table/toolbar/visibleColsBtn.js":
/*!***********************************************************!*\
  !*** ./src/js/components/table/toolbar/visibleColsBtn.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"toolbarVisibleColsBtn\": () => (/* binding */ toolbarVisibleColsBtn)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _columnsSettings_visibleCols_layout_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../columnsSettings/visibleCols/_layout.js */ \"./src/js/components/table/columnsSettings/visibleCols/_layout.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"table => toolbar => visibleColsBtn\";\r\n\r\nfunction createSpace(){\r\n    const table    = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.getTable)();\r\n    const list     = $$(\"visibleList\");\r\n    const listPull = Object.values(list.data.pull);\r\n    const cols     = table.getColumns(); \r\n    \r\n    function findRemoveEl(elem){\r\n        let check = false;\r\n\r\n        cols.forEach(function(item,i){\r\n            \r\n            if (elem == item.id){\r\n                check = true;\r\n            }\r\n\r\n        });\r\n        return check;\r\n    }\r\n\r\n    \r\n    function removeListItem(){\r\n\r\n        try{\r\n            listPull.forEach(function(el){\r\n            \r\n                if (findRemoveEl(el.column)){\r\n                list.remove(el.id);\r\n                }\r\n\r\n            });\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"createSpace => removeListItem\"\r\n            );\r\n        }  \r\n    }\r\n\r\n    function addListSelectedItem(){\r\n        const viewList = $$(\"visibleListSelected\");\r\n        const emptyEl  = $$(\"visibleColsEmptyTempalteSelected\");\r\n        \r\n        if (cols.length){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem(emptyEl);\r\n        }\r\n        try{\r\n            cols.forEach(function(col){\r\n                viewList.add({\r\n                    column  :col.id,\r\n                    label   :col.label,\r\n                });\r\n            });\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"createSpace => addListSelectedItem\"\r\n            );\r\n        } \r\n    }\r\n\r\n    if (listPull.length !== cols.length){\r\n        removeListItem();\r\n        addListSelectedItem();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction createListItems(idTable){\r\n\r\n    const currTable  = $$(idTable);\r\n    let columns      = $$(idTable).getColumns(true);\r\n\r\n    try{\r\n        columns = currTable.getColumns(true);\r\n        const sortCols = _.sortBy(columns, \"label\");\r\n\r\n        sortCols.forEach(function(col){\r\n            \r\n            if(col.css !== \"action-column\" && !col.hiddenCustomAttr ){\r\n                \r\n                $$(\"visibleList\").add({\r\n                    column  :col.id,\r\n                    label   :col.label,\r\n                });\r\n                \r\n            }\r\n            \r\n        });\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"getCheckboxArray\"\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nfunction  visibleColsButtonClick(idTable){\r\n    (0,_columnsSettings_visibleCols_layout_js__WEBPACK_IMPORTED_MODULE_3__.createPopup)    ();\r\n    createListItems(idTable);\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem($$(\"visibleColsEmptyTempalte\"));\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.showItem($$(\"popupVisibleCols\"));\r\n\r\n    createSpace    ();\r\n}\r\n\r\nfunction toolbarVisibleColsBtn(idTable){\r\n    const idVisibleCols = idTable + \"-visibleCols\";\r\n\r\n    const visibleCols = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n    \r\n        config   : {\r\n            id       : idVisibleCols,\r\n            hotkey   : \"Ctrl+Shift+A\",\r\n            disabled : true,\r\n            icon     : \"icon-columns\",\r\n            click    : function(){\r\n                visibleColsButtonClick(idTable);\r\n            },\r\n        },\r\n        titleAttribute : \"Показать/скрыть колонки\"\r\n    \r\n       \r\n    }).transparentView();\r\n\r\n    return visibleCols;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/table/toolbar/visibleColsBtn.js?");

/***/ }),

/***/ "./src/js/components/treeEdit/_layout.js":
/*!***********************************************!*\
  !*** ./src/js/components/treeEdit/_layout.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editTreeLayout\": () => (/* binding */ editTreeLayout)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _form_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form.js */ \"./src/js/components/treeEdit/form.js\");\n\r\n\r\n\r\n\r\n\r\nfunction renameTree(state, editor){\r\n \r\n    const url = \"/init/default/api/trees/\";\r\n    \r\n    if(state.value != state.old){\r\n      \r\n        const pid = $$(\"treeEdit\").getParentId(editor.id);\r\n        \r\n        const postObj = {\r\n            name    : state.value,\r\n            pid     : pid,\r\n            id      : editor.id,\r\n            owner   : null,\r\n            descr   : \"\",\r\n            ttype   : 1,\r\n            value   : \"\",\r\n            cdt     : null,\r\n        };\r\n\r\n     \r\n        const postData = webix.ajax().put(url + editor.id, postObj);\r\n\r\n        postData.then(function(data){\r\n            data = data.json();\r\n            if (data.err_type == \"i\"){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Данные изменены\");\r\n\r\n            } else {\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                    data.err,\r\n                    \"editTree\",\r\n                    \"tree onAfterEditStop postData msg\"\r\n                );\r\n            }\r\n        });\r\n\r\n        postData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n                err, \r\n                \"editTree\",\r\n                \"tree onAfterEditStop postData\"\r\n            );\r\n        });\r\n\r\n\r\n    }\r\n  \r\n}\r\n\r\n\r\nfunction returnTree(){\r\n    const tree = {\r\n        view       : \"edittree\",\r\n        id         : \"treeEdit\",\r\n        editable   : true,\r\n        editor     : \"text\",\r\n        editValue  : \"value\",\r\n        css        : \"webix_tree-edit\",\r\n        editaction : \"dblclick\",\r\n        data       : [],\r\n        on         : {\r\n            onAfterEditStop:function(state, editor){\r\n                renameTree(state, editor);\r\n            },\r\n        }\r\n    \r\n    };\r\n\r\n    return tree;\r\n}\r\n\r\nfunction editTreeLayout () {\r\n\r\n    return [\r\n        {   id  : \"treeEditContainer\", \r\n            cols: [\r\n                {rows: [\r\n                        returnTree(),\r\n                    ],\r\n                },\r\n                (0,_form_js__WEBPACK_IMPORTED_MODULE_2__.returnForm)()\r\n                   \r\n            ]\r\n        }\r\n   \r\n    ];\r\n}\r\n\r\n\r\nwebix.UIManager.addHotKey(\"Ctrl+Shift+E\", function() { \r\n\r\n    Backbone.history.navigate(\"experimental/treeEdit\", { trigger:true});\r\n\r\n});\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeEdit/_layout.js?");

/***/ }),

/***/ "./src/js/components/treeEdit/_treeEditMediator.js":
/*!*********************************************************!*\
  !*** ./src/js/components/treeEdit/_treeEditMediator.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TreeEdit\": () => (/* binding */ TreeEdit)\n/* harmony export */ });\n/* harmony import */ var _layout_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_layout.js */ \"./src/js/components/treeEdit/_layout.js\");\n/* harmony import */ var _contextMenu_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contextMenu.js */ \"./src/js/components/treeEdit/contextMenu.js\");\n/* harmony import */ var _getInfoEditTree_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getInfoEditTree.js */ \"./src/js/components/treeEdit/getInfoEditTree.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeEdit => _treeEditMediator\";\r\n\r\nclass TreeEdit {\r\n    constructor (){\r\n        this.name = \"treeTempl\";\r\n    }\r\n\r\n    create(){\r\n        try{\r\n            if (!$$(this.name)){\r\n                $$(\"container\").addView(\r\n                    {   view:\"layout\",\r\n                        id:this.name, \r\n                        hidden:true, \r\n                        scroll:\"auto\",\r\n                        rows: (0,_layout_js__WEBPACK_IMPORTED_MODULE_0__.editTreeLayout)()\r\n                    },\r\n                4);\r\n                \r\n                webix.ui((0,_contextMenu_js__WEBPACK_IMPORTED_MODULE_1__.contextMenu)());\r\n            }\r\n          \r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(\r\n                err,\r\n                logNameFile,\r\n                \"createTreeTempl\"\r\n            );\r\n        }\r\n    }\r\n\r\n    showView(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.showItem($$(this.name));   \r\n    }\r\n\r\n    load(){\r\n        (0,_getInfoEditTree_js__WEBPACK_IMPORTED_MODULE_2__.getInfoEditTree)();\r\n    }\r\n\r\n\r\n    defaultState(id){\r\n        try{\r\n            const elem = $$(\"treeTempl\");\r\n            if(!($$(id))){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_4__.Action.hideItem(elem);\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_3__.setFunctionError)(err, logNameFile, \"hideTreeTempl\");\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeEdit/_treeEditMediator.js?");

/***/ }),

/***/ "./src/js/components/treeEdit/contextMenu.js":
/*!***************************************************!*\
  !*** ./src/js/components/treeEdit/contextMenu.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"contextMenu\": () => (/* binding */ contextMenu)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nlet tree;\r\nlet context ;\r\nlet titem ;\r\nlet menu ;  \r\nlet cmd ;  \r\nlet url ;\r\nlet postObj;\r\n\r\nclass Option {\r\n\r\n    constructor (){\r\n        this.combo     = $$(\"editTreeCombo\");\r\n        this.comboData = this.combo.getPopup().getList();\r\n        this.pull      = Object.values(this.comboData.data.pull);\r\n    }\r\n\r\n    static returnCombo(){\r\n        return $$(\"editTreeCombo\");\r\n    }\r\n\r\n\r\n    static returnComboData(){\r\n        const combo = this.returnCombo();\r\n        return combo.getPopup().getList();\r\n    }\r\n\r\n\r\n    static returnPullValues(){\r\n        const data = this.returnComboData();\r\n        return Object.values(data.data.pull);\r\n    }\r\n\r\n\r\n    static add(option){  \r\n        const data       = this.returnComboData();\r\n        const pullValues = this.returnPullValues();\r\n\r\n        pullValues.forEach(function(el,i){\r\n            if (el.id !== option.id){\r\n                data.parse(option);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    static rename(option){\r\n        const data       = this.returnComboData();\r\n        const pullValues = this.returnPullValues();\r\n   \r\n        pullValues.forEach(function (el){\r\n\r\n            if (el.id == option.id){\r\n                data.parse(option);\r\n            }\r\n           \r\n        });\r\n      \r\n    }\r\n\r\n    static remove(option){\r\n        const data       = this.returnComboData();\r\n        const pullValues = this.returnPullValues();\r\n\r\n        function removeSubItemOptions(id){\r\n            const res = [id];\r\n\r\n            tree.data.eachSubItem(id, function(obj){ \r\n                res.push(obj.id);\r\n            }); \r\n\r\n            return res;\r\n        }\r\n\r\n        function isExists(element){\r\n            let check = false;\r\n            pullValues.forEach(function (el){\r\n\r\n                if (el.id == element){\r\n                    check = true;\r\n                }\r\n            });\r\n            return check;\r\n        }\r\n\r\n        const removeItems = removeSubItemOptions(option.id);\r\n        removeItems.forEach(function (item){\r\n            if (isExists(item)){\r\n                data.remove(item);\r\n            }\r\n\r\n        });\r\n    \r\n    }\r\n\r\n}\r\n\r\n\r\nfunction addItem(text){\r\n    postObj.name = text;\r\n    postObj.pid = titem.id;\r\n\r\n    const postData = webix.ajax().post(url, postObj);\r\n\r\n    postData.then(function(data){\r\n        try{\r\n            data = data.json();\r\n            if (data.err_type == \"i\"){\r\n                \r\n                let idNewItem = data.content.id;\r\n            \r\n                tree.data.add({\r\n                    id    : idNewItem,\r\n                    value : text, \r\n                    pid   : titem.id\r\n                }, 0, titem.id);\r\n                \r\n                tree.open(titem.id);\r\n\r\n  \r\n                const comboOption = {\r\n                    id      : titem.id, \r\n                    value   : titem.value\r\n                };\r\n\r\n                Option.add(comboOption);\r\n            \r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\",\"Данные сохранены\");\r\n            } else {\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n                    data.err,\r\n                    \"editTree\",\r\n                    \"case add post msg\"\r\n                );\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, \"editTree\", \"case add\");\r\n        }\r\n    });\r\n\r\n    postData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\", \"case add\");\r\n    });\r\n\r\n}\r\n\r\nfunction renameItem(text){\r\n    postObj.name = text;\r\n    postObj.id = titem.id;\r\n    postObj.pid = titem.pid;\r\n\r\n    const putData =  \r\n    webix.ajax().put(url + titem.id, postObj);\r\n\r\n    putData.then(function(data){\r\n        try{\r\n            data = data.json();\r\n            if (data.err_type == \"i\"){\r\n                titem.value = text;\r\n                tree.updateItem(titem.id, titem);\r\n\r\n                const option = {\r\n                    id    : titem.id, \r\n                    value : titem.value\r\n                };\r\n\r\n                Option.rename(option);\r\n\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Данные изменены\");\r\n            } else {\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n                    data.err,\r\n                    \"editTree\",\r\n                    \"case rename put msg\"\r\n                );\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n                err, \r\n                \"editTree\", \r\n                \"case rename\"\r\n            );\r\n        }\r\n    });\r\n\r\n    putData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\", \"case rename\");\r\n    });\r\n}\r\n\r\nfunction removeItem(){\r\n    const delData = \r\n    webix.ajax().del(url + titem.id, titem);\r\n\r\n    delData.then(function(data){\r\n        try{\r\n            data = data.json();\r\n            if (data.err_type == \"i\"){\r\n\r\n                const option = {\r\n                    id    : titem.id, \r\n                    value : titem.value\r\n                };\r\n\r\n                Option.remove(option);\r\n\r\n                tree.remove(titem.id);\r\n\r\n              \r\n\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", \"Данные удалены\");\r\n            } else {\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n                    data.err, \r\n                    \"editTree\", \r\n                    \"case delete del msg\"\r\n                );\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                err, \r\n                \"editTree\", \r\n                \"case delete\"\r\n            );\r\n        }\r\n    });\r\n\r\n    delData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(err, \"editTree\", \"case delete\");\r\n    });\r\n}\r\n\r\nfunction expandItem(){\r\n    try{\r\n        tree.open(titem.id);\r\n        tree.data.eachSubItem(titem.id, function (obj){ \r\n            tree.open(obj.id);\r\n        });\r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n            err,\r\n            \"editTree\",\r\n            \"case open all\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction collapseItem(){\r\n    try{\r\n        tree.close(titem.id);\r\n        tree.data.eachSubItem(titem.id, function (obj){ \r\n            tree.close(obj.id);\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)( \r\n            err,\r\n            \"editTree\",\r\n            \"case close all\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction contextLogic(id, self){\r\n    context = self.getContext();\r\n    tree    = $$(\"treeEdit\");\r\n    titem   = tree.getItem(context.id); \r\n    menu    = self.getMenu(id);\r\n    cmd     = menu.getItem(id).value;\r\n    url     = \"/init/default/api/trees/\";\r\n\r\n    postObj = {\r\n        name  : \"\",\r\n        pid   : \"\",\r\n        owner : null,\r\n        descr : \"\",\r\n        ttype : 1,\r\n        value : \"\",\r\n        cdt   : null,\r\n    };\r\n\r\n\r\n    switch (cmd) {\r\n        case \"Добавить\": {\r\n        \r\n            const text = \r\n            prompt\r\n            (\"Имя нового подэлемента '\" + titem.value + \"'\", \"\");\r\n\r\n            if (text != null) {\r\n                addItem(text);\r\n            }\r\n            break;\r\n        }\r\n    \r\n        case \"Переименовать\": {\r\n            const text = prompt(\"Новое имя\", titem.value);\r\n            if (text != null) { \r\n                renameItem(text);\r\n            }\r\n            break;\r\n        }\r\n        case \"Удалить\": {\r\n            removeItem();\r\n            break;\r\n        }\r\n\r\n        case \"Развернуть всё\": {\r\n            expandItem();\r\n            break;\r\n        }\r\n        case \"Свернуть всё\": {\r\n            collapseItem();\r\n            break;\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nfunction contextMenu (){\r\n\r\n    const contextMenu = {\r\n        view : \"contextmenu\",\r\n        id   : \"contextMenuEditTree\",\r\n        data : [\r\n                \"Добавить\",\r\n                \"Переименовать\",\r\n                { $template : \"Separator\" },\r\n                \"Развернуть всё\",\r\n                \"Свернуть всё\",\r\n                { $template : \"Separator\" },\r\n                \"Удалить\"\r\n            ],\r\n        master: $$(\"treeEdit\"),\r\n        on:{\r\n            onMenuItemClick:function(id){\r\n             \r\n                contextLogic(id, this);\r\n         \r\n            }\r\n        }\r\n    };\r\n\r\n    return contextMenu;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeEdit/contextMenu.js?");

/***/ }),

/***/ "./src/js/components/treeEdit/form.js":
/*!********************************************!*\
  !*** ./src/js/components/treeEdit/form.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"returnForm\": () => (/* binding */ returnForm)\n/* harmony export */ });\nlet tree;\r\n\r\nconst cssDisable = \"tree_disabled-item\";\r\n\r\nfunction cssItems(action, selectItems){\r\n    const pull       = tree.data.pull;\r\n    const values     = Object.values(pull);\r\n    values.forEach(function(item, i){\r\n\r\n        if (action == \"remove\"){\r\n            tree.removeCss(item.id, cssDisable);\r\n\r\n        } else if (action == \"add\" && selectItems) {\r\n            const result = \r\n            selectItems.find((id) => id == item.id);\r\n\r\n            if (!result){\r\n                tree.addCss   (item.id, cssDisable);\r\n            }\r\n        }\r\n    \r\n    });\r\n}\r\n\r\n\r\nfunction openFullBranch(value){\r\n    const parent = tree.getParentId(value);\r\n    if (parent && tree.getParentId(parent)){\r\n        tree.open     (parent);\r\n        openFullBranch(parent);\r\n    } else {\r\n        tree.open(value);\r\n        tree.open(parent);\r\n    }  \r\n\r\n\r\n\r\n    return value;\r\n}\r\n\r\nfunction returnSelectItems(value){\r\n    const res = [value];\r\n    tree.data.eachSubItem(value, function(obj){ \r\n        res.push(obj.id);\r\n    });   \r\n\r\n    return res;\r\n}\r\n\r\nfunction parentsLogic(value){\r\n    let topParent;\r\n\r\n    if (tree.exists(value)){\r\n     \r\n        topParent = openFullBranch(value);\r\n\r\n        tree.showItem   (value);\r\n        tree.open       (value);\r\n\r\n        const selectItems = returnSelectItems(value);\r\n\r\n        cssItems(\"add\", selectItems);\r\n    }\r\n\r\n    return topParent;\r\n}\r\n\r\n\r\nfunction getAvailableItems(topParent){\r\n    const res = [topParent];\r\n    tree.data.eachSubItem(topParent, function(obj){ \r\n        res.push(obj.id);\r\n    });   \r\n\r\n    return res;\r\n}\r\n\r\nfunction showLastItem(resultItems){\r\n    const index = resultItems.length - 1;\r\n    const item  = resultItems[index];\r\n    tree.showItem (item);\r\n}\r\n \r\n\r\nfunction ownersLogic(value, topParent){\r\n    const pull   = tree.data.pull;\r\n    const values = Object.values(pull);\r\n\r\n    const resultItems = [];\r\n\r\n   \r\n    if (topParent){ // если уже выбран элемент для редактирования\r\n        const items = getAvailableItems(topParent);\r\n\r\n        items.forEach(function(id, i){\r\n            const item  = tree.getItem(id);\r\n            const owner = item.owner;\r\n    \r\n            if (owner == value){\r\n                resultItems.push(id);\r\n              \r\n            }\r\n\r\n        });\r\n\r\n        cssItems(\"add\", resultItems);\r\n    } else {\r\n        values.forEach(function(el){\r\n            const owner = el.owner; \r\n            if (owner && owner == value){\r\n                resultItems.push(el.id);\r\n            \r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    cssItems(\"add\", resultItems);\r\n\r\n    showLastItem(resultItems);\r\n\r\n    resultItems.forEach(function(id){\r\n        openFullBranch(id);\r\n    });\r\n \r\n}   \r\n\r\n\r\nfunction editTreeClick (){\r\n    tree  = $$(\"treeEdit\");\r\n\r\n    cssItems(\"remove\");\r\n\r\n    const formVals = $$(\"editTreeForm\").getValues();\r\n\r\n    const parents = formVals.parents;\r\n    const owners  = formVals.owners;\r\n\r\n    let topParent;\r\n\r\n    if (parents && parents !== \"111\"){\r\n        topParent = parentsLogic(parents);\r\n    }\r\n\r\n    if (owners && owners !== \"111\"){\r\n        ownersLogic(owners, topParent);\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction returnParentCombo(){\r\n    const combo = {\r\n        view          : \"combo\", \r\n        id            : \"editTreeCombo\",\r\n        name          : \"parents\",\r\n        value         : 111,\r\n        labelPosition : \"top\",\r\n        label         : \"Выберите элемент для редактирования\", \r\n        options       : []\r\n    };\r\n\r\n    return combo;\r\n}\r\n\r\nfunction returnOwnerCombo(){\r\n    const combo = {\r\n        view          : \"combo\", \r\n        id            : \"editTreeComboOwner\",\r\n        name          : \"owners\",\r\n        labelPosition : \"top\",\r\n        value         : 111,\r\n        label         : \"Выберите владельца\", \r\n        options       : []\r\n \r\n    };\r\n\r\n    return combo;\r\n}\r\n\r\n\r\nfunction returnBtn(){\r\n    const btn = {   \r\n        view  : \"button\", \r\n        value : \"Применить\" ,\r\n        css   : \"webix_primary\",\r\n        click : editTreeClick\r\n    };\r\n\r\n    return btn;\r\n}\r\n\r\n\r\nfunction returnForm(){\r\n    const form = {\r\n        view    : \"form\", \r\n        id      : \"editTreeForm\",\r\n        width   : 300,\r\n        elements: [\r\n            returnParentCombo(),\r\n            returnOwnerCombo (),\r\n            returnBtn(),\r\n            {}, \r\n        ]\r\n    };\r\n\r\n    return form;\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeEdit/form.js?");

/***/ }),

/***/ "./src/js/components/treeEdit/getInfoEditTree.js":
/*!*******************************************************!*\
  !*** ./src/js/components/treeEdit/getInfoEditTree.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getInfoEditTree\": () => (/* binding */ getInfoEditTree)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n\r\n\r\n\r\nconst logNameFile = \"getContent => getInfoEditTree\";\r\n\r\nlet treeEdit;\r\n\r\n\r\n\r\nfunction returnEmptyOption(){\r\n    const options = [\r\n        { \r\n            id    : 111, \r\n            value : \"Не выбрано\" \r\n        }\r\n    ];\r\n\r\n    return options;\r\n}\r\n\r\n\r\n//set combo parents\r\nfunction isParent(el){\r\n    let res          = false;\r\n    const firstChild = treeEdit.getFirstChildId(el);\r\n\r\n    if (firstChild){\r\n        res = true;\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\nfunction findParents(treeData){\r\n    const parents = [];\r\n\r\n    treeData.forEach(function(item,i){\r\n\r\n        if (isParent(item.id)){\r\n            parents.push(item);\r\n        }\r\n       \r\n    });\r\n\r\n    return parents;\r\n}\r\n\r\n\r\nfunction setComboValues(treeData){\r\n    const parents = findParents(treeData);\r\n    const options = returnEmptyOption();\r\n    const combo   = $$(\"editTreeCombo\");\r\n\r\n    parents.forEach(function(parent){\r\n        options.push({\r\n            id    : parent.id,\r\n            value : parent.value\r\n        });\r\n    });\r\n\r\n    combo.getPopup().getList().parse(options);\r\n\r\n    const firstOption = options[0].id;\r\n    combo.setValue(firstOption);\r\n\r\n}\r\n\r\n\r\n//set combo owners\r\nasync function getRefField(){\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.LoadServerData.content(\"fields\");\r\n    const field = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.item(\"trees\");\r\n\r\n    const ownerConfig = field.fields.owner;\r\n    const refAttr     = ownerConfig.type;\r\n\r\n    return refAttr.slice(10); //slice \"reference\" \r\n}\r\n\r\nfunction getOptions(data){\r\n    const options = returnEmptyOption();\r\n\r\n    data.forEach(function(el){\r\n        options.push({\r\n            id    : el.id, \r\n            value : el.first_name\r\n        });\r\n    });\r\n\r\n    return options;\r\n}\r\n\r\nfunction setOptionsToCombo(options){\r\n    const combo   = $$(\"editTreeComboOwner\");\r\n    combo.getPopup().getList().parse(options);\r\n}\r\n\r\nasync function setOwnerComboValues(){\r\n\r\n    const refField    = await getRefField();\r\n\r\n    const url       = \"/init/default/api/\" + refField;\r\n    const getDataRef   = webix.ajax().get(url);\r\n\r\n    getDataRef.then(function(data){\r\n        data = data.json().content;\r\n      \r\n        const options = getOptions(data);\r\n        setOptionsToCombo(options);\r\n\r\n    });\r\n    getDataRef.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            \"getInfoTree\", \r\n            \"setOwnerComboValues\"\r\n        );\r\n    });\r\n\r\n}\r\n\r\n\r\n\r\n// create tree struct\r\nfunction createTreeItem(el){\r\n    return {\r\n        id    : el.id, \r\n        value : el.name, \r\n        owner : el.owner,\r\n        pid   : el.pid, \r\n        data  : []\r\n    };\r\n}\r\n\r\n\r\nfunction pushTreeData(data){\r\n    const treeData = [];       \r\n    try{\r\n        data.forEach(function(el,i){\r\n            if (el.pid == 0){\r\n                const rootElement = createTreeItem(el);\r\n\r\n                rootElement.open  = true;\r\n                treeData.push ( rootElement );\r\n\r\n            } else {\r\n                const element = createTreeItem(el);\r\n\r\n                treeData.push (element );\r\n            }\r\n        });\r\n    } catch (err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err,logNameFile,\"pushTreeData\");\r\n    }\r\n\r\n    return treeData;\r\n}\r\n\r\nfunction createStruct(treeData){\r\n    const treeStruct = [];\r\n    const map        = {};\r\n    try{\r\n        treeData.forEach(function(el, i){\r\n\r\n            map[el.id] = i; \r\n\r\n            if ( el.pid !== 0 && el.pid !== el.id && el.pid !== null ) {\r\n                treeData[map[el.pid]].data.push(el);\r\n            } else {\r\n                treeStruct.push(el);\r\n            }\r\n        });\r\n    } catch (err) {\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"createStruct\");\r\n    }\r\n    return treeStruct;\r\n}\r\n\r\nfunction getTrees(){\r\n    const url       = \"/init/default/api/\" + \"trees\";\r\n    const getData   = webix.ajax().get(url);\r\n\r\n    getData.then(function(data){\r\n\r\n        data = data.json().content;\r\n        data[0].pid = 0;\r\n\r\n        const treeData   = pushTreeData(data);\r\n        const treeStruct = createStruct(treeData);\r\n\r\n        treeEdit.parse      (treeStruct);\r\n\r\n        setComboValues      (treeData);\r\n        setOwnerComboValues ();\r\n\r\n    });\r\n\r\n    getData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setAjaxError)(\r\n            err, \r\n            \"getInfoTree\", \r\n            \"getInfoEditTree\"\r\n        );\r\n    });\r\n\r\n}\r\n\r\nfunction getInfoEditTree() {\r\n    treeEdit  = $$(\"treeEdit\");\r\n\r\n    getTrees();\r\n\r\n    if (treeEdit){\r\n        treeEdit.clearAll();\r\n    }   \r\n \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeEdit/getInfoEditTree.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/_layout.js":
/*!**************************************************!*\
  !*** ./src/js/components/treeSidabar/_layout.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"treeSidebar\": () => (/* binding */ treeSidebar)\n/* harmony export */ });\n/* harmony import */ var _preparationView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./preparationView.js */ \"./src/js/components/treeSidabar/preparationView.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _loadFields_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loadFields.js */ \"./src/js/components/treeSidabar/loadFields.js\");\n/* harmony import */ var _navigate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./navigate.js */ \"./src/js/components/treeSidabar/navigate.js\");\n/* harmony import */ var _adaptive_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./adaptive.js */ \"./src/js/components/treeSidabar/adaptive.js\");\n/* harmony import */ var _errorLoad_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./errorLoad.js */ \"./src/js/components/treeSidabar/errorLoad.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n \r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction isBranch(id){\r\n    return $$(\"tree\").isBranch(id);\r\n}\r\n\r\nfunction treeSidebar () {\r\n    const tree = {\r\n        view        : \"edittree\",\r\n        id          : \"tree\",\r\n        css         : \"webix_tree-main\",\r\n        minWidth    : 100,\r\n        width       : 300,\r\n        editable    : false,\r\n        select      : true,\r\n        editor      : \"text\",\r\n        editValue   : \"value\",\r\n        activeTitle : true,\r\n        clipboard   : true,\r\n        data        : [],\r\n        on          : {\r\n            onAfterLoad:function(){\r\n                _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_6__.Action.hideItem($$(\"treeErrOverlay\"));\r\n            },\r\n            onLoadError:function(xhr){\r\n                (0,_errorLoad_js__WEBPACK_IMPORTED_MODULE_5__.setErrLoad)(xhr);\r\n            },\r\n\r\n            onItemClick: function(id) {\r\n             \r\n                if (!isBranch(id)){\r\n                    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.getGlobalModalBox()\r\n                    .then(function(result){\r\n                        if (result){\r\n                            $$(\"tree\").select(id);\r\n                        }\r\n                    \r\n                    });\r\n                    return false;\r\n                }\r\n                \r\n            },\r\n\r\n            onBeforeSelect: function(id) {\r\n\r\n                const item = this.getItem(id);\r\n\r\n                if (!isBranch(id) || item.webix_kids){\r\n                    this.open(id);\r\n                }\r\n                (0,_preparationView_js__WEBPACK_IMPORTED_MODULE_0__.preparationView)(id);\r\n            },\r\n\r\n            onBeforeOpen:function (id, selectItem){\r\n                (0,_loadFields_js__WEBPACK_IMPORTED_MODULE_2__.loadFields)(id, selectItem);\r\n            },\r\n\r\n            onAfterSelect:function(id){\r\n                (0,_navigate_js__WEBPACK_IMPORTED_MODULE_3__.getFields) (id);\r\n                (0,_adaptive_js__WEBPACK_IMPORTED_MODULE_4__.setAdaptiveState)();\r\n            },\r\n\r\n        },\r\n\r\n        ready:function(){\r\n           \r\n        }\r\n\r\n    };\r\n\r\n    return tree;\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/_layout.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/_treeMediator.js":
/*!********************************************************!*\
  !*** ./src/js/components/treeSidabar/_treeMediator.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Tree\": () => (/* binding */ Tree)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _layout_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_layout.js */ \"./src/js/components/treeSidabar/_layout.js\");\n/* harmony import */ var _loadMenu_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./loadMenu.js */ \"./src/js/components/treeSidabar/loadMenu.js\");\n/* harmony import */ var _selectVisualElem_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./selectVisualElem.js */ \"./src/js/components/treeSidabar/selectVisualElem.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => treeMediator\";\r\n\r\nclass Tree {\r\n    constructor (){\r\n        this.name = \"tree\";\r\n    }\r\n\r\n    create(){\r\n        return (0,_layout_js__WEBPACK_IMPORTED_MODULE_2__.treeSidebar)();\r\n    }\r\n\r\n    showView(){\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(this.name));   \r\n    }\r\n\r\n    load(data){\r\n        (0,_loadMenu_js__WEBPACK_IMPORTED_MODULE_3__.generateMenuTree)(data);\r\n    }\r\n\r\n    selectItem(id){\r\n        return (0,_selectVisualElem_js__WEBPACK_IMPORTED_MODULE_4__.selectElem)(id);\r\n    }\r\n\r\n    dataLength(){\r\n        return $$(this.name).data.order.length;\r\n    }\r\n\r\n    close (){\r\n        const tree = $$(this.name);\r\n\r\n        if (tree){\r\n            tree.closeAll();\r\n        }\r\n\r\n    }\r\n\r\n    clear (){\r\n        const tree = $$(this.name);\r\n    \r\n        if (tree){\r\n            tree.clearAll();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/_treeMediator.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/adaptive.js":
/*!***************************************************!*\
  !*** ./src/js/components/treeSidabar/adaptive.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setAdaptiveState\": () => (/* binding */ setAdaptiveState)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => adaptive\";\r\n\r\nfunction setAdaptiveState(){\r\n    try{\r\n        if (window.innerWidth < 850 ){\r\n            $$(\"tree\").hide();\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"setAdaptiveState\"\r\n        );\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/adaptive.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/errorLoad.js":
/*!****************************************************!*\
  !*** ./src/js/components/treeSidabar/errorLoad.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setErrLoad\": () => (/* binding */ setErrLoad)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_loadTemplate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../viewTemplates/loadTemplate.js */ \"./src/js/viewTemplates/loadTemplate.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/components/logBlock.js\");\n\r\n\r\n\r\n\r\n\r\nfunction setErrLoad(err){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem($$(\"loadTreeOverlay\"));\r\n                \r\n    const container = $$(\"sidebarContainer\");\r\n    const id        = \"treeErrOverlay\"; \r\n\r\n    if ( !$$(id) && container){\r\n\r\n        const errOverlay  = (0,_viewTemplates_loadTemplate_js__WEBPACK_IMPORTED_MODULE_0__.createOverlayTemplate)(\r\n            id,\r\n            \"Ошибка\"\r\n        );\r\n\r\n        container.addView(errOverlay, 0);\r\n    }\r\n\r\n    if (err){\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\r\n            \"error\", \r\n            err.status + \" \" + err.statusText + \" \" +\r\n            err.responseURL + \" (\" + err.responseText + \"). \" +\r\n            \"Меню не загружено sidebar => onLoadError\",\r\n            \"version\"\r\n        );\r\n    } else {\r\n        (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_2__.setLogValue)(\r\n            \"error\", \r\n            \"Меню не загружено sidebar => onLoadError\", \r\n            \"version\"\r\n        );\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/errorLoad.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/loadFields.js":
/*!*****************************************************!*\
  !*** ./src/js/components/treeSidabar/loadFields.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadFields\": () => (/* binding */ loadFields)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => loadFields\";\r\n\r\nlet tree;\r\nlet id;\r\nlet selectItem;\r\n\r\nfunction returnId(type, uid){\r\n    return \"q-\" + type + \"_data-tree_\" + uid;\r\n}\r\n\r\nfunction addDisableItem(idLoadElement, value, idParent = id){\r\n    tree.data.add({\r\n        id      :idLoadElement,\r\n        disabled:true,\r\n        value   :value\r\n    }, 0, idParent );  \r\n}\r\n\r\nfunction createLoadEl(uid){\r\n    const id = returnId(\"none\", uid);\r\n    addDisableItem (id, \"Загрузка ...\");\r\n    tree.addCss    (id, \"tree_load-items\");\r\n}\r\n\r\nfunction createNoneEl(uid, idParent){\r\n    const id = returnId(\"none\", uid);\r\n    addDisableItem (id, \"Раздел пуст\", idParent);\r\n}\r\n\r\n\r\nfunction isUniqueItem (menu, data){\r\n    let check  = true;\r\n\r\n    try{\r\n        menu.forEach(function(el, i){\r\n            if (el.name == data){\r\n                check = false;\r\n                \r\n            }\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"isUniqueItem\"\r\n        );\r\n    }\r\n    return check;\r\n}\r\n\r\nfunction isTrueType(values, typeChild){\r\n\r\n    return values.type == typeChild;\r\n}\r\n\r\n\r\nfunction removeTreeEls( noneEl = false, uid ){\r\n    const load = \"q-load_data-tree_\" + uid;\r\n    const none = \"q-none_data-tree_\" + uid;\r\n    try{\r\n        if( tree.exists(load)){\r\n            tree.remove(load);\r\n        }\r\n        \r\n        if( tree.exists(none) && noneEl){\r\n            tree.remove(none);\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"removeTreeEls\"\r\n        );\r\n    }\r\n}\r\n\r\n// function openFullBranch(value){\r\n\r\n//     const parent = tree.getParentId(value);\r\n//     if (parent && tree.getParentId(parent)){\r\n//         tree.open     (parent);\r\n//         openFullBranch(parent);\r\n     \r\n//     } else {\r\n      \r\n//         tree.open(value);\r\n//         tree.open(parent);\r\n//         tree.select(value);\r\n//         const item = tree.getItemNode(value);\r\n   \r\n//         // webix.html.addCss( item, \"webix_selected\");\r\n//         // item.setAttribute(\"tabindex\", \"0\");\r\n//         // item.setAttribute(\"aria-selected\", \"true\");\r\n        \r\n//         console.log(tree.exists(value), value, tree.getItem(value))\r\n//     }     \r\n\r\n// }\r\n\r\n\r\n// function selectTreeItem(){\r\n//     const isExists = tree.exists(selectItem);\r\n \r\n//     if (isExists && selectItem){\r\n//         openFullBranch(selectItem); \r\n//     }\r\n// }\r\n\r\n\r\nasync function generateMenuData (typeChild, idParent, uid){\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.LoadServerData.content(\"fields\");\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.LoadServerData.content(\"mmenu\");\r\n\r\n    const menu   = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetMenu.content;\r\n    const keys   = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.keys;\r\n    const values = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.values;\r\n\r\n    let itemsExists = false;\r\n\r\n    if (keys){\r\n        try{\r\n        \r\n            keys.forEach(function(data, i) {\r\n    \r\n                if (isTrueType(values[i], typeChild) && isUniqueItem(menu, data)){\r\n            \r\n                    tree.data.add({\r\n                            id      : data, \r\n                            value   : (values[i].plural) ? \r\n                            values[i].plural : values[i].singular, \r\n                            \"type\"  : values[i].type\r\n                    }, 0, idParent ); \r\n\r\n                    if (!itemsExists){\r\n                        itemsExists = true;\r\n                    }\r\n                \r\n                    removeTreeEls(true, uid);\r\n            \r\n                } \r\n\r\n            });\r\n\r\n            if (!itemsExists){\r\n                removeTreeEls(false, uid);\r\n                const noneEl =  \"q-none_data-tree_\" + uid;\r\n            \r\n                if( !(tree.exists(noneEl)) ){\r\n                    createNoneEl(uid, idParent);\r\n                    tree.addCss(noneEl, \"tree_none-items\");\r\n                }\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(\r\n                err, \r\n                logNameFile, \r\n                \"generateMenuData\"\r\n            );\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nasync function getMenuChilds(uid) {\r\n\r\n    const selectedItem  = tree.getItem(id);\r\n    if (selectedItem.action.includes(\"all_\")){\r\n        const index = selectedItem.action.indexOf(\"_\");\r\n        const type  = selectedItem.action.slice  (index + 1);\r\n  \r\n        generateMenuData (type, id, uid);\r\n    }\r\n   \r\n}\r\n\r\n\r\n\r\nfunction loadFields(selectId, treeItem){\r\n    const uid = webix.uid();\r\n  \r\n    tree = $$(\"tree\");\r\n    id   = selectId;\r\n    selectItem = treeItem;\r\n\r\n    const item = tree.getItem(id);\r\n\r\n    if (tree.getItem(id) && item.$count === -1){\r\n        createLoadEl (uid);\r\n        getMenuChilds(uid);\r\n    }\r\n  \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/loadFields.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/loadMenu.js":
/*!***************************************************!*\
  !*** ./src/js/components/treeSidabar/loadMenu.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"generateMenuTree\": () => (/* binding */ generateMenuTree)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n\r\n\r\n\r\nconst logNameFile = \" treeSidebar => loadMenu\";\r\n\r\nfunction generateChildsTree  (el){\r\n    let childs = [];\r\n\r\n    try {\r\n        el.childs.forEach(function(child,i){\r\n            childs.push({\r\n                id     : child.name, \r\n                value  : child.title,\r\n                action : child.action\r\n            });\r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"generateChildsTree\"\r\n        );\r\n    }\r\n    return childs;\r\n}\r\n\r\nfunction generateParentTree  (el){ \r\n    let menuItem;\r\n    try {                  \r\n        menuItem = {\r\n            id     : el.name, \r\n            value  : el.title,\r\n            action : el.action,\r\n        };\r\n\r\n  \r\n        if ( !(el.title) ){\r\n            menuItem.value=\"Без названия\";\r\n        }\r\n\r\n        if ( el.mtype == 2 ) {\r\n\r\n            if ( el.childs.length == 0 ){\r\n                menuItem.webix_kids = true; \r\n            } else {\r\n                menuItem.data = generateChildsTree (el);\r\n            }         \r\n        } \r\n\r\n    \r\n\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"generateParentTree\"\r\n        );\r\n    }\r\n    return menuItem;\r\n} \r\n\r\n\r\nfunction generateMenuTree (menu){ \r\n\r\n    const menuTree   = [];\r\n    const delims     = [];\r\n    const tree       = $$(\"tree\");\r\n    const btnContext = $$(\"button-context-menu\");\r\n\r\n    let menuHeader = [];\r\n\r\n    // menu.push ({\r\n    //     \"id\": 77,\r\n    //     \"name\": \"sales\",\r\n    //     \"title\": \"Sales\",\r\n    //     \"mtype\": 1,\r\n    //     \"ltype\": 1,\r\n    //     \"action\": \"dashboard\",\r\n    //     \"childs\": []\r\n    // });\r\n\r\n    menu.forEach(function(el,i){\r\n        if (el.mtype !== 3){\r\n            menuTree.push  ( generateParentTree (el, menu, menuTree  ) );\r\n            if (el.childs.length !==0){\r\n                //menuHeader = generateHeaderMenu (el, menu, menuHeader);\r\n            }\r\n        } else {\r\n            delims.push(el.name);\r\n            menuTree.push({\r\n                id       : el.name, \r\n                disabled : true,\r\n                value    : \"\"\r\n            });\r\n        }\r\n    \r\n    });\r\n\r\n\r\n    tree.clearAll();\r\n    tree.parse(menuTree);\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_1__.Action.hideItem($$(\"loadTreeOverlay\"));\r\n\r\n    let popupData = btnContext.config.popup.data;\r\n    if (popupData !== undefined){\r\n        popupData = menuHeader;\r\n        btnContext.enable();\r\n    }\r\n\r\n\r\n    delims.forEach(function(el){\r\n        tree.addCss(el, \"tree_delim-items\");\r\n\r\n    });\r\n\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/loadMenu.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/navigate.js":
/*!***************************************************!*\
  !*** ./src/js/components/treeSidabar/navigate.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getFields\": () => (/* binding */ getFields)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => navigate\";\r\n\r\nfunction getFields (id){\r\n    const menu  = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetMenu.content;\r\n    \r\n    if (menu){\r\n        try{\r\n            Backbone.history.navigate(\"tree/\" + id, { trigger : true });\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setFunctionError)(err, logNameFile, \"getFields\");\r\n        }\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/navigate.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/preparationView.js":
/*!**********************************************************!*\
  !*** ./src/js/components/treeSidabar/preparationView.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"preparationView\": () => (/* binding */ preparationView)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _selectVisualElem_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./selectVisualElem.js */ \"./src/js/components/treeSidabar/selectVisualElem.js\");\n\r\n\r\n\r\n\r\nasync function getSingleTreeItem(data) {\r\n\r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.LoadServerData.content(\"fields\");\r\n\r\n    const keys   = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.keys;\r\n  \r\n    if (keys){\r\n        (0,_selectVisualElem_js__WEBPACK_IMPORTED_MODULE_2__.selectElem)(data);\r\n    }   \r\n}\r\n\r\nfunction preparationView(id){\r\n   \r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.header.defaultState();\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.treeEdit.defaultState(id);\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.dashboards.defaultState();\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.tables.defaultState();\r\n    _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_1__.mediator.forms.defaultState();\r\n    getSingleTreeItem  (id) ;\r\n \r\n    \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/preparationView.js?");

/***/ }),

/***/ "./src/js/components/treeSidabar/selectVisualElem.js":
/*!***********************************************************!*\
  !*** ./src/js/components/treeSidabar/selectVisualElem.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"selectElem\": () => (/* binding */ selectElem)\n/* harmony export */ });\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"treeSidebar => selectVisualElem\";\r\n\r\n\r\nfunction createUndefinedView(){\r\n    const id = \"webix__null-content\";\r\n\r\n    const view = {\r\n        view  : \"align\", \r\n        align : \"middle,center\",\r\n        id    : id,\r\n        body  : {  \r\n            borderless : true, \r\n            template   : \"Блок в процессе разработки\", \r\n            height     : 50, \r\n            width      : 220,\r\n            css        : {\r\n                \"color\"     : \"#858585\",\r\n                \"font-size\" : \"14px!important\"\r\n            }\r\n        }\r\n        \r\n    };\r\n\r\n    if ( !($$(id)) ){\r\n        try{\r\n            $$(\"container\").addView(view, 2);\r\n        } catch (err){ \r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                err, \r\n                logNameFile, \r\n                \"createUndefinedView\"\r\n            );\r\n        }\r\n     \r\n    }\r\n   \r\n}\r\n\r\nfunction selectItemAction(type, id){\r\n    const visiualElements = _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.getViews();\r\n    let selectElem;\r\n \r\n    if (type == \"dbtable\"){\r\n        selectElem = \"tables\";\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.tables.load(id);\r\n\r\n    } else if(type == \"tform\"){\r\n        selectElem = \"forms\";\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.forms.load(id);\r\n\r\n    } else if(type == \"dashboard\"){\r\n        selectElem = \"dashboards\";\r\n        _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_3__.mediator.dashboards.load(id);\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"propTableView\"));\r\n\r\n    } \r\n\r\n    const isBranch = $$(\"tree\").isBranch(id);\r\n    if (!isBranch){\r\n\r\n    }\r\n\r\n    visiualElements.forEach(function(elem){\r\n        if (elem !== selectElem){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(elem));\r\n        } \r\n\r\n        if (elem == id){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem($$(\"webix__null-content\"));\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem  ($$(\"webix__none-content\"));\r\n        }\r\n    });\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.showItem($$(selectElem));\r\n\r\n}\r\n\r\nfunction removeTreeEdit(){\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem($$(\"treeTempl\")); \r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.destructItem($$(\"contextMenuEditTree\")); \r\n    \r\n}\r\n\r\nfunction selectElem(id){\r\n\r\n    const type = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_1__.GetFields.attribute (id, \"type\");\r\n\r\n    _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.hideItem($$(\"webix__none-content\"));\r\n\r\n    removeTreeEdit();\r\n\r\n    const isBranch = $$(\"tree\").isBranch(id);\r\n    \r\n    if (!type && !isBranch){\r\n        createUndefinedView();\r\n    } else {\r\n        _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_0__.Action.removeItem($$(\"webix__null-content\")); \r\n    }\r\n \r\n    selectItemAction (type, id);\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/treeSidabar/selectVisualElem.js?");

/***/ }),

/***/ "./src/js/components/user_auth/_layout.js":
/*!************************************************!*\
  !*** ./src/js/components/user_auth/_layout.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authCpLayout\": () => (/* binding */ authCpLayout),\n/* harmony export */   \"doAuthCp\": () => (/* binding */ doAuthCp)\n/* harmony export */ });\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/_mediator.js */ \"./src/js/blocks/_mediator.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nlet form;\r\n\r\nfunction returnPassData(){\r\n    const passData = form.getValues();\r\n\r\n    const objPass = {\r\n        op: passData.oldPass,\r\n        np: passData.newPass\r\n    };\r\n\r\n    return objPass;\r\n}\r\n\r\nasync function doAuthCp (){\r\n\r\n    form = $$(\"cp-form\");\r\n\r\n    if ( form && form.validate()){\r\n\r\n        const objPass = returnPassData();\r\n        \r\n        const path = \"/init/default/api/cp\";\r\n        const postData = webix.ajax().post(path, objPass);\r\n        \r\n        return await postData.then(function(data){\r\n            data = data.json();\r\n            \r\n            if (data.err_type == \"i\"){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\"success\", data.err);\r\n                form.clear();\r\n                form.setDirty(false);\r\n                return true;\r\n            } else {\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                    \"error\",\r\n                    \"authSettings function doAuthCp: \" + \r\n                    data.err, \r\n                    \"cp\"\r\n                );\r\n                return false;\r\n            }\r\n      \r\n            \r\n        }).fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_1__.setAjaxError)(\r\n                err, \r\n                \"authSettings\",\r\n                \"doAuthCp\"\r\n            );\r\n            return false;\r\n        });\r\n\r\n    } else {\r\n        return false;\r\n    }\r\n   \r\n}\r\n\r\nconst headline = {   \r\n    template   : \"<div>Изменение пароля</div>\",\r\n    css        : 'webix_cp-form',\r\n    height     : 35, \r\n    borderless : true\r\n};\r\n\r\nfunction returnDiv(text){\r\n    const defaultStyles = \r\n    \"display:inline-block; font-size:13px!important; font-weight:600;\";\r\n\r\n    return \"<div style='\" + defaultStyles + \"color:var(--primary);'>\"+\r\n    \"Имя пользователя:</div>\"+\r\n    \"⠀\"+\r\n    \"<div style=' \" + defaultStyles + \" '>\"+\r\n    text +\r\n    \"<div>\";\r\n}\r\n\r\nconst userName = {   \r\n    view        : \"template\",\r\n    id          : \"authName\",\r\n    css         : \"webix_userprefs-info\",\r\n    height      : 50, \r\n    borderless  : true,\r\n    template    : function(){\r\n        const values = $$(\"authName\").getValues();\r\n        const keys   = Object.keys(values);\r\n        if (keys.length !== 0){\r\n            return returnDiv (values);\r\n        } else {\r\n            return returnDiv (\"не указано\");\r\n        }\r\n    },\r\n};\r\n\r\nfunction generatePassInput(labelPass, namePass){\r\n    return {   \r\n        view            : \"text\",\r\n        width           : 300,\r\n        labelPosition   : \"top\", \r\n        type            : \"password\",\r\n        name            : namePass,\r\n        label           : labelPass,\r\n        on:{\r\n            onChange:function(){\r\n                $$(\"cp-form\").setDirty(true);\r\n            }\r\n        } \r\n    };\r\n}\r\n\r\nconst btnSubmit = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_3__.Button({\r\n    \r\n    config   : {\r\n        hotkey   : \"Shift+Space\",\r\n        value    : \"Сменить пароль\", \r\n        click    : doAuthCp\r\n    },\r\n    titleAttribute : \"Изменить пароль\"\r\n\r\n}).maxView(\"primary\");\r\n\r\n\r\nconst authCp = {\r\n    view        : \"form\", \r\n    id          : \"cp-form\",\r\n    borderless  : true,\r\n    margin      : 5,\r\n    elements    : [\r\n        headline,\r\n        userName,\r\n        generatePassInput(\"Старый пароль\"       , \"oldPass\"   ),\r\n        generatePassInput(\"Новый пароль\"        , \"newPass\"   ),\r\n        generatePassInput(\"Повтор нового пароля\", \"repeatPass\"),\r\n        {   margin  : 5, \r\n            cols    : [\r\n                btnSubmit,\r\n            ]\r\n        }\r\n    ],\r\n\r\n    on:{\r\n        onViewShow: webix.once(function(){\r\n            _blocks_mediator_js__WEBPACK_IMPORTED_MODULE_2__.mediator.setForm(this);\r\n        }),\r\n    },\r\n\r\n    rules:{\r\n        $all:webix.rules.isNotEmpty,\r\n        $obj:function(data){\r\n            const checkCp = $$(\"cp-form\").isDirty();\r\n\r\n            if (data.newPass != data.repeatPass){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                    \"error\",\r\n                    \"Новый пароль не совпадает с повтором\"\r\n                );\r\n            return false;\r\n            }\r\n\r\n            if (data.newPass == data.oldPass && checkCp ){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_0__.setLogValue)(\r\n                    \"error\",\r\n                    \"Новый пароль должен отличаться от старого\"\r\n                );\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    },\r\n};\r\n\r\n\r\nconst authCpLayout = {\r\n    id  : \"layout-cp\",\r\n    cols: [\r\n        authCp,\r\n        {}\r\n    ],\r\n};\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/user_auth/_layout.js?");

/***/ }),

/***/ "./src/js/components/user_auth/_userAuthMediator.js":
/*!**********************************************************!*\
  !*** ./src/js/components/user_auth/_userAuthMediator.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"UserAuth\": () => (/* binding */ UserAuth)\n/* harmony export */ });\n/* harmony import */ var _layout_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_layout.js */ \"./src/js/components/user_auth/_layout.js\");\n\r\n\r\nclass UserAuth {\r\n    constructor (){\r\n        this.name = \"user_auth\";\r\n    }\r\n\r\n    create (){\r\n        $$(\"container\").addView(\r\n            {   view   : \"layout\",\r\n                id     : this.name, \r\n                css    : \"webix_auth\",\r\n                hidden : true, \r\n                rows   : [\r\n                    _layout_js__WEBPACK_IMPORTED_MODULE_0__.authCpLayout,\r\n                    {}\r\n                ],\r\n            }, \r\n        7);\r\n\r\n    }\r\n\r\n    put (){\r\n        return (0,_layout_js__WEBPACK_IMPORTED_MODULE_0__.doAuthCp)();\r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/user_auth/_userAuthMediator.js?");

/***/ }),

/***/ "./src/js/components/viewHeadline/_layout.js":
/*!***************************************************!*\
  !*** ./src/js/components/viewHeadline/_layout.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createHeadline\": () => (/* binding */ createHeadline)\n/* harmony export */ });\n/* harmony import */ var _title_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./title.js */ \"./src/js/components/viewHeadline/title.js\");\n/* harmony import */ var _historyBtns_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./historyBtns.js */ \"./src/js/components/viewHeadline/historyBtns.js\");\n/* harmony import */ var _favoriteBtn_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./favoriteBtn.js */ \"./src/js/components/viewHeadline/favoriteBtn.js\");\n\r\n\r\n\r\n\r\nfunction createHeadline(idTemplate, title = null){\r\n    const headlineLayout = {\r\n        css : \"webix_block-headline\",\r\n        cols: [\r\n            (0,_title_js__WEBPACK_IMPORTED_MODULE_0__.setHeadlineBlock)(idTemplate, title),\r\n            {},\r\n            (0,_historyBtns_js__WEBPACK_IMPORTED_MODULE_1__.createHistoryBtns)(),\r\n            (0,_favoriteBtn_js__WEBPACK_IMPORTED_MODULE_2__.createFavoriteBtn)()\r\n        ]\r\n    };\r\n\r\n    return headlineLayout;\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/viewHeadline/_layout.js?");

/***/ }),

/***/ "./src/js/components/viewHeadline/favoriteBtn.js":
/*!*******************************************************!*\
  !*** ./src/js/components/viewHeadline/favoriteBtn.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createFavoriteBtn\": () => (/* binding */ createFavoriteBtn)\n/* harmony export */ });\n/* harmony import */ var _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/globalStorage.js */ \"./src/js/blocks/globalStorage.js\");\n/* harmony import */ var _logBlock_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logBlock.js */ \"./src/js/components/logBlock.js\");\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n/* harmony import */ var _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../blocks/commonFunctions.js */ \"./src/js/blocks/commonFunctions.js\");\n/* harmony import */ var _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../viewTemplates/popup.js */ \"./src/js/viewTemplates/popup.js\");\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logNameFile = \"viewHeadline => favoriteBtn\";\r\n\r\nfunction findName (id, names){\r\n\r\n    try{\r\n        const nameTemplate = $$(\"favNameLink\");\r\n        names.forEach(function(el){\r\n            if (el.id == id){\r\n                if(nameTemplate){\r\n                    nameTemplate.setValues(el.name);\r\n                }\r\n            }\r\n            \r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"findName\"\r\n        );\r\n    }\r\n}\r\n\r\nasync function getLinkName(){\r\n        \r\n    await _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.LoadServerData.content(\"fields\");\r\n    const names = _blocks_globalStorage_js__WEBPACK_IMPORTED_MODULE_0__.GetFields.names;\r\n\r\n    if (names){\r\n        const id = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId)();\r\n        findName (id, names);\r\n    }\r\n  \r\n}\r\n\r\nfunction getLink(){\r\n    try{\r\n        let link    = window.location.href;\r\n        const index = link.lastIndexOf(\"?\");\r\n        link        = link.slice(0, index);\r\n\r\n        const favTemplate = $$(\"favLink\");\r\n        if (favTemplate){\r\n            favTemplate.setValues(link);\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err, \r\n            logNameFile, \r\n            \"getLink\"\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction createDivTemplate(name, text){\r\n    return \"<div style='font-weight:600'>\" + \r\n            name + \": </div>\" + text;\r\n}\r\n \r\nfunction createTemplate(id, name, nonName){\r\n    return {   \r\n        id          : id,\r\n        css         : \"popup_subtitle\", \r\n        borderless  : true, \r\n        height      : 20 ,\r\n        template    : function(){\r\n            const value = $$(id).getValues();\r\n            const keys  = Object.keys(value);\r\n\r\n            if (keys.length !== 0){\r\n                return createDivTemplate(name, value);\r\n\r\n            } else {\r\n                return createDivTemplate(name, nonName);\r\n\r\n            }\r\n      \r\n        }\r\n    };\r\n}\r\n\r\nfunction getValue(elem){\r\n    return  $$(elem).getValues();   \r\n}\r\n\r\n\r\n\r\nasync function postContent(namePref){\r\n    const favNameLinkVal = getValue(\"favNameLink\");\r\n    const favLinkVal     = getValue(\"favLink\");\r\n\r\n    let user = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getUserDataStorage)();\r\n\r\n    if (!user){\r\n        await (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.pushUserDataStorage)();\r\n        user = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getUserDataStorage)();\r\n    }\r\n\r\n\r\n    if (user){\r\n\r\n        const postObj = {\r\n            name : \"fav-link_\" + namePref,\r\n            owner: user.id,\r\n            prefs:{\r\n                name: favNameLinkVal,\r\n                link: favLinkVal,\r\n                id  : namePref,\r\n            }\r\n        };\r\n\r\n        const path     = \"/init/default/api/userprefs/\";\r\n        const postData = webix.ajax().post(path, postObj);\r\n\r\n        postData.then(function(data){\r\n            data = data.json();\r\n    \r\n            if (data.err_type == \"i\"){\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\r\n                    \"success\", \r\n                    \"Ссылка\" + \" «\" + favNameLinkVal + \"» \" + \r\n                    \" сохранёна в избранное\");\r\n            } else {\r\n                (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n                    data.err, \r\n                    logNameFile, \r\n                    \"postContent msg\" \r\n                );\r\n            }\r\n\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.destructItem($$(\"popupFavsLinkSave\"));\r\n        });\r\n\r\n        postData.fail(function(err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n                err, \r\n                logNameFile, \r\n                \"postContent\"\r\n            );\r\n        });\r\n    }\r\n}\r\n\r\nfunction getFavPrefs(data){\r\n    const prefs = [];\r\n    try{\r\n        data.forEach(function(pref){\r\n\r\n            if (pref.name.includes(\"fav-link\")){\r\n                prefs.push(pref.name);\r\n            }\r\n    \r\n        });\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"getFavPrefs\"\r\n        );\r\n    }\r\n    return prefs;\r\n}\r\n\r\nfunction returnId(el){\r\n    const index = el.indexOf(\"_\") + 1;\r\n    return el.slice(index);\r\n}\r\n\r\nfunction getNotUniquePref(favPrefs, namePref){\r\n    let unique = true;\r\n    favPrefs.forEach(function(el){\r\n                \r\n        if (el.includes(namePref)){\r\n            const id = returnId(el);\r\n\r\n            if (id == namePref && unique){\r\n                unique = false;\r\n                (0,_logBlock_js__WEBPACK_IMPORTED_MODULE_1__.setLogValue)(\r\n                    \"success\", \r\n                    \"Такая ссылка уже есть в избранном\"\r\n                );\r\n            } \r\n        } \r\n    });\r\n\r\n    return unique;\r\n}\r\n\r\n\r\nfunction getNotUniquePrefs (data, namePref){\r\n    const favPrefs = getFavPrefs(data);\r\n    let unique = true;\r\n    try{\r\n        if (favPrefs.length){\r\n            unique = \r\n            getNotUniquePref(favPrefs, namePref);\r\n        } \r\n        \r\n        \r\n        if (!(favPrefs.length) || unique) {\r\n            postContent(namePref);\r\n        } else if (!unique){\r\n            _blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.Action.destructItem($$(\"popupFavsLinkSave\"));\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setFunctionError)(\r\n            err,\r\n            logNameFile,\r\n            \"getNotUniquePrefs\"\r\n        );\r\n    }\r\n}\r\n\r\nfunction btnSaveLinkClick(){\r\n  \r\n    const namePref = (0,_blocks_commonFunctions_js__WEBPACK_IMPORTED_MODULE_3__.getItemId)();\r\n    const path     = \"/init/default/api/userprefs/\";\r\n    const getData  = webix.ajax().get(path);\r\n    getData.then(function(data){\r\n        data = data.json().content;\r\n        getNotUniquePrefs (data, namePref);\r\n    \r\n    });\r\n    getData.fail(function(err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_2__.setAjaxError)(\r\n            err, \r\n            logNameFile,\r\n            \"btnSaveLinkClick\"\r\n        );\r\n    });\r\n\r\n}\r\n\r\nconst btnSaveLink = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__.Button({\r\n\r\n    config   : {\r\n        value    : \"Сохранить ссылку\", \r\n        click    : function(){\r\n            btnSaveLinkClick();\r\n        },\r\n    },\r\n    titleAttribute : \"Сохранить ссылку в избранное\"\r\n\r\n   \r\n}).maxView(\"primary\");\r\n\r\n\r\nfunction saveFavsClick(){\r\n\r\n    const popup = new _viewTemplates_popup_js__WEBPACK_IMPORTED_MODULE_4__.Popup({\r\n        headline : \"Сохранить ссылку\",\r\n        config   : {\r\n            id    : \"popupFavsLinkSave\",\r\n            width : 500,\r\n    \r\n        },\r\n\r\n        elements : {\r\n            rows : [\r\n                createTemplate(\"favNameLink\", \"Имя\",    \"не указано\"),\r\n                {height : 5},\r\n                createTemplate(\"favLink\",     \"Ссылка\", \"не указана\"),\r\n                {height : 10},\r\n                {   padding:{\r\n                        left  : 8,\r\n                        right : 8\r\n                    },\r\n                    rows:[\r\n                        btnSaveLink,\r\n                    ]\r\n                },\r\n                \r\n                {}\r\n            ]\r\n          \r\n        }\r\n    });\r\n\r\n    popup.createView ();\r\n    popup.showPopup  ();\r\n\r\n\r\n    getLinkName();\r\n    getLink();\r\n}\r\n\r\n\r\nfunction createFavoriteBtn(){\r\n\r\n       \r\n    const favsBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_5__.Button({\r\n    \r\n        config   : {\r\n            id       : webix.uid(),\r\n            hotkey   : \"Ctrl+Shift+L\",\r\n            icon     : \"icon-star\",\r\n            click    : function(){\r\n                saveFavsClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Добавить ссылку в избранное\"\r\n    \r\n       \r\n    }).transparentView();\r\n\r\n    return favsBtn;\r\n}\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/viewHeadline/favoriteBtn.js?");

/***/ }),

/***/ "./src/js/components/viewHeadline/historyBtns.js":
/*!*******************************************************!*\
  !*** ./src/js/components/viewHeadline/historyBtns.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createHistoryBtns\": () => (/* binding */ createHistoryBtns)\n/* harmony export */ });\n/* harmony import */ var _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../viewTemplates/buttons.js */ \"./src/js/viewTemplates/buttons.js\");\n\r\n\r\n\r\nfunction prevBtnClick (){\r\n    history.back();\r\n}\r\n\r\nfunction nextBtnClick (){\r\n    history.forward();\r\n}   \r\n\r\nfunction createHistoryBtns(){\r\n\r\n    \r\n    const prevBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n        \r\n        config   : {\r\n            id       : webix.uid(),\r\n            hotkey   : \"Ctrl+Shift+P\",\r\n            icon     : \"icon-arrow-left\", \r\n            click    : function(){\r\n                prevBtnClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Вернуться назад\"\r\n\r\n    \r\n    }).transparentView();\r\n\r\n    const nextBtn = new _viewTemplates_buttons_js__WEBPACK_IMPORTED_MODULE_0__.Button({\r\n        \r\n        config   : {\r\n            id       : webix.uid(),\r\n            hotkey   : \"Ctrl+Shift+B\",\r\n            icon     : \"icon-arrow-right\", \r\n            click    : function(){\r\n                nextBtnClick();\r\n            },\r\n        },\r\n        titleAttribute : \"Перейти вперёд \"\r\n\r\n    \r\n    }).transparentView();\r\n   \r\n\r\n    return {\r\n        css  : \"btn-history\",\r\n        cols : [\r\n            prevBtn,\r\n            nextBtn,\r\n        ]\r\n    };\r\n}\r\n\r\n \r\n \r\n\n\n//# sourceURL=webpack://webix/./src/js/components/viewHeadline/historyBtns.js?");

/***/ }),

/***/ "./src/js/components/viewHeadline/title.js":
/*!*************************************************!*\
  !*** ./src/js/components/viewHeadline/title.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setHeadlineBlock\": () => (/* binding */ setHeadlineBlock)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\nconst logNameFile = \"viewHeadline => title\";\r\n\r\nfunction returnHeadline(idTemplate, templateTitle){\r\n    const headline = {   \r\n        view        : \"template\",\r\n        id          : idTemplate,\r\n        borderless  : true,\r\n        css         : \"webix_block-headline\",\r\n        height      : 34,\r\n        template    : templateTitle,\r\n        on:{\r\n\r\n        }\r\n    };\r\n\r\n    return headline;\r\n}\r\nfunction returnDiv(title = \"Имя не указано\"){\r\n    return \"<div class='no-wrap-headline'>\" + title + \"</div>\";\r\n}\r\n\r\nfunction setHeadlineBlock ( idTemplate, title ){\r\n    let templateTitle;\r\n    try{\r\n        if(title){\r\n            templateTitle = title;\r\n        } else {\r\n            templateTitle = function(){\r\n                const value      = $$(idTemplate).getValues();\r\n                const valLength  = Object.keys(value).length;\r\n\r\n                if (valLength !==0){\r\n                    return returnDiv(title = value);\r\n                } else {\r\n                    return returnDiv();\r\n                }\r\n            };\r\n        }\r\n    } catch (err){\r\n        (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(err, logNameFile, \"setHeadlineBlock\");\r\n    } \r\n\r\n    return returnHeadline(idTemplate, templateTitle);\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/components/viewHeadline/title.js?");

/***/ }),

/***/ "./src/js/expalib.js":
/*!***************************!*\
  !*** ./src/js/expalib.js ***!
  \***************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"lib\": () => (/* binding */ lib)\n/* harmony export */ });\nfunction lib (){\r\n  \r\n    (function (global, factory) {\r\n        typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n        typeof define === 'function' && define.amd ? define('underscore', factory) :\r\n        (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (function () {\r\n          var current = global._;\r\n          var exports = global._ = factory();\r\n          exports.noConflict = function () { global._ = current; return exports; };\r\n        }()));\r\n      }(this, (function () {\r\n        //     Underscore.js 1.13.4\r\n        //     https://underscorejs.org\r\n        //     (c) 2009-2022 Jeremy Ashkenas, Julian Gonggrijp, and DocumentCloud and Investigative Reporters & Editors\r\n        //     Underscore may be freely distributed under the MIT license.\r\n      \r\n        // Current version.\r\n        var VERSION = '1.13.4';\r\n      \r\n        // Establish the root object, `window` (`self`) in the browser, `global`\r\n        // on the server, or `this` in some virtual machines. We use `self`\r\n        // instead of `window` for `WebWorker` support.\r\n        var root = (typeof self == 'object' && self.self === self && self) ||\r\n                  (typeof global == 'object' && global.global === global && global) ||\r\n                  Function('return this')() ||\r\n                  {};\r\n      \r\n        // Save bytes in the minified (but not gzipped) version:\r\n        var ArrayProto = Array.prototype, ObjProto = Object.prototype;\r\n        var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\r\n      \r\n        // Create quick reference variables for speed access to core prototypes.\r\n        var push = ArrayProto.push,\r\n            slice = ArrayProto.slice,\r\n            toString = ObjProto.toString,\r\n            hasOwnProperty = ObjProto.hasOwnProperty;\r\n      \r\n        // Modern feature detection.\r\n        var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\r\n            supportsDataView = typeof DataView !== 'undefined';\r\n      \r\n        // All **ECMAScript 5+** native function implementations that we hope to use\r\n        // are declared here.\r\n        var nativeIsArray = Array.isArray,\r\n            nativeKeys = Object.keys,\r\n            nativeCreate = Object.create,\r\n            nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\r\n      \r\n        // Create references to these builtin functions because we override them.\r\n        var _isNaN = isNaN,\r\n            _isFinite = isFinite;\r\n      \r\n        // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\r\n        var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\r\n        var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\r\n          'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\r\n      \r\n        // The largest integer that can be represented exactly.\r\n        var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n      \r\n        // Some functions take a variable number of arguments, or a few expected\r\n        // arguments at the beginning and then a variable number of values to operate\r\n        // on. This helper accumulates all remaining arguments past the function’s\r\n        // argument length (or an explicit `startIndex`), into an array that becomes\r\n        // the last argument. Similar to ES6’s \"rest parameter\".\r\n        function restArguments(func, startIndex) {\r\n          startIndex = startIndex == null ? func.length - 1 : +startIndex;\r\n          return function() {\r\n            var length = Math.max(arguments.length - startIndex, 0),\r\n                rest = Array(length),\r\n                index = 0;\r\n            for (; index < length; index++) {\r\n              rest[index] = arguments[index + startIndex];\r\n            }\r\n            switch (startIndex) {\r\n              case 0: return func.call(this, rest);\r\n              case 1: return func.call(this, arguments[0], rest);\r\n              case 2: return func.call(this, arguments[0], arguments[1], rest);\r\n            }\r\n            var args = Array(startIndex + 1);\r\n            for (index = 0; index < startIndex; index++) {\r\n              args[index] = arguments[index];\r\n            }\r\n            args[startIndex] = rest;\r\n            return func.apply(this, args);\r\n          };\r\n        }\r\n      \r\n        // Is a given variable an object?\r\n        function isObject(obj) {\r\n          var type = typeof obj;\r\n          return type === 'function' || (type === 'object' && !!obj);\r\n        }\r\n      \r\n        // Is a given value equal to null?\r\n        function isNull(obj) {\r\n          return obj === null;\r\n        }\r\n      \r\n        // Is a given variable undefined?\r\n        function isUndefined(obj) {\r\n          return obj === void 0;\r\n        }\r\n      \r\n        // Is a given value a boolean?\r\n        function isBoolean(obj) {\r\n          return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\r\n        }\r\n      \r\n        // Is a given value a DOM element?\r\n        function isElement(obj) {\r\n          return !!(obj && obj.nodeType === 1);\r\n        }\r\n      \r\n        // Internal function for creating a `toString`-based type tester.\r\n        function tagTester(name) {\r\n          var tag = '[object ' + name + ']';\r\n          return function(obj) {\r\n            return toString.call(obj) === tag;\r\n          };\r\n        }\r\n      \r\n        var isString = tagTester('String');\r\n      \r\n        var isNumber = tagTester('Number');\r\n      \r\n        var isDate = tagTester('Date');\r\n      \r\n        var isRegExp = tagTester('RegExp');\r\n      \r\n        var isError = tagTester('Error');\r\n      \r\n        var isSymbol = tagTester('Symbol');\r\n      \r\n        var isArrayBuffer = tagTester('ArrayBuffer');\r\n      \r\n        var isFunction = tagTester('Function');\r\n      \r\n        // Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\r\n        // v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\r\n        var nodelist = root.document && root.document.childNodes;\r\n        if ( true && typeof Int8Array != 'object' && typeof nodelist != 'function') {\r\n          isFunction = function(obj) {\r\n            return typeof obj == 'function' || false;\r\n          };\r\n        }\r\n      \r\n        var isFunction$1 = isFunction;\r\n      \r\n        var hasObjectTag = tagTester('Object');\r\n      \r\n        // In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\r\n        // In IE 11, the most common among them, this problem also applies to\r\n        // `Map`, `WeakMap` and `Set`.\r\n        var hasStringTagBug = (\r\n              supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\r\n            ),\r\n            isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\r\n      \r\n        var isDataView = tagTester('DataView');\r\n      \r\n        // In IE 10 - Edge 13, we need a different heuristic\r\n        // to determine whether an object is a `DataView`.\r\n        function ie10IsDataView(obj) {\r\n          return obj != null && isFunction$1(obj.getInt8) && isArrayBuffer(obj.buffer);\r\n        }\r\n      \r\n        var isDataView$1 = (hasStringTagBug ? ie10IsDataView : isDataView);\r\n      \r\n        // Is a given value an array?\r\n        // Delegates to ECMA5's native `Array.isArray`.\r\n        var isArray = nativeIsArray || tagTester('Array');\r\n      \r\n        // Internal function to check whether `key` is an own property name of `obj`.\r\n        function has$1(obj, key) {\r\n          return obj != null && hasOwnProperty.call(obj, key);\r\n        }\r\n      \r\n        var isArguments = tagTester('Arguments');\r\n      \r\n        // Define a fallback version of the method in browsers (ahem, IE < 9), where\r\n        // there isn't any inspectable \"Arguments\" type.\r\n        (function() {\r\n          if (!isArguments(arguments)) {\r\n            isArguments = function(obj) {\r\n              return has$1(obj, 'callee');\r\n            };\r\n          }\r\n        }());\r\n      \r\n        var isArguments$1 = isArguments;\r\n      \r\n        // Is a given object a finite number?\r\n        function isFinite$1(obj) {\r\n          return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\r\n        }\r\n      \r\n        // Is the given value `NaN`?\r\n        function isNaN$1(obj) {\r\n          return isNumber(obj) && _isNaN(obj);\r\n        }\r\n      \r\n        // Predicate-generating function. Often useful outside of Underscore.\r\n        function constant(value) {\r\n          return function() {\r\n            return value;\r\n          };\r\n        }\r\n      \r\n        // Common internal logic for `isArrayLike` and `isBufferLike`.\r\n        function createSizePropertyCheck(getSizeProperty) {\r\n          return function(collection) {\r\n            var sizeProperty = getSizeProperty(collection);\r\n            return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\r\n          }\r\n        }\r\n      \r\n        // Internal helper to generate a function to obtain property `key` from `obj`.\r\n        function shallowProperty(key) {\r\n          return function(obj) {\r\n            return obj == null ? void 0 : obj[key];\r\n          };\r\n        }\r\n      \r\n        // Internal helper to obtain the `byteLength` property of an object.\r\n        var getByteLength = shallowProperty('byteLength');\r\n      \r\n        // Internal helper to determine whether we should spend extensive checks against\r\n        // `ArrayBuffer` et al.\r\n        var isBufferLike = createSizePropertyCheck(getByteLength);\r\n      \r\n        // Is a given value a typed array?\r\n        var typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\r\n        function isTypedArray(obj) {\r\n          // `ArrayBuffer.isView` is the most future-proof, so use it when available.\r\n          // Otherwise, fall back on the above regular expression.\r\n          return nativeIsView ? (nativeIsView(obj) && !isDataView$1(obj)) :\r\n                        isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\r\n        }\r\n      \r\n        var isTypedArray$1 = supportsArrayBuffer ? isTypedArray : constant(false);\r\n      \r\n        // Internal helper to obtain the `length` property of an object.\r\n        var getLength = shallowProperty('length');\r\n      \r\n        // Internal helper to create a simple lookup structure.\r\n        // `collectNonEnumProps` used to depend on `_.contains`, but this led to\r\n        // circular imports. `emulatedSet` is a one-off solution that only works for\r\n        // arrays of strings.\r\n        function emulatedSet(keys) {\r\n          var hash = {};\r\n          for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\r\n          return {\r\n            contains: function(key) { return hash[key] === true; },\r\n            push: function(key) {\r\n              hash[key] = true;\r\n              return keys.push(key);\r\n            }\r\n          };\r\n        }\r\n      \r\n        // Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\r\n        // be iterated by `for key in ...` and thus missed. Extends `keys` in place if\r\n        // needed.\r\n        function collectNonEnumProps(obj, keys) {\r\n          keys = emulatedSet(keys);\r\n          var nonEnumIdx = nonEnumerableProps.length;\r\n          var constructor = obj.constructor;\r\n          var proto = (isFunction$1(constructor) && constructor.prototype) || ObjProto;\r\n      \r\n          // Constructor is a special case.\r\n          var prop = 'constructor';\r\n          if (has$1(obj, prop) && !keys.contains(prop)) keys.push(prop);\r\n      \r\n          while (nonEnumIdx--) {\r\n            prop = nonEnumerableProps[nonEnumIdx];\r\n            if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\r\n              keys.push(prop);\r\n            }\r\n          }\r\n        }\r\n      \r\n        // Retrieve the names of an object's own properties.\r\n        // Delegates to **ECMAScript 5**'s native `Object.keys`.\r\n        function keys(obj) {\r\n          if (!isObject(obj)) return [];\r\n          if (nativeKeys) return nativeKeys(obj);\r\n          var keys = [];\r\n          for (var key in obj) if (has$1(obj, key)) keys.push(key);\r\n          // Ahem, IE < 9.\r\n          if (hasEnumBug) collectNonEnumProps(obj, keys);\r\n          return keys;\r\n        }\r\n      \r\n        // Is a given array, string, or object empty?\r\n        // An \"empty\" object has no enumerable own-properties.\r\n        function isEmpty(obj) {\r\n          if (obj == null) return true;\r\n          // Skip the more expensive `toString`-based type checks if `obj` has no\r\n          // `.length`.\r\n          var length = getLength(obj);\r\n          if (typeof length == 'number' && (\r\n            isArray(obj) || isString(obj) || isArguments$1(obj)\r\n          )) return length === 0;\r\n          return getLength(keys(obj)) === 0;\r\n        }\r\n      \r\n        // Returns whether an object has a given set of `key:value` pairs.\r\n        function isMatch(object, attrs) {\r\n          var _keys = keys(attrs), length = _keys.length;\r\n          if (object == null) return !length;\r\n          var obj = Object(object);\r\n          for (var i = 0; i < length; i++) {\r\n            var key = _keys[i];\r\n            if (attrs[key] !== obj[key] || !(key in obj)) return false;\r\n          }\r\n          return true;\r\n        }\r\n      \r\n        // If Underscore is called as a function, it returns a wrapped object that can\r\n        // be used OO-style. This wrapper holds altered versions of all functions added\r\n        // through `_.mixin`. Wrapped objects may be chained.\r\n        function _$1(obj) {\r\n          if (obj instanceof _$1) return obj;\r\n          if (!(this instanceof _$1)) return new _$1(obj);\r\n          this._wrapped = obj;\r\n        }\r\n      \r\n        _$1.VERSION = VERSION;\r\n      \r\n        // Extracts the result from a wrapped and chained object.\r\n        _$1.prototype.value = function() {\r\n          return this._wrapped;\r\n        };\r\n      \r\n        // Provide unwrapping proxies for some methods used in engine operations\r\n        // such as arithmetic and JSON stringification.\r\n        _$1.prototype.valueOf = _$1.prototype.toJSON = _$1.prototype.value;\r\n      \r\n        _$1.prototype.toString = function() {\r\n          return String(this._wrapped);\r\n        };\r\n      \r\n        // Internal function to wrap or shallow-copy an ArrayBuffer,\r\n        // typed array or DataView to a new view, reusing the buffer.\r\n        function toBufferView(bufferSource) {\r\n          return new Uint8Array(\r\n            bufferSource.buffer || bufferSource,\r\n            bufferSource.byteOffset || 0,\r\n            getByteLength(bufferSource)\r\n          );\r\n        }\r\n      \r\n        // We use this string twice, so give it a name for minification.\r\n        var tagDataView = '[object DataView]';\r\n      \r\n        // Internal recursive comparison function for `_.isEqual`.\r\n        function eq(a, b, aStack, bStack) {\r\n          // Identical objects are equal. `0 === -0`, but they aren't identical.\r\n          // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\r\n          if (a === b) return a !== 0 || 1 / a === 1 / b;\r\n          // `null` or `undefined` only equal to itself (strict comparison).\r\n          if (a == null || b == null) return false;\r\n          // `NaN`s are equivalent, but non-reflexive.\r\n          if (a !== a) return b !== b;\r\n          // Exhaust primitive checks\r\n          var type = typeof a;\r\n          if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\r\n          return deepEq(a, b, aStack, bStack);\r\n        }\r\n      \r\n        // Internal recursive comparison function for `_.isEqual`.\r\n        function deepEq(a, b, aStack, bStack) {\r\n          // Unwrap any wrapped objects.\r\n          if (a instanceof _$1) a = a._wrapped;\r\n          if (b instanceof _$1) b = b._wrapped;\r\n          // Compare `[[Class]]` names.\r\n          var className = toString.call(a);\r\n          if (className !== toString.call(b)) return false;\r\n          // Work around a bug in IE 10 - Edge 13.\r\n          if (hasStringTagBug && className == '[object Object]' && isDataView$1(a)) {\r\n            if (!isDataView$1(b)) return false;\r\n            className = tagDataView;\r\n          }\r\n          switch (className) {\r\n            // These types are compared by value.\r\n            case '[object RegExp]':\r\n              // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\r\n            case '[object String]':\r\n              // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\r\n              // equivalent to `new String(\"5\")`.\r\n              return '' + a === '' + b;\r\n            case '[object Number]':\r\n              // `NaN`s are equivalent, but non-reflexive.\r\n              // Object(NaN) is equivalent to NaN.\r\n              if (+a !== +a) return +b !== +b;\r\n              // An `egal` comparison is performed for other numeric values.\r\n              return +a === 0 ? 1 / +a === 1 / b : +a === +b;\r\n            case '[object Date]':\r\n            case '[object Boolean]':\r\n              // Coerce dates and booleans to numeric primitive values. Dates are compared by their\r\n              // millisecond representations. Note that invalid dates with millisecond representations\r\n              // of `NaN` are not equivalent.\r\n              return +a === +b;\r\n            case '[object Symbol]':\r\n              return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\r\n            case '[object ArrayBuffer]':\r\n            case tagDataView:\r\n              // Coerce to typed array so we can fall through.\r\n              return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\r\n          }\r\n      \r\n          var areArrays = className === '[object Array]';\r\n          if (!areArrays && isTypedArray$1(a)) {\r\n              var byteLength = getByteLength(a);\r\n              if (byteLength !== getByteLength(b)) return false;\r\n              if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\r\n              areArrays = true;\r\n          }\r\n          if (!areArrays) {\r\n            if (typeof a != 'object' || typeof b != 'object') return false;\r\n      \r\n            // Objects with different constructors are not equivalent, but `Object`s or `Array`s\r\n            // from different frames are.\r\n            var aCtor = a.constructor, bCtor = b.constructor;\r\n            if (aCtor !== bCtor && !(isFunction$1(aCtor) && aCtor instanceof aCtor &&\r\n                                     isFunction$1(bCtor) && bCtor instanceof bCtor)\r\n                                && ('constructor' in a && 'constructor' in b)) {\r\n              return false;\r\n            }\r\n          }\r\n          // Assume equality for cyclic structures. The algorithm for detecting cyclic\r\n          // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\r\n      \r\n          // Initializing stack of traversed objects.\r\n          // It's done here since we only need them for objects and arrays comparison.\r\n          aStack = aStack || [];\r\n          bStack = bStack || [];\r\n          var length = aStack.length;\r\n          while (length--) {\r\n            // Linear search. Performance is inversely proportional to the number of\r\n            // unique nested structures.\r\n            if (aStack[length] === a) return bStack[length] === b;\r\n          }\r\n      \r\n          // Add the first object to the stack of traversed objects.\r\n          aStack.push(a);\r\n          bStack.push(b);\r\n      \r\n          // Recursively compare objects and arrays.\r\n          if (areArrays) {\r\n            // Compare array lengths to determine if a deep comparison is necessary.\r\n            length = a.length;\r\n            if (length !== b.length) return false;\r\n            // Deep compare the contents, ignoring non-numeric properties.\r\n            while (length--) {\r\n              if (!eq(a[length], b[length], aStack, bStack)) return false;\r\n            }\r\n          } else {\r\n            // Deep compare objects.\r\n            var _keys = keys(a), key;\r\n            length = _keys.length;\r\n            // Ensure that both objects contain the same number of properties before comparing deep equality.\r\n            if (keys(b).length !== length) return false;\r\n            while (length--) {\r\n              // Deep compare each member\r\n              key = _keys[length];\r\n              if (!(has$1(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\r\n            }\r\n          }\r\n          // Remove the first object from the stack of traversed objects.\r\n          aStack.pop();\r\n          bStack.pop();\r\n          return true;\r\n        }\r\n      \r\n        // Perform a deep comparison to check if two objects are equal.\r\n        function isEqual(a, b) {\r\n          return eq(a, b);\r\n        }\r\n      \r\n        // Retrieve all the enumerable property names of an object.\r\n        function allKeys(obj) {\r\n          if (!isObject(obj)) return [];\r\n          var keys = [];\r\n          for (var key in obj) keys.push(key);\r\n          // Ahem, IE < 9.\r\n          if (hasEnumBug) collectNonEnumProps(obj, keys);\r\n          return keys;\r\n        }\r\n      \r\n        // Since the regular `Object.prototype.toString` type tests don't work for\r\n        // some types in IE 11, we use a fingerprinting heuristic instead, based\r\n        // on the methods. It's not great, but it's the best we got.\r\n        // The fingerprint method lists are defined below.\r\n        function ie11fingerprint(methods) {\r\n          var length = getLength(methods);\r\n          return function(obj) {\r\n            if (obj == null) return false;\r\n            // `Map`, `WeakMap` and `Set` have no enumerable keys.\r\n            var keys = allKeys(obj);\r\n            if (getLength(keys)) return false;\r\n            for (var i = 0; i < length; i++) {\r\n              if (!isFunction$1(obj[methods[i]])) return false;\r\n            }\r\n            // If we are testing against `WeakMap`, we need to ensure that\r\n            // `obj` doesn't have a `forEach` method in order to distinguish\r\n            // it from a regular `Map`.\r\n            return methods !== weakMapMethods || !isFunction$1(obj[forEachName]);\r\n          };\r\n        }\r\n      \r\n        // In the interest of compact minification, we write\r\n        // each string in the fingerprints only once.\r\n        var forEachName = 'forEach',\r\n            hasName = 'has',\r\n            commonInit = ['clear', 'delete'],\r\n            mapTail = ['get', hasName, 'set'];\r\n      \r\n        // `Map`, `WeakMap` and `Set` each have slightly different\r\n        // combinations of the above sublists.\r\n        var mapMethods = commonInit.concat(forEachName, mapTail),\r\n            weakMapMethods = commonInit.concat(mapTail),\r\n            setMethods = ['add'].concat(commonInit, forEachName, hasName);\r\n      \r\n        var isMap = isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\r\n      \r\n        var isWeakMap = isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\r\n      \r\n        var isSet = isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\r\n      \r\n        var isWeakSet = tagTester('WeakSet');\r\n      \r\n        // Retrieve the values of an object's properties.\r\n        function values(obj) {\r\n          var _keys = keys(obj);\r\n          var length = _keys.length;\r\n          var values = Array(length);\r\n          for (var i = 0; i < length; i++) {\r\n            values[i] = obj[_keys[i]];\r\n          }\r\n          return values;\r\n        }\r\n      \r\n        // Convert an object into a list of `[key, value]` pairs.\r\n        // The opposite of `_.object` with one argument.\r\n        function pairs(obj) {\r\n          var _keys = keys(obj);\r\n          var length = _keys.length;\r\n          var pairs = Array(length);\r\n          for (var i = 0; i < length; i++) {\r\n            pairs[i] = [_keys[i], obj[_keys[i]]];\r\n          }\r\n          return pairs;\r\n        }\r\n      \r\n        // Invert the keys and values of an object. The values must be serializable.\r\n        function invert(obj) {\r\n          var result = {};\r\n          var _keys = keys(obj);\r\n          for (var i = 0, length = _keys.length; i < length; i++) {\r\n            result[obj[_keys[i]]] = _keys[i];\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Return a sorted list of the function names available on the object.\r\n        function functions(obj) {\r\n          var names = [];\r\n          for (var key in obj) {\r\n            if (isFunction$1(obj[key])) names.push(key);\r\n          }\r\n          return names.sort();\r\n        }\r\n      \r\n        // An internal function for creating assigner functions.\r\n        function createAssigner(keysFunc, defaults) {\r\n          return function(obj) {\r\n            var length = arguments.length;\r\n            if (defaults) obj = Object(obj);\r\n            if (length < 2 || obj == null) return obj;\r\n            for (var index = 1; index < length; index++) {\r\n              var source = arguments[index],\r\n                  keys = keysFunc(source),\r\n                  l = keys.length;\r\n              for (var i = 0; i < l; i++) {\r\n                var key = keys[i];\r\n                if (!defaults || obj[key] === void 0) obj[key] = source[key];\r\n              }\r\n            }\r\n            return obj;\r\n          };\r\n        }\r\n      \r\n        // Extend a given object with all the properties in passed-in object(s).\r\n        var extend = createAssigner(allKeys);\r\n      \r\n        // Assigns a given object with all the own properties in the passed-in\r\n        // object(s).\r\n        // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\r\n        var extendOwn = createAssigner(keys);\r\n      \r\n        // Fill in a given object with default properties.\r\n        var defaults = createAssigner(allKeys, true);\r\n      \r\n        // Create a naked function reference for surrogate-prototype-swapping.\r\n        function ctor() {\r\n          return function(){};\r\n        }\r\n      \r\n        // An internal function for creating a new object that inherits from another.\r\n        function baseCreate(prototype) {\r\n          if (!isObject(prototype)) return {};\r\n          if (nativeCreate) return nativeCreate(prototype);\r\n          var Ctor = ctor();\r\n          Ctor.prototype = prototype;\r\n          var result = new Ctor;\r\n          Ctor.prototype = null;\r\n          return result;\r\n        }\r\n      \r\n        // Creates an object that inherits from the given prototype object.\r\n        // If additional properties are provided then they will be added to the\r\n        // created object.\r\n        function create(prototype, props) {\r\n          var result = baseCreate(prototype);\r\n          if (props) extendOwn(result, props);\r\n          return result;\r\n        }\r\n      \r\n        // Create a (shallow-cloned) duplicate of an object.\r\n        function clone(obj) {\r\n          if (!isObject(obj)) return obj;\r\n          return isArray(obj) ? obj.slice() : extend({}, obj);\r\n        }\r\n      \r\n        // Invokes `interceptor` with the `obj` and then returns `obj`.\r\n        // The primary purpose of this method is to \"tap into\" a method chain, in\r\n        // order to perform operations on intermediate results within the chain.\r\n        function tap(obj, interceptor) {\r\n          interceptor(obj);\r\n          return obj;\r\n        }\r\n      \r\n        // Normalize a (deep) property `path` to array.\r\n        // Like `_.iteratee`, this function can be customized.\r\n        function toPath$1(path) {\r\n          return isArray(path) ? path : [path];\r\n        }\r\n        _$1.toPath = toPath$1;\r\n      \r\n        // Internal wrapper for `_.toPath` to enable minification.\r\n        // Similar to `cb` for `_.iteratee`.\r\n        function toPath(path) {\r\n          return _$1.toPath(path);\r\n        }\r\n      \r\n        // Internal function to obtain a nested property in `obj` along `path`.\r\n        function deepGet(obj, path) {\r\n          var length = path.length;\r\n          for (var i = 0; i < length; i++) {\r\n            if (obj == null) return void 0;\r\n            obj = obj[path[i]];\r\n          }\r\n          return length ? obj : void 0;\r\n        }\r\n      \r\n        // Get the value of the (deep) property on `path` from `object`.\r\n        // If any property in `path` does not exist or if the value is\r\n        // `undefined`, return `defaultValue` instead.\r\n        // The `path` is normalized through `_.toPath`.\r\n        function get(object, path, defaultValue) {\r\n          var value = deepGet(object, toPath(path));\r\n          return isUndefined(value) ? defaultValue : value;\r\n        }\r\n      \r\n        // Shortcut function for checking if an object has a given property directly on\r\n        // itself (in other words, not on a prototype). Unlike the internal `has`\r\n        // function, this public version can also traverse nested properties.\r\n        function has(obj, path) {\r\n          path = toPath(path);\r\n          var length = path.length;\r\n          for (var i = 0; i < length; i++) {\r\n            var key = path[i];\r\n            if (!has$1(obj, key)) return false;\r\n            obj = obj[key];\r\n          }\r\n          return !!length;\r\n        }\r\n      \r\n        // Keep the identity function around for default iteratees.\r\n        function identity(value) {\r\n          return value;\r\n        }\r\n      \r\n        // Returns a predicate for checking whether an object has a given set of\r\n        // `key:value` pairs.\r\n        function matcher(attrs) {\r\n          attrs = extendOwn({}, attrs);\r\n          return function(obj) {\r\n            return isMatch(obj, attrs);\r\n          };\r\n        }\r\n      \r\n        // Creates a function that, when passed an object, will traverse that object’s\r\n        // properties down the given `path`, specified as an array of keys or indices.\r\n        function property(path) {\r\n          path = toPath(path);\r\n          return function(obj) {\r\n            return deepGet(obj, path);\r\n          };\r\n        }\r\n      \r\n        // Internal function that returns an efficient (for current engines) version\r\n        // of the passed-in callback, to be repeatedly applied in other Underscore\r\n        // functions.\r\n        function optimizeCb(func, context, argCount) {\r\n          if (context === void 0) return func;\r\n          switch (argCount == null ? 3 : argCount) {\r\n            case 1: return function(value) {\r\n              return func.call(context, value);\r\n            };\r\n            // The 2-argument case is omitted because we’re not using it.\r\n            case 3: return function(value, index, collection) {\r\n              return func.call(context, value, index, collection);\r\n            };\r\n            case 4: return function(accumulator, value, index, collection) {\r\n              return func.call(context, accumulator, value, index, collection);\r\n            };\r\n          }\r\n          return function() {\r\n            return func.apply(context, arguments);\r\n          };\r\n        }\r\n      \r\n        // An internal function to generate callbacks that can be applied to each\r\n        // element in a collection, returning the desired result — either `_.identity`,\r\n        // an arbitrary callback, a property matcher, or a property accessor.\r\n        function baseIteratee(value, context, argCount) {\r\n          if (value == null) return identity;\r\n          if (isFunction$1(value)) return optimizeCb(value, context, argCount);\r\n          if (isObject(value) && !isArray(value)) return matcher(value);\r\n          return property(value);\r\n        }\r\n      \r\n        // External wrapper for our callback generator. Users may customize\r\n        // `_.iteratee` if they want additional predicate/iteratee shorthand styles.\r\n        // This abstraction hides the internal-only `argCount` argument.\r\n        function iteratee(value, context) {\r\n          return baseIteratee(value, context, Infinity);\r\n        }\r\n        _$1.iteratee = iteratee;\r\n      \r\n        // The function we call internally to generate a callback. It invokes\r\n        // `_.iteratee` if overridden, otherwise `baseIteratee`.\r\n        function cb(value, context, argCount) {\r\n          if (_$1.iteratee !== iteratee) return _$1.iteratee(value, context);\r\n          return baseIteratee(value, context, argCount);\r\n        }\r\n      \r\n        // Returns the results of applying the `iteratee` to each element of `obj`.\r\n        // In contrast to `_.map` it returns an object.\r\n        function mapObject(obj, iteratee, context) {\r\n          iteratee = cb(iteratee, context);\r\n          var _keys = keys(obj),\r\n              length = _keys.length,\r\n              results = {};\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys[index];\r\n            results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\r\n          }\r\n          return results;\r\n        }\r\n      \r\n        // Predicate-generating function. Often useful outside of Underscore.\r\n        function noop(){}\r\n      \r\n        // Generates a function for a given object that returns a given property.\r\n        function propertyOf(obj) {\r\n          if (obj == null) return noop;\r\n          return function(path) {\r\n            return get(obj, path);\r\n          };\r\n        }\r\n      \r\n        // Run a function **n** times.\r\n        function times(n, iteratee, context) {\r\n          var accum = Array(Math.max(0, n));\r\n          iteratee = optimizeCb(iteratee, context, 1);\r\n          for (var i = 0; i < n; i++) accum[i] = iteratee(i);\r\n          return accum;\r\n        }\r\n      \r\n        // Return a random integer between `min` and `max` (inclusive).\r\n        function random(min, max) {\r\n          if (max == null) {\r\n            max = min;\r\n            min = 0;\r\n          }\r\n          return min + Math.floor(Math.random() * (max - min + 1));\r\n        }\r\n      \r\n        // A (possibly faster) way to get the current timestamp as an integer.\r\n        var now = Date.now || function() {\r\n          return new Date().getTime();\r\n        };\r\n      \r\n        // Internal helper to generate functions for escaping and unescaping strings\r\n        // to/from HTML interpolation.\r\n        function createEscaper(map) {\r\n          var escaper = function(match) {\r\n            return map[match];\r\n          };\r\n          // Regexes for identifying a key that needs to be escaped.\r\n          var source = '(?:' + keys(map).join('|') + ')';\r\n          var testRegexp = RegExp(source);\r\n          var replaceRegexp = RegExp(source, 'g');\r\n          return function(string) {\r\n            string = string == null ? '' : '' + string;\r\n            return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\r\n          };\r\n        }\r\n      \r\n        // Internal list of HTML entities for escaping.\r\n        var escapeMap = {\r\n          '&': '&amp;',\r\n          '<': '&lt;',\r\n          '>': '&gt;',\r\n          '\"': '&quot;',\r\n          \"'\": '&#x27;',\r\n          '`': '&#x60;'\r\n        };\r\n      \r\n        // Function for escaping strings to HTML interpolation.\r\n        var _escape = createEscaper(escapeMap);\r\n      \r\n        // Internal list of HTML entities for unescaping.\r\n        var unescapeMap = invert(escapeMap);\r\n      \r\n        // Function for unescaping strings from HTML interpolation.\r\n        var _unescape = createEscaper(unescapeMap);\r\n      \r\n        // By default, Underscore uses ERB-style template delimiters. Change the\r\n        // following template settings to use alternative delimiters.\r\n        var templateSettings = _$1.templateSettings = {\r\n          evaluate: /<%([\\s\\S]+?)%>/g,\r\n          interpolate: /<%=([\\s\\S]+?)%>/g,\r\n          escape: /<%-([\\s\\S]+?)%>/g\r\n        };\r\n      \r\n        // When customizing `_.templateSettings`, if you don't want to define an\r\n        // interpolation, evaluation or escaping regex, we need one that is\r\n        // guaranteed not to match.\r\n        var noMatch = /(.)^/;\r\n      \r\n        // Certain characters need to be escaped so that they can be put into a\r\n        // string literal.\r\n        var escapes = {\r\n          \"'\": \"'\",\r\n          '\\\\': '\\\\',\r\n          '\\r': 'r',\r\n          '\\n': 'n',\r\n          '\\u2028': 'u2028',\r\n          '\\u2029': 'u2029'\r\n        };\r\n      \r\n        var escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\r\n      \r\n        function escapeChar(match) {\r\n          return '\\\\' + escapes[match];\r\n        }\r\n      \r\n        // In order to prevent third-party code injection through\r\n        // `_.templateSettings.variable`, we test it against the following regular\r\n        // expression. It is intentionally a bit more liberal than just matching valid\r\n        // identifiers, but still prevents possible loopholes through defaults or\r\n        // destructuring assignment.\r\n        var bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\r\n      \r\n        // JavaScript micro-templating, similar to John Resig's implementation.\r\n        // Underscore templating handles arbitrary delimiters, preserves whitespace,\r\n        // and correctly escapes quotes within interpolated code.\r\n        // NB: `oldSettings` only exists for backwards compatibility.\r\n        function template(text, settings, oldSettings) {\r\n          if (!settings && oldSettings) settings = oldSettings;\r\n          settings = defaults({}, settings, _$1.templateSettings);\r\n      \r\n          // Combine delimiters into one regular expression via alternation.\r\n          var matcher = RegExp([\r\n            (settings.escape || noMatch).source,\r\n            (settings.interpolate || noMatch).source,\r\n            (settings.evaluate || noMatch).source\r\n          ].join('|') + '|$', 'g');\r\n      \r\n          // Compile the template source, escaping string literals appropriately.\r\n          var index = 0;\r\n          var source = \"__p+='\";\r\n          text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\r\n            source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\r\n            index = offset + match.length;\r\n      \r\n            if (escape) {\r\n              source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\r\n            } else if (interpolate) {\r\n              source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\r\n            } else if (evaluate) {\r\n              source += \"';\\n\" + evaluate + \"\\n__p+='\";\r\n            }\r\n      \r\n            // Adobe VMs need the match returned to produce the correct offset.\r\n            return match;\r\n          });\r\n          source += \"';\\n\";\r\n      \r\n          var argument = settings.variable;\r\n          if (argument) {\r\n            // Insure against third-party code injection. (CVE-2021-23358)\r\n            if (!bareIdentifier.test(argument)) throw new Error(\r\n              'variable is not a bare identifier: ' + argument\r\n            );\r\n          } else {\r\n            // If a variable is not specified, place data values in local scope.\r\n            source = 'with(obj||{}){\\n' + source + '}\\n';\r\n            argument = 'obj';\r\n          }\r\n      \r\n          source = \"var __t,__p='',__j=Array.prototype.join,\" +\r\n            \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\r\n            source + 'return __p;\\n';\r\n      \r\n          var render;\r\n          try {\r\n            render = new Function(argument, '_', source);\r\n          } catch (e) {\r\n            e.source = source;\r\n            throw e;\r\n          }\r\n      \r\n          var template = function(data) {\r\n            return render.call(this, data, _$1);\r\n          };\r\n      \r\n          // Provide the compiled source as a convenience for precompilation.\r\n          template.source = 'function(' + argument + '){\\n' + source + '}';\r\n      \r\n          return template;\r\n        }\r\n      \r\n        // Traverses the children of `obj` along `path`. If a child is a function, it\r\n        // is invoked with its parent as context. Returns the value of the final\r\n        // child, or `fallback` if any child is undefined.\r\n        function result(obj, path, fallback) {\r\n          path = toPath(path);\r\n          var length = path.length;\r\n          if (!length) {\r\n            return isFunction$1(fallback) ? fallback.call(obj) : fallback;\r\n          }\r\n          for (var i = 0; i < length; i++) {\r\n            var prop = obj == null ? void 0 : obj[path[i]];\r\n            if (prop === void 0) {\r\n              prop = fallback;\r\n              i = length; // Ensure we don't continue iterating.\r\n            }\r\n            obj = isFunction$1(prop) ? prop.call(obj) : prop;\r\n          }\r\n          return obj;\r\n        }\r\n      \r\n        // Generate a unique integer id (unique within the entire client session).\r\n        // Useful for temporary DOM ids.\r\n        var idCounter = 0;\r\n        function uniqueId(prefix) {\r\n          var id = ++idCounter + '';\r\n          return prefix ? prefix + id : id;\r\n        }\r\n      \r\n        // Start chaining a wrapped Underscore object.\r\n        function chain(obj) {\r\n          var instance = _$1(obj);\r\n          instance._chain = true;\r\n          return instance;\r\n        }\r\n      \r\n        // Internal function to execute `sourceFunc` bound to `context` with optional\r\n        // `args`. Determines whether to execute a function as a constructor or as a\r\n        // normal function.\r\n        function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\r\n          if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\r\n          var self = baseCreate(sourceFunc.prototype);\r\n          var result = sourceFunc.apply(self, args);\r\n          if (isObject(result)) return result;\r\n          return self;\r\n        }\r\n      \r\n        // Partially apply a function by creating a version that has had some of its\r\n        // arguments pre-filled, without changing its dynamic `this` context. `_` acts\r\n        // as a placeholder by default, allowing any combination of arguments to be\r\n        // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\r\n        var partial = restArguments(function(func, boundArgs) {\r\n          var placeholder = partial.placeholder;\r\n          var bound = function() {\r\n            var position = 0, length = boundArgs.length;\r\n            var args = Array(length);\r\n            for (var i = 0; i < length; i++) {\r\n              args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\r\n            }\r\n            while (position < arguments.length) args.push(arguments[position++]);\r\n            return executeBound(func, bound, this, this, args);\r\n          };\r\n          return bound;\r\n        });\r\n      \r\n        partial.placeholder = _$1;\r\n      \r\n        // Create a function bound to a given object (assigning `this`, and arguments,\r\n        // optionally).\r\n        var bind = restArguments(function(func, context, args) {\r\n          if (!isFunction$1(func)) throw new TypeError('Bind must be called on a function');\r\n          var bound = restArguments(function(callArgs) {\r\n            return executeBound(func, bound, context, this, args.concat(callArgs));\r\n          });\r\n          return bound;\r\n        });\r\n      \r\n        // Internal helper for collection methods to determine whether a collection\r\n        // should be iterated as an array or as an object.\r\n        // Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\r\n        // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\r\n        var isArrayLike = createSizePropertyCheck(getLength);\r\n      \r\n        // Internal implementation of a recursive `flatten` function.\r\n        function flatten$1(input, depth, strict, output) {\r\n          output = output || [];\r\n          if (!depth && depth !== 0) {\r\n            depth = Infinity;\r\n          } else if (depth <= 0) {\r\n            return output.concat(input);\r\n          }\r\n          var idx = output.length;\r\n          for (var i = 0, length = getLength(input); i < length; i++) {\r\n            var value = input[i];\r\n            if (isArrayLike(value) && (isArray(value) || isArguments$1(value))) {\r\n              // Flatten current level of array or arguments object.\r\n              if (depth > 1) {\r\n                flatten$1(value, depth - 1, strict, output);\r\n                idx = output.length;\r\n              } else {\r\n                var j = 0, len = value.length;\r\n                while (j < len) output[idx++] = value[j++];\r\n              }\r\n            } else if (!strict) {\r\n              output[idx++] = value;\r\n            }\r\n          }\r\n          return output;\r\n        }\r\n      \r\n        // Bind a number of an object's methods to that object. Remaining arguments\r\n        // are the method names to be bound. Useful for ensuring that all callbacks\r\n        // defined on an object belong to it.\r\n        var bindAll = restArguments(function(obj, keys) {\r\n          keys = flatten$1(keys, false, false);\r\n          var index = keys.length;\r\n          if (index < 1) throw new Error('bindAll must be passed function names');\r\n          while (index--) {\r\n            var key = keys[index];\r\n            obj[key] = bind(obj[key], obj);\r\n          }\r\n          return obj;\r\n        });\r\n      \r\n        // Memoize an expensive function by storing its results.\r\n        function memoize(func, hasher) {\r\n          var memoize = function(key) {\r\n            var cache = memoize.cache;\r\n            var address = '' + (hasher ? hasher.apply(this, arguments) : key);\r\n            if (!has$1(cache, address)) cache[address] = func.apply(this, arguments);\r\n            return cache[address];\r\n          };\r\n          memoize.cache = {};\r\n          return memoize;\r\n        }\r\n      \r\n        // Delays a function for the given number of milliseconds, and then calls\r\n        // it with the arguments supplied.\r\n        var delay = restArguments(function(func, wait, args) {\r\n          return setTimeout(function() {\r\n            return func.apply(null, args);\r\n          }, wait);\r\n        });\r\n      \r\n        // Defers a function, scheduling it to run after the current call stack has\r\n        // cleared.\r\n        var defer = partial(delay, _$1, 1);\r\n      \r\n        // Returns a function, that, when invoked, will only be triggered at most once\r\n        // during a given window of time. Normally, the throttled function will run\r\n        // as much as it can, without ever going more than once per `wait` duration;\r\n        // but if you'd like to disable the execution on the leading edge, pass\r\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n        function throttle(func, wait, options) {\r\n          var timeout, context, args, result;\r\n          var previous = 0;\r\n          if (!options) options = {};\r\n      \r\n          var later = function() {\r\n            previous = options.leading === false ? 0 : now();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n          };\r\n      \r\n          var throttled = function() {\r\n            var _now = now();\r\n            if (!previous && options.leading === false) previous = _now;\r\n            var remaining = wait - (_now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n              if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n              }\r\n              previous = _now;\r\n              result = func.apply(context, args);\r\n              if (!timeout) context = args = null;\r\n            } else if (!timeout && options.trailing !== false) {\r\n              timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n          };\r\n      \r\n          throttled.cancel = function() {\r\n            clearTimeout(timeout);\r\n            previous = 0;\r\n            timeout = context = args = null;\r\n          };\r\n      \r\n          return throttled;\r\n        }\r\n      \r\n        // When a sequence of calls of the returned function ends, the argument\r\n        // function is triggered. The end of a sequence is defined by the `wait`\r\n        // parameter. If `immediate` is passed, the argument function will be\r\n        // triggered at the beginning of the sequence instead of at the end.\r\n        function debounce(func, wait, immediate) {\r\n          var timeout, previous, args, result, context;\r\n      \r\n          var later = function() {\r\n            var passed = now() - previous;\r\n            if (wait > passed) {\r\n              timeout = setTimeout(later, wait - passed);\r\n            } else {\r\n              timeout = null;\r\n              if (!immediate) result = func.apply(context, args);\r\n              // This check is needed because `func` can recursively invoke `debounced`.\r\n              if (!timeout) args = context = null;\r\n            }\r\n          };\r\n      \r\n          var debounced = restArguments(function(_args) {\r\n            context = this;\r\n            args = _args;\r\n            previous = now();\r\n            if (!timeout) {\r\n              timeout = setTimeout(later, wait);\r\n              if (immediate) result = func.apply(context, args);\r\n            }\r\n            return result;\r\n          });\r\n      \r\n          debounced.cancel = function() {\r\n            clearTimeout(timeout);\r\n            timeout = args = context = null;\r\n          };\r\n      \r\n          return debounced;\r\n        }\r\n      \r\n        // Returns the first function passed as an argument to the second,\r\n        // allowing you to adjust arguments, run code before and after, and\r\n        // conditionally execute the original function.\r\n        function wrap(func, wrapper) {\r\n          return partial(wrapper, func);\r\n        }\r\n      \r\n        // Returns a negated version of the passed-in predicate.\r\n        function negate(predicate) {\r\n          return function() {\r\n            return !predicate.apply(this, arguments);\r\n          };\r\n        }\r\n      \r\n        // Returns a function that is the composition of a list of functions, each\r\n        // consuming the return value of the function that follows.\r\n        function compose() {\r\n          var args = arguments;\r\n          var start = args.length - 1;\r\n          return function() {\r\n            var i = start;\r\n            var result = args[start].apply(this, arguments);\r\n            while (i--) result = args[i].call(this, result);\r\n            return result;\r\n          };\r\n        }\r\n      \r\n        // Returns a function that will only be executed on and after the Nth call.\r\n        function after(times, func) {\r\n          return function() {\r\n            if (--times < 1) {\r\n              return func.apply(this, arguments);\r\n            }\r\n          };\r\n        }\r\n      \r\n        // Returns a function that will only be executed up to (but not including) the\r\n        // Nth call.\r\n        function before(times, func) {\r\n          var memo;\r\n          return function() {\r\n            if (--times > 0) {\r\n              memo = func.apply(this, arguments);\r\n            }\r\n            if (times <= 1) func = null;\r\n            return memo;\r\n          };\r\n        }\r\n      \r\n        // Returns a function that will be executed at most one time, no matter how\r\n        // often you call it. Useful for lazy initialization.\r\n        var once = partial(before, 2);\r\n      \r\n        // Returns the first key on an object that passes a truth test.\r\n        function findKey(obj, predicate, context) {\r\n          predicate = cb(predicate, context);\r\n          var _keys = keys(obj), key;\r\n          for (var i = 0, length = _keys.length; i < length; i++) {\r\n            key = _keys[i];\r\n            if (predicate(obj[key], key, obj)) return key;\r\n          }\r\n        }\r\n      \r\n        // Internal function to generate `_.findIndex` and `_.findLastIndex`.\r\n        function createPredicateIndexFinder(dir) {\r\n          return function(array, predicate, context) {\r\n            predicate = cb(predicate, context);\r\n            var length = getLength(array);\r\n            var index = dir > 0 ? 0 : length - 1;\r\n            for (; index >= 0 && index < length; index += dir) {\r\n              if (predicate(array[index], index, array)) return index;\r\n            }\r\n            return -1;\r\n          };\r\n        }\r\n      \r\n        // Returns the first index on an array-like that passes a truth test.\r\n        var findIndex = createPredicateIndexFinder(1);\r\n      \r\n        // Returns the last index on an array-like that passes a truth test.\r\n        var findLastIndex = createPredicateIndexFinder(-1);\r\n      \r\n        // Use a comparator function to figure out the smallest index at which\r\n        // an object should be inserted so as to maintain order. Uses binary search.\r\n        function sortedIndex(array, obj, iteratee, context) {\r\n          iteratee = cb(iteratee, context, 1);\r\n          var value = iteratee(obj);\r\n          var low = 0, high = getLength(array);\r\n          while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\r\n          }\r\n          return low;\r\n        }\r\n      \r\n        // Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\r\n        function createIndexFinder(dir, predicateFind, sortedIndex) {\r\n          return function(array, item, idx) {\r\n            var i = 0, length = getLength(array);\r\n            if (typeof idx == 'number') {\r\n              if (dir > 0) {\r\n                i = idx >= 0 ? idx : Math.max(idx + length, i);\r\n              } else {\r\n                length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\r\n              }\r\n            } else if (sortedIndex && idx && length) {\r\n              idx = sortedIndex(array, item);\r\n              return array[idx] === item ? idx : -1;\r\n            }\r\n            if (item !== item) {\r\n              idx = predicateFind(slice.call(array, i, length), isNaN$1);\r\n              return idx >= 0 ? idx + i : -1;\r\n            }\r\n            for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\r\n              if (array[idx] === item) return idx;\r\n            }\r\n            return -1;\r\n          };\r\n        }\r\n      \r\n        // Return the position of the first occurrence of an item in an array,\r\n        // or -1 if the item is not included in the array.\r\n        // If the array is large and already in sort order, pass `true`\r\n        // for **isSorted** to use binary search.\r\n        var indexOf = createIndexFinder(1, findIndex, sortedIndex);\r\n      \r\n        // Return the position of the last occurrence of an item in an array,\r\n        // or -1 if the item is not included in the array.\r\n        var lastIndexOf = createIndexFinder(-1, findLastIndex);\r\n      \r\n        // Return the first value which passes a truth test.\r\n        function find(obj, predicate, context) {\r\n          var keyFinder = isArrayLike(obj) ? findIndex : findKey;\r\n          var key = keyFinder(obj, predicate, context);\r\n          if (key !== void 0 && key !== -1) return obj[key];\r\n        }\r\n      \r\n        // Convenience version of a common use case of `_.find`: getting the first\r\n        // object containing specific `key:value` pairs.\r\n        function findWhere(obj, attrs) {\r\n          return find(obj, matcher(attrs));\r\n        }\r\n      \r\n        // The cornerstone for collection functions, an `each`\r\n        // implementation, aka `forEach`.\r\n        // Handles raw objects in addition to array-likes. Treats all\r\n        // sparse array-likes as if they were dense.\r\n        function each(obj, iteratee, context) {\r\n          iteratee = optimizeCb(iteratee, context);\r\n          var i, length;\r\n          if (isArrayLike(obj)) {\r\n            for (i = 0, length = obj.length; i < length; i++) {\r\n              iteratee(obj[i], i, obj);\r\n            }\r\n          } else {\r\n            var _keys = keys(obj);\r\n            for (i = 0, length = _keys.length; i < length; i++) {\r\n              iteratee(obj[_keys[i]], _keys[i], obj);\r\n            }\r\n          }\r\n          return obj;\r\n        }\r\n      \r\n        // Return the results of applying the iteratee to each element.\r\n        function map(obj, iteratee, context) {\r\n          iteratee = cb(iteratee, context);\r\n          var _keys = !isArrayLike(obj) && keys(obj),\r\n              length = (_keys || obj).length,\r\n              results = Array(length);\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys ? _keys[index] : index;\r\n            results[index] = iteratee(obj[currentKey], currentKey, obj);\r\n          }\r\n          return results;\r\n        }\r\n      \r\n        // Internal helper to create a reducing function, iterating left or right.\r\n        function createReduce(dir) {\r\n          // Wrap code that reassigns argument variables in a separate function than\r\n          // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\r\n          var reducer = function(obj, iteratee, memo, initial) {\r\n            var _keys = !isArrayLike(obj) && keys(obj),\r\n                length = (_keys || obj).length,\r\n                index = dir > 0 ? 0 : length - 1;\r\n            if (!initial) {\r\n              memo = obj[_keys ? _keys[index] : index];\r\n              index += dir;\r\n            }\r\n            for (; index >= 0 && index < length; index += dir) {\r\n              var currentKey = _keys ? _keys[index] : index;\r\n              memo = iteratee(memo, obj[currentKey], currentKey, obj);\r\n            }\r\n            return memo;\r\n          };\r\n      \r\n          return function(obj, iteratee, memo, context) {\r\n            var initial = arguments.length >= 3;\r\n            return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\r\n          };\r\n        }\r\n      \r\n        // **Reduce** builds up a single result from a list of values, aka `inject`,\r\n        // or `foldl`.\r\n        var reduce = createReduce(1);\r\n      \r\n        // The right-associative version of reduce, also known as `foldr`.\r\n        var reduceRight = createReduce(-1);\r\n      \r\n        // Return all the elements that pass a truth test.\r\n        function filter(obj, predicate, context) {\r\n          var results = [];\r\n          predicate = cb(predicate, context);\r\n          each(obj, function(value, index, list) {\r\n            if (predicate(value, index, list)) results.push(value);\r\n          });\r\n          return results;\r\n        }\r\n      \r\n        // Return all the elements for which a truth test fails.\r\n        function reject(obj, predicate, context) {\r\n          return filter(obj, negate(cb(predicate)), context);\r\n        }\r\n      \r\n        // Determine whether all of the elements pass a truth test.\r\n        function every(obj, predicate, context) {\r\n          predicate = cb(predicate, context);\r\n          var _keys = !isArrayLike(obj) && keys(obj),\r\n              length = (_keys || obj).length;\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys ? _keys[index] : index;\r\n            if (!predicate(obj[currentKey], currentKey, obj)) return false;\r\n          }\r\n          return true;\r\n        }\r\n      \r\n        // Determine if at least one element in the object passes a truth test.\r\n        function some(obj, predicate, context) {\r\n          predicate = cb(predicate, context);\r\n          var _keys = !isArrayLike(obj) && keys(obj),\r\n              length = (_keys || obj).length;\r\n          for (var index = 0; index < length; index++) {\r\n            var currentKey = _keys ? _keys[index] : index;\r\n            if (predicate(obj[currentKey], currentKey, obj)) return true;\r\n          }\r\n          return false;\r\n        }\r\n      \r\n        // Determine if the array or object contains a given item (using `===`).\r\n        function contains(obj, item, fromIndex, guard) {\r\n          if (!isArrayLike(obj)) obj = values(obj);\r\n          if (typeof fromIndex != 'number' || guard) fromIndex = 0;\r\n          return indexOf(obj, item, fromIndex) >= 0;\r\n        }\r\n      \r\n        // Invoke a method (with arguments) on every item in a collection.\r\n        var invoke = restArguments(function(obj, path, args) {\r\n          var contextPath, func;\r\n          if (isFunction$1(path)) {\r\n            func = path;\r\n          } else {\r\n            path = toPath(path);\r\n            contextPath = path.slice(0, -1);\r\n            path = path[path.length - 1];\r\n          }\r\n          return map(obj, function(context) {\r\n            var method = func;\r\n            if (!method) {\r\n              if (contextPath && contextPath.length) {\r\n                context = deepGet(context, contextPath);\r\n              }\r\n              if (context == null) return void 0;\r\n              method = context[path];\r\n            }\r\n            return method == null ? method : method.apply(context, args);\r\n          });\r\n        });\r\n      \r\n        // Convenience version of a common use case of `_.map`: fetching a property.\r\n        function pluck(obj, key) {\r\n          return map(obj, property(key));\r\n        }\r\n      \r\n        // Convenience version of a common use case of `_.filter`: selecting only\r\n        // objects containing specific `key:value` pairs.\r\n        function where(obj, attrs) {\r\n          return filter(obj, matcher(attrs));\r\n        }\r\n      \r\n        // Return the maximum element (or element-based computation).\r\n        function max(obj, iteratee, context) {\r\n          var result = -Infinity, lastComputed = -Infinity,\r\n              value, computed;\r\n          if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\r\n            obj = isArrayLike(obj) ? obj : values(obj);\r\n            for (var i = 0, length = obj.length; i < length; i++) {\r\n              value = obj[i];\r\n              if (value != null && value > result) {\r\n                result = value;\r\n              }\r\n            }\r\n          } else {\r\n            iteratee = cb(iteratee, context);\r\n            each(obj, function(v, index, list) {\r\n              computed = iteratee(v, index, list);\r\n              if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\r\n                result = v;\r\n                lastComputed = computed;\r\n              }\r\n            });\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Return the minimum element (or element-based computation).\r\n        function min(obj, iteratee, context) {\r\n          var result = Infinity, lastComputed = Infinity,\r\n              value, computed;\r\n          if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\r\n            obj = isArrayLike(obj) ? obj : values(obj);\r\n            for (var i = 0, length = obj.length; i < length; i++) {\r\n              value = obj[i];\r\n              if (value != null && value < result) {\r\n                result = value;\r\n              }\r\n            }\r\n          } else {\r\n            iteratee = cb(iteratee, context);\r\n            each(obj, function(v, index, list) {\r\n              computed = iteratee(v, index, list);\r\n              if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\r\n                result = v;\r\n                lastComputed = computed;\r\n              }\r\n            });\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Safely create a real, live array from anything iterable.\r\n        var reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\r\n        function toArray(obj) {\r\n          if (!obj) return [];\r\n          if (isArray(obj)) return slice.call(obj);\r\n          if (isString(obj)) {\r\n            // Keep surrogate pair characters together.\r\n            return obj.match(reStrSymbol);\r\n          }\r\n          if (isArrayLike(obj)) return map(obj, identity);\r\n          return values(obj);\r\n        }\r\n      \r\n        // Sample **n** random values from a collection using the modern version of the\r\n        // [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\r\n        // If **n** is not specified, returns a single random element.\r\n        // The internal `guard` argument allows it to work with `_.map`.\r\n        function sample(obj, n, guard) {\r\n          if (n == null || guard) {\r\n            if (!isArrayLike(obj)) obj = values(obj);\r\n            return obj[random(obj.length - 1)];\r\n          }\r\n          var sample = toArray(obj);\r\n          var length = getLength(sample);\r\n          n = Math.max(Math.min(n, length), 0);\r\n          var last = length - 1;\r\n          for (var index = 0; index < n; index++) {\r\n            var rand = random(index, last);\r\n            var temp = sample[index];\r\n            sample[index] = sample[rand];\r\n            sample[rand] = temp;\r\n          }\r\n          return sample.slice(0, n);\r\n        }\r\n      \r\n        // Shuffle a collection.\r\n        function shuffle(obj) {\r\n          return sample(obj, Infinity);\r\n        }\r\n      \r\n        // Sort the object's values by a criterion produced by an iteratee.\r\n        function sortBy(obj, iteratee, context) {\r\n          var index = 0;\r\n          iteratee = cb(iteratee, context);\r\n          return pluck(map(obj, function(value, key, list) {\r\n            return {\r\n              value: value,\r\n              index: index++,\r\n              criteria: iteratee(value, key, list)\r\n            };\r\n          }).sort(function(left, right) {\r\n            var a = left.criteria;\r\n            var b = right.criteria;\r\n            if (a !== b) {\r\n              if (a > b || a === void 0) return 1;\r\n              if (a < b || b === void 0) return -1;\r\n            }\r\n            return left.index - right.index;\r\n          }), 'value');\r\n        }\r\n      \r\n        // An internal function used for aggregate \"group by\" operations.\r\n        function group(behavior, partition) {\r\n          return function(obj, iteratee, context) {\r\n            var result = partition ? [[], []] : {};\r\n            iteratee = cb(iteratee, context);\r\n            each(obj, function(value, index) {\r\n              var key = iteratee(value, index, obj);\r\n              behavior(result, value, key);\r\n            });\r\n            return result;\r\n          };\r\n        }\r\n      \r\n        // Groups the object's values by a criterion. Pass either a string attribute\r\n        // to group by, or a function that returns the criterion.\r\n        var groupBy = group(function(result, value, key) {\r\n          if (has$1(result, key)) result[key].push(value); else result[key] = [value];\r\n        });\r\n      \r\n        // Indexes the object's values by a criterion, similar to `_.groupBy`, but for\r\n        // when you know that your index values will be unique.\r\n        var indexBy = group(function(result, value, key) {\r\n          result[key] = value;\r\n        });\r\n      \r\n        // Counts instances of an object that group by a certain criterion. Pass\r\n        // either a string attribute to count by, or a function that returns the\r\n        // criterion.\r\n        var countBy = group(function(result, value, key) {\r\n          if (has$1(result, key)) result[key]++; else result[key] = 1;\r\n        });\r\n      \r\n        // Split a collection into two arrays: one whose elements all pass the given\r\n        // truth test, and one whose elements all do not pass the truth test.\r\n        var partition = group(function(result, value, pass) {\r\n          result[pass ? 0 : 1].push(value);\r\n        }, true);\r\n      \r\n        // Return the number of elements in a collection.\r\n        function size(obj) {\r\n          if (obj == null) return 0;\r\n          return isArrayLike(obj) ? obj.length : keys(obj).length;\r\n        }\r\n      \r\n        // Internal `_.pick` helper function to determine whether `key` is an enumerable\r\n        // property name of `obj`.\r\n        function keyInObj(value, key, obj) {\r\n          return key in obj;\r\n        }\r\n      \r\n        // Return a copy of the object only containing the allowed properties.\r\n        var pick = restArguments(function(obj, keys) {\r\n          var result = {}, iteratee = keys[0];\r\n          if (obj == null) return result;\r\n          if (isFunction$1(iteratee)) {\r\n            if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\r\n            keys = allKeys(obj);\r\n          } else {\r\n            iteratee = keyInObj;\r\n            keys = flatten$1(keys, false, false);\r\n            obj = Object(obj);\r\n          }\r\n          for (var i = 0, length = keys.length; i < length; i++) {\r\n            var key = keys[i];\r\n            var value = obj[key];\r\n            if (iteratee(value, key, obj)) result[key] = value;\r\n          }\r\n          return result;\r\n        });\r\n      \r\n        // Return a copy of the object without the disallowed properties.\r\n        var omit = restArguments(function(obj, keys) {\r\n          var iteratee = keys[0], context;\r\n          if (isFunction$1(iteratee)) {\r\n            iteratee = negate(iteratee);\r\n            if (keys.length > 1) context = keys[1];\r\n          } else {\r\n            keys = map(flatten$1(keys, false, false), String);\r\n            iteratee = function(value, key) {\r\n              return !contains(keys, key);\r\n            };\r\n          }\r\n          return pick(obj, iteratee, context);\r\n        });\r\n      \r\n        // Returns everything but the last entry of the array. Especially useful on\r\n        // the arguments object. Passing **n** will return all the values in\r\n        // the array, excluding the last N.\r\n        function initial(array, n, guard) {\r\n          return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\r\n        }\r\n      \r\n        // Get the first element of an array. Passing **n** will return the first N\r\n        // values in the array. The **guard** check allows it to work with `_.map`.\r\n        function first(array, n, guard) {\r\n          if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\r\n          if (n == null || guard) return array[0];\r\n          return initial(array, array.length - n);\r\n        }\r\n      \r\n        // Returns everything but the first entry of the `array`. Especially useful on\r\n        // the `arguments` object. Passing an **n** will return the rest N values in the\r\n        // `array`.\r\n        function rest(array, n, guard) {\r\n          return slice.call(array, n == null || guard ? 1 : n);\r\n        }\r\n      \r\n        // Get the last element of an array. Passing **n** will return the last N\r\n        // values in the array.\r\n        function last(array, n, guard) {\r\n          if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\r\n          if (n == null || guard) return array[array.length - 1];\r\n          return rest(array, Math.max(0, array.length - n));\r\n        }\r\n      \r\n        // Trim out all falsy values from an array.\r\n        function compact(array) {\r\n          return filter(array, Boolean);\r\n        }\r\n      \r\n        // Flatten out an array, either recursively (by default), or up to `depth`.\r\n        // Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\r\n        function flatten(array, depth) {\r\n          return flatten$1(array, depth, false);\r\n        }\r\n      \r\n        // Take the difference between one array and a number of other arrays.\r\n        // Only the elements present in just the first array will remain.\r\n        var difference = restArguments(function(array, rest) {\r\n          rest = flatten$1(rest, true, true);\r\n          return filter(array, function(value){\r\n            return !contains(rest, value);\r\n          });\r\n        });\r\n      \r\n        // Return a version of the array that does not contain the specified value(s).\r\n        var without = restArguments(function(array, otherArrays) {\r\n          return difference(array, otherArrays);\r\n        });\r\n      \r\n        // Produce a duplicate-free version of the array. If the array has already\r\n        // been sorted, you have the option of using a faster algorithm.\r\n        // The faster algorithm will not work with an iteratee if the iteratee\r\n        // is not a one-to-one function, so providing an iteratee will disable\r\n        // the faster algorithm.\r\n        function uniq(array, isSorted, iteratee, context) {\r\n          if (!isBoolean(isSorted)) {\r\n            context = iteratee;\r\n            iteratee = isSorted;\r\n            isSorted = false;\r\n          }\r\n          if (iteratee != null) iteratee = cb(iteratee, context);\r\n          var result = [];\r\n          var seen = [];\r\n          for (var i = 0, length = getLength(array); i < length; i++) {\r\n            var value = array[i],\r\n                computed = iteratee ? iteratee(value, i, array) : value;\r\n            if (isSorted && !iteratee) {\r\n              if (!i || seen !== computed) result.push(value);\r\n              seen = computed;\r\n            } else if (iteratee) {\r\n              if (!contains(seen, computed)) {\r\n                seen.push(computed);\r\n                result.push(value);\r\n              }\r\n            } else if (!contains(result, value)) {\r\n              result.push(value);\r\n            }\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Produce an array that contains the union: each distinct element from all of\r\n        // the passed-in arrays.\r\n        var union = restArguments(function(arrays) {\r\n          return uniq(flatten$1(arrays, true, true));\r\n        });\r\n      \r\n        // Produce an array that contains every item shared between all the\r\n        // passed-in arrays.\r\n        function intersection(array) {\r\n          var result = [];\r\n          var argsLength = arguments.length;\r\n          for (var i = 0, length = getLength(array); i < length; i++) {\r\n            var item = array[i];\r\n            if (contains(result, item)) continue;\r\n            var j;\r\n            for (j = 1; j < argsLength; j++) {\r\n              if (!contains(arguments[j], item)) break;\r\n            }\r\n            if (j === argsLength) result.push(item);\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Complement of zip. Unzip accepts an array of arrays and groups\r\n        // each array's elements on shared indices.\r\n        function unzip(array) {\r\n          var length = (array && max(array, getLength).length) || 0;\r\n          var result = Array(length);\r\n      \r\n          for (var index = 0; index < length; index++) {\r\n            result[index] = pluck(array, index);\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Zip together multiple lists into a single array -- elements that share\r\n        // an index go together.\r\n        var zip = restArguments(unzip);\r\n      \r\n        // Converts lists into objects. Pass either a single array of `[key, value]`\r\n        // pairs, or two parallel arrays of the same length -- one of keys, and one of\r\n        // the corresponding values. Passing by pairs is the reverse of `_.pairs`.\r\n        function object(list, values) {\r\n          var result = {};\r\n          for (var i = 0, length = getLength(list); i < length; i++) {\r\n            if (values) {\r\n              result[list[i]] = values[i];\r\n            } else {\r\n              result[list[i][0]] = list[i][1];\r\n            }\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Generate an integer Array containing an arithmetic progression. A port of\r\n        // the native Python `range()` function. See\r\n        // [the Python documentation](https://docs.python.org/library/functions.html#range).\r\n        function range(start, stop, step) {\r\n          if (stop == null) {\r\n            stop = start || 0;\r\n            start = 0;\r\n          }\r\n          if (!step) {\r\n            step = stop < start ? -1 : 1;\r\n          }\r\n      \r\n          var length = Math.max(Math.ceil((stop - start) / step), 0);\r\n          var range = Array(length);\r\n      \r\n          for (var idx = 0; idx < length; idx++, start += step) {\r\n            range[idx] = start;\r\n          }\r\n      \r\n          return range;\r\n        }\r\n      \r\n        // Chunk a single array into multiple arrays, each containing `count` or fewer\r\n        // items.\r\n        function chunk(array, count) {\r\n          if (count == null || count < 1) return [];\r\n          var result = [];\r\n          var i = 0, length = array.length;\r\n          while (i < length) {\r\n            result.push(slice.call(array, i, i += count));\r\n          }\r\n          return result;\r\n        }\r\n      \r\n        // Helper function to continue chaining intermediate results.\r\n        function chainResult(instance, obj) {\r\n          return instance._chain ? _$1(obj).chain() : obj;\r\n        }\r\n      \r\n        // Add your own custom functions to the Underscore object.\r\n        function mixin(obj) {\r\n          each(functions(obj), function(name) {\r\n            var func = _$1[name] = obj[name];\r\n            _$1.prototype[name] = function() {\r\n              var args = [this._wrapped];\r\n              push.apply(args, arguments);\r\n              return chainResult(this, func.apply(_$1, args));\r\n            };\r\n          });\r\n          return _$1;\r\n        }\r\n      \r\n        // Add all mutator `Array` functions to the wrapper.\r\n        each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\r\n          var method = ArrayProto[name];\r\n          _$1.prototype[name] = function() {\r\n            var obj = this._wrapped;\r\n            if (obj != null) {\r\n              method.apply(obj, arguments);\r\n              if ((name === 'shift' || name === 'splice') && obj.length === 0) {\r\n                delete obj[0];\r\n              }\r\n            }\r\n            return chainResult(this, obj);\r\n          };\r\n        });\r\n      \r\n        // Add all accessor `Array` functions to the wrapper.\r\n        each(['concat', 'join', 'slice'], function(name) {\r\n          var method = ArrayProto[name];\r\n          _$1.prototype[name] = function() {\r\n            var obj = this._wrapped;\r\n            if (obj != null) obj = method.apply(obj, arguments);\r\n            return chainResult(this, obj);\r\n          };\r\n        });\r\n      \r\n        // Named Exports\r\n      \r\n        var allExports = {\r\n          __proto__: null,\r\n          VERSION: VERSION,\r\n          restArguments: restArguments,\r\n          isObject: isObject,\r\n          isNull: isNull,\r\n          isUndefined: isUndefined,\r\n          isBoolean: isBoolean,\r\n          isElement: isElement,\r\n          isString: isString,\r\n          isNumber: isNumber,\r\n          isDate: isDate,\r\n          isRegExp: isRegExp,\r\n          isError: isError,\r\n          isSymbol: isSymbol,\r\n          isArrayBuffer: isArrayBuffer,\r\n          isDataView: isDataView$1,\r\n          isArray: isArray,\r\n          isFunction: isFunction$1,\r\n          isArguments: isArguments$1,\r\n          isFinite: isFinite$1,\r\n          isNaN: isNaN$1,\r\n          isTypedArray: isTypedArray$1,\r\n          isEmpty: isEmpty,\r\n          isMatch: isMatch,\r\n          isEqual: isEqual,\r\n          isMap: isMap,\r\n          isWeakMap: isWeakMap,\r\n          isSet: isSet,\r\n          isWeakSet: isWeakSet,\r\n          keys: keys,\r\n          allKeys: allKeys,\r\n          values: values,\r\n          pairs: pairs,\r\n          invert: invert,\r\n          functions: functions,\r\n          methods: functions,\r\n          extend: extend,\r\n          extendOwn: extendOwn,\r\n          assign: extendOwn,\r\n          defaults: defaults,\r\n          create: create,\r\n          clone: clone,\r\n          tap: tap,\r\n          get: get,\r\n          has: has,\r\n          mapObject: mapObject,\r\n          identity: identity,\r\n          constant: constant,\r\n          noop: noop,\r\n          toPath: toPath$1,\r\n          property: property,\r\n          propertyOf: propertyOf,\r\n          matcher: matcher,\r\n          matches: matcher,\r\n          times: times,\r\n          random: random,\r\n          now: now,\r\n          escape: _escape,\r\n          unescape: _unescape,\r\n          templateSettings: templateSettings,\r\n          template: template,\r\n          result: result,\r\n          uniqueId: uniqueId,\r\n          chain: chain,\r\n          iteratee: iteratee,\r\n          partial: partial,\r\n          bind: bind,\r\n          bindAll: bindAll,\r\n          memoize: memoize,\r\n          delay: delay,\r\n          defer: defer,\r\n          throttle: throttle,\r\n          debounce: debounce,\r\n          wrap: wrap,\r\n          negate: negate,\r\n          compose: compose,\r\n          after: after,\r\n          before: before,\r\n          once: once,\r\n          findKey: findKey,\r\n          findIndex: findIndex,\r\n          findLastIndex: findLastIndex,\r\n          sortedIndex: sortedIndex,\r\n          indexOf: indexOf,\r\n          lastIndexOf: lastIndexOf,\r\n          find: find,\r\n          detect: find,\r\n          findWhere: findWhere,\r\n          each: each,\r\n          forEach: each,\r\n          map: map,\r\n          collect: map,\r\n          reduce: reduce,\r\n          foldl: reduce,\r\n          inject: reduce,\r\n          reduceRight: reduceRight,\r\n          foldr: reduceRight,\r\n          filter: filter,\r\n          select: filter,\r\n          reject: reject,\r\n          every: every,\r\n          all: every,\r\n          some: some,\r\n          any: some,\r\n          contains: contains,\r\n          includes: contains,\r\n          include: contains,\r\n          invoke: invoke,\r\n          pluck: pluck,\r\n          where: where,\r\n          max: max,\r\n          min: min,\r\n          shuffle: shuffle,\r\n          sample: sample,\r\n          sortBy: sortBy,\r\n          groupBy: groupBy,\r\n          indexBy: indexBy,\r\n          countBy: countBy,\r\n          partition: partition,\r\n          toArray: toArray,\r\n          size: size,\r\n          pick: pick,\r\n          omit: omit,\r\n          first: first,\r\n          head: first,\r\n          take: first,\r\n          initial: initial,\r\n          last: last,\r\n          rest: rest,\r\n          tail: rest,\r\n          drop: rest,\r\n          compact: compact,\r\n          flatten: flatten,\r\n          without: without,\r\n          uniq: uniq,\r\n          unique: uniq,\r\n          union: union,\r\n          intersection: intersection,\r\n          difference: difference,\r\n          unzip: unzip,\r\n          transpose: unzip,\r\n          zip: zip,\r\n          object: object,\r\n          range: range,\r\n          chunk: chunk,\r\n          mixin: mixin,\r\n          'default': _$1\r\n        };\r\n      \r\n        // Default Export\r\n      \r\n        // Add all of the Underscore functions to the wrapper object.\r\n        var _ = mixin(allExports);\r\n        // Legacy Node.js API.\r\n        _._ = _;\r\n      \r\n        return _;\r\n      \r\n      })));\r\n      //# sourceMappingURL=underscore-umd.js.map\r\n      \r\n//     Backbone.js 1.4.1\r\n\r\n//     (c) 2010-2022 Jeremy Ashkenas and DocumentCloud\r\n//     Backbone may be freely distributed under the MIT license.\r\n//     For all details and documentation:\r\n//     http://backbonejs.org\r\n\r\n(function(factory) {\r\n\r\n    // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\r\n    // We use `self` instead of `window` for `WebWorker` support.\r\n    var root = typeof self == 'object' && self.self === self && self ||\r\n              typeof global == 'object' && global.global === global && global;\r\n  \r\n    // Set up Backbone appropriately for the environment. Start with AMD.\r\n    if (typeof define === 'function' && define.amd) {\r\n      define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\r\n        // Export global even in AMD case in case this script is loaded with\r\n        // others that may still expect a global Backbone.\r\n        root.Backbone = factory(root, exports, _, $);\r\n      });\r\n  \r\n    // Next for Node.js or CommonJS. jQuery may not be needed as a module.\r\n    } else if (typeof exports !== 'undefined') {\r\n      var _ = require('underscore'), $;\r\n      try { $ = require('jquery'); } catch (e) {}\r\n      factory(root, exports, _, $);\r\n  \r\n    // Finally, as a browser global.\r\n    } else {\r\n      root.Backbone = factory(root, {}, root._, root.jQuery || root.Zepto || root.ender || root.$);\r\n    }\r\n  \r\n  })(function(root, Backbone, _, $) {\r\n  \r\n    // Initial Setup\r\n    // -------------\r\n  \r\n    // Save the previous value of the `Backbone` variable, so that it can be\r\n    // restored later on, if `noConflict` is used.\r\n    var previousBackbone = root.Backbone;\r\n  \r\n    // Create a local reference to a common array method we'll want to use later.\r\n    var slice = Array.prototype.slice;\r\n  \r\n    // Current version of the library. Keep in sync with `package.json`.\r\n    Backbone.VERSION = '1.4.1';\r\n  \r\n    // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\r\n    // the `$` variable.\r\n    Backbone.$ = $;\r\n  \r\n    // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\r\n    // to its previous owner. Returns a reference to this Backbone object.\r\n    Backbone.noConflict = function() {\r\n      root.Backbone = previousBackbone;\r\n      return this;\r\n    };\r\n  \r\n    // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\r\n    // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\r\n    // set a `X-Http-Method-Override` header.\r\n    Backbone.emulateHTTP = false;\r\n  \r\n    // Turn on `emulateJSON` to support legacy servers that can't deal with direct\r\n    // `application/json` requests ... this will encode the body as\r\n    // `application/x-www-form-urlencoded` instead and will send the model in a\r\n    // form param named `model`.\r\n    Backbone.emulateJSON = false;\r\n  \r\n    // Backbone.Events\r\n    // ---------------\r\n  \r\n    // A module that can be mixed in to *any object* in order to provide it with\r\n    // a custom event channel. You may bind a callback to an event with `on` or\r\n    // remove with `off`; `trigger`-ing an event fires all callbacks in\r\n    // succession.\r\n    //\r\n    //     var object = {};\r\n    //     _.extend(object, Backbone.Events);\r\n    //     object.on('expand', function(){ alert('expanded'); });\r\n    //     object.trigger('expand');\r\n    //\r\n    var Events = Backbone.Events = {};\r\n  \r\n    // Regular expression used to split event strings.\r\n    var eventSplitter = /\\s+/;\r\n  \r\n    // A private global variable to share between listeners and listenees.\r\n    var _listening;\r\n  \r\n    // Iterates over the standard `event, callback` (as well as the fancy multiple\r\n    // space-separated events `\"change blur\", callback` and jQuery-style event\r\n    // maps `{event: callback}`).\r\n    var eventsApi = function(iteratee, events, name, callback, opts) {\r\n      var i = 0, names;\r\n      if (name && typeof name === 'object') {\r\n        // Handle event maps.\r\n        if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\r\n        for (names = _.keys(name); i < names.length ; i++) {\r\n          events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\r\n        }\r\n      } else if (name && eventSplitter.test(name)) {\r\n        // Handle space-separated event names by delegating them individually.\r\n        for (names = name.split(eventSplitter); i < names.length; i++) {\r\n          events = iteratee(events, names[i], callback, opts);\r\n        }\r\n      } else {\r\n        // Finally, standard events.\r\n        events = iteratee(events, name, callback, opts);\r\n      }\r\n      return events;\r\n    };\r\n  \r\n    // Bind an event to a `callback` function. Passing `\"all\"` will bind\r\n    // the callback to all events fired.\r\n    Events.on = function(name, callback, context) {\r\n      this._events = eventsApi(onApi, this._events || {}, name, callback, {\r\n        context: context,\r\n        ctx: this,\r\n        listening: _listening\r\n      });\r\n  \r\n      if (_listening) {\r\n        var listeners = this._listeners || (this._listeners = {});\r\n        listeners[_listening.id] = _listening;\r\n        // Allow the listening to use a counter, instead of tracking\r\n        // callbacks for library interop\r\n        _listening.interop = false;\r\n      }\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // Inversion-of-control versions of `on`. Tell *this* object to listen to\r\n    // an event in another object... keeping track of what it's listening to\r\n    // for easier unbinding later.\r\n    Events.listenTo = function(obj, name, callback) {\r\n      if (!obj) return this;\r\n      var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\r\n      var listeningTo = this._listeningTo || (this._listeningTo = {});\r\n      var listening = _listening = listeningTo[id];\r\n  \r\n      // This object is not listening to any other events on `obj` yet.\r\n      // Setup the necessary references to track the listening callbacks.\r\n      if (!listening) {\r\n        this._listenId || (this._listenId = _.uniqueId('l'));\r\n        listening = _listening = listeningTo[id] = new Listening(this, obj);\r\n      }\r\n  \r\n      // Bind callbacks on obj.\r\n      var error = tryCatchOn(obj, name, callback, this);\r\n      _listening = void 0;\r\n  \r\n      if (error) throw error;\r\n      // If the target obj is not Backbone.Events, track events manually.\r\n      if (listening.interop) listening.on(name, callback);\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // The reducing API that adds a callback to the `events` object.\r\n    var onApi = function(events, name, callback, options) {\r\n      if (callback) {\r\n        var handlers = events[name] || (events[name] = []);\r\n        var context = options.context, ctx = options.ctx, listening = options.listening;\r\n        if (listening) listening.count++;\r\n  \r\n        handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\r\n      }\r\n      return events;\r\n    };\r\n  \r\n    // An try-catch guarded #on function, to prevent poisoning the global\r\n    // `_listening` variable.\r\n    var tryCatchOn = function(obj, name, callback, context) {\r\n      try {\r\n        obj.on(name, callback, context);\r\n      } catch (e) {\r\n        return e;\r\n      }\r\n    };\r\n  \r\n    // Remove one or many callbacks. If `context` is null, removes all\r\n    // callbacks with that function. If `callback` is null, removes all\r\n    // callbacks for the event. If `name` is null, removes all bound\r\n    // callbacks for all events.\r\n    Events.off = function(name, callback, context) {\r\n      if (!this._events) return this;\r\n      this._events = eventsApi(offApi, this._events, name, callback, {\r\n        context: context,\r\n        listeners: this._listeners\r\n      });\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // Tell this object to stop listening to either specific events ... or\r\n    // to every object it's currently listening to.\r\n    Events.stopListening = function(obj, name, callback) {\r\n      var listeningTo = this._listeningTo;\r\n      if (!listeningTo) return this;\r\n  \r\n      var ids = obj ? [obj._listenId] : _.keys(listeningTo);\r\n      for (var i = 0; i < ids.length; i++) {\r\n        var listening = listeningTo[ids[i]];\r\n  \r\n        // If listening doesn't exist, this object is not currently\r\n        // listening to obj. Break out early.\r\n        if (!listening) break;\r\n  \r\n        listening.obj.off(name, callback, this);\r\n        if (listening.interop) listening.off(name, callback);\r\n      }\r\n      if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\r\n  \r\n      return this;\r\n    };\r\n  \r\n    // The reducing API that removes a callback from the `events` object.\r\n    var offApi = function(events, name, callback, options) {\r\n      if (!events) return;\r\n  \r\n      var context = options.context, listeners = options.listeners;\r\n      var i = 0, names;\r\n  \r\n      // Delete all event listeners and \"drop\" events.\r\n      if (!name && !context && !callback) {\r\n        for (names = _.keys(listeners); i < names.length; i++) {\r\n          listeners[names[i]].cleanup();\r\n        }\r\n        return;\r\n      }\r\n  \r\n      names = name ? [name] : _.keys(events);\r\n      for (; i < names.length; i++) {\r\n        name = names[i];\r\n        var handlers = events[name];\r\n  \r\n        // Bail out if there are no events stored.\r\n        if (!handlers) break;\r\n  \r\n        // Find any remaining events.\r\n        var remaining = [];\r\n        for (var j = 0; j < handlers.length; j++) {\r\n          var handler = handlers[j];\r\n          if (\r\n            callback && callback !== handler.callback &&\r\n              callback !== handler.callback._callback ||\r\n                context && context !== handler.context\r\n          ) {\r\n            remaining.push(handler);\r\n          } else {\r\n            var listening = handler.listening;\r\n            if (listening) listening.off(name, callback);\r\n          }\r\n        }\r\n  \r\n        // Replace events if there are any remaining.  Otherwise, clean up.\r\n        if (remaining.length) {\r\n          events[name] = remaining;\r\n        } else {\r\n          delete events[name];\r\n        }\r\n      }\r\n  \r\n      return events;\r\n    };\r\n  \r\n    // Bind an event to only be triggered a single time. After the first time\r\n    // the callback is invoked, its listener will be removed. If multiple events\r\n    // are passed in using the space-separated syntax, the handler will fire\r\n    // once for each event, not once for a combination of all events.\r\n    Events.once = function(name, callback, context) {\r\n      // Map the event into a `{event: once}` object.\r\n      var events = eventsApi(onceMap, {}, name, callback, this.off.bind(this));\r\n      if (typeof name === 'string' && context == null) callback = void 0;\r\n      return this.on(events, callback, context);\r\n    };\r\n  \r\n    // Inversion-of-control versions of `once`.\r\n    Events.listenToOnce = function(obj, name, callback) {\r\n      // Map the event into a `{event: once}` object.\r\n      var events = eventsApi(onceMap, {}, name, callback, this.stopListening.bind(this, obj));\r\n      return this.listenTo(obj, events);\r\n    };\r\n  \r\n    // Reduces the event callbacks into a map of `{event: onceWrapper}`.\r\n    // `offer` unbinds the `onceWrapper` after it has been called.\r\n    var onceMap = function(map, name, callback, offer) {\r\n      if (callback) {\r\n        var once = map[name] = _.once(function() {\r\n          offer(name, once);\r\n          callback.apply(this, arguments);\r\n        });\r\n        once._callback = callback;\r\n      }\r\n      return map;\r\n    };\r\n  \r\n    // Trigger one or many events, firing all bound callbacks. Callbacks are\r\n    // passed the same arguments as `trigger` is, apart from the event name\r\n    // (unless you're listening on `\"all\"`, which will cause your callback to\r\n    // receive the true name of the event as the first argument).\r\n    Events.trigger = function(name) {\r\n      if (!this._events) return this;\r\n  \r\n      var length = Math.max(0, arguments.length - 1);\r\n      var args = Array(length);\r\n      for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\r\n  \r\n      eventsApi(triggerApi, this._events, name, void 0, args);\r\n      return this;\r\n    };\r\n  \r\n    // Handles triggering the appropriate event callbacks.\r\n    var triggerApi = function(objEvents, name, callback, args) {\r\n      if (objEvents) {\r\n        var events = objEvents[name];\r\n        var allEvents = objEvents.all;\r\n        if (events && allEvents) allEvents = allEvents.slice();\r\n        if (events) triggerEvents(events, args);\r\n        if (allEvents) triggerEvents(allEvents, [name].concat(args));\r\n      }\r\n      return objEvents;\r\n    };\r\n  \r\n    // A difficult-to-believe, but optimized internal dispatch function for\r\n    // triggering events. Tries to keep the usual cases speedy (most internal\r\n    // Backbone events have 3 arguments).\r\n    var triggerEvents = function(events, args) {\r\n      var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\r\n      switch (args.length) {\r\n        case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\r\n        case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\r\n        case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\r\n        case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\r\n        default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\r\n      }\r\n    };\r\n  \r\n    // A listening class that tracks and cleans up memory bindings\r\n    // when all callbacks have been offed.\r\n    var Listening = function(listener, obj) {\r\n      this.id = listener._listenId;\r\n      this.listener = listener;\r\n      this.obj = obj;\r\n      this.interop = true;\r\n      this.count = 0;\r\n      this._events = void 0;\r\n    };\r\n  \r\n    Listening.prototype.on = Events.on;\r\n  \r\n    // Offs a callback (or several).\r\n    // Uses an optimized counter if the listenee uses Backbone.Events.\r\n    // Otherwise, falls back to manual tracking to support events\r\n    // library interop.\r\n    Listening.prototype.off = function(name, callback) {\r\n      var cleanup;\r\n      if (this.interop) {\r\n        this._events = eventsApi(offApi, this._events, name, callback, {\r\n          context: void 0,\r\n          listeners: void 0\r\n        });\r\n        cleanup = !this._events;\r\n      } else {\r\n        this.count--;\r\n        cleanup = this.count === 0;\r\n      }\r\n      if (cleanup) this.cleanup();\r\n    };\r\n  \r\n    // Cleans up memory bindings between the listener and the listenee.\r\n    Listening.prototype.cleanup = function() {\r\n      delete this.listener._listeningTo[this.obj._listenId];\r\n      if (!this.interop) delete this.obj._listeners[this.id];\r\n    };\r\n  \r\n    // Aliases for backwards compatibility.\r\n    Events.bind   = Events.on;\r\n    Events.unbind = Events.off;\r\n  \r\n    // Allow the `Backbone` object to serve as a global event bus, for folks who\r\n    // want global \"pubsub\" in a convenient place.\r\n    _.extend(Backbone, Events);\r\n  \r\n    // Backbone.Model\r\n    // --------------\r\n  \r\n    // Backbone **Models** are the basic data object in the framework --\r\n    // frequently representing a row in a table in a database on your server.\r\n    // A discrete chunk of data and a bunch of useful, related methods for\r\n    // performing computations and transformations on that data.\r\n  \r\n    // Create a new model with the specified attributes. A client id (`cid`)\r\n    // is automatically generated and assigned for you.\r\n    var Model = Backbone.Model = function(attributes, options) {\r\n      var attrs = attributes || {};\r\n      options || (options = {});\r\n      this.preinitialize.apply(this, arguments);\r\n      this.cid = _.uniqueId(this.cidPrefix);\r\n      this.attributes = {};\r\n      if (options.collection) this.collection = options.collection;\r\n      if (options.parse) attrs = this.parse(attrs, options) || {};\r\n      var defaults = _.result(this, 'defaults');\r\n      attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\r\n      this.set(attrs, options);\r\n      this.changed = {};\r\n      this.initialize.apply(this, arguments);\r\n    };\r\n  \r\n    // Attach all inheritable methods to the Model prototype.\r\n    _.extend(Model.prototype, Events, {\r\n  \r\n      // A hash of attributes whose current and previous value differ.\r\n      changed: null,\r\n  \r\n      // The value returned during the last failed validation.\r\n      validationError: null,\r\n  \r\n      // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\r\n      // CouchDB users may want to set this to `\"_id\"`.\r\n      idAttribute: 'id',\r\n  \r\n      // The prefix is used to create the client id which is used to identify models locally.\r\n      // You may want to override this if you're experiencing name clashes with model ids.\r\n      cidPrefix: 'c',\r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the Model.\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // Return a copy of the model's `attributes` object.\r\n      toJSON: function(options) {\r\n        return _.clone(this.attributes);\r\n      },\r\n  \r\n      // Proxy `Backbone.sync` by default -- but override this if you need\r\n      // custom syncing semantics for *this* particular model.\r\n      sync: function() {\r\n        return Backbone.sync.apply(this, arguments);\r\n      },\r\n  \r\n      // Get the value of an attribute.\r\n      get: function(attr) {\r\n        return this.attributes[attr];\r\n      },\r\n  \r\n      // Get the HTML-escaped value of an attribute.\r\n      escape: function(attr) {\r\n        return _.escape(this.get(attr));\r\n      },\r\n  \r\n      // Returns `true` if the attribute contains a value that is not null\r\n      // or undefined.\r\n      has: function(attr) {\r\n        return this.get(attr) != null;\r\n      },\r\n  \r\n      // Special-cased proxy to underscore's `_.matches` method.\r\n      matches: function(attrs) {\r\n        return !!_.iteratee(attrs, this)(this.attributes);\r\n      },\r\n  \r\n      // Set a hash of model attributes on the object, firing `\"change\"`. This is\r\n      // the core primitive operation of a model, updating the data and notifying\r\n      // anyone who needs to know about the change in state. The heart of the beast.\r\n      set: function(key, val, options) {\r\n        if (key == null) return this;\r\n  \r\n        // Handle both `\"key\", value` and `{key: value}` -style arguments.\r\n        var attrs;\r\n        if (typeof key === 'object') {\r\n          attrs = key;\r\n          options = val;\r\n        } else {\r\n          (attrs = {})[key] = val;\r\n        }\r\n  \r\n        options || (options = {});\r\n  \r\n        // Run validation.\r\n        if (!this._validate(attrs, options)) return false;\r\n  \r\n        // Extract attributes and options.\r\n        var unset      = options.unset;\r\n        var silent     = options.silent;\r\n        var changes    = [];\r\n        var changing   = this._changing;\r\n        this._changing = true;\r\n  \r\n        if (!changing) {\r\n          this._previousAttributes = _.clone(this.attributes);\r\n          this.changed = {};\r\n        }\r\n  \r\n        var current = this.attributes;\r\n        var changed = this.changed;\r\n        var prev    = this._previousAttributes;\r\n  \r\n        // For each `set` attribute, update or delete the current value.\r\n        for (var attr in attrs) {\r\n          val = attrs[attr];\r\n          if (!_.isEqual(current[attr], val)) changes.push(attr);\r\n          if (!_.isEqual(prev[attr], val)) {\r\n            changed[attr] = val;\r\n          } else {\r\n            delete changed[attr];\r\n          }\r\n          unset ? delete current[attr] : current[attr] = val;\r\n        }\r\n  \r\n        // Update the `id`.\r\n        if (this.idAttribute in attrs) {\r\n          var prevId = this.id;\r\n          this.id = this.get(this.idAttribute);\r\n          this.trigger('changeId', this, prevId, options);\r\n        }\r\n  \r\n        // Trigger all relevant attribute changes.\r\n        if (!silent) {\r\n          if (changes.length) this._pending = options;\r\n          for (var i = 0; i < changes.length; i++) {\r\n            this.trigger('change:' + changes[i], this, current[changes[i]], options);\r\n          }\r\n        }\r\n  \r\n        // You might be wondering why there's a `while` loop here. Changes can\r\n        // be recursively nested within `\"change\"` events.\r\n        if (changing) return this;\r\n        if (!silent) {\r\n          while (this._pending) {\r\n            options = this._pending;\r\n            this._pending = false;\r\n            this.trigger('change', this, options);\r\n          }\r\n        }\r\n        this._pending = false;\r\n        this._changing = false;\r\n        return this;\r\n      },\r\n  \r\n      // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\r\n      // if the attribute doesn't exist.\r\n      unset: function(attr, options) {\r\n        return this.set(attr, void 0, _.extend({}, options, {unset: true}));\r\n      },\r\n  \r\n      // Clear all attributes on the model, firing `\"change\"`.\r\n      clear: function(options) {\r\n        var attrs = {};\r\n        for (var key in this.attributes) attrs[key] = void 0;\r\n        return this.set(attrs, _.extend({}, options, {unset: true}));\r\n      },\r\n  \r\n      // Determine if the model has changed since the last `\"change\"` event.\r\n      // If you specify an attribute name, determine if that attribute has changed.\r\n      hasChanged: function(attr) {\r\n        if (attr == null) return !_.isEmpty(this.changed);\r\n        return _.has(this.changed, attr);\r\n      },\r\n  \r\n      // Return an object containing all the attributes that have changed, or\r\n      // false if there are no changed attributes. Useful for determining what\r\n      // parts of a view need to be updated and/or what attributes need to be\r\n      // persisted to the server. Unset attributes will be set to undefined.\r\n      // You can also pass an attributes object to diff against the model,\r\n      // determining if there *would be* a change.\r\n      changedAttributes: function(diff) {\r\n        if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\r\n        var old = this._changing ? this._previousAttributes : this.attributes;\r\n        var changed = {};\r\n        var hasChanged;\r\n        for (var attr in diff) {\r\n          var val = diff[attr];\r\n          if (_.isEqual(old[attr], val)) continue;\r\n          changed[attr] = val;\r\n          hasChanged = true;\r\n        }\r\n        return hasChanged ? changed : false;\r\n      },\r\n  \r\n      // Get the previous value of an attribute, recorded at the time the last\r\n      // `\"change\"` event was fired.\r\n      previous: function(attr) {\r\n        if (attr == null || !this._previousAttributes) return null;\r\n        return this._previousAttributes[attr];\r\n      },\r\n  \r\n      // Get all of the attributes of the model at the time of the previous\r\n      // `\"change\"` event.\r\n      previousAttributes: function() {\r\n        return _.clone(this._previousAttributes);\r\n      },\r\n  \r\n      // Fetch the model from the server, merging the response with the model's\r\n      // local attributes. Any changed attributes will trigger a \"change\" event.\r\n      fetch: function(options) {\r\n        options = _.extend({parse: true}, options);\r\n        var model = this;\r\n        var success = options.success;\r\n        options.success = function(resp) {\r\n          var serverAttrs = options.parse ? model.parse(resp, options) : resp;\r\n          if (!model.set(serverAttrs, options)) return false;\r\n          if (success) success.call(options.context, model, resp, options);\r\n          model.trigger('sync', model, resp, options);\r\n        };\r\n        wrapError(this, options);\r\n        return this.sync('read', this, options);\r\n      },\r\n  \r\n      // Set a hash of model attributes, and sync the model to the server.\r\n      // If the server returns an attributes hash that differs, the model's\r\n      // state will be `set` again.\r\n      save: function(key, val, options) {\r\n        // Handle both `\"key\", value` and `{key: value}` -style arguments.\r\n        var attrs;\r\n        if (key == null || typeof key === 'object') {\r\n          attrs = key;\r\n          options = val;\r\n        } else {\r\n          (attrs = {})[key] = val;\r\n        }\r\n  \r\n        options = _.extend({validate: true, parse: true}, options);\r\n        var wait = options.wait;\r\n  \r\n        // If we're not waiting and attributes exist, save acts as\r\n        // `set(attr).save(null, opts)` with validation. Otherwise, check if\r\n        // the model will be valid when the attributes, if any, are set.\r\n        if (attrs && !wait) {\r\n          if (!this.set(attrs, options)) return false;\r\n        } else if (!this._validate(attrs, options)) {\r\n          return false;\r\n        }\r\n  \r\n        // After a successful server-side save, the client is (optionally)\r\n        // updated with the server-side state.\r\n        var model = this;\r\n        var success = options.success;\r\n        var attributes = this.attributes;\r\n        options.success = function(resp) {\r\n          // Ensure attributes are restored during synchronous saves.\r\n          model.attributes = attributes;\r\n          var serverAttrs = options.parse ? model.parse(resp, options) : resp;\r\n          if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\r\n          if (serverAttrs && !model.set(serverAttrs, options)) return false;\r\n          if (success) success.call(options.context, model, resp, options);\r\n          model.trigger('sync', model, resp, options);\r\n        };\r\n        wrapError(this, options);\r\n  \r\n        // Set temporary attributes if `{wait: true}` to properly find new ids.\r\n        if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\r\n  \r\n        var method = this.isNew() ? 'create' : options.patch ? 'patch' : 'update';\r\n        if (method === 'patch' && !options.attrs) options.attrs = attrs;\r\n        var xhr = this.sync(method, this, options);\r\n  \r\n        // Restore attributes.\r\n        this.attributes = attributes;\r\n  \r\n        return xhr;\r\n      },\r\n  \r\n      // Destroy this model on the server if it was already persisted.\r\n      // Optimistically removes the model from its collection, if it has one.\r\n      // If `wait: true` is passed, waits for the server to respond before removal.\r\n      destroy: function(options) {\r\n        options = options ? _.clone(options) : {};\r\n        var model = this;\r\n        var success = options.success;\r\n        var wait = options.wait;\r\n  \r\n        var destroy = function() {\r\n          model.stopListening();\r\n          model.trigger('destroy', model, model.collection, options);\r\n        };\r\n  \r\n        options.success = function(resp) {\r\n          if (wait) destroy();\r\n          if (success) success.call(options.context, model, resp, options);\r\n          if (!model.isNew()) model.trigger('sync', model, resp, options);\r\n        };\r\n  \r\n        var xhr = false;\r\n        if (this.isNew()) {\r\n          _.defer(options.success);\r\n        } else {\r\n          wrapError(this, options);\r\n          xhr = this.sync('delete', this, options);\r\n        }\r\n        if (!wait) destroy();\r\n        return xhr;\r\n      },\r\n  \r\n      // Default URL for the model's representation on the server -- if you're\r\n      // using Backbone's restful methods, override this to change the endpoint\r\n      // that will be called.\r\n      url: function() {\r\n        var base =\r\n          _.result(this, 'urlRoot') ||\r\n          _.result(this.collection, 'url') ||\r\n          urlError();\r\n        if (this.isNew()) return base;\r\n        var id = this.get(this.idAttribute);\r\n        return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\r\n      },\r\n  \r\n      // **parse** converts a response into the hash of attributes to be `set` on\r\n      // the model. The default implementation is just to pass the response along.\r\n      parse: function(resp, options) {\r\n        return resp;\r\n      },\r\n  \r\n      // Create a new model with identical attributes to this one.\r\n      clone: function() {\r\n        return new this.constructor(this.attributes);\r\n      },\r\n  \r\n      // A model is new if it has never been saved to the server, and lacks an id.\r\n      isNew: function() {\r\n        return !this.has(this.idAttribute);\r\n      },\r\n  \r\n      // Check if the model is currently in a valid state.\r\n      isValid: function(options) {\r\n        return this._validate({}, _.extend({}, options, {validate: true}));\r\n      },\r\n  \r\n      // Run validation against the next complete set of model attributes,\r\n      // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\r\n      _validate: function(attrs, options) {\r\n        if (!options.validate || !this.validate) return true;\r\n        attrs = _.extend({}, this.attributes, attrs);\r\n        var error = this.validationError = this.validate(attrs, options) || null;\r\n        if (!error) return true;\r\n        this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\r\n        return false;\r\n      }\r\n  \r\n    });\r\n  \r\n    // Backbone.Collection\r\n    // -------------------\r\n  \r\n    // If models tend to represent a single row of data, a Backbone Collection is\r\n    // more analogous to a table full of data ... or a small slice or page of that\r\n    // table, or a collection of rows that belong together for a particular reason\r\n    // -- all of the messages in this particular folder, all of the documents\r\n    // belonging to this particular author, and so on. Collections maintain\r\n    // indexes of their models, both in order, and for lookup by `id`.\r\n  \r\n    // Create a new **Collection**, perhaps to contain a specific type of `model`.\r\n    // If a `comparator` is specified, the Collection will maintain\r\n    // its models in sort order, as they're added and removed.\r\n    var Collection = Backbone.Collection = function(models, options) {\r\n      options || (options = {});\r\n      this.preinitialize.apply(this, arguments);\r\n      if (options.model) this.model = options.model;\r\n      if (options.comparator !== void 0) this.comparator = options.comparator;\r\n      this._reset();\r\n      this.initialize.apply(this, arguments);\r\n      if (models) this.reset(models, _.extend({silent: true}, options));\r\n    };\r\n  \r\n    // Default options for `Collection#set`.\r\n    var setOptions = {add: true, remove: true, merge: true};\r\n    var addOptions = {add: true, remove: false};\r\n  \r\n    // Splices `insert` into `array` at index `at`.\r\n    var splice = function(array, insert, at) {\r\n      at = Math.min(Math.max(at, 0), array.length);\r\n      var tail = Array(array.length - at);\r\n      var length = insert.length;\r\n      var i;\r\n      for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\r\n      for (i = 0; i < length; i++) array[i + at] = insert[i];\r\n      for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\r\n    };\r\n  \r\n    // Define the Collection's inheritable methods.\r\n    _.extend(Collection.prototype, Events, {\r\n  \r\n      // The default model for a collection is just a **Backbone.Model**.\r\n      // This should be overridden in most cases.\r\n      model: Model,\r\n  \r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the Collection.\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // The JSON representation of a Collection is an array of the\r\n      // models' attributes.\r\n      toJSON: function(options) {\r\n        return this.map(function(model) { return model.toJSON(options); });\r\n      },\r\n  \r\n      // Proxy `Backbone.sync` by default.\r\n      sync: function() {\r\n        return Backbone.sync.apply(this, arguments);\r\n      },\r\n  \r\n      // Add a model, or list of models to the set. `models` may be Backbone\r\n      // Models or raw JavaScript objects to be converted to Models, or any\r\n      // combination of the two.\r\n      add: function(models, options) {\r\n        return this.set(models, _.extend({merge: false}, options, addOptions));\r\n      },\r\n  \r\n      // Remove a model, or a list of models from the set.\r\n      remove: function(models, options) {\r\n        options = _.extend({}, options);\r\n        var singular = !_.isArray(models);\r\n        models = singular ? [models] : models.slice();\r\n        var removed = this._removeModels(models, options);\r\n        if (!options.silent && removed.length) {\r\n          options.changes = {added: [], merged: [], removed: removed};\r\n          this.trigger('update', this, options);\r\n        }\r\n        return singular ? removed[0] : removed;\r\n      },\r\n  \r\n      // Update a collection by `set`-ing a new list of models, adding new ones,\r\n      // removing models that are no longer present, and merging models that\r\n      // already exist in the collection, as necessary. Similar to **Model#set**,\r\n      // the core operation for updating the data contained by the collection.\r\n      set: function(models, options) {\r\n        if (models == null) return;\r\n  \r\n        options = _.extend({}, setOptions, options);\r\n        if (options.parse && !this._isModel(models)) {\r\n          models = this.parse(models, options) || [];\r\n        }\r\n  \r\n        var singular = !_.isArray(models);\r\n        models = singular ? [models] : models.slice();\r\n  \r\n        var at = options.at;\r\n        if (at != null) at = +at;\r\n        if (at > this.length) at = this.length;\r\n        if (at < 0) at += this.length + 1;\r\n  \r\n        var set = [];\r\n        var toAdd = [];\r\n        var toMerge = [];\r\n        var toRemove = [];\r\n        var modelMap = {};\r\n  \r\n        var add = options.add;\r\n        var merge = options.merge;\r\n        var remove = options.remove;\r\n  \r\n        var sort = false;\r\n        var sortable = this.comparator && at == null && options.sort !== false;\r\n        var sortAttr = _.isString(this.comparator) ? this.comparator : null;\r\n  \r\n        // Turn bare objects into model references, and prevent invalid models\r\n        // from being added.\r\n        var model, i;\r\n        for (i = 0; i < models.length; i++) {\r\n          model = models[i];\r\n  \r\n          // If a duplicate is found, prevent it from being added and\r\n          // optionally merge it into the existing model.\r\n          var existing = this.get(model);\r\n          if (existing) {\r\n            if (merge && model !== existing) {\r\n              var attrs = this._isModel(model) ? model.attributes : model;\r\n              if (options.parse) attrs = existing.parse(attrs, options);\r\n              existing.set(attrs, options);\r\n              toMerge.push(existing);\r\n              if (sortable && !sort) sort = existing.hasChanged(sortAttr);\r\n            }\r\n            if (!modelMap[existing.cid]) {\r\n              modelMap[existing.cid] = true;\r\n              set.push(existing);\r\n            }\r\n            models[i] = existing;\r\n  \r\n          // If this is a new, valid model, push it to the `toAdd` list.\r\n          } else if (add) {\r\n            model = models[i] = this._prepareModel(model, options);\r\n            if (model) {\r\n              toAdd.push(model);\r\n              this._addReference(model, options);\r\n              modelMap[model.cid] = true;\r\n              set.push(model);\r\n            }\r\n          }\r\n        }\r\n  \r\n        // Remove stale models.\r\n        if (remove) {\r\n          for (i = 0; i < this.length; i++) {\r\n            model = this.models[i];\r\n            if (!modelMap[model.cid]) toRemove.push(model);\r\n          }\r\n          if (toRemove.length) this._removeModels(toRemove, options);\r\n        }\r\n  \r\n        // See if sorting is needed, update `length` and splice in new models.\r\n        var orderChanged = false;\r\n        var replace = !sortable && add && remove;\r\n        if (set.length && replace) {\r\n          orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\r\n            return m !== set[index];\r\n          });\r\n          this.models.length = 0;\r\n          splice(this.models, set, 0);\r\n          this.length = this.models.length;\r\n        } else if (toAdd.length) {\r\n          if (sortable) sort = true;\r\n          splice(this.models, toAdd, at == null ? this.length : at);\r\n          this.length = this.models.length;\r\n        }\r\n  \r\n        // Silently sort the collection if appropriate.\r\n        if (sort) this.sort({silent: true});\r\n  \r\n        // Unless silenced, it's time to fire all appropriate add/sort/update events.\r\n        if (!options.silent) {\r\n          for (i = 0; i < toAdd.length; i++) {\r\n            if (at != null) options.index = at + i;\r\n            model = toAdd[i];\r\n            model.trigger('add', model, this, options);\r\n          }\r\n          if (sort || orderChanged) this.trigger('sort', this, options);\r\n          if (toAdd.length || toRemove.length || toMerge.length) {\r\n            options.changes = {\r\n              added: toAdd,\r\n              removed: toRemove,\r\n              merged: toMerge\r\n            };\r\n            this.trigger('update', this, options);\r\n          }\r\n        }\r\n  \r\n        // Return the added (or merged) model (or models).\r\n        return singular ? models[0] : models;\r\n      },\r\n  \r\n      // When you have more items than you want to add or remove individually,\r\n      // you can reset the entire set with a new list of models, without firing\r\n      // any granular `add` or `remove` events. Fires `reset` when finished.\r\n      // Useful for bulk operations and optimizations.\r\n      reset: function(models, options) {\r\n        options = options ? _.clone(options) : {};\r\n        for (var i = 0; i < this.models.length; i++) {\r\n          this._removeReference(this.models[i], options);\r\n        }\r\n        options.previousModels = this.models;\r\n        this._reset();\r\n        models = this.add(models, _.extend({silent: true}, options));\r\n        if (!options.silent) this.trigger('reset', this, options);\r\n        return models;\r\n      },\r\n  \r\n      // Add a model to the end of the collection.\r\n      push: function(model, options) {\r\n        return this.add(model, _.extend({at: this.length}, options));\r\n      },\r\n  \r\n      // Remove a model from the end of the collection.\r\n      pop: function(options) {\r\n        var model = this.at(this.length - 1);\r\n        return this.remove(model, options);\r\n      },\r\n  \r\n      // Add a model to the beginning of the collection.\r\n      unshift: function(model, options) {\r\n        return this.add(model, _.extend({at: 0}, options));\r\n      },\r\n  \r\n      // Remove a model from the beginning of the collection.\r\n      shift: function(options) {\r\n        var model = this.at(0);\r\n        return this.remove(model, options);\r\n      },\r\n  \r\n      // Slice out a sub-array of models from the collection.\r\n      slice: function() {\r\n        return slice.apply(this.models, arguments);\r\n      },\r\n  \r\n      // Get a model from the set by id, cid, model object with id or cid\r\n      // properties, or an attributes object that is transformed through modelId.\r\n      get: function(obj) {\r\n        if (obj == null) return void 0;\r\n        return this._byId[obj] ||\r\n          this._byId[this.modelId(this._isModel(obj) ? obj.attributes : obj, obj.idAttribute)] ||\r\n          obj.cid && this._byId[obj.cid];\r\n      },\r\n  \r\n      // Returns `true` if the model is in the collection.\r\n      has: function(obj) {\r\n        return this.get(obj) != null;\r\n      },\r\n  \r\n      // Get the model at the given index.\r\n      at: function(index) {\r\n        if (index < 0) index += this.length;\r\n        return this.models[index];\r\n      },\r\n  \r\n      // Return models with matching attributes. Useful for simple cases of\r\n      // `filter`.\r\n      where: function(attrs, first) {\r\n        return this[first ? 'find' : 'filter'](attrs);\r\n      },\r\n  \r\n      // Return the first model with matching attributes. Useful for simple cases\r\n      // of `find`.\r\n      findWhere: function(attrs) {\r\n        return this.where(attrs, true);\r\n      },\r\n  \r\n      // Force the collection to re-sort itself. You don't need to call this under\r\n      // normal circumstances, as the set will maintain sort order as each item\r\n      // is added.\r\n      sort: function(options) {\r\n        var comparator = this.comparator;\r\n        if (!comparator) throw new Error('Cannot sort a set without a comparator');\r\n        options || (options = {});\r\n  \r\n        var length = comparator.length;\r\n        if (_.isFunction(comparator)) comparator = comparator.bind(this);\r\n  \r\n        // Run sort based on type of `comparator`.\r\n        if (length === 1 || _.isString(comparator)) {\r\n          this.models = this.sortBy(comparator);\r\n        } else {\r\n          this.models.sort(comparator);\r\n        }\r\n        if (!options.silent) this.trigger('sort', this, options);\r\n        return this;\r\n      },\r\n  \r\n      // Pluck an attribute from each model in the collection.\r\n      pluck: function(attr) {\r\n        return this.map(attr + '');\r\n      },\r\n  \r\n      // Fetch the default set of models for this collection, resetting the\r\n      // collection when they arrive. If `reset: true` is passed, the response\r\n      // data will be passed through the `reset` method instead of `set`.\r\n      fetch: function(options) {\r\n        options = _.extend({parse: true}, options);\r\n        var success = options.success;\r\n        var collection = this;\r\n        options.success = function(resp) {\r\n          var method = options.reset ? 'reset' : 'set';\r\n          collection[method](resp, options);\r\n          if (success) success.call(options.context, collection, resp, options);\r\n          collection.trigger('sync', collection, resp, options);\r\n        };\r\n        wrapError(this, options);\r\n        return this.sync('read', this, options);\r\n      },\r\n  \r\n      // Create a new instance of a model in this collection. Add the model to the\r\n      // collection immediately, unless `wait: true` is passed, in which case we\r\n      // wait for the server to agree.\r\n      create: function(model, options) {\r\n        options = options ? _.clone(options) : {};\r\n        var wait = options.wait;\r\n        model = this._prepareModel(model, options);\r\n        if (!model) return false;\r\n        if (!wait) this.add(model, options);\r\n        var collection = this;\r\n        var success = options.success;\r\n        options.success = function(m, resp, callbackOpts) {\r\n          if (wait) collection.add(m, callbackOpts);\r\n          if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\r\n        };\r\n        model.save(null, options);\r\n        return model;\r\n      },\r\n  \r\n      // **parse** converts a response into a list of models to be added to the\r\n      // collection. The default implementation is just to pass it through.\r\n      parse: function(resp, options) {\r\n        return resp;\r\n      },\r\n  \r\n      // Create a new collection with an identical list of models as this one.\r\n      clone: function() {\r\n        return new this.constructor(this.models, {\r\n          model: this.model,\r\n          comparator: this.comparator\r\n        });\r\n      },\r\n  \r\n      // Define how to uniquely identify models in the collection.\r\n      modelId: function(attrs, idAttribute) {\r\n        return attrs[idAttribute || this.model.prototype.idAttribute || 'id'];\r\n      },\r\n  \r\n      // Get an iterator of all models in this collection.\r\n      values: function() {\r\n        return new CollectionIterator(this, ITERATOR_VALUES);\r\n      },\r\n  \r\n      // Get an iterator of all model IDs in this collection.\r\n      keys: function() {\r\n        return new CollectionIterator(this, ITERATOR_KEYS);\r\n      },\r\n  \r\n      // Get an iterator of all [ID, model] tuples in this collection.\r\n      entries: function() {\r\n        return new CollectionIterator(this, ITERATOR_KEYSVALUES);\r\n      },\r\n  \r\n      // Private method to reset all internal state. Called when the collection\r\n      // is first initialized or reset.\r\n      _reset: function() {\r\n        this.length = 0;\r\n        this.models = [];\r\n        this._byId  = {};\r\n      },\r\n  \r\n      // Prepare a hash of attributes (or other model) to be added to this\r\n      // collection.\r\n      _prepareModel: function(attrs, options) {\r\n        if (this._isModel(attrs)) {\r\n          if (!attrs.collection) attrs.collection = this;\r\n          return attrs;\r\n        }\r\n        options = options ? _.clone(options) : {};\r\n        options.collection = this;\r\n  \r\n        var model;\r\n        if (this.model.prototype) {\r\n          model = new this.model(attrs, options);\r\n        } else {\r\n          // ES class methods didn't have prototype\r\n          model = this.model(attrs, options);\r\n        }\r\n  \r\n        if (!model.validationError) return model;\r\n        this.trigger('invalid', this, model.validationError, options);\r\n        return false;\r\n      },\r\n  \r\n      // Internal method called by both remove and set.\r\n      _removeModels: function(models, options) {\r\n        var removed = [];\r\n        for (var i = 0; i < models.length; i++) {\r\n          var model = this.get(models[i]);\r\n          if (!model) continue;\r\n  \r\n          var index = this.indexOf(model);\r\n          this.models.splice(index, 1);\r\n          this.length--;\r\n  \r\n          // Remove references before triggering 'remove' event to prevent an\r\n          // infinite loop. #3693\r\n          delete this._byId[model.cid];\r\n          var id = this.modelId(model.attributes, model.idAttribute);\r\n          if (id != null) delete this._byId[id];\r\n  \r\n          if (!options.silent) {\r\n            options.index = index;\r\n            model.trigger('remove', model, this, options);\r\n          }\r\n  \r\n          removed.push(model);\r\n          this._removeReference(model, options);\r\n        }\r\n        return removed;\r\n      },\r\n  \r\n      // Method for checking whether an object should be considered a model for\r\n      // the purposes of adding to the collection.\r\n      _isModel: function(model) {\r\n        return model instanceof Model;\r\n      },\r\n  \r\n      // Internal method to create a model's ties to a collection.\r\n      _addReference: function(model, options) {\r\n        this._byId[model.cid] = model;\r\n        var id = this.modelId(model.attributes, model.idAttribute);\r\n        if (id != null) this._byId[id] = model;\r\n        model.on('all', this._onModelEvent, this);\r\n      },\r\n  \r\n      // Internal method to sever a model's ties to a collection.\r\n      _removeReference: function(model, options) {\r\n        delete this._byId[model.cid];\r\n        var id = this.modelId(model.attributes, model.idAttribute);\r\n        if (id != null) delete this._byId[id];\r\n        if (this === model.collection) delete model.collection;\r\n        model.off('all', this._onModelEvent, this);\r\n      },\r\n  \r\n      // Internal method called every time a model in the set fires an event.\r\n      // Sets need to update their indexes when models change ids. All other\r\n      // events simply proxy through. \"add\" and \"remove\" events that originate\r\n      // in other collections are ignored.\r\n      _onModelEvent: function(event, model, collection, options) {\r\n        if (model) {\r\n          if ((event === 'add' || event === 'remove') && collection !== this) return;\r\n          if (event === 'destroy') this.remove(model, options);\r\n          if (event === 'changeId') {\r\n            var prevId = this.modelId(model.previousAttributes(), model.idAttribute);\r\n            var id = this.modelId(model.attributes, model.idAttribute);\r\n            if (prevId != null) delete this._byId[prevId];\r\n            if (id != null) this._byId[id] = model;\r\n          }\r\n        }\r\n        this.trigger.apply(this, arguments);\r\n      }\r\n  \r\n    });\r\n  \r\n    // Defining an @@iterator method implements JavaScript's Iterable protocol.\r\n    // In modern ES2015 browsers, this value is found at Symbol.iterator.\r\n    /* global Symbol */\r\n    var $$iterator = typeof Symbol === 'function' && Symbol.iterator;\r\n    if ($$iterator) {\r\n      Collection.prototype[$$iterator] = Collection.prototype.values;\r\n    }\r\n  \r\n    // CollectionIterator\r\n    // ------------------\r\n  \r\n    // A CollectionIterator implements JavaScript's Iterator protocol, allowing the\r\n    // use of `for of` loops in modern browsers and interoperation between\r\n    // Backbone.Collection and other JavaScript functions and third-party libraries\r\n    // which can operate on Iterables.\r\n    var CollectionIterator = function(collection, kind) {\r\n      this._collection = collection;\r\n      this._kind = kind;\r\n      this._index = 0;\r\n    };\r\n  \r\n    // This \"enum\" defines the three possible kinds of values which can be emitted\r\n    // by a CollectionIterator that correspond to the values(), keys() and entries()\r\n    // methods on Collection, respectively.\r\n    var ITERATOR_VALUES = 1;\r\n    var ITERATOR_KEYS = 2;\r\n    var ITERATOR_KEYSVALUES = 3;\r\n  \r\n    // All Iterators should themselves be Iterable.\r\n    if ($$iterator) {\r\n      CollectionIterator.prototype[$$iterator] = function() {\r\n        return this;\r\n      };\r\n    }\r\n  \r\n    CollectionIterator.prototype.next = function() {\r\n      if (this._collection) {\r\n  \r\n        // Only continue iterating if the iterated collection is long enough.\r\n        if (this._index < this._collection.length) {\r\n          var model = this._collection.at(this._index);\r\n          this._index++;\r\n  \r\n          // Construct a value depending on what kind of values should be iterated.\r\n          var value;\r\n          if (this._kind === ITERATOR_VALUES) {\r\n            value = model;\r\n          } else {\r\n            var id = this._collection.modelId(model.attributes, model.idAttribute);\r\n            if (this._kind === ITERATOR_KEYS) {\r\n              value = id;\r\n            } else { // ITERATOR_KEYSVALUES\r\n              value = [id, model];\r\n            }\r\n          }\r\n          return {value: value, done: false};\r\n        }\r\n  \r\n        // Once exhausted, remove the reference to the collection so future\r\n        // calls to the next method always return done.\r\n        this._collection = void 0;\r\n      }\r\n  \r\n      return {value: void 0, done: true};\r\n    };\r\n  \r\n    // Backbone.View\r\n    // -------------\r\n  \r\n    // Backbone Views are almost more convention than they are actual code. A View\r\n    // is simply a JavaScript object that represents a logical chunk of UI in the\r\n    // DOM. This might be a single item, an entire list, a sidebar or panel, or\r\n    // even the surrounding frame which wraps your whole app. Defining a chunk of\r\n    // UI as a **View** allows you to define your DOM events declaratively, without\r\n    // having to worry about render order ... and makes it easy for the view to\r\n    // react to specific changes in the state of your models.\r\n  \r\n    // Creating a Backbone.View creates its initial element outside of the DOM,\r\n    // if an existing element is not provided...\r\n    var View = Backbone.View = function(options) {\r\n      this.cid = _.uniqueId('view');\r\n      this.preinitialize.apply(this, arguments);\r\n      _.extend(this, _.pick(options, viewOptions));\r\n      this._ensureElement();\r\n      this.initialize.apply(this, arguments);\r\n    };\r\n  \r\n    // Cached regex to split keys for `delegate`.\r\n    var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\r\n  \r\n    // List of view options to be set as properties.\r\n    var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\r\n  \r\n    // Set up all inheritable **Backbone.View** properties and methods.\r\n    _.extend(View.prototype, Events, {\r\n  \r\n      // The default `tagName` of a View's element is `\"div\"`.\r\n      tagName: 'div',\r\n  \r\n      // jQuery delegate for element lookup, scoped to DOM elements within the\r\n      // current view. This should be preferred to global lookups where possible.\r\n      $: function(selector) {\r\n        return this.$el.find(selector);\r\n      },\r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the View\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // **render** is the core function that your view should override, in order\r\n      // to populate its element (`this.el`), with the appropriate HTML. The\r\n      // convention is for **render** to always return `this`.\r\n      render: function() {\r\n        return this;\r\n      },\r\n  \r\n      // Remove this view by taking the element out of the DOM, and removing any\r\n      // applicable Backbone.Events listeners.\r\n      remove: function() {\r\n        this._removeElement();\r\n        this.stopListening();\r\n        return this;\r\n      },\r\n  \r\n      // Remove this view's element from the document and all event listeners\r\n      // attached to it. Exposed for subclasses using an alternative DOM\r\n      // manipulation API.\r\n      _removeElement: function() {\r\n        this.$el.remove();\r\n      },\r\n  \r\n      // Change the view's element (`this.el` property) and re-delegate the\r\n      // view's events on the new element.\r\n      setElement: function(element) {\r\n        this.undelegateEvents();\r\n        this._setElement(element);\r\n        this.delegateEvents();\r\n        return this;\r\n      },\r\n  \r\n      // Creates the `this.el` and `this.$el` references for this view using the\r\n      // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\r\n      // context or an element. Subclasses can override this to utilize an\r\n      // alternative DOM manipulation API and are only required to set the\r\n      // `this.el` property.\r\n      _setElement: function(el) {\r\n        this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\r\n        this.el = this.$el[0];\r\n      },\r\n  \r\n      // Set callbacks, where `this.events` is a hash of\r\n      //\r\n      // *{\"event selector\": \"callback\"}*\r\n      //\r\n      //     {\r\n      //       'mousedown .title':  'edit',\r\n      //       'click .button':     'save',\r\n      //       'click .open':       function(e) { ... }\r\n      //     }\r\n      //\r\n      // pairs. Callbacks will be bound to the view, with `this` set properly.\r\n      // Uses event delegation for efficiency.\r\n      // Omitting the selector binds the event to `this.el`.\r\n      delegateEvents: function(events) {\r\n        events || (events = _.result(this, 'events'));\r\n        if (!events) return this;\r\n        this.undelegateEvents();\r\n        for (var key in events) {\r\n          var method = events[key];\r\n          if (!_.isFunction(method)) method = this[method];\r\n          if (!method) continue;\r\n          var match = key.match(delegateEventSplitter);\r\n          this.delegate(match[1], match[2], method.bind(this));\r\n        }\r\n        return this;\r\n      },\r\n  \r\n      // Add a single event listener to the view's element (or a child element\r\n      // using `selector`). This only works for delegate-able events: not `focus`,\r\n      // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\r\n      delegate: function(eventName, selector, listener) {\r\n        this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\r\n        return this;\r\n      },\r\n  \r\n      // Clears all callbacks previously bound to the view by `delegateEvents`.\r\n      // You usually don't need to use this, but may wish to if you have multiple\r\n      // Backbone views attached to the same DOM element.\r\n      undelegateEvents: function() {\r\n        if (this.$el) this.$el.off('.delegateEvents' + this.cid);\r\n        return this;\r\n      },\r\n  \r\n      // A finer-grained `undelegateEvents` for removing a single delegated event.\r\n      // `selector` and `listener` are both optional.\r\n      undelegate: function(eventName, selector, listener) {\r\n        this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\r\n        return this;\r\n      },\r\n  \r\n      // Produces a DOM element to be assigned to your view. Exposed for\r\n      // subclasses using an alternative DOM manipulation API.\r\n      _createElement: function(tagName) {\r\n        return document.createElement(tagName);\r\n      },\r\n  \r\n      // Ensure that the View has a DOM element to render into.\r\n      // If `this.el` is a string, pass it through `$()`, take the first\r\n      // matching element, and re-assign it to `el`. Otherwise, create\r\n      // an element from the `id`, `className` and `tagName` properties.\r\n      _ensureElement: function() {\r\n        if (!this.el) {\r\n          var attrs = _.extend({}, _.result(this, 'attributes'));\r\n          if (this.id) attrs.id = _.result(this, 'id');\r\n          if (this.className) attrs['class'] = _.result(this, 'className');\r\n          this.setElement(this._createElement(_.result(this, 'tagName')));\r\n          this._setAttributes(attrs);\r\n        } else {\r\n          this.setElement(_.result(this, 'el'));\r\n        }\r\n      },\r\n  \r\n      // Set attributes from a hash on this view's element.  Exposed for\r\n      // subclasses using an alternative DOM manipulation API.\r\n      _setAttributes: function(attributes) {\r\n        this.$el.attr(attributes);\r\n      }\r\n  \r\n    });\r\n  \r\n    // Proxy Backbone class methods to Underscore functions, wrapping the model's\r\n    // `attributes` object or collection's `models` array behind the scenes.\r\n    //\r\n    // collection.filter(function(model) { return model.get('age') > 10 });\r\n    // collection.each(this.addView);\r\n    //\r\n    // `Function#apply` can be slow so we use the method's arg count, if we know it.\r\n    var addMethod = function(base, length, method, attribute) {\r\n      switch (length) {\r\n        case 1: return function() {\r\n          return base[method](this[attribute]);\r\n        };\r\n        case 2: return function(value) {\r\n          return base[method](this[attribute], value);\r\n        };\r\n        case 3: return function(iteratee, context) {\r\n          return base[method](this[attribute], cb(iteratee, this), context);\r\n        };\r\n        case 4: return function(iteratee, defaultVal, context) {\r\n          return base[method](this[attribute], cb(iteratee, this), defaultVal, context);\r\n        };\r\n        default: return function() {\r\n          var args = slice.call(arguments);\r\n          args.unshift(this[attribute]);\r\n          return base[method].apply(base, args);\r\n        };\r\n      }\r\n    };\r\n  \r\n    var addUnderscoreMethods = function(Class, base, methods, attribute) {\r\n      _.each(methods, function(length, method) {\r\n        if (base[method]) Class.prototype[method] = addMethod(base, length, method, attribute);\r\n      });\r\n    };\r\n  \r\n    // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\r\n    var cb = function(iteratee, instance) {\r\n      if (_.isFunction(iteratee)) return iteratee;\r\n      if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\r\n      if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\r\n      return iteratee;\r\n    };\r\n    var modelMatcher = function(attrs) {\r\n      var matcher = _.matches(attrs);\r\n      return function(model) {\r\n        return matcher(model.attributes);\r\n      };\r\n    };\r\n  \r\n    // Underscore methods that we want to implement on the Collection.\r\n    // 90% of the core usefulness of Backbone Collections is actually implemented\r\n    // right here:\r\n    var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\r\n      foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\r\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\r\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\r\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\r\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\r\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\r\n      sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\r\n  \r\n  \r\n    // Underscore methods that we want to implement on the Model, mapped to the\r\n    // number of arguments they take.\r\n    var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\r\n      omit: 0, chain: 1, isEmpty: 1};\r\n  \r\n    // Mix in each Underscore method as a proxy to `Collection#models`.\r\n  \r\n    _.each([\r\n      [Collection, collectionMethods, 'models'],\r\n      [Model, modelMethods, 'attributes']\r\n    ], function(config) {\r\n      var Base = config[0],\r\n          methods = config[1],\r\n          attribute = config[2];\r\n  \r\n      Base.mixin = function(obj) {\r\n        var mappings = _.reduce(_.functions(obj), function(memo, name) {\r\n          memo[name] = 0;\r\n          return memo;\r\n        }, {});\r\n        addUnderscoreMethods(Base, obj, mappings, attribute);\r\n      };\r\n  \r\n      addUnderscoreMethods(Base, _, methods, attribute);\r\n    });\r\n  \r\n    // Backbone.sync\r\n    // -------------\r\n  \r\n    // Override this function to change the manner in which Backbone persists\r\n    // models to the server. You will be passed the type of request, and the\r\n    // model in question. By default, makes a RESTful Ajax request\r\n    // to the model's `url()`. Some possible customizations could be:\r\n    //\r\n    // * Use `setTimeout` to batch rapid-fire updates into a single request.\r\n    // * Send up the models as XML instead of JSON.\r\n    // * Persist models via WebSockets instead of Ajax.\r\n    //\r\n    // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\r\n    // as `POST`, with a `_method` parameter containing the true HTTP method,\r\n    // as well as all requests with the body as `application/x-www-form-urlencoded`\r\n    // instead of `application/json` with the model in a param named `model`.\r\n    // Useful when interfacing with server-side languages like **PHP** that make\r\n    // it difficult to read the body of `PUT` requests.\r\n    Backbone.sync = function(method, model, options) {\r\n      var type = methodMap[method];\r\n  \r\n      // Default options, unless specified.\r\n      _.defaults(options || (options = {}), {\r\n        emulateHTTP: Backbone.emulateHTTP,\r\n        emulateJSON: Backbone.emulateJSON\r\n      });\r\n  \r\n      // Default JSON-request options.\r\n      var params = {type: type, dataType: 'json'};\r\n  \r\n      // Ensure that we have a URL.\r\n      if (!options.url) {\r\n        params.url = _.result(model, 'url') || urlError();\r\n      }\r\n  \r\n      // Ensure that we have the appropriate request data.\r\n      if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\r\n        params.contentType = 'application/json';\r\n        params.data = JSON.stringify(options.attrs || model.toJSON(options));\r\n      }\r\n  \r\n      // For older servers, emulate JSON by encoding the request into an HTML-form.\r\n      if (options.emulateJSON) {\r\n        params.contentType = 'application/x-www-form-urlencoded';\r\n        params.data = params.data ? {model: params.data} : {};\r\n      }\r\n  \r\n      // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\r\n      // And an `X-HTTP-Method-Override` header.\r\n      if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\r\n        params.type = 'POST';\r\n        if (options.emulateJSON) params.data._method = type;\r\n        var beforeSend = options.beforeSend;\r\n        options.beforeSend = function(xhr) {\r\n          xhr.setRequestHeader('X-HTTP-Method-Override', type);\r\n          if (beforeSend) return beforeSend.apply(this, arguments);\r\n        };\r\n      }\r\n  \r\n      // Don't process data on a non-GET request.\r\n      if (params.type !== 'GET' && !options.emulateJSON) {\r\n        params.processData = false;\r\n      }\r\n  \r\n      // Pass along `textStatus` and `errorThrown` from jQuery.\r\n      var error = options.error;\r\n      options.error = function(xhr, textStatus, errorThrown) {\r\n        options.textStatus = textStatus;\r\n        options.errorThrown = errorThrown;\r\n        if (error) error.call(options.context, xhr, textStatus, errorThrown);\r\n      };\r\n  \r\n      // Make the request, allowing the user to override any Ajax options.\r\n      var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\r\n      model.trigger('request', model, xhr, options);\r\n      return xhr;\r\n    };\r\n  \r\n    // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\r\n    var methodMap = {\r\n      'create': 'POST',\r\n      'update': 'PUT',\r\n      'patch': 'PATCH',\r\n      'delete': 'DELETE',\r\n      'read': 'GET'\r\n    };\r\n  \r\n    // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\r\n    // Override this if you'd like to use a different library.\r\n    Backbone.ajax = function() {\r\n      return Backbone.$.ajax.apply(Backbone.$, arguments);\r\n    };\r\n  \r\n    // Backbone.Router\r\n    // ---------------\r\n  \r\n    // Routers map faux-URLs to actions, and fire events when routes are\r\n    // matched. Creating a new one sets its `routes` hash, if not set statically.\r\n    var Router = Backbone.Router = function(options) {\r\n      options || (options = {});\r\n      this.preinitialize.apply(this, arguments);\r\n      if (options.routes) this.routes = options.routes;\r\n      this._bindRoutes();\r\n      this.initialize.apply(this, arguments);\r\n    };\r\n  \r\n    // Cached regular expressions for matching named param parts and splatted\r\n    // parts of route strings.\r\n    var optionalParam = /\\((.*?)\\)/g;\r\n    var namedParam    = /(\\(\\?)?:\\w+/g;\r\n    var splatParam    = /\\*\\w+/g;\r\n    var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\r\n  \r\n    // Set up all inheritable **Backbone.Router** properties and methods.\r\n    _.extend(Router.prototype, Events, {\r\n  \r\n      // preinitialize is an empty function by default. You can override it with a function\r\n      // or object.  preinitialize will run before any instantiation logic is run in the Router.\r\n      preinitialize: function(){},\r\n  \r\n      // Initialize is an empty function by default. Override it with your own\r\n      // initialization logic.\r\n      initialize: function(){},\r\n  \r\n      // Manually bind a single named route to a callback. For example:\r\n      //\r\n      //     this.route('search/:query/p:num', 'search', function(query, num) {\r\n      //       ...\r\n      //     });\r\n      //\r\n      route: function(route, name, callback) {\r\n        if (!_.isRegExp(route)) route = this._routeToRegExp(route);\r\n        if (_.isFunction(name)) {\r\n          callback = name;\r\n          name = '';\r\n        }\r\n        if (!callback) callback = this[name];\r\n        var router = this;\r\n        Backbone.history.route(route, function(fragment) {\r\n          var args = router._extractParameters(route, fragment);\r\n          if (router.execute(callback, args, name) !== false) {\r\n            router.trigger.apply(router, ['route:' + name].concat(args));\r\n            router.trigger('route', name, args);\r\n            Backbone.history.trigger('route', router, name, args);\r\n          }\r\n        });\r\n        return this;\r\n      },\r\n  \r\n      // Execute a route handler with the provided parameters.  This is an\r\n      // excellent place to do pre-route setup or post-route cleanup.\r\n      execute: function(callback, args, name) {\r\n        if (callback) callback.apply(this, args);\r\n      },\r\n  \r\n      // Simple proxy to `Backbone.history` to save a fragment into the history.\r\n      navigate: function(fragment, options) {\r\n        Backbone.history.navigate(fragment, options);\r\n        return this;\r\n      },\r\n  \r\n      // Bind all defined routes to `Backbone.history`. We have to reverse the\r\n      // order of the routes here to support behavior where the most general\r\n      // routes can be defined at the bottom of the route map.\r\n      _bindRoutes: function() {\r\n        if (!this.routes) return;\r\n        this.routes = _.result(this, 'routes');\r\n        var route, routes = _.keys(this.routes);\r\n        while ((route = routes.pop()) != null) {\r\n          this.route(route, this.routes[route]);\r\n        }\r\n      },\r\n  \r\n      // Convert a route string into a regular expression, suitable for matching\r\n      // against the current location hash.\r\n      _routeToRegExp: function(route) {\r\n        route = route.replace(escapeRegExp, '\\\\$&')\r\n        .replace(optionalParam, '(?:$1)?')\r\n        .replace(namedParam, function(match, optional) {\r\n          return optional ? match : '([^/?]+)';\r\n        })\r\n        .replace(splatParam, '([^?]*?)');\r\n        return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\r\n      },\r\n  \r\n      // Given a route, and a URL fragment that it matches, return the array of\r\n      // extracted decoded parameters. Empty or unmatched parameters will be\r\n      // treated as `null` to normalize cross-browser behavior.\r\n      _extractParameters: function(route, fragment) {\r\n        var params = route.exec(fragment).slice(1);\r\n        return _.map(params, function(param, i) {\r\n          // Don't decode the search params.\r\n          if (i === params.length - 1) return param || null;\r\n          return param ? decodeURIComponent(param) : null;\r\n        });\r\n      }\r\n  \r\n    });\r\n  \r\n    // Backbone.History\r\n    // ----------------\r\n  \r\n    // Handles cross-browser history management, based on either\r\n    // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\r\n    // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\r\n    // and URL fragments. If the browser supports neither (old IE, natch),\r\n    // falls back to polling.\r\n    var History = Backbone.History = function() {\r\n      this.handlers = [];\r\n      this.checkUrl = this.checkUrl.bind(this);\r\n  \r\n      // Ensure that `History` can be used outside of the browser.\r\n      if (typeof window !== 'undefined') {\r\n        this.location = window.location;\r\n        this.history = window.history;\r\n      }\r\n    };\r\n  \r\n    // Cached regex for stripping a leading hash/slash and trailing space.\r\n    var routeStripper = /^[#\\/]|\\s+$/g;\r\n  \r\n    // Cached regex for stripping leading and trailing slashes.\r\n    var rootStripper = /^\\/+|\\/+$/g;\r\n  \r\n    // Cached regex for stripping urls of hash.\r\n    var pathStripper = /#.*$/;\r\n  \r\n    // Has the history handling already been started?\r\n    History.started = false;\r\n  \r\n    // Set up all inheritable **Backbone.History** properties and methods.\r\n    _.extend(History.prototype, Events, {\r\n  \r\n      // The default interval to poll for hash changes, if necessary, is\r\n      // twenty times a second.\r\n      interval: 50,\r\n  \r\n      // Are we at the app root?\r\n      atRoot: function() {\r\n        var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\r\n        return path === this.root && !this.getSearch();\r\n      },\r\n  \r\n      // Does the pathname match the root?\r\n      matchRoot: function() {\r\n        var path = this.decodeFragment(this.location.pathname);\r\n        var rootPath = path.slice(0, this.root.length - 1) + '/';\r\n        return rootPath === this.root;\r\n      },\r\n  \r\n      // Unicode characters in `location.pathname` are percent encoded so they're\r\n      // decoded for comparison. `%25` should not be decoded since it may be part\r\n      // of an encoded parameter.\r\n      decodeFragment: function(fragment) {\r\n        return decodeURI(fragment.replace(/%25/g, '%2525'));\r\n      },\r\n  \r\n      // In IE6, the hash fragment and search params are incorrect if the\r\n      // fragment contains `?`.\r\n      getSearch: function() {\r\n        var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\r\n        return match ? match[0] : '';\r\n      },\r\n  \r\n      // Gets the true hash value. Cannot use location.hash directly due to bug\r\n      // in Firefox where location.hash will always be decoded.\r\n      getHash: function(window) {\r\n        var match = (window || this).location.href.match(/#(.*)$/);\r\n        return match ? match[1] : '';\r\n      },\r\n  \r\n      // Get the pathname and search params, without the root.\r\n      getPath: function() {\r\n        var path = this.decodeFragment(\r\n          this.location.pathname + this.getSearch()\r\n        ).slice(this.root.length - 1);\r\n        return path.charAt(0) === '/' ? path.slice(1) : path;\r\n      },\r\n  \r\n      // Get the cross-browser normalized URL fragment from the path or hash.\r\n      getFragment: function(fragment) {\r\n        if (fragment == null) {\r\n          if (this._usePushState || !this._wantsHashChange) {\r\n            fragment = this.getPath();\r\n          } else {\r\n            fragment = this.getHash();\r\n          }\r\n        }\r\n        return fragment.replace(routeStripper, '');\r\n      },\r\n  \r\n      // Start the hash change handling, returning `true` if the current URL matches\r\n      // an existing route, and `false` otherwise.\r\n      start: function(options) {\r\n        if (History.started) throw new Error('Backbone.history has already been started');\r\n        History.started = true;\r\n  \r\n        // Figure out the initial configuration. Do we need an iframe?\r\n        // Is pushState desired ... is it available?\r\n        this.options          = _.extend({root: '/'}, this.options, options);\r\n        this.root             = this.options.root;\r\n        this._wantsHashChange = this.options.hashChange !== false;\r\n        this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\r\n        this._useHashChange   = this._wantsHashChange && this._hasHashChange;\r\n        this._wantsPushState  = !!this.options.pushState;\r\n        this._hasPushState    = !!(this.history && this.history.pushState);\r\n        this._usePushState    = this._wantsPushState && this._hasPushState;\r\n        this.fragment         = this.getFragment();\r\n  \r\n        // Normalize root to always include a leading and trailing slash.\r\n        this.root = ('/' + this.root + '/').replace(rootStripper, '/');\r\n  \r\n        // Transition from hashChange to pushState or vice versa if both are\r\n        // requested.\r\n        if (this._wantsHashChange && this._wantsPushState) {\r\n  \r\n          // If we've started off with a route from a `pushState`-enabled\r\n          // browser, but we're currently in a browser that doesn't support it...\r\n          if (!this._hasPushState && !this.atRoot()) {\r\n            var rootPath = this.root.slice(0, -1) || '/';\r\n            this.location.replace(rootPath + '#' + this.getPath());\r\n            // Return immediately as browser will do redirect to new url\r\n            return true;\r\n  \r\n          // Or if we've started out with a hash-based route, but we're currently\r\n          // in a browser where it could be `pushState`-based instead...\r\n          } else if (this._hasPushState && this.atRoot()) {\r\n            this.navigate(this.getHash(), {replace: true});\r\n          }\r\n  \r\n        }\r\n  \r\n        // Proxy an iframe to handle location events if the browser doesn't\r\n        // support the `hashchange` event, HTML5 history, or the user wants\r\n        // `hashChange` but not `pushState`.\r\n        if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\r\n          this.iframe = document.createElement('iframe');\r\n          this.iframe.src = 'javascript:0';\r\n          this.iframe.style.display = 'none';\r\n          this.iframe.tabIndex = -1;\r\n          var body = document.body;\r\n          // Using `appendChild` will throw on IE < 9 if the document is not ready.\r\n          var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\r\n          iWindow.document.open();\r\n          iWindow.document.close();\r\n          iWindow.location.hash = '#' + this.fragment;\r\n        }\r\n  \r\n        // Add a cross-platform `addEventListener` shim for older browsers.\r\n        var addEventListener = window.addEventListener || function(eventName, listener) {\r\n          return attachEvent('on' + eventName, listener);\r\n        };\r\n  \r\n        // Depending on whether we're using pushState or hashes, and whether\r\n        // 'onhashchange' is supported, determine how we check the URL state.\r\n        if (this._usePushState) {\r\n          addEventListener('popstate', this.checkUrl, false);\r\n        } else if (this._useHashChange && !this.iframe) {\r\n          addEventListener('hashchange', this.checkUrl, false);\r\n        } else if (this._wantsHashChange) {\r\n          this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\r\n        }\r\n  \r\n        if (!this.options.silent) return this.loadUrl();\r\n      },\r\n  \r\n      // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\r\n      // but possibly useful for unit testing Routers.\r\n      stop: function() {\r\n        // Add a cross-platform `removeEventListener` shim for older browsers.\r\n        var removeEventListener = window.removeEventListener || function(eventName, listener) {\r\n          return detachEvent('on' + eventName, listener);\r\n        };\r\n  \r\n        // Remove window listeners.\r\n        if (this._usePushState) {\r\n          removeEventListener('popstate', this.checkUrl, false);\r\n        } else if (this._useHashChange && !this.iframe) {\r\n          removeEventListener('hashchange', this.checkUrl, false);\r\n        }\r\n  \r\n        // Clean up the iframe if necessary.\r\n        if (this.iframe) {\r\n          document.body.removeChild(this.iframe);\r\n          this.iframe = null;\r\n        }\r\n  \r\n        // Some environments will throw when clearing an undefined interval.\r\n        if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\r\n        History.started = false;\r\n      },\r\n  \r\n      // Add a route to be tested when the fragment changes. Routes added later\r\n      // may override previous routes.\r\n      route: function(route, callback) {\r\n        this.handlers.unshift({route: route, callback: callback});\r\n      },\r\n  \r\n      // Checks the current URL to see if it has changed, and if it has,\r\n      // calls `loadUrl`, normalizing across the hidden iframe.\r\n      checkUrl: function(e) {\r\n        var current = this.getFragment();\r\n  \r\n        // If the user pressed the back button, the iframe's hash will have\r\n        // changed and we should use that for comparison.\r\n        if (current === this.fragment && this.iframe) {\r\n          current = this.getHash(this.iframe.contentWindow);\r\n        }\r\n  \r\n        if (current === this.fragment) return false;\r\n        if (this.iframe) this.navigate(current);\r\n        this.loadUrl();\r\n      },\r\n  \r\n      // Attempt to load the current URL fragment. If a route succeeds with a\r\n      // match, returns `true`. If no defined routes matches the fragment,\r\n      // returns `false`.\r\n      loadUrl: function(fragment) {\r\n        // If the root doesn't match, no routes can match either.\r\n        if (!this.matchRoot()) return false;\r\n        fragment = this.fragment = this.getFragment(fragment);\r\n        return _.some(this.handlers, function(handler) {\r\n          if (handler.route.test(fragment)) {\r\n            handler.callback(fragment);\r\n            return true;\r\n          }\r\n        });\r\n      },\r\n  \r\n      // Save a fragment into the hash history, or replace the URL state if the\r\n      // 'replace' option is passed. You are responsible for properly URL-encoding\r\n      // the fragment in advance.\r\n      //\r\n      // The options object can contain `trigger: true` if you wish to have the\r\n      // route callback be fired (not usually desirable), or `replace: true`, if\r\n      // you wish to modify the current URL without adding an entry to the history.\r\n      navigate: function(fragment, options) {\r\n        if (!History.started) return false;\r\n        if (!options || options === true) options = {trigger: !!options};\r\n  \r\n        // Normalize the fragment.\r\n        fragment = this.getFragment(fragment || '');\r\n  \r\n        // Don't include a trailing slash on the root.\r\n        var rootPath = this.root;\r\n        if (fragment === '' || fragment.charAt(0) === '?') {\r\n          rootPath = rootPath.slice(0, -1) || '/';\r\n        }\r\n        var url = rootPath + fragment;\r\n  \r\n        // Strip the fragment of the query and hash for matching.\r\n        fragment = fragment.replace(pathStripper, '');\r\n  \r\n        // Decode for matching.\r\n        var decodedFragment = this.decodeFragment(fragment);\r\n  \r\n        if (this.fragment === decodedFragment) return;\r\n        this.fragment = decodedFragment;\r\n  \r\n        // If pushState is available, we use it to set the fragment as a real URL.\r\n        if (this._usePushState) {\r\n          this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\r\n  \r\n        // If hash changes haven't been explicitly disabled, update the hash\r\n        // fragment to store history.\r\n        } else if (this._wantsHashChange) {\r\n          this._updateHash(this.location, fragment, options.replace);\r\n          if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\r\n            var iWindow = this.iframe.contentWindow;\r\n  \r\n            // Opening and closing the iframe tricks IE7 and earlier to push a\r\n            // history entry on hash-tag change.  When replace is true, we don't\r\n            // want this.\r\n            if (!options.replace) {\r\n              iWindow.document.open();\r\n              iWindow.document.close();\r\n            }\r\n  \r\n            this._updateHash(iWindow.location, fragment, options.replace);\r\n          }\r\n  \r\n        // If you've told us that you explicitly don't want fallback hashchange-\r\n        // based history, then `navigate` becomes a page refresh.\r\n        } else {\r\n          return this.location.assign(url);\r\n        }\r\n        if (options.trigger) return this.loadUrl(fragment);\r\n      },\r\n  \r\n      // Update the hash location, either replacing the current entry, or adding\r\n      // a new one to the browser history.\r\n      _updateHash: function(location, fragment, replace) {\r\n        if (replace) {\r\n          var href = location.href.replace(/(javascript:|#).*$/, '');\r\n          location.replace(href + '#' + fragment);\r\n        } else {\r\n          // Some browsers require that `hash` contains a leading #.\r\n          location.hash = '#' + fragment;\r\n        }\r\n      }\r\n  \r\n    });\r\n  \r\n    // Create the default Backbone.history.\r\n    Backbone.history = new History;\r\n  \r\n    // Helpers\r\n    // -------\r\n  \r\n    // Helper function to correctly set up the prototype chain for subclasses.\r\n    // Similar to `goog.inherits`, but uses a hash of prototype properties and\r\n    // class properties to be extended.\r\n    var extend = function(protoProps, staticProps) {\r\n      var parent = this;\r\n      var child;\r\n  \r\n      // The constructor function for the new subclass is either defined by you\r\n      // (the \"constructor\" property in your `extend` definition), or defaulted\r\n      // by us to simply call the parent constructor.\r\n      if (protoProps && _.has(protoProps, 'constructor')) {\r\n        child = protoProps.constructor;\r\n      } else {\r\n        child = function(){ return parent.apply(this, arguments); };\r\n      }\r\n  \r\n      // Add static properties to the constructor function, if supplied.\r\n      _.extend(child, parent, staticProps);\r\n  \r\n      // Set the prototype chain to inherit from `parent`, without calling\r\n      // `parent`'s constructor function and add the prototype properties.\r\n      child.prototype = _.create(parent.prototype, protoProps);\r\n      child.prototype.constructor = child;\r\n  \r\n      // Set a convenience property in case the parent's prototype is needed\r\n      // later.\r\n      child.__super__ = parent.prototype;\r\n  \r\n      return child;\r\n    };\r\n  \r\n    // Set up inheritance for the model, collection, router, view and history.\r\n    Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\r\n  \r\n    // Throw an error when a URL is needed, and none is supplied.\r\n    var urlError = function() {\r\n      throw new Error('A \"url\" property or function must be specified');\r\n    };\r\n  \r\n    // Wrap an optional error callback with a fallback error event.\r\n    var wrapError = function(model, options) {\r\n      var error = options.error;\r\n      options.error = function(resp) {\r\n        if (error) error.call(options.context, model, resp, options);\r\n        model.trigger('error', model, resp, options);\r\n      };\r\n    };\r\n  \r\n    return Backbone;\r\n  });\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/expalib.js?");

/***/ }),

/***/ "./src/js/viewTemplates/buttons.js":
/*!*****************************************!*\
  !*** ./src/js/viewTemplates/buttons.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Button\": () => (/* binding */ Button)\n/* harmony export */ });\n/* harmony import */ var _blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blocks/errors.js */ \"./src/js/blocks/errors.js\");\n\r\n\r\n\r\nclass Button {\r\n\r\n    constructor (options){\r\n        this.buttonView = {\r\n            view    : \"button\",\r\n            height  : 42,\r\n            on      : {\r\n\r\n            }\r\n        };\r\n        this.options    = options.config;\r\n\r\n        this.values     = Object.values(this.options);\r\n        this.keys       = Object.keys  (this.options);\r\n        this.adaptValue = options.adaptValue;\r\n\r\n        this.title      = options.titleAttribute;\r\n\r\n        this.onFunc     = options.onFunc;\r\n\r\n        this.css        = options.css;\r\n    }\r\n\r\n\r\n    modifyTitle(index){\r\n        this.title = this.title + \" (\" + this.values[index] + \")\";\r\n    }\r\n\r\n    setAdaptiveValue(btn, adaptVal, mainVal){\r\n   \r\n        const width  = btn.$width;\r\n\r\n        if (width < 120 &&  btn.config.value !== adaptVal ){\r\n            btn.config.value = adaptVal;\r\n            btn.refresh();\r\n          \r\n        } else if (width > 120 &&  btn.config.value !== mainVal ) {\r\n            btn.config.value = mainVal;\r\n            btn.refresh();\r\n        }\r\n    }\r\n\r\n    addOnFunctions(button){\r\n        const self = this;\r\n        \r\n        if (this.onFunc){\r\n            const names  = Object.keys  (this.onFunc);\r\n            const values = Object.values(this.onFunc);\r\n\r\n            names.forEach(function(name,i){\r\n                button.on[name] = values[i];\r\n            });\r\n\r\n        }\r\n\r\n        button.on.onAfterRender = function () {\r\n        \r\n            this.getInputNode().setAttribute(\"title\", self.title);\r\n\r\n            if (self.adaptValue){\r\n                self.setAdaptiveValue(this, self.adaptValue, self.options.value);\r\n            }\r\n        };\r\n    }\r\n\r\n    addCss(type){\r\n        const button    = this.buttonView; \r\n        const customCss = this.css || \"\";\r\n\r\n        if (type == \"primary\"){\r\n            button.css = \"webix_primary \";\r\n\r\n        } else if (type == \"delete\"){\r\n            button.css  = \"webix_danger \";\r\n\r\n        } else {\r\n            button.css = type || \"\";\r\n            button.css = button.css + \" \" + customCss || \"\";\r\n        }\r\n      \r\n    }\r\n\r\n    \r\n    addConfig(){\r\n        const button = this.buttonView; \r\n        const values = this.values;\r\n        const self   = this;\r\n\r\n        this.keys.forEach(function(option,i){\r\n\r\n            button[option] = values[i];\r\n\r\n            if (option === \"hotkey\"){\r\n                self.modifyTitle(i);\r\n            }\r\n\r\n        });\r\n\r\n        this.addOnFunctions (button);\r\n     \r\n        return button;\r\n\r\n    }\r\n\r\n    maxView(type){\r\n        this.addCss(type);\r\n        return this.addConfig();\r\n    }\r\n\r\n    minView(type){\r\n        this.addCss(type);\r\n\r\n        const button = this.buttonView;\r\n   \r\n        button.width = 50;\r\n        button.type  = \"icon\";\r\n\r\n        return this.addConfig();\r\n    }\r\n\r\n    transparentView(){\r\n        this.addCss(\"webix-transparent-btn\");\r\n\r\n        const button = this.buttonView;\r\n   \r\n        button.width = 50;\r\n        button.type  = \"icon\";\r\n        return this.addConfig();\r\n    }\r\n\r\n    static transparentDefaultState(){\r\n        const primaryClass   = \"webix-transparent-btn--primary\";\r\n        const secondaryClass = \"webix-transparent-btn\";\r\n        try{\r\n            const btnClass = document.querySelector(\".webix_btn-filter\");\r\n            if (btnClass && btnClass.classList.contains (primaryClass)){\r\n            \r\n                btnClass.classList.add   (secondaryClass);\r\n                btnClass.classList.remove(primaryClass);\r\n            }\r\n        } catch (err){\r\n            (0,_blocks_errors_js__WEBPACK_IMPORTED_MODULE_0__.setFunctionError)(\r\n                err, \r\n                \"buttons\",\r\n                \"transparentViewDefaultState\"\r\n            );\r\n        }\r\n        \r\n    }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/viewTemplates/buttons.js?");

/***/ }),

/***/ "./src/js/viewTemplates/emptyTemplate.js":
/*!***********************************************!*\
  !*** ./src/js/viewTemplates/emptyTemplate.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createEmptyTemplate\": () => (/* binding */ createEmptyTemplate)\n/* harmony export */ });\n\r\nfunction createEmptyTemplate(text, id){\r\n    const formEmptyTemplate = {   \r\n        css         : \"webix_empty-template\",\r\n        template    : text,\r\n        borderless  : true,\r\n        height      : 47\r\n    };\r\n\r\n    if (id){\r\n        formEmptyTemplate.id = id;\r\n    }\r\n\r\n    return formEmptyTemplate;\r\n     \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/viewTemplates/emptyTemplate.js?");

/***/ }),

/***/ "./src/js/viewTemplates/loadTemplate.js":
/*!**********************************************!*\
  !*** ./src/js/viewTemplates/loadTemplate.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createOverlayTemplate\": () => (/* binding */ createOverlayTemplate)\n/* harmony export */ });\n\r\nfunction createOverlayTemplate(id, text = \"Загрузка...\", hidden = false){\r\n\r\n    const template = {\r\n        view    : \"align\", \r\n        hidden  :  hidden,\r\n        align   : \"middle,center\",\r\n        body    : {  \r\n            borderless : true, \r\n            template   : text, \r\n            width      : 100,\r\n            height     : 50, \r\n        },\r\n        css     : \"global_loadTemplate\"\r\n\r\n    };\r\n \r\n\r\n    if (id){\r\n        template.id = id;\r\n    }\r\n\r\n    return template;\r\n     \r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/viewTemplates/loadTemplate.js?");

/***/ }),

/***/ "./src/js/viewTemplates/popup.js":
/*!***************************************!*\
  !*** ./src/js/viewTemplates/popup.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Popup\": () => (/* binding */ Popup)\n/* harmony export */ });\nclass Popup {\r\n\r\n    constructor (options){\r\n\r\n\r\n        this.elements   = options.elements;\r\n\r\n        this.headline  = {\r\n            template    : \"<div class='no-wrap-headline'>\" + \r\n                            options.headline + \r\n                            \"</div>\", \r\n            css         : \"webix_popup-headline\", \r\n            borderless  : true, \r\n            height      : 40 \r\n        };\r\n\r\n        this.closeBtn  =  {\r\n            view    : \"button\",\r\n            id      : \"buttonClosePopup\",\r\n            css     : \"popup_close-btn\",\r\n            type    : \"icon\",\r\n            hotkey  : \"esc\",\r\n            width   : 25,\r\n            icon    : 'wxi-close',\r\n            click   : function(){\r\n\r\n                if ( options.closeClick){\r\n                    options.closeClick();\r\n                } else {\r\n                    const popup = $$(options.config.id);\r\n                    if (popup){\r\n                        popup.destructor();\r\n                    }\r\n                }\r\n         \r\n             \r\n            }\r\n        };\r\n  \r\n        this.popupView  = {\r\n            view    : \"popup\",\r\n            css     : \"webix_popup-config\",\r\n            modal   : true,\r\n            escHide : true,\r\n            position: \"center\",\r\n            body    : {\r\n                scroll : \"y\",\r\n                rows   : [\r\n                    {   css : \"webix_popup-headline-wrapper\", \r\n                        cols: [ \r\n                            this.headline,\r\n                           // {},\r\n                            this.closeBtn,\r\n                            {width:12},\r\n                        ]\r\n                    },\r\n\r\n                    this.elements\r\n        \r\n                ]\r\n            }\r\n        };\r\n\r\n\r\n        this.options  = options.config;\r\n        this.id       = options.config.id;\r\n\r\n        this.values   = Object.values(this.options);\r\n        this.keys     = Object.keys  (this.options);\r\n\r\n      \r\n    }\r\n\r\n\r\n    addConfig(){\r\n        const popup  = this.popupView; \r\n        const values = this.values;\r\n\r\n        this.keys.forEach(function(option,i){\r\n            popup[option] = values[i];\r\n\r\n        });\r\n     \r\n        return popup;\r\n\r\n    }\r\n\r\n    createView(){\r\n        const popup  = this.popupView; \r\n        const values = this.values;\r\n\r\n        this.keys.forEach(function(option,i){\r\n            popup[option] = values[i];\r\n\r\n        });\r\n\r\n      \r\n        return webix.ui(this.addConfig());\r\n    }\r\n\r\n    showPopup(){\r\n        $$(this.id).show();\r\n     \r\n    }\r\n\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/viewTemplates/popup.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/app.js");
/******/ 	
/******/ })()
;