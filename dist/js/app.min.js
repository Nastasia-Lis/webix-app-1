/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_setId_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/setId.js */ \"./src/js/modules/setId.js\");\n/* harmony import */ var _modules_login_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/login.js */ \"./src/js/modules/login.js\");\n/* harmony import */ var _modules_header_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/header.js */ \"./src/js/modules/header.js\");\n/* harmony import */ var _modules_tableToolbar_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/tableToolbar.js */ \"./src/js/modules/tableToolbar.js\");\n/* harmony import */ var _modules_editTable_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/editTable.js */ \"./src/js/modules/editTable.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nwebix.ready(function(){\r\n    \r\n    let countRows;\r\n    let currItemTree;\r\n    function getObjStruct(obj)\r\n    {\r\n        var res = [];\r\n        for(var m in obj) {\r\n            type = typeof obj[m];\r\n            res.push(m+\":\"+type);\r\n            console.log(m+\":\"+type);\r\n        }\r\n        return res;\r\n    }\r\n\r\n    \r\n    var cur_obj = {};\r\n    var cur_obj_tree_id = \"\";\r\n  \r\n    function getCurObj() {\r\n      return cur_obj;\r\n    }\r\n  \r\n    function setCurObj(obj, tree_id) {\r\n      if ((tree_id == undefined) || (tree_id == \"\")) {\r\n        tree_id = cur_obj_tree_id;\r\n      }\r\n  \r\n      cur_obj = obj;\r\n      cur_obj_tree_id = tree_id;\r\n  \r\n      var tree = $$(\"tree\");\r\n      var titem = tree.getItem(tree_id);\r\n      \r\n      tree.updateItem(tree_id, { content:obj});\r\n      tree.refresh();\r\n      \r\n      var tableTemplate = $$(\"tableTemplate\");\r\n      let elems = tableTemplate.config.elements;\r\n      elems = [\r\n               //{ label:\"value\", type:\"text\", id:\"value\", value: titem.value}\r\n              ];\r\n  \r\n    //   if (titem.content != undefined) {\r\n    //     let propsobj = titem.content;\r\n  \r\n    //     elems.push({ label:\"Имя\"     , type:\"text\", id:\"name\"    , value:propsobj[\"name\"    ]});\r\n    //     elems.push({ label:\"Картинка\", type:\"text\", id:\"img_url\" , value:propsobj[\"img_url\" ]});\r\n    //     elems.push({ label:\"Ссылка\"  , type:\"text\", id:\"lnk_url\" , value:propsobj[\"lnk_url\" ]});\r\n    //     elems.push({ label:\"Хеш-теги\", type:\"text\", id:\"tags\"    , value:propsobj[\"tags\"    ]});\r\n    //     elems.push({ label:\"Тип\"     , type:\"text\", id:\"lnk_type\", value:propsobj[\"lnk_type\"]});\r\n    //     elems.push({ label:\"Код\"     , type:\"text\", id:\"id\"      , value:propsobj[\"id\"      ]});\r\n    //     elems.push({ label:\"Родитель\", type:\"text\", id:\"pid\"     , value:propsobj[\"pid\"     ]});\r\n    //     elems.push({ label:\"Порядок\" , type:\"text\", id:\"order\"   , value:propsobj[\"order\"   ]});\r\n        \r\n    //     tableTemplate.define(\"elements\", elems);\r\n    //     tableTemplate.setValues(propsobj);\r\n    //     tableTemplate.refresh();\r\n  \r\n    //     webix.ajax().post(\"/item/\"+titem.content.id, titem.content).then(function (data) {\r\n    //         webix.message(\"Item \"+titem.content.id+\" updated.\");\r\n    //         data = data.json();\r\n            \r\n    //     });\r\n  \r\n    //   }\r\n  \r\n      tableTemplate.define(\"elements\",elems);\r\n      tableTemplate.refresh();\r\n    }\r\n\r\n  \r\n     webix.protoUI({\r\n         name:\"edittree\"\r\n     }, webix.EditAbility, webix.ui.tree);\r\n      \r\n     \r\n     // -- SIDEBAR\r\n     \r\n     var tree = {\r\n        view:\"edittree\",\r\n        id:\"tree\",\r\n        minWidth:200,\r\n        width: 300,\r\n        minHeight:150,\r\n        editable:false,\r\n        editor:\"text\",\r\n        editValue:\"value\",\r\n        activeTitle:true,\r\n        select: true,\r\n        clipboard: true,\r\n        data: webix.ajax().get(\"/init/default/api/fields.json\").then(function (data) {\r\n            let srcTree = data.json().content;\r\n            let obj = Object.keys(srcTree);\r\n            let dataTree = [];\r\n            obj.forEach(function(data) {\r\n                dataTree.push({\"id\":data, \"value\":srcTree[data].plural});\r\n            });\r\n            return dataTree;\r\n        }),\r\n        \r\n        \r\n        on:{\r\n            onSelectChange:function (ids) {\r\n                $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.addBtnId).enable();\r\n                $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.searchId).enable();\r\n                $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.exportBtn).enable();\r\n                var tree = $$(\"tree\");\r\n                var titem = tree.getItem(ids[0]);\r\n                $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).clearAll();\r\n                if (titem == undefined) {\r\n                    webix.ajax().get(\"init/default/api/fields.json\").then(function (data) {\r\n                        data = data.json().content; //список всех items\r\n                        titem.content = data.json();\r\n                        console.log(titem.content, \"err\");\r\n                    });\r\n                } else {\r\n                    \r\n                    webix.ajax().get(\"init/default/api/fields.json\").then(function (data) {\r\n                        \r\n                        data = data.json().content[ids[0]]; //полный item\r\n                        \r\n                        let dataFields = data.fields;\r\n                        let obj = Object.keys(data.fields) //id список полей \r\n                        let columnTable = [];\r\n                        obj.forEach(function(data) {\r\n                           dataFields[data].id = data;\r\n                           dataFields[data].fillspace = true;\r\n                           dataFields[data].header= dataFields[data][\"label\"];\r\n                           columnTable.push(dataFields[data]);\r\n                        });\r\n                        $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).refreshColumns(columnTable);\r\n                        $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).parse();\r\n                        \r\n                        countRows = $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).count();\r\n                        $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.findElemetsId).setValues(countRows.toString());\r\n                    });\r\n                }  \r\n            },\r\n  \r\n            onBeforeSelect: function(data, preserve) {\r\n\r\n                if($$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).isDirty()){\r\n                    \r\n                    (0,_modules_editTable_js__WEBPACK_IMPORTED_MODULE_4__.checkFormSaved)().then(function(result){\r\n                        if(result) {\r\n                            console.log(data, preserve);\r\n                            (0,_modules_editTable_js__WEBPACK_IMPORTED_MODULE_4__.clearItem)();\r\n                            $$(\"tree\").select(data);\r\n                        } \r\n                    });\r\n                    \r\n                    return false;\r\n                }\r\n\r\n            },\r\n            onDataRequest: function (id) {\r\n            // submenu render\r\n\r\n            //let findId = info.child.find(child=> child.parent === id);\r\n\r\n            // webix.ajax().get(\"init/default/api/fields.json\").then(function (data) {\r\n            //     console.log(data.json());\r\n            // });\r\n\r\n            webix.message(\"Getting children of \" + id);\r\n           \r\n            this.parse(\r\n                webix.ajax().get(\"init/default/api/tables.json\").then(function (data) {\r\n                    \r\n                    return data.content;\r\n                })\r\n            );\r\n            \r\n            \r\n            //this.parse (findId);\r\n            //return findId;\r\n            //return false;\r\n            },\r\n  \r\n            onBeforeDrop:function(context){\r\n              console.log(\"Drop context:\", context);\r\n              context.parent = context.target; //drop as child\r\n              context.index = -1;              //as last child\r\n            }\r\n        },\r\n  \r\n        // ready:function(){\r\n        //     //--menu\r\n        //     let tree = $$(\"tree\");\r\n        //     let id = tree.getFirstId();\r\n        //     while ( id != null) {\r\n                \r\n        //         // Object.keys(data)[1] = получить идентификатор item'а\r\n        //         // data[dataIndex]  = получить весь item\r\n    \r\n        //         webix.ajax().get(\"init/default/api/fields.json\").then(function (data) {\r\n                    \r\n        //             data = data.json().content; //список всех items\r\n        //             let dataContent =  data[dataIndex];\r\n        //             //$$(\"tree\").updateItem(dataIndex, { content:dataContent});\r\n\r\n        //             });\r\n                    \r\n        //             id = tree.getNextId(id);\r\n        //         }\r\n                \r\n        //     }\r\n        };\r\n  \r\n\r\n\r\n    // function tree_is_root(id)\r\n    // {\r\n    //     var res = undefined;\r\n    //     var tree = $$(\"tree\");\r\n    //     var titem = tree.getItem(id);\r\n    //     if (titem) {\r\n    //         res = (titem.$level == 1);\r\n    //     }\r\n    //     return res;\r\n    // }\r\n  \r\n    // function tree_list_root()\r\n    // {\r\n    //     var tree = $$(\"tree\");\r\n    //     var id = tree.getFirstId();\r\n    //     while (id != null) {\r\n    //         var tree_node = tree.getItem(id);\r\n            \r\n    //         if (tree_node.id == tree_node.content.pid) {\r\n    //             console.log(\"root: \",id,tree_node.content.name);\r\n    //         };\r\n            \r\n    //         id = tree.getNextId(id);\r\n    //     }\r\n    // }\r\n  \r\n    function tree_get_prev_node(tree_node)\r\n    {\r\n        var res = null;\r\n        var tree = $$(\"tree\");\r\n  \r\n        if (tree_node.id == tree_node.content.pid) {\r\n            var id = tree.getFirstId();\r\n            while (id != null) {\r\n                var node = tree.getItem(id);\r\n                \r\n                if (node.id == node.content.pid) {\r\n                    //console.log(\"root: \",id,node.content.name);\r\n                    if (node.id == tree_node.id) {\r\n                        break;\r\n                    };\r\n                    res = node;\r\n                };\r\n                \r\n                id = tree.getNextId(id);\r\n            }\r\n        } else {\r\n            res = tree.getPrevSiblingId(tree_node.id);\r\n            if (res) {\r\n                res = tree.getItem(res);\r\n            }\r\n        }\r\n  \r\n        return res;\r\n    }\r\n  \r\n    function tree_get_next_node(tree_node)\r\n    {\r\n        var res = null;\r\n        var tree = $$(\"tree\");\r\n  \r\n        if (tree_node.id == tree_node.content.pid) {\r\n            var id = tree.getLastId();\r\n            while (id != null) {\r\n                var node = tree.getItem(id);\r\n                \r\n                if (node.id == node.content.pid) {\r\n                    //console.log(\"root: \",id,node.content.name);\r\n                    if (node.id == tree_node.id) {\r\n                        break;\r\n                    };\r\n                    res = node;\r\n                };\r\n                \r\n                id = tree.getPrevId(id);\r\n            }\r\n        } else {\r\n            res = tree.getNextSiblingId(tree_node.id);\r\n            if (res) {\r\n                res = tree.getItem(res);\r\n            }\r\n        }\r\n  \r\n        return res;\r\n    }\r\n  \r\n\r\n    // --- TABLE\r\n    var tableTemplate = {\r\n        view:\"datatable\",\r\n        id: _modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId,\r\n        css:\"webix_table-style webix_header_border webix_data_border\",\r\n        resizeColumn: true,\r\n        autoConfig: true,\r\n        pager:_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.pagerId,\r\n        minHeight:300,\r\n        footer: true,\r\n        minWidth:500, \r\n        select:true,\r\n        minColumnWidth:200,\r\n        on:{\r\n            onAfterSelect(id){\r\n\r\n                let values = $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).getItem(id); \r\n                function toEditForm () {\r\n                    console.log(values)\r\n                    $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).setValues(values);\r\n                    $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveNewBtnId).hide();\r\n                    $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId).show();\r\n                    $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.addBtnId).hide(); \r\n                }\r\n                \r\n                if($$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).isDirty()){\r\n                    (0,_modules_editTable_js__WEBPACK_IMPORTED_MODULE_4__.popupExec)(\"Данные не сохранены\").then(\r\n                        function(){\r\n                            $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).clear();\r\n                            $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.delBtnId).enable();\r\n                            toEditForm();\r\n                    }); \r\n                } else {\r\n                    (0,_modules_editTable_js__WEBPACK_IMPORTED_MODULE_4__.createEditFields)();\r\n                    toEditForm();\r\n                }\r\n                \r\n            },\r\n\r\n\r\n            onAfterLoad:function(){\r\n                $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).removeView(\"inputsTable\");\r\n                (0,_modules_editTable_js__WEBPACK_IMPORTED_MODULE_4__.defaultStateForm) ();\r\n                \r\n                if (!this.count())\r\n                  this.showOverlay(\"Ничего не найдено\");\r\n                \r\n                if (this.count())\r\n                  this.hideOverlay();  \r\n\r\n                  \r\n            },  \r\n\r\n            // \"onResize\":function(){ \r\n            //     let width = window.innerWidth;\r\n            //     if (width > 1200){\r\n            //         console.log(\"больше\");\r\n            //         $$(tableId).define(\"width\", 800);\r\n            //     } else {\r\n            //         console.log(\"меньше\");\r\n            //     }\r\n                \r\n            // },\r\n\r\n            onAfterDelete: function() {\r\n                if (!this.count())\r\n                  this.showOverlay(\"Ничего не найдено\");\r\n            },\r\n\r\n            onAfterAdd: function() {\r\n                countRows+=1;\r\n                $$(_modules_setId_js__WEBPACK_IMPORTED_MODULE_0__.findElemetsId).setValues(countRows.toString());\r\n                this.hideOverlay();\r\n            }\r\n        },\r\n        ready:function(){\r\n            if (!this.count()){ \r\n                webix.extend(this, webix.OverlayBox);\r\n                this.showOverlay(\"<div style='...'>Ничего не найдено</div>\");\r\n            }\r\n        }\r\n    };\r\n  \r\n\r\n\r\n    /// LAYOUT\r\n\r\n    // webix.ui({\r\n    //     view:\"scrollview\",\r\n    //             id:\"layout\", \r\n    //             scroll:\"y\", \r\n    //             body:{\r\n    //                 rows: [\r\n    //                     header.header(),\r\n    //                     {   id:\"adaptive\",\r\n    //                         rows:[ ]\r\n    //                     },\r\n    //                     {   id:\"mainContent\",\r\n    //                         responsive:\"adaptive\", \r\n    //                         cols:[\r\n    //                             tree,\r\n    //                             {   view:\"resizer\", \r\n    //                                 id:\"resizeOne\", \r\n    //                                 class:\"webix_resizers\",\r\n    //                             },\r\n    //                             {   id:\"tableContainer\",\r\n    //                                 rows:[\r\n    //                                     tableToolbar.tableToolbar(),\r\n    //                                     tableTemplate,\r\n    //                                 ]\r\n    //                             },\r\n    //                             {   view:\"resizer\", \r\n    //                                 id:\"resizeTwo\", \r\n    //                                 class:\"webix_resizers\"\r\n    //                             },\r\n    //                                 editTableBar,\r\n                                \r\n    //                         ]\r\n    //                     },\r\n              \r\n    //                 ]\r\n    //             },\r\n\r\n    // });\r\n  \r\n\r\n    webix.ui({\r\n        view:\"scrollview\",\r\n                id:\"layout\", \r\n                scroll:\"y\", \r\n                body:{\r\n                    cells: [ \r\n                        {id: \"userAuth\", \r\n                        cols: [\r\n                            {},\r\n                            {   rows:[\r\n                                    {},\r\n                                    _modules_login_js__WEBPACK_IMPORTED_MODULE_1__.formLogin,\r\n                                    {}\r\n                                ]},\r\n                            {}\r\n                        ]},\r\n                        //{ template:\"Details page<br>not implemented :)<br><button >Back</button>\", id:\"mainContent\" },\r\n                        {id:\"mainLayout\", rows: [\r\n                            \r\n                            _modules_header_js__WEBPACK_IMPORTED_MODULE_2__.header(),\r\n                            {   id:\"adaptive\",\r\n                                rows:[ ]\r\n                            },\r\n                            {   id:\"mainContent\",\r\n                                responsive:\"adaptive\", \r\n                                cols:[\r\n                                    tree,\r\n                                    {   view:\"resizer\", \r\n                                        id:\"resizeOne\", \r\n                                        class:\"webix_resizers\",\r\n                                    },\r\n                                    {   id:\"tableContainer\",\r\n                                        rows:[\r\n                                            _modules_tableToolbar_js__WEBPACK_IMPORTED_MODULE_3__.tableToolbar(),\r\n                                            tableTemplate,\r\n                                        ]\r\n                                    },\r\n                                    {   view:\"resizer\", \r\n                                        id:\"resizeTwo\", \r\n                                        class:\"webix_resizers\"\r\n                                    },\r\n                                        _modules_editTable_js__WEBPACK_IMPORTED_MODULE_4__.editTableBar,\r\n                                    \r\n                                ]\r\n                            },\r\n                \r\n                        ]}\r\n                    ],\r\n                },\r\n\r\n    });\r\n\r\n   \r\n    Backbone.history.start();\r\n\r\n    var add_ctx = {\r\n        view:\"contextmenu\",\r\n        id:\"cm\",\r\n        data:[\r\n                \"Добавить\",\r\n                \"Переименовать\",\r\n                { $template:\"Separator\" },\r\n                \"Поднять\",\r\n                \"Опустить\",\r\n                { $template:\"Separator\" },\r\n                \"Свернуть всё\",\r\n                \"Развернуть всё\",\r\n                { $template:\"Separator\" },\r\n                \"Удалить\"\r\n            ],\r\n       master: $$(\"tree\"),\r\n       on:{\r\n           onMenuItemClick:function(id){\r\n               var context = this.getContext();\r\n               console.log(\"Context: \",context);\r\n               var tree = $$(\"tree\");\r\n               var titem = tree.getItem(context.id);\r\n               //var titem = tree.getSelectedId();\r\n               console.log(\"Tree item\",titem);\r\n  \r\n               var menu = this.getMenu(id);\r\n               var cmd = menu.getItem(id).value\r\n               webix.message(cmd);\r\n               console.log(cmd);\r\n  \r\n               switch (cmd) {\r\n                   case \"Добавить\": {\r\n                       var text = prompt(\"Имя нового подэлемента '\"+titem.value+\"'\", \"\");\r\n                       if (text != null) { // null if cancel pressed\r\n                           webix.ajax().get(\"/add?pid=\"+titem.id+\"&name=\"+text).then(function (data) {\r\n                               msg = data.text()\r\n                               console.log(msg);\r\n                               const newid = parseInt(msg, 10);\r\n                               if (isNaN(newid)) {\r\n                                   webix.message(\"Ошибка при добавлении: \"+msg);\r\n                               } else {\r\n                                   webix.message(\"Элемент с id=\"+msg+\" добавлен.\");\r\n                                   tree.add({value: text, content:{name:text}, id: newid}, 0, context.id);\r\n                                   tree.refresh();\r\n                               }\r\n                               return msg;\r\n                           })\r\n                       }\r\n                       break;\r\n                   }\r\n                   case \"Add to root\": {\r\n                       var text = prompt(\"Enter name (new child of root)\", \"\");\r\n                       if (text != null) { // null if cancel pressed\r\n                           tree.add({value: text}, 0);\r\n                       }\r\n                       break;\r\n                   } \r\n                   case \"Add many\": {\r\n                       var text = prompt(\"Enter names (new child of '\"+titem.value+\"')\", \" \");\r\n                       if ((text != null) && (text.length > 0)) { // null if cancel pressed\r\n                           sep = text[0];\r\n                           flds = text.substr(1).split(sep);\r\n                           flds.reverse();\r\n                           flds.forEach(function(item){\r\n                               tree.add({value: item, opt:item+\"_opt\"}, 0, context.id);\r\n                           })\r\n                       }\r\n                       break;\r\n                   }\r\n                   case \"Переименовать\": {\r\n                       var text = prompt(\"Новое имя\", titem.value);\r\n                       if (text != null) { // null if cancel pressed\r\n                           webix.ajax().get(\"/ren?pid=\"+titem.id+\"&name=\"+text).then(function (data) {\r\n                               msg = data.text()\r\n                               console.log(msg);\r\n                               if (msg==\"OK\") {\r\n                                   webix.message(\"Элемент с id=\"+titem.id+\" переименован.\");\r\n                                   titem.value = text;\r\n                                   tree.refresh();\r\n                               } else {\r\n                                   webix.message(\"Ошибка при переименовании: \"+msg);\r\n                               }\r\n                               return msg;\r\n                           })\r\n                       }\r\n                       break;\r\n                   }\r\n                   case \"Удалить\": {\r\n                       var r = confirm(\"Удалить элемент '\"+titem.value+\"'?\");\r\n                       if (r == true) {\r\n                         webix.ajax().get(\"/del/\"+titem.id).then(function (data) {\r\n                             msg = data.text()\r\n                             console.log(msg);\r\n                             if (msg==\"OK\") {\r\n                                 webix.message(\"Элемент с id=\"+titem.id+\" удалён.\");\r\n                                 tree.remove(context.id);\r\n                                 tree.refresh();\r\n                             } else {\r\n                                 webix.message(\"Ошибка при удалении: \"+msg);\r\n                             }\r\n                             return msg;\r\n                         })\r\n                       }\r\n                       break;\r\n                   }\r\n                   case \"Поднять\": {\r\n                       var parent_item = tree.getParentId(titem.id);\r\n                       console.log(\"parent:\",parent_item);\r\n                       var nexts_item = tree.getPrevSiblingId(titem.id);\r\n                       console.log(\"prev sibling:\",nexts_item);\r\n                       var next_item = tree.getPrevId(titem.id);\r\n                       console.log(\"prev item:\",next_item);\r\n                       var nexts_item = tree.getNextSiblingId(titem.id);\r\n                       console.log(\"next sibling:\",nexts_item);\r\n                       var next_item = tree.getNextId(titem.id);\r\n                       console.log(\"next item:\",next_item);\r\n                       var index = tree.getIndexById(titem.id);\r\n                       console.log(\"index:\",index);\r\n                       var index = tree.getBranchIndex(titem.id);\r\n                       console.log(\"branch index:\",index);\r\n                       var index = tree.getFirstId();\r\n                       console.log(\"tree first id:\",index);\r\n                       var index = tree.getLastId();\r\n                       console.log(\"tree last id:\",index);\r\n                       var pnode = tree_get_prev_node(titem);\r\n                       console.log(\"prev\", pnode);\r\n                       var nnode = tree_get_next_node(titem);\r\n                       console.log(\"next\", nnode);\r\n                       //tree_list_root();\r\n  \r\n                       var prev = tree_get_prev_node(titem);\r\n                       if (prev) {\r\n                           console.log(\"Предыдущий элемент: \"+prev.id);\r\n  \r\n                           var details = {};\r\n                           //console.log(parent_item);\r\n                           if (titem.content.id == titem.content.pid) { // for root items\r\n                               var cur_index  = tree.getBranchIndex(titem.id);\r\n                               if (cur_index <= 0) {\r\n                                   var cur_index  = tree.getIndexById(titem.id);\r\n                                   details.parent = \"0\"; //tree.getParentId(titem.id);\r\n                                   var new_index  = cur_index - 1;\r\n                                   webix.message(\"Корневые папки перемещаются только изменением поля Порядок\");\r\n                               } else {\r\n                                   //details.parent = tree.getParentId(titem.id);\r\n                                   var new_index  = cur_index - 1;\r\n                               }\r\n                           } else {\r\n                               var cur_index  = tree.getBranchIndex(titem.id);\r\n                               details.parent = tree.getParentId(titem.id);\r\n                               var new_index  = cur_index - 1;\r\n                           }\r\n                           /*\r\n                           if (titem.content.id == titem.content.pid) { // for root items\r\n                               var cur_index  = tree.getIndexById(titem.id);\r\n                               var new_index  = tree.getIndexById(prev.id);\r\n                               if (tree.getParentId(prev.id)) {\r\n                                   details.parent = tree.getParentId(prev.id);\r\n                               }\r\n                           } else {\r\n                               var cur_index  = tree.getBranchIndex(titem.id);\r\n                               details.parent = tree.getParentId(titem.id);\r\n                               var new_index  = cur_index - 1;\r\n                           }\r\n                           */\r\n  \r\n                           tree.move(titem.id, new_index,undefined,details);\r\n                           //tree.move(titem.id, new_index);\r\n                           console.log(\"Index: \"+cur_index+\" => \"+new_index);\r\n                           tree.refresh();\r\n  \r\n                           var prev_order = prev.content.order;\r\n                           prev.content.order = titem.content.order;\r\n                           titem.content.order = prev_order;\r\n  \r\n                           webix.ajax().post(\"/item/\"+titem.content.id, titem.content).then(function (data) {\r\n                               console.log(\"Order \"+titem.content.id+\" updated to \"+titem.content.order+\".\");\r\n                               data = data.json();\r\n                               console.log(data);\r\n                           });\r\n                           \r\n                           webix.ajax().post(\"/item/\"+prev.content.id, prev.content).then(function (data) {\r\n                               console.log(\"Order \"+prev.content.id+\" updated to \"+prev.content.order+\".\");\r\n                               data = data.json();\r\n                               console.log(data);\r\n                           });\r\n                       } else {\r\n                           webix.message(\"Ошибка: нет предыдущего элемента\");\r\n                           console.log(\"Ошибка: нет предыдущего элемента\");\r\n                       }\r\n                       break;\r\n                   }\r\n                   case \"Опустить\": {\r\n                       var prev = tree_get_next_node(titem);\r\n                       if (prev) {\r\n                           console.log(\"Следующий элемент: \"+prev.id);\r\n  \r\n                           var details = {};\r\n                           //console.log(parent_item);\r\n                           if (titem.content.id == titem.content.pid) { // for root items\r\n                               var cur_index  = tree.getBranchIndex(titem.id);\r\n                               if (cur_index <= 0) {\r\n                                   var cur_index  = tree.getIndexById(titem.id);\r\n                                   details.parent = \"0\"; //tree.getParentId(titem.id);\r\n                                   var new_index  = cur_index + 1;\r\n                                   webix.message(\"Корневые папки перемещаются только изменением поля Порядок\");\r\n                               } else {\r\n                                   //details.parent = tree.getParentId(titem.id);\r\n                                   var new_index  = cur_index + 1;\r\n                               }\r\n                           } else {\r\n                               var cur_index  = tree.getBranchIndex(titem.id);\r\n                               details.parent = tree.getParentId(titem.id);\r\n                               var new_index  = cur_index + 1;\r\n                           }\r\n  \r\n                           if (details.parent == \"0\") {\r\n                               tree.move(titem.id, new_index, tree, details);\r\n                           } else {\r\n                               tree.move(titem.id, new_index,undefined,details);\r\n                           };\r\n                           //tree.move(titem.id, new_index);\r\n                           console.log(\"Index: \"+cur_index+\" => \"+new_index);\r\n                           tree.refresh();\r\n  \r\n                           var prev_order = prev.content.order;\r\n                           prev.content.order = titem.content.order;\r\n                           titem.content.order = prev_order;\r\n  \r\n                           webix.ajax().post(\"/item/\"+titem.content.id, titem.content).then(function (data) {\r\n                               console.log(\"Order \"+titem.content.id+\" updated to \"+titem.content.order+\".\");\r\n                               data = data.json();\r\n                               console.log(data);\r\n                           });\r\n                           \r\n                           webix.ajax().post(\"/item/\"+prev.content.id, prev.content).then(function (data) {\r\n                               console.log(\"Order \"+prev.content.id+\" updated to \"+prev.content.order+\".\");\r\n                               data = data.json();\r\n                               console.log(data);\r\n                           });\r\n                       } else {\r\n                           webix.message(\"Ошибка: нет следующего элемента\");\r\n                           console.log(\"Ошибка: нет предыдущего элемента\");\r\n                       }\r\n                       break;\r\n                   }\r\n                   case \"Развернуть всё\": {\r\n                       console.log(\"Развернуть всё\");\r\n                       tree.openAll();\r\n                       break;\r\n                   }\r\n                   case \"Свернуть всё\": {\r\n                       console.log(\"Свернуть всё\");\r\n                       tree.closeAll();\r\n                       break;\r\n                   }\r\n                   case \"Info\": {\r\n                       var propsText = $$(\"propsarea\");\r\n                       console.log(titem.config);\r\n                       propsText.setValue(getObjStruct(tree).sort().join(\"\\n\"));\r\n                       //for(s in getObjStruct(tree)) {\r\n                       //    propsText.setValue(propsText.getValue()+\"\\n\"+s);\r\n                       //}\r\n                       break;\r\n                   }\r\n               }\r\n           }\r\n       }\r\n    };\r\n    webix.ui(add_ctx);\r\n  \r\n  \r\n    function open_subtree() {\r\n        var tree = $$(\"tree\");\r\n        var titem = tree.getSelectedId();\r\n        console.log(\"open\",titem);\r\n        if (titem != null) {\r\n            tree.open(titem);\r\n            console.log(\"opened\",titem);\r\n        }\r\n    }\r\n  \r\n    function close_subtree() {\r\n        var tree = $$(\"tree\");\r\n        var titem = tree.getSelectedId();\r\n        if (titem != null) {\r\n            tree.close(titem);\r\n        }\r\n    }\r\n  \r\n    function enter_subtree() {\r\n        var tree = $$(\"tree\");\r\n        var nodeid = tree.getSelectedId();\r\n        if (nodeid != null) {\r\n            titem = tree.getItem(nodeid);\r\n            childs_count = titem.$count;\r\n            console.log(titem.value, childs_count);\r\n  \r\n            if (childs_count > 0) {\r\n                if (tree.isBranchOpen(nodeid)) {\r\n                    tree.close(nodeid);\r\n                } else {\r\n                    tree.open(nodeid);\r\n                }\r\n            } else {\r\n                var text = prompt(\"Enter new name\", titem.value);\r\n                if (text != null) { // null if cancel pressed\r\n                    titem.value = text;\r\n                    tree.refresh();\r\n                }\r\n            }\r\n        }\r\n    }\r\n  \r\n  \r\n    webix.UIManager.addHotKey(\"subtract\", open_subtree, $$(\"tree\"));\r\n    webix.UIManager.addHotKey(\"ctrl-up\", close_subtree, $$(\"tree\"));\r\n    webix.UIManager.addHotKey(\"enter\", enter_subtree, $$(\"tree\"));\r\n  \r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/app.js?");

/***/ }),

/***/ "./src/js/modules/editTable.js":
/*!*************************************!*\
  !*** ./src/js/modules/editTable.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"editTableBar\": () => (/* binding */ editTableBar),\n/* harmony export */   \"notify\": () => (/* binding */ notify),\n/* harmony export */   \"createEditFields\": () => (/* binding */ createEditFields),\n/* harmony export */   \"popupExec\": () => (/* binding */ popupExec),\n/* harmony export */   \"defaultStateForm\": () => (/* binding */ defaultStateForm),\n/* harmony export */   \"checkFormSaved\": () => (/* binding */ checkFormSaved),\n/* harmony export */   \"clearItem\": () => (/* binding */ clearItem)\n/* harmony export */ });\n/* harmony import */ var _setId_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setId.js */ \"./src/js/modules/setId.js\");\n\r\n\r\n//--- bns\r\nfunction saveItem(){        \r\n    let list = $$( _setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId );  \r\n    let itemData = $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).getValues();    \r\n    \r\n    if($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).validate() ){\r\n       \r\n        if( itemData.id ) {\r\n            list.updateItem(itemData.id, itemData);\r\n            clearItem();\r\n            notify (\"success\",\"Данные сохранены\");\r\n            defaultStateForm ();\r\n            $$(\"inputsTable\").hide();\r\n            $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).clearSelection();}\r\n        else {\r\n            list.add( itemData );\r\n            clearItem();\r\n            notify (\"success\",\"Данные добавлены\");\r\n        }    \r\n    } else {\r\n        notify (\"error\",\"Заполните пустые поля\");\r\n    }\r\n}\r\n\r\nfunction addItem () {\r\n    createEditFields();\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.delBtnId).disable();\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId).hide();\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.addBtnId).hide();\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveNewBtnId).show();\r\n}\r\n\r\n\r\nfunction saveNewItem (){\r\n    \r\n    if($$( _setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId ).validate() ) {\r\n        if($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).isDirty()){\r\n            $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).add($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).getValues());\r\n            clearItem();\r\n            notify (\"success\",\"Данные добавлены\"); \r\n            defaultStateForm ();\r\n            $$(\"inputsTable\").hide();\r\n        }else {\r\n            notify (\"debug\",\"Форма пуста\");\r\n        }\r\n    } else {\r\n        notify (\"error\",\"Заполните пустые поля\");\r\n    }\r\n}\r\n\r\n\r\nfunction removeItem() {\r\n    popupExec(\"Запись будет удалена\").then(\r\n        function(){\r\n            $$( _setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId ).remove($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).getValues().id);\r\n            clearItem();\r\n            if ($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId)) {\r\n                $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId).hide();\r\n                $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.addBtnId).show();\r\n            }\r\n            $$(\"inputsTable\").hide();\r\n            notify (\"success\",\"Данные удалены\");\r\n    });\r\n    defaultStateForm ();\r\n    \r\n}\r\n\r\n\r\n\r\nfunction clearForm(){\r\n    if ($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId).isVisible()){\r\n        $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).setDirty(true);\r\n    } \r\n    \r\n    if($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).isDirty()){\r\n        popupExec(\"Форма будет очищена\").then(\r\n            function(){\r\n                clearItem();\r\n                $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).clearSelection();\r\n                defaultStateForm ();\r\n                $$(\"inputsTable\").hide();\r\n                notify (\"success\",\"Форма очищена\");\r\n        });\r\n    } else {\r\n        notify (\"debug\",\"Форма пуста\");\r\n    }\r\n}\r\n\r\n//--- bns\r\n\r\n\r\n\r\n\r\n//--- components\r\n\r\nfunction createEditFields () {\r\n    \r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).attachEvent(\"onBeforeLoad\", webix.once(function( ){\r\n\r\n\r\n    }));\r\n    \r\n\r\n\r\n    let columnsData = $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.tableId).getColumns();\r\n\r\n    if(Object.keys($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).elements).length==0  ){\r\n        //let headersArray= $$(tableId).getColumns();\r\n        //console.log(columnsData[0].label)\r\n        let inputsArray = [];\r\n        columnsData.forEach((el) => {\r\n            \r\n            inputsArray.push(\r\n                {\r\n                view:\"text\", \r\n                name:el.id, \r\n                label:el.label, \r\n                }\r\n            );\r\n        });\r\n        let inpObj = {margin:8,id:\"inputsTable\", rows:inputsArray};\r\n        $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.cleanBtnId).enable(); \r\n        $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.delBtnId).enable();\r\n        return ($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).addView( inpObj, 1));\r\n    } else {\r\n        //$$(editFormId).refresh();\r\n        $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.cleanBtnId).enable(); \r\n        $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.delBtnId).enable();\r\n        $$(\"inputsTable\").show();\r\n    }\r\n}\r\n\r\nfunction clearItem(){\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).clear();\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId).clearValidation();\r\n    defaultStateForm ();\r\n}\r\n\r\nfunction defaultStateForm () {\r\n    if ($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveNewBtnId).isVisible()) {\r\n\r\n        $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveNewBtnId).hide();\r\n    } else if ($$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId).isVisible()){\r\n        $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId).hide();\r\n    }\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.addBtnId).show();\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.delBtnId).disable();\r\n    $$(_setId_js__WEBPACK_IMPORTED_MODULE_0__.cleanBtnId).disable();\r\n}\r\n\r\nfunction popupExec (titleText) { \r\n    return webix.confirm({\r\n        width:300,\r\n        ok: 'Да',\r\n        cancel: 'Отмена',\r\n        title:titleText,\r\n        text:\"Вы уверены, что хотите продолжить?\"\r\n    });\r\n}\r\n\r\nfunction notify (typeNotify,textMessage) {\r\n    webix.message.position = \"bottom\";\r\n    webix.message({type:typeNotify,  text:textMessage});\r\n}\r\n\r\n\r\nfunction checkFormSaved() {\r\n    return new webix.promise(function(resolve){\r\n      webix.confirm(\r\n        {\r\n          title: 'Данные не сохранены',\r\n          ok: 'Да',\r\n          width:300,\r\n          cancel: 'Отмена',\r\n          text: 'Вы уверены, что хотите продолжить?',\r\n          callback: function (result) {\r\n            if (result) {\r\n              resolve(true);\r\n            } else {\r\n              resolve(false);\r\n            }\r\n          }\r\n        }\r\n      );\r\n    });\r\n}\r\n\r\n//--- components\r\n\r\n\r\n\r\n\r\n\r\nlet editTableBar = {\r\n    view:\"form\", \r\n    id:_setId_js__WEBPACK_IMPORTED_MODULE_0__.editFormId,\r\n    container:\"webix__form-container\", \r\n    minHeight:350,\r\n    minWidth:350,\r\n    width: 350,\r\n    scroll:true,\r\n    elements:[\r\n        {margin:5,rows:[{margin:5, rows:[\r\n                {margin:5, \r\n                borderless:true,\r\n                cols: [\r\n                    {   view:\"button\", \r\n                        id:_setId_js__WEBPACK_IMPORTED_MODULE_0__.cleanBtnId,\r\n                        height:48, \r\n                        disabled:true,\r\n                        value:\"Очистить форму\", click:clearForm},\r\n                        \r\n                    {   view:\"button\", \r\n                        id:_setId_js__WEBPACK_IMPORTED_MODULE_0__.delBtnId,\r\n                        disabled:true,\r\n                        height:48,\r\n                        width:100,\r\n                        css:\"webix_danger\", \r\n                        type:\"icon\", \r\n                        icon:\"wxi-trash\", \r\n                        click:removeItem,\r\n                        on: {\r\n                            onAfterRender: function () {\r\n                                this.getInputNode().setAttribute(\"title\",\"Удалить запись из таблицы\");\r\n                            }\r\n                        } \r\n                    },\r\n                ]\r\n        },\r\n            \r\n       \r\n        ]},\r\n\r\n       {margin:10, rows:[ { \r\n            view:\"button\", \r\n            id:_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveBtnId,\r\n            hidden:true, \r\n            value:\"Сохранить\", \r\n            height:48, \r\n            css:\"webix_primary\", \r\n            click:saveItem\r\n        },\r\n        { \r\n            view:\"button\", \r\n            id:_setId_js__WEBPACK_IMPORTED_MODULE_0__.addBtnId,\r\n            value:\"Добавить новую запись\", \r\n            height:48,\r\n            disabled:true,\r\n            css:\"webix_primary\", \r\n            click:addItem\r\n        },\r\n        { \r\n            view:\"button\", \r\n            id:_setId_js__WEBPACK_IMPORTED_MODULE_0__.saveNewBtnId,\r\n            value:\"Сохранить новую запись\",\r\n            hidden:true,  \r\n            height:48,\r\n            css:\"webix_primary\", \r\n            click:saveNewItem\r\n        },\r\n\r\n        ]},\r\n        \r\n    ]},\r\n    {}\r\n    \r\n    \r\n    ],\r\n    \r\n    rules:{\r\n        $all:webix.rules.isNotEmpty\r\n    },\r\n    ready:function(){\r\n        this.validate();\r\n        console.log(window.innerWidth)\r\n    },\r\n\r\n};\r\n\r\n    \r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/modules/editTable.js?");

/***/ }),

/***/ "./src/js/modules/header.js":
/*!**********************************!*\
  !*** ./src/js/modules/header.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"header\": () => (/* binding */ header)\n/* harmony export */ });\n//import {hideInterfaceElements} from './userLogin.js';\r\n\r\nfunction header() {\r\n    // function logoutClick () {\r\n    //     localStorage.setItem(\"authSuccess\", 0);\r\n    //     hideInterfaceElements ();\r\n    // }\r\n    \r\n    const header = {\r\n        view: \"toolbar\", \r\n        id: \"header\",\r\n        padding:10,\r\n        css:\"webix_header-style\",\r\n        //hidden:true, \r\n        elements: [\r\n            //{ view: \"label\", label: \"App\"},\r\n            {   view:\"label\",\r\n                label:\"<img src='/img/logo.png' style='height:35px; margin: 5px;'>\" \r\n            },\r\n            {   view:\"button\",  \r\n                type:\"icon\", \r\n                icon:\"wxi-file\",\r\n                css:\"webix_btn-import\", \r\n                label:\"Импорт\", \r\n                height:48,\r\n                width: 130,\r\n                on: {\r\n                    onAfterRender: function () {\r\n                        this.getInputNode().setAttribute(\"title\",\"Импорт файла с таблицами\");\r\n                    }\r\n                }  \r\n            },\r\n            {   view:\"button\", \r\n                label:\"Выйти\",\r\n                height:48, \r\n                width: 120,\r\n                on: {\r\n                    onAfterRender: function () {\r\n                        this.getInputNode().setAttribute(\"title\",\"Выйти из аккаунта\");\r\n                    }\r\n                } ,\r\n            }\r\n            \r\n        ]\r\n    };\r\n\r\n    return header;\r\n}\n\n//# sourceURL=webpack://webix/./src/js/modules/header.js?");

/***/ }),

/***/ "./src/js/modules/login.js":
/*!*********************************!*\
  !*** ./src/js/modules/login.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"formLogin\": () => (/* binding */ formLogin),\n/* harmony export */   \"routes\": () => (/* binding */ routes)\n/* harmony export */ });\n\r\nvar routes = new (Backbone.Router.extend({\r\n    routes:{\r\n        \"\":\"index\", \r\n        \"content\":\"content\" \r\n    },\r\n    content:function(){\r\n        $$(\"mainLayout\").show(); \r\n    },\r\n    index:function(){\r\n        $$(\"userAuth\").show();\r\n    }\r\n}));\r\n\r\n// function loginCheck () {\r\n//     let authSuccessVal = webix.storage.local.get(\"authSuccess\");\r\n//     if (authSuccessVal){\r\n//         showInterfaceElements();\r\n//     }\r\n// }\r\n\r\nfunction submit(){\r\n    // $$(\"formAuth\").attachEvent(\"onAfterSelect\", function(){\r\n    //     routes.navigate(\"app/\", { trigger:true });\r\n    //     $$(\"mainContent\").show();\r\n    // });\r\n\r\n    routes.navigate(\"content\", { trigger:true });\r\n    $$(\"mainContent\").show();\r\n    //$$(\"mainContent\").show();\r\n\r\n    //Backbone.history.start();\r\n\r\n    \r\n    // this.getParentView().validate();\r\n    \r\n    // let userData = (($$(\"formAuth\").getValues()));\r\n    // if (userAuthData.userAuthData().username ===userData.username&&userAuthData.userAuthData().password ===userData.password){\r\n    //     showInterfaceElements ();\r\n    //     localStorage.setItem(\"authSuccess\", 1);\r\n    // } else {\r\n    //     webix.message({ type:\"error\", text:\"Неправильный логин или пароль\" });\r\n    //     localStorage.setItem(\"authSuccess\", 0);\r\n    // }\r\n}\r\n\r\n// function showInterfaceElements (){\r\n//     $$(\"formAuth\").hide();\r\n//     $$(\"header\").show();\r\n//     $$(\"sidebarMain\").show();\r\n//     $$(\"sidebarMain\").remove(\"userAuth\");\r\n//     $$(\"sidebarMain\").select(\"userProf\");\r\n// }\r\n\r\n// function hideInterfaceElements (){\r\n//     $$(\"formAuth\").show();\r\n//     $$(\"header\").hide(); \r\n//     $$(\"sidebarMain\").add({id: \"userAuth\", icon: \"mdi mdi-account\", value:\"Аутентификация\"},0);\r\n//     $$(\"sidebarMain\").select(\"userAuth\");\r\n//     $$(\"sidebarMain\").hide();\r\n// }\r\n\r\nconst formLogin = {\r\n    view:\"form\",\r\n    id:\"formAuth\",\r\n    maxWidth: 300,\r\n    borderless:true,\r\n    elements: [\r\n        {view:\"text\", label:\"Логин\", name:\"username\", },\r\n        {view:\"text\", label:\"Пароль\", name:\"password\",\r\n        type:\"password\"},\r\n        {view:\"button\", value: \"Войти\", css:\"webix_primary\",\r\n        hotkey: \"enter\", align:\"center\", click:submit}, \r\n    ],\r\n\r\n    on:{\r\n        onValidationError:function(key, obj){\r\n            var text;\r\n            if (key == \"username\")\r\n            text = \"Username can't be empty\";\r\n            if (key == \"password\")\r\n            text = \"Password can't be empty\";\r\n            webix.message({ type:\"error\", text:text });\r\n        }\r\n    },\r\n\r\n    elementsConfig:{\r\n        labelPosition:\"top\"\r\n    }\r\n\r\n};\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/modules/login.js?");

/***/ }),

/***/ "./src/js/modules/setId.js":
/*!*********************************!*\
  !*** ./src/js/modules/setId.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tableId\": () => (/* binding */ tableId),\n/* harmony export */   \"pagerId\": () => (/* binding */ pagerId),\n/* harmony export */   \"searchId\": () => (/* binding */ searchId),\n/* harmony export */   \"findElemetsId\": () => (/* binding */ findElemetsId),\n/* harmony export */   \"exportBtn\": () => (/* binding */ exportBtn),\n/* harmony export */   \"editFormId\": () => (/* binding */ editFormId),\n/* harmony export */   \"saveBtnId\": () => (/* binding */ saveBtnId),\n/* harmony export */   \"addBtnId\": () => (/* binding */ addBtnId),\n/* harmony export */   \"delBtnId\": () => (/* binding */ delBtnId),\n/* harmony export */   \"cleanBtnId\": () => (/* binding */ cleanBtnId),\n/* harmony export */   \"saveNewBtnId\": () => (/* binding */ saveNewBtnId)\n/* harmony export */ });\n\r\nlet tableId = \"table\";\r\n\r\n//tooldarTable elements\r\nlet pagerId = tableId+\"-pager\";\r\nlet searchId = tableId+\"-search\";\r\nlet findElemetsId = tableId+\"-findElemets\";\r\nlet exportBtn = tableId+\"exportBtn\";\r\n\r\n//editTable elements\r\nlet editFormId = tableId+\"-editForm\";\r\nlet saveBtnId = tableId+\"-saveBtn\";\r\nlet addBtnId = tableId+\"-addBtn\";\r\nlet delBtnId = tableId+\"-delBtnId\";\r\nlet cleanBtnId = tableId+\"-cleanBtn\";\r\nlet saveNewBtnId = tableId+\"-saveNewBtn\";\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://webix/./src/js/modules/setId.js?");

/***/ }),

/***/ "./src/js/modules/tableToolbar.js":
/*!****************************************!*\
  !*** ./src/js/modules/tableToolbar.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"tableToolbar\": () => (/* binding */ tableToolbar)\n/* harmony export */ });\n/* harmony import */ var _editTable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./editTable.js */ \"./src/js/modules/editTable.js\");\n/* harmony import */ var _setId_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./setId.js */ \"./src/js/modules/setId.js\");\n\r\n\r\n\r\n\r\nfunction tableToolbar () {\r\n    function exportToExcel(){\r\n        webix.toExcel(_setId_js__WEBPACK_IMPORTED_MODULE_1__.tableId, {\r\n          filename:\"Table\",\r\n          filterHTML:true,\r\n          styles:true\r\n        });\r\n        (0,_editTable_js__WEBPACK_IMPORTED_MODULE_0__.notify) (\"success\",\"Таблица сохранена\");\r\n    }\r\n    return { \r\n        rows:[\r\n            {padding:17, margin:5, \r\n                cols: [\r\n                {   view:\"search\", \r\n                    placeholder:\"Поиск\", \r\n                    id:_setId_js__WEBPACK_IMPORTED_MODULE_1__.searchId,\r\n                    css:\"searchTable\", \r\n                    maxWidth:250, \r\n                    minWidth:40, \r\n                    disabled:true,\r\n                    on: {\r\n                        onTimedKeyPress() {\r\n                            let value = this.getValue().toLowerCase();\r\n                            let findElements = 0;\r\n                            //let obj = $$(tableId).getItem(1);\r\n                           \r\n                            $$(_setId_js__WEBPACK_IMPORTED_MODULE_1__.tableId).filter(function(obj){\r\n                                let firstColVal = obj[Object.keys(obj)[0]];\r\n                                if (firstColVal.indexOf(value)!=-1) {\r\n                                    findElements++; \r\n                                    \r\n                                }\r\n                                \r\n                                return firstColVal.indexOf(value)!=-1;\r\n                            });\r\n                            if (!findElements){\r\n                                $$(_setId_js__WEBPACK_IMPORTED_MODULE_1__.tableId).showOverlay(\"Ничего не найдено\");\r\n                            \r\n                            } else if(findElements){\r\n                                $$(_setId_js__WEBPACK_IMPORTED_MODULE_1__.tableId).hideOverlay(\"Ничего не найдено\");\r\n                            }\r\n                            $$(_setId_js__WEBPACK_IMPORTED_MODULE_1__.findElemetsId).setValues(findElements.toString());\r\n                            \r\n                        },\r\n                        onAfterRender: function () {\r\n                           this.getInputNode().setAttribute(\"title\",\"Поиск по таблице\");\r\n                        },\r\n                        \r\n                    }\r\n                },\r\n \r\n                {\r\n                    view:\"pager\",\r\n                    id:_setId_js__WEBPACK_IMPORTED_MODULE_1__.pagerId,\r\n                    size:10,\r\n                    group:3,\r\n                    template:`{common.prev()} \r\n                {common.pages()} {common.next()}`\r\n                },\r\n\r\n                {   view:\"button\",\r\n                    width: 50, \r\n                    type:\"icon\",\r\n                    id:_setId_js__WEBPACK_IMPORTED_MODULE_1__.exportBtn,\r\n                    icon:\"wxi-download\",\r\n                    css:\"webix_btn-download\",\r\n                    title:\"текст\",\r\n                    height:50,\r\n                    width:60,\r\n                    disabled:true,\r\n                    click:exportToExcel,\r\n                    on: {\r\n                        onAfterRender: function () {\r\n                            this.getInputNode().setAttribute(\"title\",\"Экспорт таблицы\");\r\n                        }\r\n                    } \r\n                },\r\n                ],\r\n            },\r\n            {   view:\"template\",\r\n                id:_setId_js__WEBPACK_IMPORTED_MODULE_1__.findElemetsId,\r\n                height:30,\r\n                template:function () {\r\n                    if (Object.keys($$(_setId_js__WEBPACK_IMPORTED_MODULE_1__.findElemetsId).getValues()).length !==0){\r\n                        return \"<div style='color:#999898'> Количество записей:\"+\" \"+$$(_setId_js__WEBPACK_IMPORTED_MODULE_1__.findElemetsId).getValues()+\" </div>\";\r\n                    } else {\r\n                        return \"\";\r\n                    }\r\n                },\r\n            }\r\n        ]\r\n\r\n        \r\n    };\r\n}\r\n\n\n//# sourceURL=webpack://webix/./src/js/modules/tableToolbar.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/app.js");
/******/ 	
/******/ })()
;